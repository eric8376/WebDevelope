dhtmlx=function(d){for(var c in d){dhtmlx[c]=d[c]}return dhtmlx};dhtmlx.extend_api=function(f,e,h){var g=window[f];if(g){window[f]=function(b){if(b&&typeof b=="object"&&!b.tagName){var j=g.apply(this,e._init?e._init(b):arguments),d;for(d in dhtmlx){if(e[d]){this[e[d]](dhtmlx[d])}}for(d in b){if(e[d]){this[e[d]](b[d])}else{d.indexOf("on")==0&&this.attachEvent(d,b[d])}}}else{j=g.apply(this,arguments)}e._patch&&e._patch(this);return j||this},window[f].prototype=g.prototype,h&&dhtmlXHeir(window[f].prototype,h)}};dhtmlxAjax={get:function(e,d){var f=new dtmlXMLLoaderObject(!0);f.async=arguments.length<3;f.waitCall=d;f.loadXML(e);return f},post:function(f,e,h){var g=new dtmlXMLLoaderObject(!0);g.async=arguments.length<4;g.waitCall=h;g.loadXML(f,!0,e);return g},getSync:function(b){return this.get(b,null,!0)},postSync:function(d,c){return this.post(d,c,null,!0)}};function dtmlXMLLoaderObject(f,e,h,g){this.xmlDoc="";this.async=typeof h!="undefined"?h:!0;this.onloadAction=f||null;this.mainObject=e||null;this.waitCall=null;this.rSeed=g||!1;return this}dtmlXMLLoaderObject.count=0;dtmlXMLLoaderObject.prototype.waitLoadFunction=function(d){var c=!0;return this.check=function(){if(d&&d.onloadAction!=null&&(!d.xmlDoc.readyState||d.xmlDoc.readyState==4)&&c){c=!1;dtmlXMLLoaderObject.count++;if(typeof d.onloadAction=="function"){d.onloadAction(d.mainObject,null,null,null,d)}if(d.waitCall){d.waitCall.call(this,d),d.waitCall=null}}}};dtmlXMLLoaderObject.prototype.getXMLTopNode=function(f,e){if(this.xmlDoc.responseXML){var h=this.xmlDoc.responseXML.getElementsByTagName(f);h.length==0&&f.indexOf(":")!=-1&&(h=this.xmlDoc.responseXML.getElementsByTagName(f.split(":")[1]));var g=h[0]}else{g=this.xmlDoc.documentElement}if(g){return this._retry=!1,g}if(!this._retry&&_isIE){return this._retry=!0,e=this.xmlDoc,this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(f,e)}dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]);return document.createElement("DIV")};dtmlXMLLoaderObject.prototype.loadXMLString=function(e,d){if(_isIE){this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(e)}else{var f=new DOMParser;this.xmlDoc=f.parseFromString(e,"text/xml")}if(!d){if(this.onloadAction){this.onloadAction(this.mainObject,null,null,null,this)}if(this.waitCall){this.waitCall(),this.waitCall=null}}};dtmlXMLLoaderObject.prototype.loadXML=function(f,e,h,g){this.rSeed&&(f+=(f.indexOf("?")!=-1?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf());this.filePath=f;this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");if(this.async){this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)}this.xmlDoc.open(e?"POST":"GET",f,this.async);g?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):e&&this.xmlDoc.setRequestHeader("Content-type",this.contenttype||"application/x-www-form-urlencoded");this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest");this.xmlDoc.send(h);this.async||(new this.waitLoadFunction(this))()};dtmlXMLLoaderObject.prototype.destructor=function(){return this.setXSLParamValue=this.getXMLTopNode=this.xmlNodeToJSON=this.doSerialization=this.loadXMLString=this.loadXML=this.doXSLTransToString=this.doXSLTransToObject=this.doXPathOpera=this.doXPath=this.xmlDoc=this.mainObject=this.onloadAction=this.filePath=this.rSeed=this.async=this._retry=this._getAllNamedChilds=this._filterXPath=null};dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(f){for(var e={},h=0;h<f.attributes.length;h++){e[f.attributes[h].name]=f.attributes[h].value}e._tagvalue=f.firstChild?f.firstChild.nodeValue:"";for(h=0;h<f.childNodes.length;h++){var g=f.childNodes[h].tagName;g&&(e[g]||(e[g]=[]),e[g].push(this.xmlNodeToJSON(f.childNodes[h])))}return e};function callerFunction(d,c){return this.handler=function(a){if(!a){a=window.event}d(a,c);return !0}}function getAbsoluteLeft(b){return getOffset(b).left}function getAbsoluteTop(b){return getOffset(b).top}function getOffsetSum(e){for(var d=0,f=0;e;){d+=parseInt(e.offsetTop),f+=parseInt(e.offsetLeft),e=e.offsetParent}return{top:d,left:f}}function getOffsetRect(x){var w=x.getBoundingClientRect(),v=document.body,u=document.documentElement,s=window.pageYOffset||u.scrollTop||v.scrollTop,o=window.pageXOffset||u.scrollLeft||v.scrollLeft,n=u.clientTop||v.clientTop||0,m=u.clientLeft||v.clientLeft||0,l=w.top+s-n,k=w.left+o-m;return{top:Math.round(l),left:Math.round(k)}}function getOffset(b){return b.getBoundingClientRect?getOffsetRect(b):getOffsetSum(b)}function convertStringToBoolean(b){typeof b=="string"&&(b=b.toLowerCase());switch(b){case"1":case"true":case"yes":case"y":case 1:case !0:return !0;default:return !1}}function getUrlSymbol(b){return b.indexOf("?")!=-1?"&":"?"}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.dragStartObject=this.dragStartNode=this.dragNode=this.lastLanding=0;this.tempDOMM=this.tempDOMU=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(b){b.onmousedown=null;b.dragStarter=null;b.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(d,c){d.onmousedown=this.preCreateDragCopy;d.dragStarter=c;this.addDragLanding(d,c)};dhtmlDragAndDropObject.prototype.addDragLanding=function(d,c){d.dragLanding=c};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(b){if(!((b||window.event)&&(b||event).button==2)){if(window.dhtmlDragAndDrop.waitDrag){return window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1}window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(b);window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=(new Date).valueOf();b&&b.preventDefault&&b.preventDefault();return !1}};dhtmlDragAndDropObject.prototype.callDrag=function(g){if(!g){g=window.event}dragger=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,g);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return !1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(g,!0)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var f=dragger.gldragNode;if(dragger.gldragNode.old){f=dragger.gldragNode.old}f.parentNode.removeChild(f);var k=dragger.dragNode.pWindow;f.pWindow&&f.pWindow.dhtmlDragAndDrop.lastLanding&&f.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(f.pWindow.dhtmlDragAndDrop.lastLanding);if(_isIE){var j=document.createElement("Div");j.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=j.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(!0)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);k.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=g.clientX+15+(dragger.fx?dragger.fx*-1:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=g.clientY+3+(dragger.fy?dragger.fy*-1:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";var h=g.srcElement?g.srcElement:g.target;dragger.checkLanding(h,g)}};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(g){if(window.name){for(var f=parent.frames[window.name].frameElement.offsetParent,k=0,j=0;f;){k+=f.offsetLeft,j+=f.offsetTop,f=f.offsetParent}if(parent.dhtmlDragAndDrop){var h=parent.dhtmlDragAndDrop.calculateFramePosition(1);k+=h.split("_")[0]*1;j+=h.split("_")[1]*1}if(g){return k+"_"+j}else{this.fx=k}this.fy=j}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(d,c){d&&d.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=d,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,c.clientX,c.clientY,c),this.lastLanding_scr=_isIE?c.srcElement:c.target):d&&d.tagName!="BODY"?this.checkLanding(d.parentNode,c):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,c.clientX,c.clientY,c),this.lastLanding=0,this._onNotFound&&this._onNotFound())};dhtmlDragAndDropObject.prototype.stopDrag=function(e,d){dragger=window.dhtmlDragAndDrop;if(!d){dragger.stopFrameRoute();var f=dragger.lastLanding;dragger.lastLanding=null;f&&f.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,f,_isIE?event.srcElement:e.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(f){f&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++){try{window.frames[e]!=f&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(h){}}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=f&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(g){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(g,f){if(g){window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=g.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=g.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=g.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=g.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&f&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition()}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=g&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(k){}for(var j=0;j<window.frames.length;j++){try{window.frames[j]!=g&&window.frames[j].dhtmlDragAndDrop&&window.frames[j].dhtmlDragAndDrop.initFrameRoute(window,!g||f?1:0)}catch(h){}}};_OperaRv=_KHTMLrv=_FFrv=_isChrome=_isMacOS=_isKHTML=_isOpera=_isIE=_isFF=!1;navigator.userAgent.indexOf("Macintosh")!=-1&&(_isMacOS=!0);navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0);if(navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("Konqueror")!=-1){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){if(_isIE=!0,(navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1)&&document.compatMode!="BackCompat"){_isIE=8}}else{_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}dtmlXMLLoaderObject.prototype.doXPath=function(v,u,s,o){if(_isKHTML||!_isIE&&!window.XPathResult){return this.doXPathOpera(v,u)}if(_isIE){return u||(u=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),u||dhtmlxError.throwError("LoadXML","Incorrect XML",[u||this.xmlDoc,this.mainObject]),s!=null&&u.setProperty("SelectionNamespaces","xmlns:xsl='"+s+"'"),o=="single"?u.selectSingleNode(v):u.selectNodes(v)||[]}else{var n=u;u||(u=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML);u||dhtmlxError.throwError("LoadXML","Incorrect XML",[u||this.xmlDoc,this.mainObject]);u.nodeName.indexOf("document")!=-1?n=u:(n=u,u=u.ownerDocument);var m=XPathResult.ANY_TYPE;if(o=="single"){m=XPathResult.FIRST_ORDERED_NODE_TYPE}var l=[],k=u.evaluate(v,n,function(){return s},m,null);if(m==XPathResult.FIRST_ORDERED_NODE_TYPE){return k.singleNodeValue}for(var j=k.iterateNext();j;){l[l.length]=j,j=k.iterateNext()}return l}};function M(){if(!this.catches){this.catches=[]}return this}M.prototype.catchError=function(d,c){this.catches[d]=c};M.prototype.throwError=function(e,d,f){if(this.catches[e]){return this.catches[e](e,d,f)}if(this.catches.ALL){return this.catches.ALL(e,d,f)}alert("Error type: "+e+"\nDescription: "+d);return null};window.dhtmlxError=new M;dtmlXMLLoaderObject.prototype.doXPathOpera=function(g,f){var k=g.replace(/[\/]+/gi,"/").split("/"),j=null,h=1;if(!k.length){return[]}if(k[0]=="."){j=[f]}else{if(k[0]==""){j=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(k[h].replace(/\[[^\]]*\]/g,"")),h++}else{return[]}}for(;h<k.length;h++){j=this._getAllNamedChilds(j,k[h])}k[h-1].indexOf("[")!=-1&&(j=this._filterXPath(j,k[h-1]));return j};dtmlXMLLoaderObject.prototype._filterXPath=function(f,e){for(var h=[],e=e.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),g=0;g<f.length;g++){f[g].getAttribute(e)&&(h[h.length]=f[g])}return h};dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(g,f){var k=[];_isKHTML&&(f=f.toUpperCase());for(var j=0;j<g.length;j++){for(var h=0;h<g[j].childNodes.length;h++){_isKHTML?g[j].childNodes[h].tagName&&g[j].childNodes[h].tagName.toUpperCase()==f&&(k[k.length]=g[j].childNodes[h]):g[j].childNodes[h].tagName==f&&(k[k.length]=g[j].childNodes[h])}}return k};function dhtmlXHeir(e,d){for(var f in d){typeof d[f]=="function"&&(e[f]=d[f])}return e}function dhtmlxEvent(e,d,f){e.addEventListener?e.addEventListener(d,f,!1):e.attachEvent&&e.attachEvent("on"+d,f)}dtmlXMLLoaderObject.prototype.xslDoc=null;dtmlXMLLoaderObject.prototype.setXSLParamValue=function(f,e,h){if(!h){h=this.xslDoc}if(h.responseXML){h=h.responseXML}var g=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+f+"']",h,"http://www.w3.org/1999/XSL/Transform","single");if(g!=null){g.firstChild.nodeValue=e}};dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(f,e){if(!f){f=this.xslDoc}if(f.responseXML){f=f.responseXML}if(!e){e=this.xmlDoc}if(e.responseXML){e=e.responseXML}if(_isIE){g=new ActiveXObject("Msxml2.DOMDocument.3.0");try{e.transformNodeToObject(f,g)}catch(h){g=e.transformNode(f)}}else{if(!this.XSLProcessor){this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(f)}var g=this.XSLProcessor.transformToDocument(e)}return g};dtmlXMLLoaderObject.prototype.doXSLTransToString=function(e,d){var f=this.doXSLTransToObject(e,d);return typeof f=="string"?f:this.doSerialization(f)};dtmlXMLLoaderObject.prototype.doSerialization=function(d){if(!d){d=this.xmlDoc}if(d.responseXML){d=d.responseXML}if(_isIE){return d.xml}else{var c=new XMLSerializer;return c.serializeToString(d)}};dhtmlxEventable=function(a){a.attachEvent=function(a,c,d){a="ev_"+a.toLowerCase();this[a]||(this[a]=new this.eventCatcher(d||this));return a+":"+this[a].addEvent(c)};a.callEvent=function(a,c){a="ev_"+a.toLowerCase();return this[a]?this[a].apply(this,c):!0};a.checkEvent=function(a){return !!this["ev_"+a.toLowerCase()]};a.eventCatcher=function(a){var c=[],d=function(){for(var d=!0,f=0;f<c.length;f++){if(c[f]!=null){var g=c[f].apply(a,arguments),d=d&&g}}return d};d.addEvent=function(a){typeof a!="function"&&(a=eval(a));return a?c.push(a)-1:!1};d.removeEvent=function(a){c[a]=null};return d};a.detachEvent=function(a){if(a!=!1){var c=a.split(":");this[c[0]].removeEvent(c[1])}};a.detachAllEvents=function(){for(var a in this){a.indexOf("ev_")==0&&(this[a]=null)}};a=null};if(!window.dhtmlx){window.dhtmlx={}}(function(){function I(e,c){var f=e.callback;F(!1);e.box.parentNode.removeChild(e.box);s=e.box=null;f&&f(c)}function H(a){if(s){var a=a||event,d=a.which||event.keyCode;dhtmlx.message.keyboard&&((d==13||d==32)&&I(s,!0),d==27&&I(s,!1));a.preventDefault&&a.preventDefault();return !(a.cancelBubble=!0)}}function F(b){if(!F.cover){F.cover=document.createElement("DIV"),F.cover.onkeydown=H,F.cover.className="dhx_modal_cover",document.body.appendChild(F.cover)}var c=document.body.scrollHeight;F.cover.style.display=b?"inline-block":"none"}function E(d,c){return"<div class='dhtmlx_popup_button' result='"+c+"' ><div>"+d+"</div></div>"}function D(d){if(!o.area){o.area=document.createElement("DIV"),o.area.className="dhtmlx_message_area",o.area.style[o.position]="5px",document.body.appendChild(o.area)}o.hide(d.id);var c=document.createElement("DIV");c.innerHTML="<div>"+d.text+"</div>";c.className="dhtmlx-info dhtmlx-"+d.type;c.onclick=function(){o.hide(d.id);d=null};o.position=="bottom"&&o.area.firstChild?o.area.insertBefore(c,o.area.firstChild):o.area.appendChild(c);d.expire>0&&(o.timers[d.id]=window.setTimeout(function(){o.hide(d.id)},d.expire));o.pull[d.id]=c;c=null;return d.id}function C(a,n,m){var l=document.createElement("DIV");l.className=" dhtmlx_modal_box dhtmlx-"+a.type;l.setAttribute("dhxbox",1);var k="";if(a.width){l.style.width=a.width}if(a.height){l.style.height=a.height}a.title&&(k+='<div class="dhtmlx_popup_title">'+a.title+"</div>");k+='<div class="dhtmlx_popup_text"><span>'+(a.content?"":a.text)+'</span></div><div  class="dhtmlx_popup_controls">';n&&(k+=E(a.ok||"OK",!0));m&&(k+=E(a.cancel||"Cancel",!1));if(a.buttons){for(var j=0;j<a.buttons.length;j++){k+=E(a.buttons[j],j)}}k+="</div>";l.innerHTML=k;if(a.content){var d=a.content;typeof d=="string"&&(d=document.getElementById(d));if(d.style.display=="none"){d.style.display=""}l.childNodes[a.title?1:0].appendChild(d)}l.onclick=function(g){var g=g||event,f=g.target||g.srcElement;if(!f.className){f=f.parentNode}if(f.className=="dhtmlx_popup_button"){var b=f.getAttribute("result"),b=b=="true"||(b=="false"?!1:b);I(a,b)}};a.box=l;if(n||m){s=a}return l}function A(b,l,k){var j=b.tagName?b:C(b,l,k);b.hidden||F(!0);document.body.appendChild(j);var f=b.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-j.offsetWidth)/2)),c=b.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-j.offsetHeight)/2));j.style.top=b.position=="top"?"-3px":c+"px";j.style.left=f+"px";j.onkeydown=H;j.focus();b.hidden&&dhtmlx.modalbox.hide(j);return j}function y(b){return A(b,!0,!1)}function x(b){return A(b,!0,!0)}function w(b){return A(b)}function v(e,d,f){typeof e!="object"&&(typeof d=="function"&&(f=d,d=""),e={text:e,type:d,callback:f});return e}function u(f,e,h,g){typeof f!="object"&&(f={text:f,type:e,expire:h,id:g});f.id=f.id||o.uid();f.expire=f.expire||o.expire;return f}var s=null;document.attachEvent?document.attachEvent("onkeydown",H):document.addEventListener("keydown",H,!0);dhtmlx.alert=function(){var b=v.apply(this,arguments);b.type=b.type||"confirm";return y(b)};dhtmlx.confirm=function(){var b=v.apply(this,arguments);b.type=b.type||"alert";return x(b)};dhtmlx.modalbox=function(){var b=v.apply(this,arguments);b.type=b.type||"alert";return w(b)};dhtmlx.modalbox.hide=function(b){for(;b&&b.getAttribute&&!b.getAttribute("dhxbox");){b=b.parentNode}b&&(b.parentNode.removeChild(b),F(!1))};var o=dhtmlx.message=function(g,e,k,j){g=u.apply(this,arguments);g.type=g.type||"info";var h=g.type.split("-")[0];switch(h){case"alert":return y(g);case"confirm":return x(g);case"modalbox":return w(g);default:return D(g)}};o.seed=(new Date).valueOf();o.uid=function(){return o.seed++};o.expire=4000;o.keyboard=!0;o.position="top";o.pull={};o.timers={};o.hideAll=function(){for(var b in o.pull){o.hide(b)}};o.hide=function(d){var c=o.pull[d];c&&c.parentNode&&(window.setTimeout(function(){c.parentNode.removeChild(c);c=null},2000),c.className+=" hidden",o.timers[d]&&window.clearTimeout(o.timers[d]),delete o.pull[d])}})();function dhtmlXAccordionItem(){}function dhtmlXAccordion(f,e){if(window.dhtmlXContainer){var h=this;this.skin=e!=null?e:typeof dhtmlx!="undefined"&&typeof dhtmlx.skin=="string"?dhtmlx.skin:"dhx_skyblue";if(f==document.body){this._isAccFS=!0;document.body.className+=" dhxacc_fullscreened";var g=document.createElement("DIV");g.className="dhxcont_global_layout_area";f.appendChild(g);this.cont=new dhtmlXContainer(f);this.cont.setContent(g);f.adjustContent(f,0);this.base=document.createElement("DIV");this.base.className="dhx_acc_base_"+this.skin;this.base.style.overflow="hidden";this.base.style.position="absolute";this._adjustToFullScreen=function(){this.base.style.left="2px";this.base.style.top="2px";this.base.style.width=parseInt(g.childNodes[0].style.width)-4+"px";this.base.style.height=parseInt(g.childNodes[0].style.height)-4+"px"};this._adjustToFullScreen();g.childNodes[0].appendChild(this.base);this._resizeTM=null;this._resizeTMTime=400;this._doOnResize=function(){window.clearTimeout(h._resizeTM);h._resizeTM=window.setTimeout(function(){h._adjustAccordion()},h._resizeTMTime)};this._adjustAccordion=function(){document.body.adjustContent(document.body,0);this._adjustToFullScreen();this.setSizes()};dhtmlxEvent(window,"resize",this._doOnResize)}else{this.base=typeof f=="string"?document.getElementById(f):f,this.base.className="dhx_acc_base_"+this.skin,this.base.innerHTML=""}this.w=this.base.offsetWidth;this.h=this.base.offsetHeight;this.skinParams={dhx_blue:{cell_height:24,cell_space:1,content_offset:1},dhx_skyblue:{cell_height:27,cell_space:-1,content_offset:-1},dhx_black:{cell_height:24,cell_space:1,content_offset:1},dhx_web:{cell_height:26,cell_space:9,content_offset:0,cell_pading_max:1,cell_pading_min:0},dhx_terrace:{cell_height:37,cell_space:-1,content_offset:-1}};this.sk=this.skinParams[this.skin];this.setSkinParameters=function(d,c){isNaN(d)||(this.sk.cell_space=d);isNaN(c)||(this.sk.content_offset=c);this._reopenItem()};this.setSkin=function(d){if(this.skinParams[d]){this.skin=d;this.sk=this.skinParams[this.skin];this.base.className="dhx_acc_base_"+this.skin+(this._r?" dhx_acc_rtl":"");for(var c in this.idPull){this.idPull[c].skin=this.skin}this._reopenItem()}};this.idPull={};this.opened=null;this.cells=function(b){return this.idPull[b]==null?null:this.idPull[b]};this.itemH=90;this.multiMode=!1;this.enableMultiMode=function(){var d=0,c;for(c in this.idPull){d++}if(d==0){this.userOffset||(this.skinParams.dhx_skyblue.cell_space=3),this.multiMode=!0}this.skin=="dhx_terrace"&&(this.skinParams.dhx_terrace.cell_space=12)};this.userOffset=!1;this.setOffset=function(d,c){this.userOffset=!0;isNaN(d)||(this.skinParams[this.skin].cell_space=d);isNaN(c)||(this.skinParams[this.skin].content_offset=c);this.setSizes()};this.imagePath="";this.setIconsPath=function(b){this.imagePath=b};this.addItem=function(n,c){if(this.multiMode){var w=this._lastVisible()}var v=document.createElement("DIV");v.className="dhx_acc_item";v.dir="ltr";v._isAcc=!0;v.skin=this.skin;this.base.appendChild(v);if(this.multiMode){v.h=this.itemH}var u=document.createElement("DIV");u._idd=n;u.className="dhx_acc_item_label";u.innerHTML="<span>"+c+"</span><div class='dhx_acc_item_label_btmbrd'>&nbsp;</div><div class='dhx_acc_item_arrow'></div><div class='dhx_acc_hdr_line_l'></div><div class='dhx_acc_hdr_line_r'></div>";u.onselectstart=function(b){b=b||event;b.returnValue=!1};u.onclick=function(){if(h.multiMode||!h.idPull[this._idd]._isActive){h.multiMode?(h.idPull[this._idd]._isActive?h.checkEvent("onBeforeActive")?h.callEvent("onBeforeActive",[this._idd,"close"])&&h.closeItem(this._idd,"dhx_accord_outer_event"):h.closeItem(this._idd,"dhx_accord_outer_event"):h.checkEvent("onBeforeActive")?h.callEvent("onBeforeActive",[this._idd,"open"])&&h.openItem(this._idd,"dhx_accord_outer_event"):h.openItem(this._idd,"dhx_accord_outer_event"),h._autoHeightEnabled&&h.setSizes()):h.checkEvent("onBeforeActive")?h.callEvent("onBeforeActive",[this._idd,"open"])&&h.openItem(this._idd,"dhx_accord_outer_event"):h.openItem(this._idd,"dhx_accord_outer_event")}};u.onmouseover=function(){this.className="dhx_acc_item_label dhx_acc_item_lavel_hover"};u.onmouseout=function(){this.className="dhx_acc_item_label"};v.appendChild(u);var s=document.createElement("DIV");s.className="dhxcont_global_content_area";v.appendChild(s);var o=new dhtmlXContainer(v);o.setContent(s);this.skin=="dhx_terrace"&&this._hideBorders===!0&&v._setPadding([0,-1,2,0]);v.adjustContent(v,this.sk.cell_height+this.sk.content_offset);v._id=n;this.idPull[n]=v;v.getId=function(){return this._id};v.setText=function(b){h.setText(this._id,b)};v.getText=function(){return h.getText(this._id)};v.open=function(){h.openItem(this._id)};v.isOpened=function(){return h.isActive(this._id)};v.close=function(){h.closeItem(this._id)};v.setIcon=function(b){h.setIcon(this._id,b)};v.clearIcon=function(){h.clearIcon(this._id)};v.dock=function(){h.dockItem(this._id)};v.undock=function(){h.undockItem(this._id)};v.show=function(){h.showItem(this._id)};v.hide=function(){h.hideItem(this._id)};v.setHeight=function(b){h.setItemHeight(this._id,b)};v.moveOnTop=function(){h.moveOnTop(this._id)};v._doOnAttachMenu=function(){h._reopenItem()};v._doOnAttachToolbar=function(){h._reopenItem()};v._doOnAttachStatusBar=function(){h._reopenItem()};v._doOnFrameContentLoaded=function(){h.callEvent("onContentLoaded",[this])};if(this.multiMode&&w!=null){w._isActive==!0?(this.idPull[w._id].adjustContent(this.idPull[w._id],this.sk.cell_height+this.sk.content_offset,null,null,this.sk.cell_space),this.idPull[w._id].updateNestedObjects()):this.idPull[w._id].style.height=this.sk.cell_height+this.sk.cell_space+"px",w=null}var m=this._enableOpenEffect;this._enableOpenEffect=!1;this.openItem(n);this._enableOpenEffect=m;this.multiMode?this.setSizes():this._defineLastItem();return v};this.openItem=function(k,j,n){this.multiMode&&this._checkAutoHeight();if(!this._openBuzy){if(this._enableOpenEffect&&!n){(!this.multiMode||!this.idPull[k]._isActive)&&this._openWithEffect(k,null,null,null,null,j)}else{if(this.multiMode){for(var m in this.idPull){if(this.idPull[m]._isActive||m==k){this.idPull[m].style.height=this.idPull[m].h+"px",this.idPull[m].childNodes[1].style.display="",this.skin=="dhx_web"&&this.idPull[m]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_acc_dhx_web"),this.idPull[m].adjustContent(this.idPull[m],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[m]==this._lastVisible()&&this.skin!="dhx_web"?0:this.sk.cell_space),this.idPull[m].updateNestedObjects(),this.idPull[m]._isActive=!0,this._updateArrows(),j=="dhx_accord_outer_event"&&m==k&&this.callEvent("onActive",[k,!0])}}}else{if(!k||!this.idPull[k]._isActive||n){var l=0;for(m in this.idPull){if(this.idPull[m].style.height=this.sk.cell_height+(this.idPull[m]!=this._lastVisible()&&m!=k?this.sk.cell_space:0)+"px",m!=k){this.idPull[m].childNodes[1].style.display="none",this.skin=="dhx_web"&&this.idPull[m]._setPadding(this.skinParams[this.skin].cell_pading_min,""),this.idPull[m]._isActive=!1,l+=this.idPull[m].offsetHeight}}l=this.base.offsetHeight-l;if(k){this.idPull[k].style.height=l+"px",this.idPull[k].childNodes[1].style.display="",this.skin=="dhx_web"&&this.idPull[k]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_acc_dhx_web"),this.idPull[k].adjustContent(this.idPull[k],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[k]==this._lastVisible()?0:this.sk.cell_space),this.idPull[k].updateNestedObjects(),this.idPull[k]._isActive=!0,j=="dhx_accord_outer_event"&&this.callEvent("onActive",[k,!0])}this._updateArrows()}}}}};this._lastVisible=function(){for(var d=null,c=this.base.childNodes.length-1;c>=0;c--){!this.base.childNodes[c]._isHidden&&!d&&(d=this.base.childNodes[c])}return d};this.closeItem=function(d,c){if(this.idPull[d]!=null&&this.idPull[d]._isActive&&!this._openBuzy){this._enableOpenEffect?this._openWithEffect(this.multiMode?d:null,null,null,null,null,c):(this.idPull[d].style.height=this.sk.cell_height+(this.idPull[d]!=this._lastVisible()?this.sk.cell_space:0)+"px",this.idPull[d].childNodes[1].style.display="none",this.skin=="dhx_web"&&this.idPull[d]._setPadding(this.skinParams[this.skin].cell_pading_min,""),this.idPull[d]._isActive=!1,c=="dhx_accord_outer_event"&&this.callEvent("onActive",[d,!1]),this._updateArrows())}};this._updateArrows=function(){for(var k in this.idPull){for(var j=this.idPull[k].childNodes[0],m=null,l=0;l<j.childNodes.length;l++){String(j.childNodes[l].className).search("dhx_acc_item_arrow")!=-1&&(m=j.childNodes[l])}if(m!=null){m.className="dhx_acc_item_arrow "+(this.idPull[k]._isActive?"item_opened":"item_closed"),m=null}}};this.setText=function(k,c,o){if(h.idPull[k]!=null){for(var n=h.idPull[k].childNodes[0],m=null,l=0;l<n.childNodes.length;l++){n.childNodes[l].tagName!=null&&String(n.childNodes[l].tagName).toLowerCase()=="span"&&(m=n.childNodes[l])}isNaN(o)?m.innerHTML=c:(m.style.paddingLeft=o+"px",m.style.paddingRight=o+"px")}};this.getText=function(j){if(h.idPull[j]!=null){for(var c=h.idPull[j].childNodes[0],l=null,k=0;k<c.childNodes.length;k++){c.childNodes[k].tagName!=null&&String(c.childNodes[k].tagName).toLowerCase()=="span"&&(l=c.childNodes[k])}return l.innerHTML}};this._initWindows=function(k){if(window.dhtmlXWindows){if(!this.dhxWins&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.skin),this.dhxWins.setImagePath(this.imagePath),this.dhxWinsIdPrefix="",!k)){return}var j=this.dhxWinsIdPrefix+k;if(this.dhxWins.window(j)){this.dhxWins.window(j).show()}else{var m=this,l=this.dhxWins.createWindow(j,20,20,320,200);l.setText(this.getText(k));l.button("close").hide();l.attachEvent("onClose",function(b){b.hide()});l.addUserButton("dock",99,this.dhxWins.i18n.dock,"dock");l.button("dock").attachEvent("onClick",function(){m.cells(k).dock()})}}};this.dockWindow=function(b){if(this.idPull[b]._isUnDocked&&this.dhxWins&&this.dhxWins.window(this.dhxWinsIdPrefix+b)){this.dhxWins.window(this.dhxWinsIdPrefix+b).moveContentTo(this.idPull[b]),this.dhxWins.window(this.dhxWinsIdPrefix+b).close(),this.idPull[b]._isUnDocked=!1,this.showItem(b),this.callEvent("onDock",[b])}};this.undockWindow=function(b){if(!this.idPull[b]._isUnDocked){this._initWindows(b),this.idPull[b].moveContentTo(this.dhxWins.window(this.dhxWinsIdPrefix+b)),this.idPull[b]._isUnDocked=!0,this.hideItem(b),this.callEvent("onUnDock",[b])}};this.setSizes=function(){this._reopenItem()};this.showItem=function(b){if(this.idPull[b]!=null&&this.idPull[b]._isHidden){this.idPull[b]._isUnDocked?this.dockItem(b):(this.idPull[b].className="dhx_acc_item",this.idPull[b]._isHidden=!1,this._defineLastItem(),this._reopenItem())}};this.hideItem=function(b){if(this.idPull[b]!=null&&!this.idPull[b]._isHidden){this.closeItem(b),this.idPull[b].className="dhx_acc_item_hidden",this.idPull[b]._isHidden=!0,this._defineLastItem(),this._reopenItem()}};this.isItemHidden=function(b){return this.idPull[b]==null?void 0:this.idPull[b]._isHidden==!0};this._reopenItem=function(){var d=null,c;for(c in this.idPull){this.idPull[c]._isActive&&!this.idPull[c]._isHidden&&(d=c)}this.openItem(d,null,!0)};this.forEachItem=function(d){for(var c in this.idPull){d(this.idPull[c])}};this._enableOpenEffect=!1;this._openStep=10;this._openStepIncrement=5;this._openStepTimeout=10;this._openBuzy=!1;this.setEffect=function(b){this._enableOpenEffect=b==!0?!0:!1};this._openWithEffect=function(I,H,F,E,D,C){if(this.multiMode){if(!D){this._openBuzy=!0,D=this._openStep,this.idPull[I]._isActive?(H=I,I=null,F=this.sk.cell_height+(this.idPull[H]!=this._lastVisible()?this.sk.cell_space:0),this.idPull[H].childNodes[1].style.display=""):(E=this.idPull[I].h,this.idPull[I].childNodes[1].style.display="")}var A=!1;if(I){var y=parseInt(this.idPull[I].style.height||0)+D;y>E&&(y=E,A=!0);this.idPull[I].style.height=y+"px"}if(H){y=parseInt(this.idPull[H].style.height)-D,y<F&&(y=F,A=!0),this.idPull[H].style.height=y+"px"}D+=this._openStepIncrement;if(A){if(I){this.idPull[I].adjustContent(this.idPull[I],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[I]==this._lastVisible()?0:this.sk.cell_space),this.idPull[I].updateNestedObjects(),this.idPull[I]._isActive=!0}if(H){this.idPull[H].childNodes[1].style.display="none",this.idPull[H]._isActive=!1}this._updateArrows();this._openBuzy=!1;I&&C=="dhx_accord_outer_event"&&this.callEvent("onActive",[I,!0]);H&&C=="dhx_accord_outer_event"&&this.callEvent("onActive",[H,!1])}else{var x=this;window.setTimeout(function(){x._openWithEffect(I,H,F,E,D,C)},this._openStepTimeout)}}else{if(!D&&(this._openBuzy=!0,D=this._openStep,I)){this.idPull[I].childNodes[1].style.display=""}if(!H||!F||!E){var E=F=0,w;for(w in this.idPull){var v=this.sk.cell_height+(this.idPull[w]!=this._lastVisible()&&w!=I?this.sk.cell_space:0);this.idPull[w]._isActive&&I!=w&&(H=w,F=v);w!=I&&(E+=v)}E=this.base.offsetHeight-E}A=!1;if(I){var u=parseInt(this.idPull[I].style.height)+D;u>E&&(A=!0)}if(H){var s=parseInt(this.idPull[H].style.height)-D;s<F&&(A=!0)}D+=this._openStepIncrement;A&&(u=E,s=F);if(H){this.idPull[H].style.height=s+"px"}if(I){this.idPull[I].style.height=u+"px"}if(A){if(H){this.idPull[H].childNodes[1].style.display="none",this.idPull[H]._isActive=!1}if(I){this.idPull[I].adjustContent(this.idPull[I],this.sk.cell_height+this.sk.content_offset,null,null,this.idPull[I]==this._lastVisible()?0:this.sk.cell_space),this.idPull[I].updateNestedObjects(),this.idPull[I]._isActive=!0}this._updateArrows();this._openBuzy=!1;C=="dhx_accord_outer_event"&&I&&this.callEvent("onActive",[I,!0])}else{x=this,window.setTimeout(function(){x._openWithEffect(I,H,F,E,D,C)},this._openStepTimeout)}}};this.setActive=function(b){this.openItem(b)};this.isActive=function(b){return this.idPull[b]._isActive===!0?!0:!1};this.dockItem=function(b){this.dockWindow(b)};this.undockItem=function(b){this.undockWindow(b)};this.setItemHeight=function(d,c){if(this.multiMode){if(c=="*"){this.idPull[d].h_auto=!0}else{if(isNaN(c)){return}this.idPull[d].h_auto=!1;this.idPull[d].h=c}this._reopenItem()}};this._checkAutoHeight=function(){var k=this.base.offsetHeight;this._autoHeightEnabled=!1;var j=[],n;for(n in this.idPull){if(!this._autoHeightEnabled&&this.idPull[n].h_auto){this._autoHeightEnabled=!0}this.idPull[n].h_auto&&this.idPull[n]._isActive?j.push(n):k=this.idPull[n]._isActive?Math.max(0,k-this.idPull[n].h):Math.max(0,k-this.idPull[n].offsetHeight)}if(j.length>0){for(var m=Math.floor(k/j.length),l=0;l<j.length;l++){l==j.length-1?m=k:k-=m,this.idPull[j[l]].h=m}}};this.setIcon=function(k,j){if(this.idPull[k]!=null){for(var n=this.idPull[k].childNodes[0],m=null,l=0;l<n.childNodes.length;l++){n.childNodes[l].className=="dhx_acc_item_icon"&&(m=n.childNodes[l])}if(m==null){m=document.createElement("IMG"),m.className="dhx_acc_item_icon",n.insertBefore(m,n.childNodes[0]),this.setText(k,null,20)}m.src=this.imagePath+j}};this.clearIcon=function(k){if(this.idPull[k]!=null){for(var j=this.idPull[k].childNodes[0],m=null,l=0;l<j.childNodes.length;l++){j.childNodes[l].className=="dhx_acc_item_icon"&&(m=j.childNodes[l])}m!=null&&(j.removeChild(m),m=null,this.setText(k,null,0))}};this.moveOnTop=function(b){this.idPull[b]&&!(this.base.childNodes.length<=1)&&(this.base.insertBefore(this.idPull[b],this.base.childNodes[0]),this.setSizes())};this._defineLastItem=function(){if(!this.multiMode){for(var d=!1,c=this.base.childNodes.length-1;c>=0;c--){this.base.childNodes[c].className.search("last_item")>=0?this.base.childNodes[c]._isHidden||d?this.base.childNodes[c].className=String(this.base.childNodes[c].className).replace(/last_item/gi,""):d=!0:!this.base.childNodes[c]._isHidden&&!d&&(this.base.childNodes[c].className+=" last_item",d=!0)}}};this.removeItem=function(k){var j=this.idPull[k],m=j.childNodes[0];m.onclick=null;m.onmouseover=null;m.onmouseout=null;m.onselectstart=null;m._idd=null;m.className="";for(j._dhxContDestruct();m.childNodes.length>0;){m.removeChild(m.childNodes[0])}m.parentNode&&m.parentNode.removeChild(m);for(m=null;j.childNodes.length>0;){j.removeChild(j.childNodes[0])}j._dhxContDestruct=null;j._doOnAttachMenu=null;j._doOnAttachToolbar=null;j._doOnAttachStatusBar=null;j.clearIcon=null;j.close=null;j.dock=null;j.getId=null;j.getText=null;j.hide=null;j.isOpened=null;j.open=null;j.setHeight=null;j.setIcon=null;j.setText=null;j.show=null;j.undock=null;j.parentNode&&j.parentNode.removeChild(j);j=null;this.idPull[k]=null;try{delete this.idPull[k]}catch(l){}};this.unload=function(){for(var j in this.skinParams){this.skinParams[j]=null;try{delete this.skinParams[j]}catch(d){}}this.skinParams=null;for(j in this.idPull){this.removeItem(j)}this.userOffset=this.unload=this.undockWindowunload=this.undockWindow=this.undockItem=this.w=this.skin=this.showItem=this.setText=this.setSkinParameters=this.setSkin=this.setSizes=this.setOffset=this.setItemHeight=this.setIconsPath=this.setIcon=this.setEffect=this.setActive=this.removeItem=this.openItem=this.multiMode=this.itemH=this.isActive=this.imagePath=this.hideItem=this.h=this.getText=this.forEachItem=this.eventCatcher=this.enableMultiMode=this.dockWindow=this.dockItem=this.detachEvent=this.closeItem=this.clearIcon=this.checkEvent=this.cells=this.callEvent=this.attachEvent=this.addItem=this._updateArrows=this._reopenItem=this._lastVisible=this._initWindows=this.sk=this.idPull=null;if(this._isAccFS==!0){_isIE?window.detachEvent("onresize",this._doOnResize):window.removeEventListener("resize",this._doOnResize,!1),this._resizeTMTime=this._resizeTM=this._adjustToFullScreen=this._adjustAccordion=this._doOnResize=this._isAccFS=null,document.body.className=String(document.body.className).replace("dhxacc_fullscreened",""),this.cont.obj._dhxContDestruct(),this.cont.dhxcont.parentNode&&this.cont.dhxcont.parentNode.removeChild(this.cont.dhxcont),this.cont.dhxcont=null,this.cont=this.cont.setContent=null}if(this.dhxWins){this.dhxWins.unload(),this.dhxWins=null}this.base.className="";this.base=null;for(j in this){try{delete this[j]}catch(k){}}};this._initWindows();dhtmlxEventable(this);return this}else{alert(this.i18n.dhxcontalert)}}dhtmlXAccordion.prototype.i18n={dhxcontalert:"dhtmlxcontainer.js is missed on the page"};(function(){dhtmlx.extend_api("dhtmlXAccordion",{_init:function(b){return[b.parent,b.skin]},icon_path:"setIconsPath",items:"_items",effect:"setEffect",multi_mode:"enableMultiMode"},{_items:function(h){for(var g=[],m=[],l=0;l<h.length;l++){var k=h[l];this.addItem(k.id,k.text);k.img&&this.cells(k.id).setIcon(k.img);k.height&&this.cells(k.id).setHeight(k.height);if(k.open===!0){g[g.length]=k.id}if(k.open===!1){m[m.length]=k.id}}for(var j=0;j<g.length;j++){this.cells(g[j]).open()}for(j=0;j<m.length;j++){this.cells(m[j]).close()}}})})();dhtmlXAccordion.prototype.loadJSON=function(g){var f={skin:"setSkin",icons_path:"setIconsPath",multi_mode:"enableMultiMode",effect:"setEffect"},k;for(k in f){if(typeof g[k]!="undefined"){this[f[k]](g[k])}}for(var j=null,h=0;h<g.cells.length;h++){if(this.addItem(g.cells[h].id,g.cells[h].text),typeof g.cells[h].icon!="undefined"&&this.setIcon(g.cells[h].id,g.cells[h].icon),typeof g.cells[h].height!="undefined"&&this.setItemHeight(g.cells[h].id,g.cells[h].height),typeof g.cells[h].open!="undefined"){j=g.cells[h].id}}j!=null&&this.openItem(j)};dhtmlXAccordion.prototype.loadXML=function(e,d){var f=this;this.callEvent("onXLS",[]);dhtmlxAjax.get(e,function(b){var u=b.xmlDoc.responseXML.getElementsByTagName("accordion")[0],s={0:!1,"true":!0,1:!0,y:!0,yes:!0},o={cells:[]};if(u.getAttribute("skin")!=null){o.skin=u.getAttribute("skin")}if(u.getAttribute("iconsPath")!=null){o.icons_path=u.getAttribute("iconsPath")}if(u.getAttribute("mode")=="multi"){o.multi_mode=!0}if(s[u.getAttribute("openEffect")||0]){o.effect=!0}for(var n=null,m=0;m<u.childNodes.length;m++){if(typeof u.childNodes[m].tagName!="indefined"&&String(u.childNodes[m].tagName).toLowerCase()=="cell"){var l=u.childNodes[m].getAttribute("id")||f._genStr(12),c=u.childNodes[m].firstChild.nodeValue||"";o.cells.push({id:l,text:c});if(u.childNodes[m].getAttribute("icon")!=null){o.cells[o.cells.length-1].icon=u.childNodes[m].getAttribute("icon")}if(u.childNodes[m].getAttribute("height")!=null){o.cells[o.cells.length-1].height=u.childNodes[m].getAttribute("height")}if(s[u.childNodes[m].getAttribute("open")||0]){o.cells[o.cells.length-1].open=!0}}}f.loadJSON(o);f.callEvent("onXLE",[]);typeof d=="function"&&d();f=d=null})};function dhtmlXContainer(a){var b=this;this.obj=a;a=null;this.obj._padding=!0;this.dhxcont=null;this.st=document.createElement("DIV");this.st.style.position="absolute";this.st.style.left="-200px";this.st.style.top="0px";this.st.style.width="100px";this.st.style.height="1px";this.st.style.visibility="hidden";this.st.style.overflow="hidden";document.body.insertBefore(this.st,document.body.childNodes[0]);this.obj._getSt=function(){return b.st};this.obj.dv="def";this.obj.av=this.obj.dv;this.obj.cv=this.obj.av;this.obj.vs={};this.obj.vs[this.obj.av]={};this.obj.view=function(a){if(!this.vs[a]){this.vs[a]={};this.vs[a].dhxcont=this.vs[this.dv].dhxcont;var c=document.createElement("DIV");c.style.position="relative";c.style.left="0px";c.style.width="200px";c.style.height="200px";c.style.overflow="hidden";c.style.visibility="";b.st.appendChild(c);this.vs[a].dhxcont.mainCont[a]=c;c=null}this.avt=this.av;this.av=a;return this};this.obj.setActive=function(){if(this.vs[this.av]){this.cv=this.av;if(this.vs[this.avt].dhxcont==this.vs[this.avt].dhxcont.mainCont[this.avt].parentNode){b.st.appendChild(this.vs[this.avt].dhxcont.mainCont[this.avt]);this.vs[this.avt].menu&&b.st.appendChild(document.getElementById(this.vs[this.avt].menuId));if(this.vs[this.avt].toolbar){b.st.appendChild(document.getElementById(this.vs[this.avt].toolbarId));var a=this.vs[this.avt].toolbar;a.forEachItem(function(b){var c=a.objPull[a.idPrefix+b].obj;c!=null&&typeof c._doOnMouseOut=="function"&&c._doOnMouseOut();c=null});a=null}this.vs[this.avt].sb&&b.st.appendChild(document.getElementById(this.vs[this.avt].sbId))}this.vs[this.av].dhxcont!=this.vs[this.av].dhxcont.mainCont[this.av].parentNode&&(this.vs[this.av].dhxcont.insertBefore(this.vs[this.av].dhxcont.mainCont[this.av],this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]),this.vs[this.av].menu&&this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].menuId),this.vs[this.av].dhxcont.childNodes[0]),this.vs[this.av].toolbar&&this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].toolbarId),this.vs[this.av].dhxcont.childNodes[this.vs[this.av].menu?1:0]),this.vs[this.av].sb&&this.vs[this.av].dhxcont.insertBefore(document.getElementById(this.vs[this.av].sbId),this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]));this._doOnResize&&this._doOnResize();this._isWindow&&this.updateNestedObjects();this.avt=null}};this.obj._viewRestore=function(){var a=this.av;if(this.avt){this.av=this.avt,this.avt=null}return a};this.setContent=function(a){this.obj.vs[this.obj.av].dhxcont=a;this.obj._init();a=null};this.obj._init=function(){this.vs[this.av].dhxcont.innerHTML="<div ida='dhxMainCont' style='position: relative; left: 0px; top: 0px; overflow: hidden;'></div><div class='dhxcont_content_blocker' style='display: none;'></div>";this.vs[this.av].dhxcont.mainCont={};this.vs[this.av].dhxcont.mainCont[this.av]=this.vs[this.av].dhxcont.childNodes[0]};this.obj._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",g=0;g<a;g++){b+=c.charAt(Math.round(Math.random()*(c.length-1)))}return b};this.obj.setMinContentSize=function(a,b){this.vs[this.av]._minDataSizeW=a;this.vs[this.av]._minDataSizeH=b};this.obj._setPadding=function(a,b){typeof a=="object"?(this._offsetTop=a[0],this._offsetLeft=a[1],this._offsetWidth=a[2],this._offsetHeight=a[3],a=null):(this._offsetLeft=this._offsetTop=a,this._offsetWidth=-a*2,this._offsetHeight=-a*2);this.vs[this.av].dhxcont.className="dhxcont_global_content_area "+(b||"")};this.obj.moveContentTo=function(a){for(var b in this.vs){a.view(b).setActive();var c=null;this.vs[b].grid&&(c="grid");this.vs[b].tree&&(c="tree");this.vs[b].tabbar&&(c="tabbar");this.vs[b].folders&&(c="folders");this.vs[b].layout&&(c="layout");c!=null&&(a.view(b).attachObject(this.vs[b][c+"Id"],!1,!0,!1),a.vs[b][c]=this.vs[b][c],a.vs[b][c+"Id"]=this.vs[b][c+"Id"],a.vs[b][c+"Obj"]=this.vs[b][c+"Obj"],this.vs[b][c]=null,this.vs[b][c+"Id"]=null,this.vs[b][c+"Obj"]=null);if(this.vs[b]._frame){a.vs[b]._frame=this.vs[b]._frame,this.vs[b]._frame=null}if(this.vs[b].menu!=null){if(a.cv==a.av){a.vs[a.av].dhxcont.insertBefore(document.getElementById(this.vs[b].menuId),a.vs[a.av].dhxcont.childNodes[0])}else{var g=a._getSt();g.appendChild(document.getElementById(this.vs[b].menuId));g=null}a.vs[b].menu=this.vs[b].menu;a.vs[b].menuId=this.vs[b].menuId;a.vs[b].menuHeight=this.vs[b].menuHeight;this.vs[b].menu=null;this.vs[b].menuId=null;this.vs[b].menuHeight=null;this.cv==this.av&&this._doOnAttachMenu&&this._doOnAttachMenu("unload");a.cv==a.av&&a._doOnAttachMenu&&a._doOnAttachMenu("move")}if(this.vs[b].toolbar!=null){a.cv==a.av?a.vs[a.av].dhxcont.insertBefore(document.getElementById(this.vs[b].toolbarId),a.vs[a.av].dhxcont.childNodes[a.vs[a.av].menu!=null?1:0]):(g=a._getSt(),g.appendChild(document.getElementById(this.vs[b].toolbarId)),g=null),a.vs[b].toolbar=this.vs[b].toolbar,a.vs[b].toolbarId=this.vs[b].toolbarId,a.vs[b].toolbarHeight=this.vs[b].toolbarHeight,this.vs[b].toolbar=null,this.vs[b].toolbarId=null,this.vs[b].toolbarHeight=null,this.cv==this.av&&this._doOnAttachToolbar&&this._doOnAttachToolbar("unload"),a.cv==a.av&&a._doOnAttachToolbar&&a._doOnAttachToolbar("move")}if(this.vs[b].sb!=null){if(a.cv==a.av){a.vs[a.av].dhxcont.insertBefore(document.getElementById(this.vs[b].sbId),a.vs[a.av].dhxcont.childNodes[a.vs[a.av].dhxcont.childNodes.length-1])}else{return g=a._getSt(),g.appendChild(document.getElementById(this.vs[b].sbId)),g}a.vs[b].sb=this.vs[b].sb;a.vs[b].sbId=this.vs[b].sbId;a.vs[b].sbHeight=this.vs[b].sbHeight;this.vs[b].sb=null;this.vs[b].sbId=null;this.vs[b].sbHeight=null;this.cv==this.av&&this._doOnAttachStatusBar&&this._doOnAttachStatusBar("unload");a.cv==a.av&&a._doOnAttachStatusBar&&a._doOnAttachStatusBar("move")}for(var h=this.vs[b].dhxcont.mainCont[b],i=a.vs[b].dhxcont.mainCont[b];h.childNodes.length>0;){i.appendChild(h.childNodes[0])}}a.view(this.av).setActive();a=null};this.obj.adjustContent=function(a,b,c,g,h){var i=this.vs[this.av].dhxcont,j=i.mainCont[this.av];i.style.left=(this._offsetLeft||0)+"px";i.style.top=(this._offsetTop||0)+b+"px";var k=a.clientWidth+(this._offsetWidth||0);if(g!==!0){i.style.width=Math.max(0,k)+"px"}if(g!==!0&&i.offsetWidth>k){i.style.width=Math.max(0,k*2-i.offsetWidth)+"px"}var l=a.clientHeight+(this._offsetHeight||0);i.style.height=Math.max(0,l-b)+(c!=null?c:0)+"px";if(i.offsetHeight>l-b){i.style.height=Math.max(0,(l-b)*2-i.offsetHeight)+"px"}if(h&&!isNaN(h)){i.style.height=Math.max(0,parseInt(i.style.height)-h)+"px"}if(this.vs[this.av]._minDataSizeH!=null&&parseInt(i.style.height)<this.vs[this.av]._minDataSizeH){i.style.height=this.vs[this.av]._minDataSizeH+"px"}if(this.vs[this.av]._minDataSizeW!=null&&parseInt(i.style.width)<this.vs[this.av]._minDataSizeW){i.style.width=this.vs[this.av]._minDataSizeW+"px"}if(g!==!0&&(j.style.width=i.clientWidth+"px",j.offsetWidth>i.clientWidth)){j.style.width=Math.max(0,i.clientWidth*2-j.offsetWidth)+"px"}var m=this.vs[this.av].menu!=null?!this.vs[this.av].menuHidden?this.vs[this.av].menuHeight:0:0,n=this.vs[this.av].toolbar!=null?!this.vs[this.av].toolbarHidden?this.vs[this.av].toolbarHeight:0:0,o=this.vs[this.av].sb!=null?!this.vs[this.av].sbHidden?this.vs[this.av].sbHeight:0:0;j.style.height=i.clientHeight+"px";if(j.offsetHeight>i.clientHeight){j.style.height=Math.max(0,i.clientHeight*2-j.offsetHeight)+"px"}j.style.height=Math.max(0,parseInt(j.style.height)-m-n-o)+"px";a=i=j=null};this.obj.coverBlocker=function(){return this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]};this.obj.showCoverBlocker=function(){var a=this.coverBlocker();a.style.display="";a=null};this.obj.hideCoverBlocker=function(){var a=this.coverBlocker();a.style.display="none";a=null};this.obj.updateNestedObjects=function(a){if(this.skin=="dhx_terrace"){var b=this.vs[this.av].menu!=null||this.vs[this.av].toolbar!=null;if(this.vs[this.av].grid){var c=b||this._isWindow?14:0,g=this._isWindow?14:0,h=this._isWindow?14:0;if(a){if(!this._isWindow){this.vs[this.av].grid.entBox.style.border="0px solid white",this.vs[this.av].grid.skin_h_correction=-2}this.vs[this.av].grid.dontSetSizes=!0;this.vs[this.av].gridObj.style.position="absolute"}this.vs[this.av].gridObj.style.top=c+"px";this.vs[this.av].gridObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-c-g+"px";this.vs[this.av].gridObj.style.left=h+"px";this.vs[this.av].gridObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-h*2+"px";this.vs[this.av].grid.setSizes()}if(this.vs[this.av].tree){c=b||this._isWindow?14:0;g=this._isWindow?14:0;h=this._isWindow?14:0;if(a){this.vs[this.av].treeObj.style.position="absolute"}this.vs[this.av].treeObj.style.top=c+"px";this.vs[this.av].treeObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-c-g+"px";this.vs[this.av].treeObj.style.left=h+"px";this.vs[this.av].treeObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-h*2+"px"}if(this.vs[this.av].form){c=b||this._isWindow?14:0;g=this._isWindow?14:0;h=this._isWindow?14:0;if(a){this.vs[this.av].formObj.style.position="absolute"}this.vs[this.av].formObj.style.top=c+"px";this.vs[this.av].formObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-c-g+"px";this.vs[this.av].formObj.style.left=h+"px";this.vs[this.av].formObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-h*2+"px";this.vs[this.av].form.setSizes()}if(this.vs[this.av].layout){a&&!this._isWindow&&!this._isCell&&this.vs[this.av].layout._hideBorders(),c=this._isCell&&this._noHeader&&!b?0:14,g=this._isCell&&this._noHeader?0:14,h=this._isCell&&this._noHeader?0:14,this.vs[this.av].layoutObj.style.top=c+"px",this.vs[this.av].layoutObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-c-g+"px",this.vs[this.av].layoutObj.style.left=h+"px",this.vs[this.av].layoutObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-h*2+"px",this.vs[this.av].layout.setSizes()}if(this.vs[this.av].accordion){if(a){this.vs[this.av].accordion._hideBorders=!0}c=this._isCell&&this._noHeader&&!b?0:14;g=this._isCell&&this._noHeader?0:14;h=this._isCell&&this._noHeader?0:14;this.vs[this.av].accordionObj.style.top=c+"px";this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-c-g+"px";this.vs[this.av].accordionObj.style.left=h+"px";this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-h*2+"px";this.vs[this.av].accordion.setSizes()}if(this.vs[this.av].tabbar!=null){c=!b&&this._isCell&&this._noHeader?0:14,g=this._isCell&&this._noHeader?c:28,h=this._isCell&&this._noHeader?0:14,this.vs[this.av].tabbarObj.style.top=c+"px",this.vs[this.av].tabbarObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-g+"px",this.vs[this.av].tabbarObj.style.left=h+"px",this.vs[this.av].tabbarObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-h*2+"px",this.vs[this.av].tabbar.adjustOuterSize()}if(this.vs[this.av].editor){h=c=14,this.vs[this.av].editorObj.style.top=c+"px",this.vs[this.av].editorObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)-c*2+"px",this.vs[this.av].editorObj.style.left=h+"px",this.vs[this.av].editorObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)-h*2+"px",_isIE||this.vs[this.av].editor._prepareContent(!0),this.vs[this.av].editor.setSizes()}this.vs[this.av].sched&&this.vs[this.av].sched.setSizes();this.vs[this.av].dockedCell&&this.vs[this.av].dockedCell.updateNestedObjects()}else{this.vs[this.av].grid&&this.vs[this.av].grid.setSizes();this.vs[this.av].sched&&this.vs[this.av].sched.setSizes();this.vs[this.av].tabbar&&this.vs[this.av].tabbar.adjustOuterSize();this.vs[this.av].folders&&this.vs[this.av].folders.setSizes();this.vs[this.av].editor&&(_isIE||this.vs[this.av].editor._prepareContent(!0),this.vs[this.av].editor.setSizes());if(this.vs[this.av].layout){(this._isAcc||this._isTabbarCell)&&this.skin=="dhx_skyblue"?(this.vs[this.av].layoutObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",this.vs[this.av].layoutObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px"):(this.vs[this.av].layoutObj.style.width=this.vs[this.av].dhxcont.mainCont[this.av].style.width,this.vs[this.av].layoutObj.style.height=this.vs[this.av].dhxcont.mainCont[this.av].style.height),this.vs[this.av].layout.setSizes()}if(this.vs[this.av].accordion!=null){this.skin=="dhx_web"?(this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px",this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px"):(this.vs[this.av].accordionObj.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",this.vs[this.av].accordionObj.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px"),this.vs[this.av].accordion.setSizes()}this.vs[this.av].dockedCell&&this.vs[this.av].dockedCell.updateNestedObjects();this.vs[this.av].form&&this.vs[this.av].form.setSizes();this.vs[this.av].carousel&&this.vs[this.av].carousel.setSizes()}};this.obj.attachStatusBar=function(){if(!this.vs[this.av].sb){var a=document.createElement("DIV");a.className=this._isCell?"dhxcont_sb_container_layoutcell":"dhxcont_sb_container";a.id="sbobj_"+this._genStr(12);a.innerHTML="<div class='dhxcont_statusbar'></div>";this.cv==this.av?this.vs[this.av].dhxcont.insertBefore(a,this.vs[this.av].dhxcont.childNodes[this.vs[this.av].dhxcont.childNodes.length-1]):b.st.appendChild(a);a.setText=function(a){this.childNodes[0].innerHTML=a};a.getText=function(){return this.childNodes[0].innerHTML};a.onselectstart=function(a){a=a||event;return a.returnValue=!1};this.vs[this.av].sb=a;this.vs[this.av].sbHeight=this.skin=="dhx_web"?41:this.skin=="dhx_skyblue"?23:a.offsetHeight;this.vs[this.av].sbId=a.id;this._doOnAttachStatusBar&&this._doOnAttachStatusBar("init");this.adjust();return this.vs[this._viewRestore()].sb}};this.obj.detachStatusBar=function(a){if(this.vs[this.av].sb){this.vs[this.av].sb.setText=null,this.vs[this.av].sb.getText=null,this.vs[this.av].sb.onselectstart=null,this.vs[this.av].sb.parentNode.removeChild(this.vs[this.av].sb),this.vs[this.av].sb=null,this.vs[this.av].sbHeight=null,this.vs[this.av].sbId=null,this._viewRestore(),this._doOnAttachStatusBar&&!a&&this._doOnAttachStatusBar("unload")}};this.obj.getFrame=function(){return this.getView()._frame};this.obj.getView=function(a){return this.vs[a||this.av]};this.obj.attachMenu=function(a){if(!this.vs[this.av].menu){var c=document.createElement("DIV");c.style.position="relative";c.style.overflow="hidden";c.id="dhxmenu_"+this._genStr(12);this.cv==this.av?this.vs[this.av].dhxcont.insertBefore(c,this.vs[this.av].dhxcont.childNodes[0]):b.st.appendChild(c);typeof a!="object"?this.vs[this.av].menu=new dhtmlXMenuObject(c.id,a||this.skin):(a.parent=c.id,this.vs[this.av].menu=new dhtmlXMenuObject(a));this.vs[this.av].menuHeight=this.skin=="dhx_web"?29:c.offsetHeight;this.vs[this.av].menuId=c.id;this._doOnAttachMenu&&this._doOnAttachMenu("init");this.adjust();return this.vs[this._viewRestore()].menu}};this.obj.detachMenu=function(a){if(this.vs[this.av].menu){var b=document.getElementById(this.vs[this.av].menuId);this.vs[this.av].menu.unload();this.vs[this.av].menu=null;this.vs[this.av].menuId=null;this.vs[this.av].menuHeight=null;b&&b.parentNode.removeChild(b);b=null;this._viewRestore();this._doOnAttachMenu&&!a&&this._doOnAttachMenu("unload")}};this.obj.attachToolbar=function(a){if(!this.vs[this.av].toolbar){var c=document.createElement("DIV");c.style.position="relative";c.style.overflow="hidden";c.id="dhxtoolbar_"+this._genStr(12);this.cv==this.av?this.vs[this.av].dhxcont.insertBefore(c,this.vs[this.av].dhxcont.childNodes[this.vs[this.av].menu!=null?1:0]):b.st.appendChild(c);typeof a!="object"?this.vs[this.av].toolbar=new dhtmlXToolbarObject(c.id,a||this.skin):(a.parent=c.id,this.vs[this.av].toolbar=new dhtmlXToolbarObject(a));this.vs[this.av].toolbarHeight=c.offsetHeight;this.vs[this.av].toolbarId=c.id;this._doOnAttachToolbar&&this._doOnAttachToolbar("init");this.adjust();var f=this;this.vs[this.av].toolbar.attachEvent("_onIconSizeChange",function(){f.vs[f.av].toolbarHeight=this.cont.offsetHeight;f.vs[f.av].toolbarId=this.cont.id;f.adjust();f._doOnAttachToolbar&&f._doOnAttachToolbar("iconSizeChange")});this.skin!="dhx_terrace"&&this.vs[this.av].toolbar.callEvent("_onIconSizeChange",[]);return this.vs[this._viewRestore()].toolbar}};this.obj.detachToolbar=function(a){if(this.vs[this.av].toolbar){var b=document.getElementById(this.vs[this.av].toolbarId);this.vs[this.av].toolbar.unload();this.vs[this.av].toolbar=null;this.vs[this.av].toolbarId=null;this.vs[this.av].toolbarHeight=null;b&&b.parentNode.removeChild(b);b=null;this._viewRestore();this._doOnAttachToolbar&&!a&&this._doOnAttachToolbar("unload")}};this.obj.attachGrid=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw()}var a=document.createElement("DIV");a.id="dhxGridObj_"+this._genStr(12);a.style.width="100%";a.style.height="100%";a.cmp="grid";document.body.appendChild(a);this.attachObject(a.id,!1,!0,!1);this.vs[this.av].grid=new dhtmlXGridObject(a.id);this.vs[this.av].grid.setSkin(this.skin);if(this.skin=="dhx_skyblue"||this.skin=="dhx_black"||this.skin=="dhx_blue"){this.vs[this.av].grid.entBox.style.border="0px solid white",this.vs[this.av].grid._sizeFix=2}this.vs[this.av].gridId=a.id;this.vs[this.av].gridObj=a;this.skin=="dhx_terrace"&&(this.adjust(),this.updateNestedObjects(!0));return this.vs[this._viewRestore()].grid};this.obj.attachScheduler=function(a,b,c,g){var g=g||window.scheduler,h=0;c&&(j=document.getElementById(c))&&(h=1);if(!h){var i=c||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>',j=document.createElement("DIV");j.id="dhxSchedObj_"+this._genStr(12);j.innerHTML='<div id="'+j.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+i+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>';document.body.appendChild(j.firstChild)}this.attachObject(j.id,!1,!0,!1);this.vs[this.av].sched=g;this.vs[this.av].schedId=j.id;g.setSizes=g.update_view;g.destructor=function(){};g.init(j.id,a,b);return this.vs[this._viewRestore()].sched};this.obj.attachTree=function(a){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw()}var b=document.createElement("DIV");b.id="dhxTreeObj_"+this._genStr(12);b.style.width="100%";b.style.height="100%";b.cmp="tree";document.body.appendChild(b);this.attachObject(b.id,!1,!0,!1);this.vs[this.av].tree=new dhtmlXTreeObject(b.id,"100%","100%",a||0);this.vs[this.av].tree.setSkin(this.skin);this.vs[this.av].tree.allTree.childNodes[0].style.marginTop="2px";this.vs[this.av].tree.allTree.childNodes[0].style.marginBottom="2px";this.vs[this.av].treeId=b.id;this.vs[this.av].treeObj=b;this.skin=="dhx_terrace"&&(this.adjust(),this.updateNestedObjects(!0));return this.vs[this._viewRestore()].tree};this.obj.attachTabbar=function(a){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.style.border="none",this.setDimension(this.w,this.h)}var b=document.createElement("DIV");b.id="dhxTabbarObj_"+this._genStr(12);b.style.width="100%";b.style.height="100%";b.style.overflow="hidden";b.cmp="tabbar";if(!this._isWindow){b._hideBorders=!0}document.body.appendChild(b);this.attachObject(b.id,!1,!0,!1);if(this._isCell){this.hideHeader(),this._padding=b._hideBorders=!1}this.vs[this.av].tabbar=new dhtmlXTabBar(b.id,a||"top",this.skin=="dhx_terrace"?null:20);if(!this._isWindow&&this.skin!="dhx_terrace"){this.vs[this.av].tabbar._s.expand=!0}this.vs[this.av].tabbar.setSkin(this.skin);this.vs[this.av].tabbar.adjustOuterSize();this.vs[this.av].tabbarId=b.id;this.vs[this.av].tabbarObj=b;this.skin=="dhx_terrace"&&(this.adjust(),this.updateNestedObjects(!0));return this.vs[this._viewRestore()].tabbar};this.obj.attachFolders=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw()}var a=document.createElement("DIV");a.id="dhxFoldersObj_"+this._genStr(12);a.style.width="100%";a.style.height="100%";a.style.overflow="hidden";a.cmp="folders";document.body.appendChild(a);this.attachObject(a.id,!1,!0,!1);this.vs[this.av].folders=new dhtmlxFolders(a.id);this.vs[this.av].folders.setSizes();this.vs[this.av].foldersId=a.id;this.vs[this.av].foldersObj=a;return this.vs[this._viewRestore()].folders};this.obj.attachAccordion=function(){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw()}var a=document.createElement("DIV");a.id="dhxAccordionObj_"+this._genStr(12);this._padding=!0;if(this.skin=="dhx_web"){a.style.left="0px",a.style.top="0px",a.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px",a.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px"}else{if(this.skin!="dhx_terrace"){a.style.left="-1px",a.style.top="-1px",a.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",a.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px"}}a.style.position="relative";a.cmp="accordion";document.body.appendChild(a);this.attachObject(a.id,!1,!0,!1);this.vs[this.av].accordion=new dhtmlXAccordion(a.id,this.skin);this.vs[this.av].accordion.setSizes();this.vs[this.av].accordionId=a.id;this.vs[this.av].accordionObj=a;this.skin=="dhx_terrace"&&(this.adjust(),this.updateNestedObjects(!0));return this.vs[this._viewRestore()].accordion};this.obj.attachLayout=function(a,b){if(this._isCell&&this.skin=="dhx_skyblue"){this.hideHeader(),this.vs[this.av].dhxcont.style.border="0px solid white",this.adjustContent(this.childNodes[0],0)}this._isCell&&this.skin=="dhx_web"&&this.hideHeader();this._padding=!0;var c=document.createElement("DIV");c.id="dhxLayoutObj_"+this._genStr(12);c.style.overflow="hidden";c.style.position="absolute";c.style.left="0px";c.style.top="0px";c.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+"px";c.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+"px";if((this._isTabbarCell||this._isAcc)&&this.skin=="dhx_skyblue"){c.style.left="-1px",c.style.top="-1px",c.style.width=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.width)+2+"px",c.style.height=parseInt(this.vs[this.av].dhxcont.mainCont[this.av].style.height)+2+"px"}c.dhxContExists=!0;c.cmp="layout";document.body.appendChild(c);this.attachObject(c.id,!1,!0,!1);this.vs[this.av].layout=new dhtmlXLayoutObject(c,a,b||this.skin);this._isWindow&&this.attachEvent("_onBeforeTryResize",this.vs[this.av].layout._defineWindowMinDimension);this.vs[this.av].layoutId=c.id;this.vs[this.av].layoutObj=c;if(this.skin=="dhx_terrace"){if(this._isCell){this.style.backgroundColor="transparent",this.vs[this.av].dhxcont.style.backgroundColor="transparent",this.hideHeader()}this.adjust();this.updateNestedObjects(!0)}return this.vs[this._viewRestore()].layout};this.obj.attachEditor=function(a){if(this._isWindow&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw()}var b=document.createElement("DIV");b.id="dhxEditorObj_"+this._genStr(12);b.style.position="relative";b.style.display="none";b.style.overflow="hidden";b.style.width="100%";b.style.height="100%";b.cmp="editor";document.body.appendChild(b);if(this.skin=="dhx_terrace"){b._attached=!0}this.attachObject(b.id,!1,!0,!1);this.vs[this.av].editor=new dhtmlXEditor(b.id,a||this.skin);this.vs[this.av].editorId=b.id;this.vs[this.av].editorObj=b;this.skin=="dhx_terrace"&&(this.adjust(),this.updateNestedObjects(!0));return this.vs[this._viewRestore()].editor};this.obj.attachMap=function(a){var b=document.createElement("DIV");b.id="GMapsObj_"+this._genStr(12);b.style.position="relative";b.style.display="none";b.style.overflow="hidden";b.style.width="100%";b.style.height="100%";b.cmp="gmaps";document.body.appendChild(b);this.attachObject(b.id,!1,!0,!0);a||(a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP});this.vs[this.av].gmaps=new google.maps.Map(b,a);return this.vs[this.av].gmaps};this.obj.attachObject=function(a,b,c,g){typeof a=="string"&&(a=document.getElementById(a));if(b){a.style.visibility="hidden";a.style.display="";var h=a.offsetWidth,i=a.offsetHeight}this._attachContent("obj",a);if(b&&this._isWindow){a.style.visibility="",this._adjustToContent(h,i)}if(this.skin=="dhx_terrace"&&(this.vs[this.av].menu!=null||this.vs[this.av].toolbar!=null)){this.adjust(typeof g=="undefined"||g==!0),this.updateNestedObjects(!0)}c||this._viewRestore()};this.obj.detachObject=function(a,b){for(var c=null,g=null,h="tree,grid,layout,tabbar,accordion,folders,form".split(","),i=0;i<h.length;i++){if(this.vs[this.av][h[i]]){c=this.vs[this.av][h[i]];g=this.vs[this.av][h[i]+"Obj"];if(a){c.unload&&c.unload();for(c.destructor&&c.destructor();g.childNodes.length>0;){g.removeChild(g.childNodes[0])}g.parentNode.removeChild(g);c=g=null}else{document.body.appendChild(g),g.style.display="none"}this.vs[this.av][h[i]]=null;this.vs[this.av][h[i]+"Id"]=null;this.vs[this.av][h[i]+"Obj"]=null}}if(c!=null&&g!=null){return[c,g]}if(a&&this.vs[this.av]._frame){this._detachURLEvents(),this.vs[this.av]._frame=null}for(var j=this.vs[this.av].dhxcont.mainCont[this.av];j.childNodes.length>0;){if(a==!0){j.removeChild(j.childNodes[0])}else{var k=j.childNodes[0];b!=null?(typeof b!="object"&&(b=document.getElementById(b)),b.appendChild(k)):document.body.appendChild(k);k.style.display="none"}}j=b=null};this.obj.appendObject=function(a){typeof a=="string"&&(a=document.getElementById(a));this._attachContent("obj",a,!0)};this.obj.attachHTMLString=function(a){this._attachContent("str",a);for(var b=a.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],c=0;c<b.length;c++){var g=b[c].replace(/<([\/]{0,1})script[^>]*>/g,"");g&&(window.execScript?window.execScript(g):window.eval(g))}};this.obj.attachURL=function(a,b){this._attachContent(b==!0?"urlajax":"url",a,!1);if(this.skin=="dhx_terrace"&&(this.vs[this.av].menu!=null||this.vs[this.av].toolbar!=null)){this.adjust(!0),this.updateNestedObjects(!0)}this._viewRestore()};this.obj.adjust=function(a){if(this.skin=="dhx_skyblue"){if(this.vs[this.av].menu){if(this._isWindow||this._isLayout){this.vs[this.av].menu._topLevelOffsetLeft=0,document.getElementById(this.vs[this.av].menuId).style.height="26px",this.vs[this.av].menuHeight=document.getElementById(this.vs[this.av].menuId).offsetHeight,this._doOnAttachMenu&&this._doOnAttachMenu("show")}if(this._isCell){document.getElementById(this.vs[this.av].menuId).className+=" in_layoutcell",this.vs[this.av].menuHeight=25}if(this._isAcc){document.getElementById(this.vs[this.av].menuId).className+=" in_acccell",this.vs[this.av].menuHeight=25}this._doOnAttachMenu&&this._doOnAttachMenu("adjust")}this.vs[this.av].toolbar&&(this._isWindow&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_window"),this._isLayout&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_layout"),this._isCell&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_layoutcell"),this._isAcc&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_acccell"),this._isTabbarCell&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_tabbarcell"))}this.skin=="dhx_web"&&this.vs[this.av].toolbar&&(this._isWindow&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_window"),this._isLayout&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_layout"),this._isCell&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_layoutcell"),this._isAcc&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_acccell"),this._isTabbarCell&&(document.getElementById(this.vs[this.av].toolbarId).className+=" in_tabbarcell"));if(this.skin=="dhx_terrace"){var b=0;if(this._isWindow||this._isCell||this._isAcc||this._isTabbarCell){b=14}this._isCell&&this._noHeader&&(b=0);var c=0;if(this._isWindow||this._isCell||this._isAcc||this._isTabbarCell){c=14}this._isCell&&this._noHeader&&(c=0);var g=a==!0&&!this.vs[this.av].toolbar||this._isLayout?14:0,h=a==!0||this._isLayout?14:0,i=!1;if(this.vs[this.av].menu){document.getElementById(this.vs[this.av].menuId).style.marginLeft=b+"px",document.getElementById(this.vs[this.av].menuId).style.marginRight=b+"px",document.getElementById(this.vs[this.av].menuId).style.marginTop=c+"px",document.getElementById(this.vs[this.av].menuId).style.marginBottom=g+"px",this.vs[this.av].menuHeight=32+c+g,this._doOnAttachMenu&&this._doOnAttachMenu("show"),i=!0}if(this.vs[this.av].toolbar){c==0&&this.vs[this.av].menu!=null&this._isCell&&(c=14),document.getElementById(this.vs[this.av].toolbarId).style.marginLeft=b+"px",document.getElementById(this.vs[this.av].toolbarId).style.marginRight=b+"px",document.getElementById(this.vs[this.av].toolbarId).style.marginTop=c+"px",document.getElementById(this.vs[this.av].toolbarId).style.marginBottom=h+"px",this.vs[this.av].toolbarHeight=this.vs[this.av].toolbar.cont.offsetHeight+c+h,this._doOnAttachToolbar&&this._doOnAttachToolbar("show"),i=!0}}};this.obj._attachContent=function(a,b,c){if(c!==!0){if(this.vs[this.av]._frame){this._detachURLEvents(),this.vs[this.av]._frame=null}for(;this.vs[this.av].dhxcont.mainCont[this.av].childNodes.length>0;){this.vs[this.av].dhxcont.mainCont[this.av].removeChild(this.vs[this.av].dhxcont.mainCont[this.av].childNodes[0])}}if(a=="url"){if(this._isWindow&&b.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this._redraw()}var g=document.createElement("IFRAME");g.frameBorder=0;g.border=0;g.style.width="100%";g.style.height="100%";g.setAttribute("src","javascript:false;");this.vs[this.av].dhxcont.mainCont[this.av].appendChild(g);g.src=b;this.vs[this.av]._frame=g;this._attachURLEvents()}else{if(a=="urlajax"){if(this._isWindow&&b.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF",this._redraw()}var h=this,i=String(this.av).valueOf(),j=function(){var a=h.av;h.av=i;h.attachHTMLString(this.xmlDoc.responseText,this);h.av=a;h._doOnFrameContentLoaded&&h._doOnFrameContentLoaded();this.destructor()},k=new dtmlXMLLoaderObject(j,window);k.dhxWindowObject=this;k.loadXML(b)}else{if(a=="obj"){if(this._isWindow&&b.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF",this._redraw()}this.vs[this.av].dhxcont._frame=null;this.vs[this.av].dhxcont.mainCont[this.av].appendChild(b);this.vs[this.av].dhxcont.mainCont[this.av].style.overflow=c===!0?"auto":"hidden";b.style.display=""}else{if(a=="str"){if(this._isWindow&&b.cmp==null&&this.skin=="dhx_skyblue"){this.vs[this.av].dhxcont.mainCont[this.av].style.border="#a4bed4 1px solid",this.vs[this.av].dhxcont.mainCont[this.av].style.backgroundColor="#FFFFFF",this._redraw()}this.vs[this.av].dhxcont._frame=null;this.vs[this.av].dhxcont.mainCont[this.av].innerHTML=b}}}}};this.obj._attachURLEvents=function(){var a=this,b=this.vs[this.av]._frame;_isIE?b.onreadystatechange=function(){if(b.readyState=="complete"){try{b.contentWindow.document.body.onmousedown=function(){a._doOnFrameMouseDown&&a._doOnFrameMouseDown()}}catch(c){}try{a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(g){}}}:b.onload=function(){try{b.contentWindow.onmousedown=function(){a._doOnFrameMouseDown&&a._doOnFrameMouseDown()}}catch(c){}try{a._doOnFrameContentLoaded&&a._doOnFrameContentLoaded()}catch(g){}}};this.obj._detachURLEvents=function(){if(_isIE){try{this.vs[this.av]._frame.onreadystatechange=null,this.vs[this.av]._frame.contentWindow.document.body.onmousedown=null,this.vs[this.av]._frame.onload=null}catch(a){}}else{try{this.vs[this.av]._frame.contentWindow.onmousedown=null,this.vs[this.av]._frame.onload=null}catch(b){}}};this.obj.showMenu=function(){if(this.vs[this.av].menu&&this.vs[this.av].menuId&&document.getElementById(this.vs[this.av].menuId).style.display=="none"){this.vs[this.av].menuHidden=!1,this._doOnAttachMenu&&this._doOnAttachMenu("show"),document.getElementById(this.vs[this.av].menuId).style.display="",this._viewRestore()}};this.obj.hideMenu=function(){if(this.vs[this.av].menu&&this.vs[this.av].menuId&&document.getElementById(this.vs[this.av].menuId).style.display!="none"){document.getElementById(this.vs[this.av].menuId).style.display="none",this.vs[this.av].menuHidden=!0,this._doOnAttachMenu&&this._doOnAttachMenu("hide"),this._viewRestore()}};this.obj.showToolbar=function(){if(this.vs[this.av].toolbar&&this.vs[this.av].toolbarId&&document.getElementById(this.vs[this.av].toolbarId).style.display=="none"){this.vs[this.av].toolbarHidden=!1,this._doOnAttachToolbar&&this._doOnAttachToolbar("show"),document.getElementById(this.vs[this.av].toolbarId).style.display="",this._viewRestore()}};this.obj.hideToolbar=function(){if(this.vs[this.av].toolbar&&this.vs[this.av].toolbarId&&document.getElementById(this.vs[this.av].toolbarId).style.display!="none"){this.vs[this.av].toolbarHidden=!0,document.getElementById(this.vs[this.av].toolbarId).style.display="none",this._doOnAttachToolbar&&this._doOnAttachToolbar("hide"),this._viewRestore()}};this.obj.showStatusBar=function(){if(this.vs[this.av].sb&&this.vs[this.av].sbId&&document.getElementById(this.vs[this.av].sbId).style.display=="none"){this.vs[this.av].sbHidden=!1,this._doOnAttachStatusBar&&this._doOnAttachStatusBar("show"),document.getElementById(this.vs[this.av].sbId).style.display="",this._viewRestore()}};this.obj.hideStatusBar=function(){if(this.vs[this.av].sb&&this.vs[this.av].sbId&&document.getElementById(this.vs[this.av].sbId).style.display!="none"){this.vs[this.av].sbHidden=!0,document.getElementById(this.vs[this.av].sbId).style.display="none",this._doOnAttachStatusBar&&this._doOnAttachStatusBar("hide"),this._viewRestore()}};this.obj._dhxContDestruct=function(){var a=this.av,c;for(c in this.vs){this.av=c,this.detachMenu(!0),this.detachToolbar(!0),this.detachStatusBar(!0),this.detachObject(!0),this.vs[c].dhxcont.mainCont[c]=null}for(c in this.vs){this.vs[c].dhxcont.mainCont=null,this.vs[c].dhxcont.innerHTML="",this.vs[c].dhxcont=null,this.vs[c]=null}this.setActive=this.getView=this.getFrame=this._getSt=this._dhxContDestruct=this._genStr=this._init=this._setPadding=this._viewRestore=this._detachURLEvents=this._attachURLEvents=this._attachContent=this.updateNestedObjects=this.hideCoverBlocker=this.showCoverBlocker=this.coverBlocker=this.adjustContent=this.moveContentTo=this.setMinContentSize=this.adjust=this.show=this.view=this.attachMap=this.attachURL=this.attachHTMLString=this.appendObject=this.detachObject=this.attachObject=this.attachEditor=this.attachLayout=this.attachAccordion=this.attachFolders=this.attachTabbar=this.attachTree=this.attachScheduler=this.attachGrid=this.hideStatusBar=this.hideToolbar=this.hideMenu=this.showStatusBar=this.showToolbar=this.showMenu=this.detachStatusBar=this.detachToolbar=this.detachMenu=this.attachStatusBar=this.attachToolbar=this.attachMenu=this.vs=null;b.st.innerHTML="";b.st.parentNode.removeChild(b.st);b.st=null;b.setContent=null;b.dhxcont=null;b=b.obj=null;if(dhtmlx.detaches){for(c in dhtmlx.detaches){dhtmlx.detaches[c](this)}}};if(dhtmlx.attaches){for(var c in dhtmlx.attaches){this.obj[c]=dhtmlx.attaches[c]}}return this}function dhtmlXCalendarObject(A,y){this.i={};this.uid=function(){if(!this.uidd){this.uidd=(new Date).getTime()}return this.uidd++};var x=null,w=typeof A=="string"?document.getElementById(A):A;w&&typeof w=="object"&&w.tagName&&String(w.tagName).toLowerCase()!="input"&&(x=w);w=null;if(typeof A!="object"||!A.length){A=[A]}for(var v=0;v<A.length;v++){typeof A[v]=="string"&&(A[v]=document.getElementById(A[v])||null);if(A[v]!=null&&A[v].tagName&&String(A[v].tagName).toLowerCase()=="input"){this.i[this.uid()]={input:A[v]}}else{if(!(A[v] instanceof Array)&&A[v] instanceof Object&&(A[v].input!=null||A[v].button!=null)){if(A[v].input!=null&&typeof A[v].input=="string"){A[v].input=document.getElementById(A[v].input)}if(A[v].button!=null&&typeof A[v].button=="string"){A[v].button=document.getElementById(A[v].button)}this.i[this.uid()]=A[v]}}A[v]=null}this.skinDetect=function(){var d=document.createElement("DIV");d.className="dhtmlxcalendar_skin_detect";document.body.firstChild?document.body.insertBefore(d,document.body.firstChild):document.body.appendChild(d);var c=d.offsetWidth;d.parentNode.removeChild(d);d=null;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"dhx_blue",50:"dhx_black",60:"omega"}[c]||null};this.skin=y!=null?y:typeof dhtmlx!="undefined"&&typeof dhtmlx.skin=="string"?dhtmlx.skin:this.skinDetect()||"dhx_skyblue";this.setSkin=function(d,c){if(this.skin!=d||c){this.skin=d,this.base.className="dhtmlxcalendar_container dhtmlxcalendar_skin_"+this.skin,this._ifrSize()}};this.base=document.createElement("DIV");this.base.className="dhtmlxcalendar_container";this.base.style.display="none";this.base.appendChild(document.createElement("DIV"));x!=null?(this._hasParent=!0,x.appendChild(this.base),x=null):document.body.appendChild(this.base);this.setParent=function(b){this._hasParent&&(typeof b=="object"?b.appendChild(this.base):typeof b=="string"&&document.getElementById(b).appendChild(this.base))};this.setSkin(this.skin,!0);this.base.onclick=function(b){b=b||event;b.cancelBubble=!0};this.base.onmousedown=function(){return !1};this.loadUserLanguage=function(f){if(this.langData[f]&&(this.lang=f,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont)){for(var e=0,h=0;h<this.msCont.childNodes.length;h++){for(var g=0;g<this.msCont.childNodes[h].childNodes.length;g++){this.msCont.childNodes[h].childNodes[g].innerHTML=this.langData[this.lang].monthesSNames[e++]}}}};this.contMonth=document.createElement("DIV");this.contMonth.className="dhtmlxcalendar_month_cont";this.contMonth.onselectstart=function(b){b=b||event;b.cancelBubble=!0;return b.returnValue=!1};this.base.firstChild.appendChild(this.contMonth);var u=document.createElement("UL");u.className="dhtmlxcalendar_line";this.contMonth.appendChild(u);var s=document.createElement("LI");s.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr";s.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span class='dhtmlxcalendar_month_label_month'>Month</span><span class='dhtmlxcalendar_month_label_year'>Year</span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>";u.appendChild(s);var o=this;s.onclick=function(f){var f=f||event,e=f.target||f.srcElement;if(e.className&&e.className.indexOf("dhtmlxcalendar_month_arrow")===0){o._hideSelector();var h=e.parentNode.firstChild==e?-1:1,g=new Date(o._activeMonth);o._drawMonth(new Date(o._activeMonth.getFullYear(),o._activeMonth.getMonth()+h,1,0,0,0,0));o.callEvent("onArrowClick",[g,new Date(o._activeMonth)])}else{e.className&&e.className=="dhtmlxcalendar_month_label_month"?(f.cancelBubble=!0,o._showSelector("month",31,21,"selector_month",!0)):e.className&&e.className=="dhtmlxcalendar_month_label_year"?(f.cancelBubble=!0,o._showSelector("year",42,21,"selector_year",!0)):o._hideSelector()}};this.contDays=document.createElement("DIV");this.contDays.className="dhtmlxcalendar_days_cont";this.base.firstChild.appendChild(this.contDays);this.setWeekStartDay=function(b){b==0&&(b=7);this._wStart=Math.min(Math.max(isNaN(b)?1:b,1),7);this._drawDaysOfWeek()};this._drawDaysOfWeek=function(){if(this.contDays.childNodes.length==0){var g=document.createElement("UL");g.className="dhtmlxcalendar_line";this.contDays.appendChild(g)}else{g=this.contDays.firstChild}var f=this._wStart,k=this.langData[this.lang].daysSNames;k.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var j=0;j<8;j++){if(g.childNodes[j]==null){var h=document.createElement("LI");g.appendChild(h)}else{h=g.childNodes[j]}j==0?(h.className="dhtmlxcalendar_cell_wn",h.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(h.className="dhtmlxcalendar_cell"+(f>=6?" dhtmlxcalendar_day_weekday_cell":"")+(j==1?"_first":""),h.innerHTML=k[f],++f>7&&(f=1))}this._activeMonth!=null&&this._drawMonth(this._activeMonth)};this._wStart=this.langData[this.lang].weekstart;this.setWeekStartDay(this._wStart);this.contDates=document.createElement("DIV");this.contDates.className="dhtmlxcalendar_dates_cont";this.base.firstChild.appendChild(this.contDates);this.contDates.onclick=function(h){var h=h||event,g=h.target||h.srcElement;if(g.parentNode!=null&&g.parentNode._date!=null){g=g.parentNode}if(g._date!=null&&!g._css_dis){var D=o._activeDate.getHours(),C=o._activeDate.getMinutes(),k=g._date;if(!o.checkEvent("onBeforeChange")||o.callEvent("onBeforeChange",[new Date(g._date.getFullYear(),g._date.getMonth(),g._date.getDate(),D,C)])){if(o._activeDateCell!=null){o._activeDateCell._css_date=!1,o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w)}var j=o._activeDate.getFullYear()+"_"+o._activeDate.getMonth()!=k.getFullYear()+"_"+k.getMonth();o._nullDate=!1;o._activeDate=new Date(k.getFullYear(),k.getMonth(),k.getDate(),D,C);o._activeDateCell=g;o._activeDateCell._css_date=!0;o._activeDateCell._css_hover=!1;o._updateCellStyle(o._activeDateCell._q,o._activeDateCell._w);j&&o._drawMonth(o._activeDate);if(o._activeInp&&o.i[o._activeInp]&&o.i[o._activeInp].input!=null){o.i[o._activeInp].input.value=o._dateToStr(new Date(o._activeDate.getTime()))}o._hasParent||o._hide();o.callEvent("onClick",[new Date(o._activeDate.getTime())])}}};this.contDates.onmouseover=function(d){var d=d||event,c=d.target||d.srcElement;if(c.parentNode!=null&&c.parentNode._date!=null){c=c.parentNode}if(c._date!=null&&!(o._lastHover==c||c._css_hover)){c._css_hover=!0,o._updateCellStyle(c._q,c._w),o._lastHover=c,o.callEvent("onMouseOver",[new Date(c._date.getFullYear(),c._date.getMonth(),c._date.getDate(),0,0,0,0),d]),c=null}};this.contDates.onmouseout=function(b){o._clearDayHover(b||event)};this._lastHover=null;this._clearDayHover=function(b){if(this._lastHover){this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),o.callEvent("onMouseOut",[new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),b]),this._lastHover=null}};for(v=0;v<6;v++){u=document.createElement("UL");u.className="dhtmlxcalendar_line";this.contDates.appendChild(u);for(var n=0;n<=7;n++){s=document.createElement("LI"),s.className=n==0?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",u.appendChild(s)}}this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.base.firstChild.appendChild(this.contTime);var m=document.createElement("DIV");m.className="dhtmlxcalendar_bottom";this.base.firstChild.appendChild(m);m=null;this.showTime=function(){this.contTime.style.display="";this._ifrSize()};this.hideTime=function(){this.contTime.style.display="none";this._ifrSize()};u=document.createElement("UL");u.className="dhtmlxcalendar_line";this.contTime.appendChild(u);s=document.createElement("LI");s.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";s.innerHTML="<div class='dhtmlxcalendar_time_label'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'>:</span><span class='dhtmlxcalendar_label_minutes'></span>";u.appendChild(s);s.onclick=function(g){var g=g||event,f=g.target||g.srcElement;if(f.tagName!=null&&f.tagName.toLowerCase()=="span"&&f._par==!0&&f.parentNode!=null){f=f.parentNode}if(f.className&&f.className=="dhtmlxcalendar_label_hours"){g.cancelBubble=!0,o._showSelector("hours",3,115,"selector_hours",!0)}else{if(f.className&&f.className=="dhtmlxcalendar_label_minutes"){g.cancelBubble=!0;var k=59,j=115;if(o._minutesInterval==1){var h=o.getFormatedDate("%i");f.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+h.charAt(0)+"</span>"+h.charAt(1);f.firstChild._par=!0;o._selectorMode=1;j=149}o._minutesInterval==10&&(j=149);o._minutesInterval==15&&(k=46,j=165);o._showSelector("minutes",k,j,"selector_minutes",!0)}else{o._hideSelector()}}};this._activeMonth=null;this._activeDate=new Date;this._activeDateCell=null;this.setDate=function(d){this._nullDate=typeof d=="undefined"||d===""||!d;d instanceof Date||(d=this._strToDate(String(d||"")),d=="Invalid Date"&&(d=new Date));var c=d.getTime();if(!this._isOutOfRange(c)){this._activeDate=new Date(c),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes()}};this.getDate=function(d){if(this._nullDate){return null}var c=new Date(this._activeDate.getTime());return d?this._dateToStr(c):c};this._drawMonth=function(S){if(S instanceof Date){isNaN(S.getFullYear())&&(S=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0));this._activeMonth=new Date(S.getFullYear(),S.getMonth(),1,0,0,0,0);this._activeDateCell=null;var Q=new Date(this._activeMonth.getTime()),O=Q.getDay(),L=O-this._wStart;L<0&&(L+=7);Q.setDate(Q.getDate()-L);for(var K=S.getMonth(),J=(new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0)).getTime(),I=0,H=0;H<6;H++){for(var F=this._wStart,E=0;E<=7;E++){if(E==0){var D=this.getWeekNumber(new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+I,0,0,0,0));this.contDates.childNodes[H].childNodes[E].innerHTML="<div class='dhtmlxcalendar_label'>"+D+"</div>"}else{var T=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()+I,0,0,0,0),P=T.getDay(),N=T.getTime(),C="dhtmlxcalendar_label";this._tipData[N]!=null?(this._tipData[N].usePopup&&typeof window.dhtmlXPopup=="function"?(this.contDates.childNodes[H].childNodes[E].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[H].childNodes[E].setAttribute("title",this._tipData[N].text),this._tipData[N].showIcon&&(C+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[H].childNodes[E].removeAttribute("title");this.contDates.childNodes[H].childNodes[E].innerHTML="<div class='"+C+"'>"+T.getDate()+"</div>";this.contDates.childNodes[H].childNodes[E]._date=new Date(N);this.contDates.childNodes[H].childNodes[E]._q=H;this.contDates.childNodes[H].childNodes[E]._w=E;this.contDates.childNodes[H].childNodes[E]._css_month=T.getMonth()==K;this.contDates.childNodes[H].childNodes[E]._css_date=!this._nullDate&&N==J;this.contDates.childNodes[H].childNodes[E]._css_weekend=F>=6;this.contDates.childNodes[H].childNodes[E]._css_dis=this._isOutOfRange(N);this.contDates.childNodes[H].childNodes[E]._css_holiday=this._holidays[N]==!0;this._updateCellStyle(H,E);if(N==J){this._activeDateCell=this.contDates.childNodes[H].childNodes[E]}++F>7&&(F=1);I++}}}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this.langData[this.lang].monthesFNames[S.getMonth()];this.contMonth.firstChild.firstChild.childNodes[2].innerHTML=S.getFullYear()}};this._updateCellStyle=function(f,e){var h=this.contDates.childNodes[f].childNodes[e],g="dhtmlxcalendar_cell dhtmlxcalendar_cell";g+=h._css_month?"_month":"";g+=h._css_date?"_date":"";g+=h._css_weekend?"_weekend":"";g+=h._css_holiday?"_holiday":"";g+=h._css_dis?"_dis":"";g+=h._css_hover&&!h._css_dis?"_hover":"";h.className=g;h=null};this._minutesInterval=5;this._initSelector=function(L,K){if(!this._selCover){this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)}if(!this._sel){this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(b){b=b||event;b.cancelBubble=!0;o._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(b){b=b||event;b.cancelBubble=!0;o._scrollYears(1)},this._sel._ta={},this._selHover=null,this._sel.onmouseover=function(d){var d=d||event,c=d.target||d.srcElement;if(c._cell===!0&&(o._selHover!=c&&o._clearSelHover(),String(c.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null)){c.className+=" dhtmlxcalendar_selector_cell_hover",o._selHover=c}},this._sel.onmouseout=function(){o._clearSelHover()},this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"}if(this._sel._ta[L]!=!0){if(L=="month"){this._msCells={};this.msCont=document.createElement("DIV");this.msCont.className="dhtmlxcalendar_area_"+K;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var J=0,I=0;I<4;I++){var H=document.createElement("UL");H.className="dhtmlxcalendar_selector_line";this.msCont.appendChild(H);for(var F=0;F<3;F++){var E=document.createElement("LI");E.innerHTML=this.langData[this.lang].monthesSNames[J];E.className="dhtmlxcalendar_selector_cell";H.appendChild(E);E._month=J;E._cell=!0;this._msCells[J++]=E}}this.msCont.onclick=function(d){d=d||event;d.cancelBubble=!0;var c=d.target||d.srcElement;c._month!=null&&(o._hideSelector(),o._updateActiveMonth(),o._drawMonth(new Date(o._activeMonth.getFullYear(),c._month,1,0,0,0,0)),o._doOnSelectorChange())}}if(L=="year"){this._ysCells={};this.ysCont=document.createElement("DIV");this.ysCont.className="dhtmlxcalendar_area_"+K;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(I=0;I<4;I++){H=document.createElement("UL");H.className="dhtmlxcalendar_selector_line";this.ysCont.appendChild(H);for(F=0;F<3;F++){E=document.createElement("LI"),E.className="dhtmlxcalendar_selector_cell",E._cell=!0,H.appendChild(E)}}this.ysCont.onclick=function(d){d=d||event;d.cancelBubble=!0;var c=d.target||d.srcElement;c._year!=null&&(o._hideSelector(),o._drawMonth(new Date(c._year,o._activeMonth.getMonth(),1,0,0,0,0)),o._doOnSelectorChange())}}if(L=="hours"){this._hsCells={};this.hsCont=document.createElement("DIV");this.hsCont.className="dhtmlxcalendar_area_"+K;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(I=J=0;I<4;I++){H=document.createElement("UL");H.className="dhtmlxcalendar_selector_line";this.hsCont.appendChild(H);for(F=0;F<6;F++){E=document.createElement("LI"),E.innerHTML=this._fixLength(J,2),E.className="dhtmlxcalendar_selector_cell",H.appendChild(E),E._hours=J,E._cell=!0,this._hsCells[J++]=E}}this.hsCont.onclick=function(d){d=d||event;d.cancelBubble=!0;var c=d.target||d.srcElement;c._hours!=null&&(o._hideSelector(),o._activeDate.setHours(c._hours),o._updateActiveHours(),o._updateVisibleHours(),o._doOnSelectorChange())}}if(L=="minutes"){var D=4,C=3,h=2;this._minutesInterval==1&&(this._selectorMode==1?(D=2,C=3,h=1):(D=2,C=5,h=1,K+="5"));this._minutesInterval==10&&(D=2);this._minutesInterval==15&&(D=1,C=4,K+="4");this._rsCells={};this.rsCont=document.createElement("DIV");this.rsCont.className="dhtmlxcalendar_area_"+K;this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(I=J=0;I<D;I++){H=document.createElement("UL");H.className="dhtmlxcalendar_selector_line";this.rsCont.appendChild(H);for(F=0;F<C;F++){E=document.createElement("LI"),E.innerHTML=h>1?this._fixLength(J,h):J,E.className="dhtmlxcalendar_selector_cell",H.appendChild(E),E._minutes=J,E._cell=!0,this._rsCells[J]=E,J+=this._minutesInterval}}this.rsCont.onclick=function(e){e=e||event;e.cancelBubble=!0;var d=e.target||e.srcElement;if(d._minutes!=null){if(o._minutesInterval==1){var f=o.getFormatedDate("%i"),f=o._selectorMode==1?d._minutes.toString()+f.charAt(1):f.charAt(0)+d._minutes.toString();o._activeDate.setMinutes(Number(f));o._hideSelector();if(o._selectorMode==1){o._updateVisibleMinutes(!0);o._selectorMode=2;o._showSelector("minutes",32,149,"selector_minutes",!0);o._updateActiveMinutes();return}else{o._selectorMode=1}}else{o._hideSelector(),o._activeDate.setMinutes(d._minutes),o._updateActiveMinutes()}o._updateVisibleMinutes();o._doOnSelectorChange()}}}this._sel._ta[L]=!0}};this._showSelector=function(g,f,k,j,h){h===!0&&this._sel!=null&&this._isSelectorVisible()&&g==this._sel._t?this._hideSelector():(this.skin=="dhx_terrace"&&(f+={month:14,year:27,hours:19,minutes:24}[g],k+={month:8,year:8,hours:14,minutes:14}[g]),(!this._sel||!this._sel._ta[g])&&this._initSelector(g,j),this._selCover.style.display="",this._sel._t=g,this._sel.style.left=f+"px",this._sel.style.top=k+"px",this._sel.style.display="",this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+j,this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=g=="year"?"":"none",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._doOnSelectorShow(g))};this._doOnSelectorShow=function(b){b=="month"&&this._updateActiveMonth();b=="year"&&this._updateYearsList(this._activeMonth);b=="hours"&&this._updateActiveHours();b=="minutes"&&this._updateActiveMinutes()};this._hideSelector=function(){if(this._sel&&(this._sel.style.display="none",this._selCover.style.display="none",this._sel._t=="minutes"&&this._minutesInterval==1)){this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")}};this._isSelectorVisible=function(){return !this._sel?!1:this._sel.style.display!="none"};this._doOnSelectorChange=function(b){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),b===!0])};this._clearSelHover=function(){if(this._selHover){this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null}};this._unloadSelector=function(d){if(this._sel&&this._sel._ta[d]){if(d=="month"){this._msActive=this.msCont.onclick=null;for(var c in this._msCells){this._msCells[c]._cell=null,this._msCells[c]._month=null,this._msCells[c].parentNode.removeChild(this._msCells[c]),this._msCells[c]=null}for(this._msCells=null;this.msCont.childNodes.length>0;){this.msCont.removeChild(this.msCont.lastChild)}this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(d=="year"){this.ysCont.onclick=null;for(c in this._ysCells){this._ysCells[c]._cell=null,this._ysCells[c]._year=null,this._ysCells[c].parentNode.removeChild(this._ysCells[c]),this._ysCells[c]=null}for(this._ysCells=null;this.ysCont.childNodes.length>0;){this.ysCont.removeChild(this.ysCont.lastChild)}this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(d=="hours"){this._hsActive=this.hsCont.onclick=null;for(c in this._hsCells){this._hsCells[c]._cell=null,this._hsCells[c]._hours=null,this._hsCells[c].parentNode.removeChild(this._hsCells[c]),this._hsCells[c]=null}for(this._hsCells=null;this.hsCont.childNodes.length>0;){this.hsCont.removeChild(this.hsCont.lastChild)}this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(d=="minutes"){this._rsActive=this.rsCont.onclick=null;for(c in this._rsCells){this._rsCells[c]._cell=null,this._rsCells[c]._minutes=null,this._rsCells[c].parentNode.removeChild(this._rsCells[c]),this._rsCells[c]=null}for(this._rsCells=null;this.rsCont.childNodes.length>0;){this.rsCont.removeChild(this.rsCont.lastChild)}this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[d]=null}};this.setMinutesInterval=function(b){if(b==1||b==5||b==10||b==15){this._minutesInterval=b,this._unloadSelector("minutes")}};this._updateActiveMonth=function(){if(typeof this._msActive!="undefined"&&typeof this._msCells[this._msActive]!="undefined"){this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"}this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var b=this._activeMonth.getFullYear();if(this._ysCells[b]){this._ysCells[b].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateYearsList=function(g){for(var f in this._ysCells){this._ysCells[f]=null,delete this._ysCells[f]}for(var k=12*Math.floor(g.getFullYear()/12),j=0;j<4;j++){for(var h=0;h<3;h++){this.ysCont.childNodes[j].childNodes[h].innerHTML=k,this.ysCont.childNodes[j].childNodes[h]._year=k,this.ysCont.childNodes[j].childNodes[h].className="dhtmlxcalendar_selector_cell",this._ysCells[k++]=this.ysCont.childNodes[j].childNodes[h]}}this._updateActiveYear()};this._scrollYears=function(e){var d=(e<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+e,f=new Date(d,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(f)};this._updateActiveHours=function(){if(typeof this._hsActive!="undefined"&&typeof this._hsCells[this._hsActive]!="undefined"){this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"}this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){if(this._rsActive!=null&&typeof this._rsActive!="undefined"&&typeof this._rsCells[this._rsActive]!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"}this._rsActive=this._minutesInterval==1?this.getFormatedDate("%i").toString().charAt(this._selectorMode==1?0:1):this._activeDate.getMinutes();if(typeof this._rsCells[this._rsActive]!="undefined"){this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"}};this._updateVisibleMinutes=function(d){var c=this._fixLength(this._activeDate.getMinutes(),2).toString();d==!0&&(c=c.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+c.charAt(1)+"</span>");this.contTime.firstChild.firstChild.childNodes[3].innerHTML=c;if(d==!0){this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0}};this._fixLength=function(d,c){for(;String(d).length<c;){d="0"+String(d)}return d};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(b){this._dateFormat=b;this._dateFormatRE=RegExp(String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(d){var c=d.replace(/%/,"");switch(c){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+o.langData[o.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+o.langData[o.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM"}return d}),"i")};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._getInd=function(e,d){for(var f=0;f<d.length;f++){if(d[f].toLowerCase()==e){return f}}return -1};this._strToDate=function(N,L){var L=L||this._dateFormat,J=N.match(/[a-z0-9\u00e9\u00fb\u00e4\u0430-\u044F\u0451]{1,}/gi),I=L.match(/%[a-zA-Z]/g);if(!J||J.length!=I.length){return"Invalid Date"}for(var H={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7},F={},E={},D=0;D<I.length;D++){if(typeof H[I[D]]!="undefined"){var C=H[I[D]];F[C]||(F[C]=[],E[C]=[]);F[C].push(J[D]);E[C].push(I[D])}}J=[];I=[];for(D=1;D<=7;D++){if(F[D]!=null){for(var h=0;h<F[D].length;h++){J.push(F[D][h]),I.push(E[D][h])}}}var P=new Date;P.setDate(1);P.setMinutes(0);P.setSeconds(0);for(D=0;D<J.length;D++){switch(I[D]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":if(!isNaN(J[D])){P[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds"}[I[D]]](Number(J[D])+(I[D]=="%m"||I[D]=="%n"?-1:0))}break;case"%M":case"%F":var O=this._getInd(J[D].toLowerCase(),o.langData[o.lang][{"%M":"monthesSNames","%F":"monthesFNames"}[I[D]]]);O>=0&&P.setMonth(O);break;case"%y":if(!isNaN(J[D])){var K=Number(J[D]);P.setFullYear(K+(K>50?1900:2000))}break;case"%g":case"%h":isNaN(J[D])||(K=Number(J[D]),K<=12&&K>=0&&P.setHours(K+(this._getInd("pm",J)>=0?K==12?0:12:K==12?-12:0)))}}return P};this._dateToStr=function(g,f){if(g instanceof Date){var k=function(b){return String(b).length==1?"0"+String(b):b},j=function(a){switch(a){case"%d":return k(g.getDate());case"%j":return g.getDate();case"%D":return o.langData[o.lang].daysSNames[g.getDay()];case"%l":return o.langData[o.lang].daysFNames[g.getDay()];case"%m":return k(g.getMonth()+1);case"%n":return g.getMonth()+1;case"%M":return o.langData[o.lang].monthesSNames[g.getMonth()];case"%F":return o.langData[o.lang].monthesFNames[g.getMonth()];case"%y":return k(g.getYear()%100);case"%Y":return g.getFullYear();case"%g":return(g.getHours()+11)%12+1;case"%h":return k((g.getHours()+11)%12+1);case"%G":return g.getHours();case"%H":return k(g.getHours());case"%i":return k(g.getMinutes());case"%s":return k(g.getSeconds());case"%a":return g.getHours()>11?"pm":"am";case"%A":return g.getHours()>11?"PM":"AM";default:return a}},h=String(f||this._dateFormat).replace(/%[a-zA-Z]/g,j)}return h||String(g)};this._updateDateStr=function(d){if(this._dateFormatRE&&d.match(this._dateFormatRE)&&d!=this.getFormatedDate()){var c=this._strToDate(d);if(c instanceof Date){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())])){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}}else{this._nullDate=!1,this._activeDate=c,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)}}}};this.showMonth=function(b){typeof b=="string"&&(b=this._strToDate(b));b instanceof Date&&this._drawMonth(b)};this.setFormatedDate=function(g,f,k,j){var h=this._strToDate(f,g);if(j){return h}this.setDate(h)};this.getFormatedDate=function(d,c){if(!(c&&c instanceof Date)){if(this._nullDate){return""}c=new Date(this._activeDate)}return this._dateToStr(c,d)};this.getWeekNumber=function(O){typeof O=="string"&&(O=this._strToDate(O));if(!(O instanceof Date)){return"Invalid Date"}if(typeof this._ftDay=="undefined"){this._ftDay=4}var N=this._wStart,L=N+7,K=4,J=new Date(O.getFullYear(),0,1,0,0,0,0),I=J.getDay();I==0&&(I=7);K<N&&(K+=7,I+=7);var H=0;I>=N&&I<=K||(H=1);var F=I-N,E=new Date(O.getFullYear(),0,1-F+H*7,0,0,0,0),D=604800000,C=new Date(O.getFullYear(),O.getMonth(),O.getDate()+1,0,0,0,0),P=Math.ceil((C.getTime()-E.getTime())/D);return P};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(d){if(!d&&this._hasParent){this._show()}else{if(typeof d=="object"&&typeof d._dhtmlxcalendar_uid!="undefined"&&this.i[d._dhtmlxcalendar_uid]==d){this._show(d._dhtmlxcalendar_uid)}else{if(typeof d=="undefined"){for(var c in this.i){d||(d=c)}}d&&this._show(d)}}};this.hide=function(){this._isVisible()&&this._hide()};this.isVisible=function(){return this._isVisible()};this.draw=function(){this.show()};this.close=function(){this.hide()};this._activeInp=null;this.pos="bottom";this.setPosition=function(d,c){this._py=this._px=null;if(d=="right"||d=="bottom"){this.pos=d}else{this.pos="int";if(typeof d!="undefined"&&!isNaN(d)){this.base.style.left=d+"px",this._px=d}if(typeof c!="undefined"&&!isNaN(c)){this.base.style.top=c+"px",this._py=c}this._ifrSize()}};this._show=function(h,g){if(g===!0&&this._activeInp==h&&this._isVisible()){this._hide()}else{this.base.style.visibility="hidden";this.base.style.display="";if(h){var D=this.i[h].input||this.i[h].button,C=navigator.appVersion.indexOf("MSIE")!=-1,k=Math.max((C?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),j=k+(C?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight);this.pos=="right"?(this.base.style.left=this._getLeft(D)+D.offsetWidth-1+"px",this.base.style.top=Math.min(this._getTop(D),j-this.base.offsetHeight)+"px"):this.pos=="bottom"?(this.base.style.left=this._getLeft(D)+"px",this.base.style.top=this._getTop(D)+D.offsetHeight+1+"px"):(this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px");this._activeInp=h;D=null}else{this._px&&this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px")}this._hideSelector();this.base.style.visibility="visible";this._ifrSize();if(this._ifr){this._ifr.style.display=""}this.callEvent("onShow",[])}};this._hide=function(){this._hideSelector();this.base.style.display="none";this._activeInp=null;if(this._ifr){this._ifr.style.display="none"}this.callEvent("onHide",[])};this._isVisible=function(){return this.base.style.display!="none"};this._getLeft=function(b){return this._posGetOffset(b).left};this._getTop=function(b){return this._posGetOffset(b).top};this._posGetOffsetSum=function(e){for(var d=0,f=0;e;){d+=parseInt(e.offsetTop),f+=parseInt(e.offsetLeft),e=e.offsetParent}return{top:d,left:f}};this._posGetOffsetRect=function(L){var K=L.getBoundingClientRect(),J=document.body,I=document.documentElement,H=window.pageYOffset||I.scrollTop||J.scrollTop,F=window.pageXOffset||I.scrollLeft||J.scrollLeft,E=I.clientTop||J.clientTop||0,D=I.clientLeft||J.clientLeft||0,C=K.top+H-E,k=K.left+F-D;return{top:Math.round(C),left:Math.round(k)}};this._posGetOffset=function(b){return this[b.getBoundingClientRect?"_posGetOffsetRect":"_posGetOffsetSum"](b)};this._rangeActive=!1;this._rangeTo=this._rangeFrom=null;this._rangeSet={};this.setInsensitiveDays=function(e){for(var d=this._extractDates(e),f=0;f<d.length;f++){this._rangeSet[(new Date(d[f].getFullYear(),d[f].getMonth(),d[f].getDate(),0,0,0,0)).getTime()]=!0}this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(e){if(e==null){this._clearHolidays()}else{if(e!=null){for(var d=this._extractDates(e),f=0;f<d.length;f++){this._holidays[(new Date(d[f].getFullYear(),d[f].getMonth(),d[f].getDate(),0,0,0,0)).getTime()]=!0}}}this._drawMonth(this._activeMonth)};this._extractDates=function(g){if(typeof g=="string"||g instanceof Date){g=[g]}for(var f=[],k=0;k<g.length;k++){if(typeof g[k]=="string"){for(var j=g[k].split(","),h=0;h<j.length;h++){f.push(this._strToDate(j[h]))}}else{g[k] instanceof Date&&f.push(g[k])}}return f};this._clearRange=function(){this._rangeActive=!1;this._rangeTo=this._rangeFrom=this._rangeType=null};this._clearRangeSet=function(){for(var b in this._rangeSet){this._rangeSet[b]=null,delete this._rangeSet[b]}};this._clearHolidays=function(){for(var b in this._holidays){this._holidays[b]=null,delete this._holidays[b]}};this._isOutOfRange=function(d){if(this._rangeSet[d]==!0){return !0}if(this._rangeActive){if(this._rangeType=="in"&&(d<this._rangeFrom||d>this._rangeTo)){return !0}if(this._rangeType=="out"&&d>=this._rangeFrom&&d<=this._rangeTo){return !0}if(this._rangeType=="from"&&d<this._rangeFrom){return !0}if(this._rangeType=="to"&&d>this._rangeTo){return !0}}var c=new Date(d);return this._rangeWeek&&this._rangeWeekData[c.getDay()]===!0?!0:this._rangeMonth&&this._rangeMonthData[c.getDate()]===!0?!0:this._rangeYear&&this._rangeYearData[c.getMonth()+"_"+c.getDate()]===!0?!0:!1};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(f,e,h){var g=!1;if(f!=null&&e!=null){f instanceof Date||(f=this._strToDate(f));e instanceof Date||(e=this._strToDate(e));if(f.getTime()>e.getTime()){return}this._rangeFrom=(new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0,0)).getTime();this._rangeTo=(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)).getTime();this._rangeActive=!0;this._rangeType="in";g=!0}if(!g&&f!=null&&e==null){f instanceof Date||(f=this._strToDate(f)),this._rangeFrom=(new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0,0)).getTime(),this._rangeTo=null,h===!0&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",g=!0}if(!g&&f==null&&e!=null){e instanceof Date||(e=this._strToDate(e)),this._rangeFrom=null,this._rangeTo=(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0)).getTime(),h===!0&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",g=!0}g&&this._drawMonth(this._activeMonth)};this.setInsensitiveRange=function(d,c){if(d!=null&&c!=null){if(d instanceof Date||(d=this._strToDate(d)),c instanceof Date||(c=this._strToDate(c)),!(d.getTime()>c.getTime())){this._rangeFrom=(new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0)).getTime(),this._rangeTo=(new Date(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0,0)).getTime(),this._rangeActive=!0,this._rangeType="out",this._drawMonth(this._activeMonth)}}else{d!=null&&c==null?this.setSensitiveRange(null,d,!0):d==null&&c!=null&&this.setSensitiveRange(c,null,!0)}};this.disableDays=function(g,f){if(g=="week"){typeof f!="object"&&typeof f.length=="undefined"&&(f=[f]);if(!this._rangeWeekData){this._rangeWeekData={}}for(var k in this._rangeWeekData){this._rangeWeekData[k]=!1,delete this._rangeWeekData[k]}for(var j=0;j<f.length;j++){this._rangeWeekData[f[j]]=!0,f[j]==7&&(this._rangeWeekData[0]=!0)}this._rangeWeek=!0}if(g=="month"){typeof f!="object"&&typeof f.length=="undefined"&&(f=[f]);if(!this._rangeMonthData){this._rangeMonthData={}}for(k in this._rangeMonthData){this._rangeMonthData[k]=!1,delete this._rangeMonthData[k]}for(j=0;j<f.length;j++){this._rangeMonthData[f[j]]=!0}this._rangeMonth=!0}if(g=="year"){var h=this._extractDates(f);if(!this._rangeYearData){this._rangeYearData={}}for(k in this._rangeYearData){this._rangeYearData[k]=!1,delete this._rangeYearData[k]}for(j=0;j<h.length;j++){this._rangeYearData[h[j].getMonth()+"_"+h[j].getDate()]=!0}this._rangeYear=!0}this._drawMonth(this._activeMonth)};this.enableDays=function(b){if(b=="week"){this._rangeWeek=!1}if(b=="month"){this._rangeMonth=!1}if(b=="year"){this._rangeYear=!1}this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=!1;this._tipCellDim=this._tipCellDate=this._tipPopup=null;this.setTooltip=function(j,h,F,E){for(var D=this._extractDates(j),C=0;C<D.length;C++){var k=(new Date(D[C].getFullYear(),D[C].getMonth(),D[C].getDate(),0,0,0,0)).getTime();this._tipData[k]={text:h,showIcon:F,usePopup:E}}this._drawMonth(this._activeMonth)};this.clearTooltip=function(f){for(var e=this._extractDates(f),h=0;h<e.length;h++){var g=(new Date(e[h].getFullYear(),e[h].getMonth(),e[h].getDate(),0,0,0,0)).getTime();this._tipData[g]=null;delete this._tipData[g]}this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){if(!this._tipEvs){this.attachEvent("onMouseOver",function(d){var c=(new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0)).getTime();if(this._tipData[c]!=null){this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=d,this._tipCellDim=this.getCellDimension(d),this._tipText=this._tipData[c].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime)}}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0}};this._showTooltipPopup=function(){if(!o._tipPopup){o._tipPopup=new dhtmlXPopup({mode:"top"})}o._tipPopup.attachHTML(o._tipText);o._tipPopup.show(o._tipCellDim.x,o._tipCellDim.y,o._tipCellDim.w,o._tipCellDim.h);o.callEvent("onPopupShow",[o._tipCellDate])};this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM);this._tipPopup!=null&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(h){typeof h=="string"&&(h=this._strToDate(h));if(!(h instanceof Date)){return null}for(var g=(new Date(h.getFullYear(),h.getMonth(),h.getDate(),0,0,0,0)).getTime(),D=null,C=0;C<this.contDates.childNodes.length;C++){for(var k=0;k<this.contDates.childNodes[C].childNodes.length;k++){var j=this.contDates.childNodes[C].childNodes[k];j._date!=null&&j._date.getTime()==g&&(D={x:this._getLeft(j),y:this._getTop(j),w:j.offsetWidth,h:j.offsetHeight});j=null}}return D};this._updateFromInput=function(b){if(this._nullInInput&&b.value.replace(/\s/g,"").length==0){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null])){if(this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null){this.i[this._activeInp].input.value=this.getFormatedDate()}return}this.setDate(null)}else{this._updateDateStr(b.value)}b=null};this._doOnClick=function(d){var d=d||event,c=d.target||d.srcElement;if(c._dhtmlxcalendar_uid&&c._dhtmlxcalendar_uid!=o._activeInp&&o._isVisible()&&o._activeInp){o._hide()}else{if(!c._dhtmlxcalendar_uid||!o.i[c._dhtmlxcalendar_uid]){o._isSelectorVisible()?o._hideSelector():!o._hasParent&&o._isVisible()&&o._hide()}}};this._doOnKeyDown=function(b){b=b||event;if(b.keyCode==27||b.keyCode==13){o._isSelectorVisible()?o._hideSelector():o._isVisible()&&!o._hasParent&&o._hide()}};this._doOnInpClick=function(d){var d=d||event,c=d.target||d.srcElement;c._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(c),o._show(c._dhtmlxcalendar_uid,!0))};this._doOnInpKeyUp=function(d){var d=d||event,c=d.target||d.srcElement;d.keyCode!=13&&c._dhtmlxcalendar_uid&&(o._listenerEnabled||o._updateFromInput(c))};this._doOnBtnClick=function(d){var d=d||event,c=d.target||d.srcElement;c._dhtmlxcalendar_uid&&(o.i[c._dhtmlxcalendar_uid].input!=null&&o._updateFromInput(o.i[c._dhtmlxcalendar_uid].input),o._show(c._dhtmlxcalendar_uid,!0))};this._doOnUnload=function(){o&&o.unload&&o.unload()};window.addEventListener?(document.body.addEventListener("click",o._doOnClick,!1),window.addEventListener("keydown",o._doOnKeyDown,!1),window.addEventListener("unload",o._doOnUnload,!1)):(document.body.attachEvent("onclick",o._doOnClick),document.body.attachEvent("onkeydown",o._doOnKeyDown),window.attachEvent("onunload",o._doOnUnload));this.attachObj=function(d){typeof d=="string"&&(d=document.getElementById(d));var c=this.uid();this.i[c]=d;this._attachEventsToObject(c)};this.detachObj=function(d){typeof d=="string"&&(d=document.getElementById(d));var c=d._dhtmlxcalendar_uid;if(this.i[c]!=null){this._detachEventsFromObject(c),this.i[c]._dhtmlxcalendar_uid=null,this.i[c]=null,delete this.i[c]}};this._attachEventsToObject=function(b){if(this.i[b].button!=null){this.i[b].button._dhtmlxcalendar_uid=b,window.addEventListener?this.i[b].button.addEventListener("click",o._doOnBtnClick,!1):this.i[b].button.attachEvent("onclick",o._doOnBtnClick)}else{if(this.i[b].input!=null){this.i[b].input._dhtmlxcalendar_uid=b,window.addEventListener?(this.i[b].input.addEventListener("click",o._doOnInpClick,!1),this.i[b].input.addEventListener("keyup",o._doOnInpKeyUp,!1)):(this.i[b].input.attachEvent("onclick",o._doOnInpClick),this.i[b].input.attachEvent("onkeyup",o._doOnInpKeyUp))}}};this.enableListener=function(b){b&&(window.addEventListener?(b.addEventListener("focus",o._listenerEvFocus,!1),b.addEventListener("blur",o._listenerEvBlur,!1)):(b.attachEvent("onfocus",o._listenerEvFocus),b.attachEvent("onblur",o._listenerEvBlur)),b=null)};this.disableListener=function(b){if(b){b._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),window.addEventListener?(b.removeEventListener("focus",o._listenerEvFocus,!1),b.removeEventListener("blur",o._listenerEvBlur,!1)):(b.detachEvent("onfocus",o._listenerEvFocus),b.detachEvent("onblur",o._listenerEvBlur)),b=null}};this._startListener=function(b){this._tmListener&&window.clearTimeout(this._tmListener);if(typeof b._v1=="undefined"){b._v1=b.value}if(b._v1!=b.value){this._updateFromInput(b),b._v1=b.value}if(b._f0){this._tmListener=window.setTimeout(function(){o._startListener(b)},100)}};this._listenerEvFocus=function(d){var d=d||event,c=d.target||d.srcElement;c._f0=!0;o._startListener(c);c=null};this._listenerEvBlur=function(d){var d=d||event,c=d.target||d.srcElement;c._f0=!1;c=null};this._detachEventsFromObject=function(b){this.i[b].button!=null?window.addEventListener?this.i[b].button.removeEventListener("click",o._doOnBtnClick,!1):this.i[b].button.detachEvent("onclick",o._doOnBtnClick):this.i[b].input!=null&&(window.addEventListener?(this.i[b].input.removeEventListener("click",o._doOnInpClick,!1),this.i[b].input.removeEventListener("keyup",o._doOnInpKeyUp,!1)):(this.i[b].input.detachEvent("onclick",o._doOnInpClick),this.i[b].input.detachEvent("onkeyup",o._doOnInpKeyUp)))};for(var l in this.i){this._attachEventsToObject(l)}this.evs={};this.attachEvent=function(e,d){var f=this.uid();this.evs[f]={name:String(e).toLowerCase(),func:d};return f};this.detachEvent=function(b){if(this.evs[b]){this.evs[b].name=null,this.evs[b].func=null,this.evs[b]=null,delete this.evs[b]}};this.callEvent=function(h,g){var D=!0,C=String(h).toLowerCase(),g=g||[],k;for(k in this.evs){if(this.evs[k].name==C){var j=this.evs[k].func.apply(this,g),D=D&&j}}return D};this.checkEvent=function(f){var e=!1,h=String(f).toLowerCase(),g;for(g in this.evs){e=e||this.evs[g].name==h}return e};this.unload=function(){this.uidd=this.uid=this._lastHover=this._dateFormatRE=this._dateFormat=this._activeMonth=this._activeInp=this._activeDateCell=this._activeDate=null;this._tmListener&&window.clearTimeout(this._tmListener);this._tmListener=null;window.addEventListener?(document.body.removeEventListener("click",o._doOnClick,!1),window.removeEventListener("keydown",o._doOnKeyDown,!1),window.removeEventListener("unload",o._doOnUnload,!1)):(document.body.detachEvent("onclick",o._doOnClick),document.body.detachEvent("onkeydown",o._doOnKeyDown),window.detachEvent("onunload",o._doOnKeyDown));this._doOnUnload=this._doOnKeyDown=this._doOnClick=null;for(var b in this.i){this.i[b]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(b),this.disableListener(this.i[b].input),this.i[b]=null,delete this.i[b]}this._doOnInpKeyUp=this._doOnInpClick=this.i=null;for(b in this.evs){this.detachEvent(b)}this.callEvent=this.checkEvent=this.detachEvent=this.attachEvent=this.evs=null;this.contMonth.onselectstart=null;this.contMonth.firstChild.firstChild.onclick=null;this.contMonth.firstChild.firstChild.firstChild.onmouseover=null;this.contMonth.firstChild.firstChild.firstChild.onmouseout=null;this.contMonth.firstChild.firstChild.lastChild.onmouseover=null;for(this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;){this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild)}this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild);this.contMonth.removeChild(this.contMonth.firstChild);this.contMonth.parentNode.removeChild(this.contMonth);for(this.contMonth=null;this.contDays.firstChild.childNodes.length>0;){this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild)}this.contDays.removeChild(this.contDays.firstChild);this.contDays.parentNode.removeChild(this.contDays);this.contDays=null;this.contDates.onclick=null;this.contDates.onmouseover=null;for(this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){for(;this.contDates.lastChild.childNodes.length>0;){this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild)}this.contDates.removeChild(this.contDates.lastChild)}this.contDates.parentNode.removeChild(this.contDates);this.contDates=null;for(this.contTime.firstChild.firstChild.onclick=null;this.contTime.firstChild.firstChild.childNodes.length>0;){this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild)}this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild);this.contTime.removeChild(this.contTime.firstChild);this.contTime.parentNode.removeChild(this.contTime);this._lastHover=this.contTime=null;this._unloadSelector("month");this._unloadSelector("year");this._unloadSelector("hours");this._unloadSelector("minutes");if(this._selCover){this._selCover.parentNode.removeChild(this._selCover),this._selCover=null}if(this._sel){for(b in this._sel._ta){this._sel._ta[b]=null}this._sel._ta=null;this._sel._t=null;this._sel.onmouseover=null;for(this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;){this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild)}this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild);for(this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;){this._sel.removeChild(this._sel.lastChild)}this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.unload=this.showTime=this.show=this.setYearsRange=this.setDateFormat=this.setDate=this.hideTime=this.hide=this.enableIframe=this._updateYearsList=this._updateVisibleMinutes=this._updateVisibleHours=this._updateDateStr=this._updateCellStyle=this._updateActiveYear=this._updateActiveMonth=this._updateActiveMinutes=this._updateActiveHours=this._strToDate=this._showSelector=this._show=this._scrollYears=this._posGetOffsetSum=this._posGetOffsetRect=this._posGetOffset=this._isVisible=this._isSelectorVisible=this._initSelector=this._hideSelector=this._hide=this._ifrSize=this._getTop=this._getLeft=this._fixLength=this._drawMonth=this._doOnSelectorShow=this._doOnSelectorChange=this._clearSelHover=this._clearDayHover=this.base=null;if(this._tipPopup!=null){this._tipPopup.unload(),this._tipPopup=null}for(b in this){delete this[b]}b=o=null};this.setDate(this._activeDate);return this}dhtmlXCalendarObject.prototype.setYearsRange=function(){};dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",monthesFNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthesSNames:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),daysFNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),daysSNames:"Su,Mo,Tu,We,Th,Fr,Sa".split(","),weekstart:1,weekname:"w"}};dhtmlXCalendarObject.prototype.enableIframe=function(b){if(b==!0){if(!this._ifr){this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()}}else{if(this._ifr){this._ifr.parentNode.removeChild(this._ifr),this._ifr=null}}};dhtmlXCalendarObject.prototype._ifrSize=function(){if(this._ifr){this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px"}};dhtmlxCalendarObject=dhtmlXCalendarObject;function dhtmlXColorPickerInput(x){typeof x!="object"&&(x=document.getElementById(x));var w=x,v=w.getAttribute("colorbox"),u=w.getAttribute("customcolors"),s=w.getAttribute("selectonclick"),o=w.getAttribute("fullview"),n=w.getAttribute("selectedcolor"),m=w;if(v){var l=document.createElement("DIV");l.style.width=w.offsetWidth+"px";l.style.height=w.offsetHeight+"px";w.style.width=w.offsetWidth-w.offsetHeight-2;w.parentNode.insertBefore(l,w);l.style.position="relative";m=document.createElement("DIV");l.appendChild(m);l.appendChild(w);m.className="cs_colorBox";w.className+=" cs_colorInput";m.style.width=m.style.height=w.offsetHeight-(document.all?0:2)+"px";w.style.left=w.offsetHeight+2+"px"}var k=new dhtmlXColorPicker(null,s,u,!0,o);n&&k.setColor(n);k.linkToObjects=[m,w,w];return k}function dhtmlXColorPicker(v,u,s,o,n){if(document.all){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}}this._cc=s;if(!v){v=document.createElement("DIV"),v.style.position="absolute",document.body.appendChild(v),v._dhx_remove=!0}this.container=typeof v!="object"?document.getElementById(v):v;dhtmlxEventable(this);this.skinName=dhtmlx.skin||"";this.ready=!1;this.hideOnInit=o||!1;this.linkToObjects=[];this.imgURL=dhtmlx.image_path||window.dhx_globalImgPath||"";this.hideSelfOnSelect=!0;this.hex="000000";this.h=100;this.s=0.9;this.v=0.1;this.old_sat=this.old_hue=this.b=this.g=this.r=0;this.fullview=n||!1;this.customColorsCount=!this.fullview?10:8;this.language=null;this.elements=[];this.customColors=[];this.restoreFrom=null;this.fullview?this.colorSelectW=this.colorSelectH=255:(this.colorSelectH=119,this.colorSelectW=209);this.isClickOnly=u||!1;if(window.cs_dechex==null){var l=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"];window.cs_dechex=[];for(var k=0;k<256;k++){var j=l[k>>4].toString()+l[k&15].toString();j.length<2&&(j="0"+j);window.cs_dechex[k]=j}}defLeng={langname:"en-us",labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Add to Custom Colors",btnSelect:"Select",btnCancel:"Cancel"};window.dhtmlxColorPickerObjects?window.dhtmlxColorPickerObjects[window.dhtmlxColorPickerObjects.length]=this:window.dhtmlxColorPickerObjects=[this];if(!window.dhtmlxColorPickerLangModules){window.dhtmlxColorPickerLangModules={}}window.dhtmlxColorPickerLangModules["en-us"]=defLeng;return this}dhtmlXColorPicker.prototype.generate=function(){X=document.compatMode!="BackCompat"?"X":"";if(this.fullview){b="<div class='dhtmlxcolorpicker"+(this.skinName!=""?"_"+this.skinName:"")+"' csid='cs_Content' style='display:none;'>",document.all&&this.container.style.position=="absolute"&&(b+="<iframe src='"+(this.imgURL||"")+"blank.html' style='position:absolute; top:0px; left:0px; width:320px;  height:"+(this._cc?454:407)+"px; z-index:-1;'></iframe>"),b+="<table cellpadding='0' cellspacing='0'>",b+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_top.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"top.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_top.gif);'></td></tr>",b+="<tr><td style='width:2px;background:url("+(this.imgURL||"")+"left.gif);'></td><td style='width:316px;height:"+(this._cc?446:392)+"px;background:#E6E5E5;'>",b+="<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>",b+="<tr>",b+="<td><div class='cs_SelectorDiv' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>",b+="<td><div class='cs_LumSelect' csid='cs_LumSelect'><div class='cs_LumSelectArrow' csid='cs_LumSelectArrow' style='left:16px;top:124px;'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>",b+="</tr>",b+="<tr><td style='padding-top:10px;' colspan='2'>",b+="<table class='cs_ColorArea' cellpadding='0px' cellspacing='0px'>",b+="<tr><td rowspan='3'><div class='cs_EndColor' csid='cs_EndColor'></div></td><td valign='top' style='text-align:center;width:80px;'># <input csid='cs_Hex' class='cs_Hex'></td><td>"+this.language.labelHue+":</td><td><input tabindex='1' class='cs_Input' csid='cs_InputHue' value='' /></td><td>"+this.language.labelRed+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputRed' value='' /></td></tr>",b+="<tr><td></td><td>"+this.language.labelSat+":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputSat' value='' /></td><td>"+this.language.labelGreen+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputGreen' value='' /></td></tr>",b+="<tr><td></td><td>"+this.language.labelLum+":</td><td><input tabindex='2' class='cs_Input' csid='cs_InputLum' value='' /></td><td>"+this.language.labelBlue+":</td><td><input tabindex='4' class='cs_Input' csid='cs_InputBlue' value='' /></td></tr>",this._cc&&(b+="<tr><td>",b+="<div class='cs_CustomColors' csid='cs_CustomColors'></div>",b+="</td><td></td><td colspan='4' valign='top'><input tabindex='7' class='cs_CustomColorAdd' csid='cs_CustomColorAdd' type='button' value='"+this.language.btnAddColor+"'></td></tr>"),b+="</table>",b+="</td></tr>",b+="</table>",b+="<table cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='height:49px;background:url("+(this.imgURL||"")+"buttons_panel.gif);'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='"+this.language.btnCancel+"' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='"+this.language.btnSelect+"' /></td></tr></table>"}else{var b="<div class='dhtmlxcolorpicker"+(this.skinName!=""?"_"+this.skinName:"")+"' csid='cs_Content' style='display:none;'>";document.all&&this.container.style.position=="absolute"&&(b+="<iframe src='"+(this.imgURL||"")+"blank.html' frameBorder='0' style='position:absolute; top:0px; left:0px; width:252px;  height:"+(this._cc?300:244)+"px; z-index:-1;'></iframe>");b+="<table cellpadding='0' cellspacing='0'>";b+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_top.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"top.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_top.gif);'></td></tr>";b+="<tr><td style='width:2px;background:url("+(this.imgURL||"")+"left.gif);'></td><td style='width:"+(document.all?247:243)+"px;height:"+(this._cc?281:240)+"px;'>";b+="<table class='cs_ContentTable' csid='cs_ContentTable' cellpadding='0px' cellspacing='0px'>";b+="<tr>";b+="<td><div class='cs_SelectorDiv_Mini' csid='cs_SelectorDiv'><div class='cs_SelectorVer' csid='cs_SelectorVer' style='left:100px;top:0px;'></div><div class='cs_SelectorHor' csid='cs_SelectorHor' style='left:0px;top:100px;'></div></div></td>";b+="<td><div class='cs_LumSelect_Mini' csid='cs_LumSelect'><div csid='cs_LumSelectArrow'></div><div class='cs_LumSelectLine' csid='cs_LumSelectLine' style='left:0px;top:0px;'></div></div></td>";b+="</tr>";b+="<tr><td style='padding-top:10px;' colspan='2'>";b+="<table class='cs_ColorArea_Mini' cellpadding='0px' cellspacing='0px'>";b+="<tr><td rowspan='2' valign='top' style='text-align:left;'><div class='cs_EndColor_Mini' csid='cs_EndColor' ></div></td><td>"+this.language.labelHue+":</td><td><input tabindex='1' class='cs_Input_Mini"+X+"' csid='cs_InputHue' value='' /></td><td>"+this.language.labelRed+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputRed' value='' /></td></tr>";b+="<tr><td>"+this.language.labelSat+":</td><td><input tabindex='2' class='cs_Input_Mini"+X+"' csid='cs_InputSat' value='' /></td><td>"+this.language.labelGreen+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputGreen' value='' /></td></tr>";b+="<tr><td style='vertical-align:top;width:80px;text-align:left;'># <input csid='cs_Hex' class='cs_Hex_Mini"+X+"'></td><td>"+this.language.labelLum+":</td><td><input tabindex='2' class='cs_Input_Mini"+X+"' csid='cs_InputLum' value='' /></td><td>"+this.language.labelBlue+":</td><td><input tabindex='4' class='cs_Input_Mini"+X+"' csid='cs_InputBlue' value='' /></td></tr>";this._cc&&(b+="<tr><td colspan='6'><input tabindex='7' class='cs_CustomColorAdd_Mini' csid='cs_CustomColorAdd' type='button' value='"+this.language.btnAddColor+"'></td></tr>",b+="<tr><td colspan='6'><div class='cs_CustomColors_Mini' csid='cs_CustomColors'></div></td></tr>");b+="</table>";b+="</td></tr>";b+="</table>";b+="<table class='cs_ButtonsPanel' cellpadding='0' cellspacing='0' style='width:100%;'><tr><td style='width:100%;'><input tabindex='9' class='cs_ButtonCancel' csid='cs_ButtonCancel' type='button' value='"+this.language.btnCancel+"' /><input tabindex='8' class='cs_ButtonOk' csid='cs_ButtonOk' type='button' value='"+this.language.btnSelect+"' /></td></tr></table>"}b+="</td><td style='width:2px;background:url("+(this.imgURL||"")+"right.gif);'></td></tr>";b+="<tr><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"left_bottom.gif);'></td><td style='height:2px;background:url("+(this.imgURL||"")+"bottom.gif);'></td><td style='width:2px;height:2px;background:url("+(this.imgURL||"")+"right_bottom.gif);'></td></tr>";b+="</table>";b+="</div>";this.container.style.width=this.fullview?"320px":"252px";this.container.innerHTML=b;this._initCsIdElement();this.elements.cs_SelectorDiv.style.backgroundImage=this.fullview?"url("+(this.imgURL||"")+"color.png)":"url("+(this.imgURL||"")+"colormini.png)";this.elements.cs_SelectorDiv.z=this;this.elements.cs_LumSelect.z=this;this.elements.cs_LumSelectArrow.z=this;this.z=this;this._drawLum();this._colorizeLum(this.old_hue,this.old_sat);this._initEvents();this._cc&&this._initCustomColors();this.ColorNum=0;this.restoreFromHSV();this._drawValues()};dhtmlXColorPicker.prototype._initCsIdElement=function(g){if(g==null){g=this.container}for(var f=g.childNodes,k=f.length,j=0;j<k;j++){if(f[j].nodeType==1){var h=f[j].getAttribute("csid");h!==null&&(this.elements[h]=f[j]);f[j].childNodes.length>0&&this._initCsIdElement(f[j])}}};dhtmlXColorPicker.prototype._initEvents=function(){this.elements.cs_SelectorDiv.onmousedown=this._startMoveColor;this.elements.cs_SelectorDiv.ondblclick=this.clickOk;this.elements.cs_LumSelect.onmousedown=this._startMoveLum;this.elements.cs_LumSelect.ondblclick=this.clickOk;this.elements.cs_LumSelectArrow.onmousedown=this._startMoveLum;if(this._cc){this.elements.cs_CustomColorAdd.z=this,this.elements.cs_CustomColorAdd.onclick=this.addCustomColor,this.elements.cs_CustomColorAdd.onmouseover=this.hoverButton,this.elements.cs_CustomColorAdd.onmouseout=this.normalButton}for(var d="cs_InputHue,cs_InputRed,cs_InputSat,cs_InputGreen,cs_InputLum,cs_InputBlue".split(","),c=0;c<d.length;c++){this.elements[d[c]].z=this,this.elements[d[c]].onchange=c%2?this._changeValueRGB:this._changeValueHSV}this.elements.cs_Hex.z=this;this.elements.cs_Hex.onchange=this._changeValueHEX;this.elements.cs_ButtonOk.z=this;this.elements.cs_ButtonOk.onclick=this.clickOk;this.elements.cs_ButtonOk.onmouseover=this.hoverButton;this.elements.cs_ButtonOk.onmouseout=this.normalButton;this.elements.cs_ButtonCancel.z=this;this.elements.cs_ButtonCancel.onclick=this.clickCancel;this.elements.cs_ButtonCancel.onmouseover=this.hoverButton;this.elements.cs_ButtonCancel.onmouseout=this.normalButton};dhtmlXColorPicker.prototype.resetHandlers=function(){};dhtmlXColorPicker.prototype.clickOk=function(){var d=this.z,c=d.getSelectedColor();d.callEvent("onSelect",[c[0]]);d.hideSelfOnSelect&&d.hide()};dhtmlXColorPicker.prototype.clickCancel=function(){var b=this.z;b.callEvent("onCancel",[]);this.z.hideSelfOnSelect&&this.z.hide()};dhtmlXColorPicker.prototype._setCrossPos=function(j){var h=this.z,o=h._getOffset(this.elements.cs_SelectorDiv),n=j.clientY-o[0];if(n<0){n=0}else{if(n>this.colorSelectH){n=this.colorSelectH}}var m=j.clientX-o[1];if(m<0){m=0}else{if(m>this.colorSelectW){m=this.colorSelectW}}h.elements.cs_SelectorVer.style.left=m+"px";h.elements.cs_SelectorHor.style.top=n+"px";var l=m==this.colorSelectW?0:360*m/this.colorSelectW,k=1-n/this.colorSelectH;return[l,k]};dhtmlXColorPicker.prototype._getScrollers=function(){return[document.body.scrollLeft||document.documentElement.scrollLeft,document.body.scrollTop||document.documentElement.scrollTop]};dhtmlXColorPicker.prototype._setLumPos=function(g){var f=this.z,k=f._getOffset(f.elements.cs_LumSelect),j=g.clientY-k[0]-4;j<-3&&(j=-3);j>this.colorSelectH-4&&(j=this.colorSelectH-4);f.elements.cs_LumSelectArrow.style.top=j+"px";f.elements.cs_LumSelectLine.style.top=j+4+"px";var h=(j+3)/this.colorSelectH;return h};dhtmlXColorPicker.prototype._startMoveColor=function(g){var f=this.z;g==null&&(g=event);f.elements.cs_SelectorDiv.onmousedown=null;f.b_move=document.body.onmousemove;f.b_up=document.body.onmouseup;var k=f;document.body.onmousemove=function(b){b==null&&(b=event);k._mouseMoveColor(b)};document.body.onmouseup=function(b){b==null&&(b=event);k._stopMoveColor(b);k=null};f.elements.cs_SelectorDiv.onmousemove=f._mouseMoveColor;f.elements.cs_SelectorDiv.onmouseup=f._stopMoveColor;var j=f._setCrossPos(g);f.h=j[0];f.s=j[1];var h=f._calculateColor();f._colorizeLum(h[0],h[1])};dhtmlXColorPicker.prototype._mouseMoveColor=function(f){var e=this.z;f==null&&(f=event);var h=e._setCrossPos(f);if(!e.isClickOnly){e.h=h[0];e.s=h[1];var g=e._calculateColor();e._colorizeLum(g[0],g[1])}};dhtmlXColorPicker.prototype._stopMoveColor=function(f){var e=this.z;f==null&&(f=event);e.elements.cs_SelectorDiv.onmousedown=e._startMoveColor;e.elements.cs_SelectorDiv.onmousemove=null;e.elements.cs_SelectorDiv.onmouseup=null;document.body.onmousemove=e.b_move;document.body.onmouseup=e.b_up;var h=e._setCrossPos(f);e.h=h[0];e.s=h[1];var g=e._calculateColor();e._colorizeLum(g[0],g[1])};dhtmlXColorPicker.prototype._startMoveLum=function(e){var d=this.z;e==null&&(e=event);d.elements.cs_LumSelect.onmousedown=null;d.elements.cs_LumSelectArrow.onmousedown=null;d.elements.cs_LumSelect.onmousemove=d._mouseMoveLum;d.elements.cs_LumSelect.onmouseup=d._stopMoveLum;d.b_move=document.body.onmousemove;d.b_up=document.body.onmouseup;d.b_selstart=document.body.onselectstart;var f=d;document.body.onmousemove=function(b){b==null&&(b=event);f._mouseMoveLum(b)};document.body.onmouseup=function(b){b==null&&(b=event);f._stopMoveLum(b);f=null};document.body.onselectstart=function(){return !1};d.v=d._setLumPos(e);d._calculateColor()};dhtmlXColorPicker.prototype._mouseMoveLum=function(d){var c=this.z;d==null&&(d=event);c.v=c._setLumPos(d);c.isClickOnly||c._calculateColor()};dhtmlXColorPicker.prototype._stopMoveLum=function(d){var c=this.z;d==null&&(d=event);c.elements.cs_LumSelect.onmousedown=c._startMoveLum;c.elements.cs_LumSelectArrow.onmousedown=c._startMoveLum;c.elements.cs_LumSelect.onmousemove=null;c.elements.cs_LumSelect.onmouseup=null;c.v=c._setLumPos(d);c._calculateColor();document.body.onmousemove=c.b_move;document.body.onmouseup=c.b_up;document.body.onselectstart=c.b_selstart};dhtmlXColorPicker.prototype._getOffset=function(f){var e=this._getOffsetTop(f),h=this._getOffsetLeft(f),g=this._getScrollers();return[e-g[1],h-g[0]]};dhtmlXColorPicker.prototype._getOffsetTop=function(d){var c=0;d.offsetParent&&(c+=d.offsetTop+this._getOffsetTop(d.offsetParent));return c};dhtmlXColorPicker.prototype._getOffsetLeft=function(d){var c=0;d.offsetParent&&(c+=d.offsetLeft+this._getOffsetLeft(d.offsetParent));return c};dhtmlXColorPicker.prototype._calculateColor=function(){if(this.restoreFrom=="RGB"){var b=[this.r,this.g,this.b]}else{b=this._hsv2rgb(this.h,this.s,1-this.v),this.r=b[0],this.g=b[1],this.b=b[2]}this.hex=this._getColorHEX(b);this.elements.cs_EndColor.style.backgroundColor="#"+this.hex;this._drawValues();this.restoreFrom=null;return[this.h,this.s,1-this.v]};dhtmlXColorPicker.prototype._drawValues=function(){this.elements.cs_Hex.value=this.hex;this.elements.cs_InputHue.value=Math.floor(this.h);this.elements.cs_InputSat.value=Math.floor(this.s*100);this.elements.cs_InputLum.value=Math.floor((1-this.v)*100);this.elements.cs_InputRed.value=Math.floor(this.r);this.elements.cs_InputGreen.value=Math.floor(this.g);this.elements.cs_InputBlue.value=Math.floor(this.b)};dhtmlXColorPicker.prototype.saveColor=function(g,f){var k=new Date,j=k.valueOf()+2678400000,k=new Date(j),h="color_"+f+"="+g+"; expires="+k.toGMTString();document.cookie=h};dhtmlXColorPicker.prototype.restoreColor=function(h){var g=!1,m="color_"+h;if(document.cookie.length>0){var l=document.cookie.indexOf(m+"=");if(l!=-1){var k=document.cookie.indexOf(";",l);if(k==-1){k=document.cookie.length}var j=document.cookie.indexOf("=",l)+1,g=document.cookie.substr(j,k-j)}}return g};dhtmlXColorPicker.prototype._hsv2rgb=function(h,g,m){Hi=Math.floor(h/60)%6;j=h/60-Hi;p=m*(1-g);q=m*(1-j*g);t=m*(1-(1-j)*g);var l=0,k=0,j=0;switch(Hi){case 0:l=m;k=t;j=p;break;case 1:l=q;k=m;j=p;break;case 2:l=p;k=m;j=t;break;case 3:l=p;k=q;j=m;break;case 4:l=t;k=p;j=m;break;case 5:l=m,k=p,j=q}l=Math.floor(l*255);k=Math.floor(k*255);j=Math.floor(j*255);return[l,k,j]};dhtmlXColorPicker.prototype._rgb2hsv=function(k,j,u){R=k/255;G=j/255;B=u/255;var s=Math.max(R,G,B),o=Math.min(R,G,B),n=s,m=s==0?0:1-o/s,l=0;s==o?l=0:s==R&&G>=B?l=60*(G-B)/(s-o)+0:s==R&&G<B?l=60*(G-B)/(s-o)+360:s==G?l=60*(B-R)/(s-o)+120:s==B&&(l=60*(R-G)/(s-o)+240);return[l,m,n]};dhtmlXColorPicker.prototype._drawLum=function(){for(var h=this.colorSelectH,g=!this.fullview?30:64,m=!this.fullview?8:4,l=0;l<g;l++){var k=document.createElement("div"),j=this._dec2hex(h);k.style.backgroundColor="#"+j+j+j;k.className="cs_LumElement";h-=m;this.elements.cs_LumSelect.appendChild(k)}};dhtmlXColorPicker.prototype._colorizeLum=function(k,j){this.old_hue=k;this.old_sat=j;for(var u=255,s=!this.fullview?8:4,o=this.elements.cs_LumSelect.childNodes.length,n=2;n<o;n++){var m=u>255?1:u/255,l=this._hsv2rgb(k,j,m),l="#"+this._getColorHEX(l);this.elements.cs_LumSelect.childNodes[n].style.backgroundColor=l;u-=s}this.callEvent("onChange",[this.getSelectedColor()])};dhtmlXColorPicker.prototype._dec2hex=function(b){return window.cs_dechex[b]||"00"};dhtmlXColorPicker.prototype._hex2dec=function(b){return parseInt(b,16)};dhtmlXColorPicker.prototype._initCustomColors=function(){for(var g=this.elements.cs_CustomColors,f=0;f<this.customColorsCount;f++){var k=document.createElement("div");k.className=this.fullview?"cs_CustomColor":"cs_CustomColor_Mini";k.color_num=f;if(document.all){navigator.appName=="Opera"?this.fullview?(k.style.width="14px",k.style.height="14px"):(k.style.width="18px",k.style.height="18px"):this.fullview?(k.style.width="16px",k.style.height="16px"):(k.style.width=document.compatMode!="BackCompat"?"18px":"20px",k.style.height="20px")}k.z=this;k.onclick=this._selectCustomColor;k.ondblclick=this.clickOk;var j=this.restoreColor(f)||"0,0,0";k.color=j;var h=j.split(",");k.style.backgroundColor="#"+this._getColorHEX(h);this.customColors.push(k);g.appendChild(k)}};dhtmlXColorPicker.prototype._reinitCustomColors=function(){for(var g=this.elements.cs_CustomColors,f=0;f<this.customColorsCount;f++){var k=this.customColors[f],j=this.restoreColor(f)||"0,0,0";k.color=j;var h=j.split(",");k.style.backgroundColor="#"+this._getColorHEX(h);this.customColors[f]=k}};dhtmlXColorPicker.prototype._getColorHEX=function(f){var e=this._dec2hex(f[0]),h=this._dec2hex(f[1]),g=this._dec2hex(f[2]);return e+h+g};dhtmlXColorPicker.prototype._selectCustomColor=function(f){f==null&&(f=event);var e=this.z;if(!this.selected){for(var h=0;h<e.customColors.length;h++){e.customColors[h].style.border="1px solid gray"}this.style.border="1px dashed black";this.selected=!0;if(e.selectedColor!=null){e.customColors[e.selectedColor].style.border="1px solid gray",e.customColors[e.selectedColor].selected=!1}}e.selectedColor=this.color_num;e.ColorNum=this.color_num;var g=this.color.split(",");e.r=g[0];e.g=g[1];e.b=g[2];e.restoreFromRGB()};dhtmlXColorPicker.prototype.addCustomColor=function(){var f=this.z;if(f.selectedColor!=null){var e=f.customColors[f.selectedColor],h=f.selectedColor;e.style.border="1px solid gray";f.selectedColor=null}else{e=f.customColors[f.ColorNum],h=f.ColorNum,e.style.border="1px solid gray"}var g=f.r+","+f.g+","+f.b;f.saveColor(g,h);e.color=g;f.ColorNum=f.ColorNum==9?0:f.ColorNum+1;f.customColors[f.ColorNum].style.border="1px dashed red";e.style.backgroundColor=f.elements.cs_EndColor.style.backgroundColor};dhtmlXColorPicker.prototype.restoreFromRGB=function(){this.restoreFrom="RGB";var b=this._rgb2hsv(this.r,this.g,this.b);this.h=b[0];this.s=b[1];this.v=1-b[2];this.ready&&this.redraw()};dhtmlXColorPicker.prototype.restoreFromHSV=function(){this.restoreFrom="HSV";var b=this._hsv2rgb(this.h,this.s,this.v);this.r=b[0];this.g=b[1];this.b=b[2];this.redraw()};dhtmlXColorPicker.prototype.restoreFromHEX=function(){this.r=this._hex2dec(this.hex.substr(0,2));this.g=this._hex2dec(this.hex.substr(2,2));this.b=this._hex2dec(this.hex.substr(4,2));this.restoreFromRGB()};dhtmlXColorPicker.prototype.redraw=function(){var f=this.colorSelectW*this.h/360,e=(1-this.s)*this.colorSelectH,h=this.v*this.colorSelectH;this.elements.cs_SelectorHor.style.top=e+"px";this.elements.cs_SelectorVer.style.left=f+"px";this.elements.cs_LumSelectArrow.style.top=h-3+"px";this.elements.cs_LumSelectLine.style.top=h+1+"px";var g=this._calculateColor();this._colorizeLum(g[0],g[1])};dhtmlXColorPicker.prototype._changeValueHSV=function(){var f=this.z,e=parseInt(f.elements.cs_InputHue.value)||0,h=parseInt(f.elements.cs_InputSat.value)||0,g=parseInt(f.elements.cs_InputLum.value)||0;if(e<0||e>359){e=0}if(h<0||h>100){h=0}if(g<0||g>100){g=0}f.elements.cs_InputHue.value=e;f.elements.cs_InputSat.value=h;f.elements.cs_InputLum.value=g;f.h=e;f.s=h/100;f.v=1-g/100;f.restoreFromHSV()};dhtmlXColorPicker.prototype._changeValueRGB=function(){var f=this.z,e=parseInt(f.elements.cs_InputRed.value)||0,h=parseInt(f.elements.cs_InputGreen.value)||0,g=parseInt(f.elements.cs_InputBlue.value)||0;if(e<0||e>255){e=0}if(h<0||h>255){h=0}if(g<0||g>255){g=0}f.elements.cs_InputRed.value=e;f.elements.cs_InputGreen.value=h;f.elements.cs_InputBlue.value=g;f.r=e;f.g=h;f.b=g;f.restoreFromRGB()};dhtmlXColorPicker.prototype._changeValueHEX=function(){var d=this.z,c=d.elements.cs_Hex.value||0,c=c.replace(/[^a-fA-F0-9]/gi,"0");if(c.length>6){c=c.substr(0,6)}else{for(;c.length<6;){c+="0"}}d.elements.cs_Hex.value=c;d.hex=c;d.restoreFromHEX()};dhtmlXColorPicker.prototype.setCustomColors=function(h){for(var h=h.split(","),g=0;g<h.length;g++){var m=h[g];m.substr(0,1)=="#"&&(m=m.substr(1));var l=this._hex2dec(m.substr(0,2)),k=this._hex2dec(m.substr(2,2)),j=this._hex2dec(m.substr(4,2)),m=l+","+k+","+j;this.saveColor(m,g)}};dhtmlXColorPicker.prototype.setColor=function(g){if(typeof g!="string"){var f=g[0],k=g[1],j=g[2]}else{if(g.indexOf("rgb")!=-1){var h=g.substr(g.indexOf("(")+1,g.lastIndexOf(")")-g.indexOf("(")-1).split(","),f=h[0],k=h[1],j=h[2]}else{g.substr(0,1)=="#"&&(g=g.substr(1)),f=this._hex2dec(g.substr(0,2)),k=this._hex2dec(g.substr(2,2)),j=this._hex2dec(g.substr(4,2))}}f=parseInt(f)||0;k=parseInt(k)||0;j=parseInt(j)||0;if(f<0||f>255){f=0}if(k<0||k>255){k=0}if(j<0||j>255){j=0}this.r=f;this.g=k;this.b=j;this.restoreFromRGB()};dhtmlXColorPicker.prototype.close=function(){this.elements.cs_SelectorDiv.z=null;this.elements.cs_LumSelect.z=null;this.elements.cs_LumSelectArrow.z=null;this.elements.cs_ButtonOk.z=null;this.elements.cs_ButtonCancel.z=null;if(this.cc){this.elements.cs_CustomColorAdd.z=null}this.container.innerHTML="";this.container._dhx_remove&&this.container.parentNode.removeChild(this.container)};dhtmlXColorPicker.prototype.show=function(){this.callEvent("onShow",[]);if(this.container.innerHTML!=""){this.elements.cs_Content.style.display="",this.elements.cs_InputHue.focus()}};dhtmlXColorPicker.prototype.setPosition=function(d,c){this.container.style.position="absolute";this.container.style.top=(c>0?c:10)+"px";this.container.style.left=d+"px"};dhtmlXColorPicker.prototype.hide=function(){this.resetHandlers();if(this.elements.cs_Content){this.elements.cs_Content.style.display="none"}};dhtmlXColorPicker.prototype.setOnSelectHandler=function(b){this.attachEvent("onSelect",b)};dhtmlXColorPicker.prototype.setOnCancelHandler=function(b){this.attachEvent("onCancel",b)};dhtmlXColorPicker.prototype.getSelectedColor=function(){var e=[this.r,this.g,this.b],d=this._dec2hex(this.r)+this._dec2hex(this.g)+this._dec2hex(this.b),f=[this.h,this.s,this.v];return["#"+d,e,f]};dhtmlXColorPicker.prototype.linkTo=function(f,e,h){typeof f!="object"&&(f=document.getElementById(f));typeof e!="object"&&(e=document.getElementById(e));typeof h!="object"&&(h=document.getElementById(h));this.linkToObjects=arguments;var g=this;e.onclick=function(){var a=g._getOffset(f),k=g._getScrollers(),j=a[1]+k[0],d=a[0]+k[1];g.setPosition(j+f.offsetWidth,d);g.isVisible()?g.hide():g.show()};this.setOnSelectHandler(function(a){f.style.backgroundColor=a;if(h){h.value=a}});this.close=this.hide;this.hide()};dhtmlXColorPicker.prototype.hideOnSelect=function(b){this.hideSelfOnSelect=b};dhtmlXColorPicker.prototype.setImagePath=function(b){this.imgURL=b};dhtmlXColorPicker.prototype.init=function(){this.language||this.loadUserLanguage("en-us");this.generate();this.ready=!0;this._cc&&this._reinitCustomColors();this.linkToObjects.length>0&&this.linkTo(this.linkToObjects[0],this.linkToObjects[1],this.linkToObjects[2]);this.hideOnInit||this.show()};dhtmlXColorPicker.prototype.loadUserLanguage=function(b){if(window.dhtmlxColorPickerLangModules[b]){this.language=window.dhtmlxColorPickerLangModules[b],this.ready&&(this.generate(),this.show())}};dhtmlXColorPicker.prototype.setSkin=function(b){this.skinName=b;if(this.elements.cs_Content){this.elements.cs_Content.className="dhtmlxcolorpicker"+(b?"_"+b:b)}};dhtmlXColorPicker.prototype.isVisible=function(){return this.elements.cs_Content.style.display!="none"};dhtmlXColorPicker.prototype.hoverButton=function(){this.className+="_Hover"};dhtmlXColorPicker.prototype.normalButton=function(){this.className=this.className.substr(0,this.className.length-6)};(function(){dhtmlx.extend_api("dhtmlXColorPicker",{_init:function(b){return[b.parent,b.click,b.colors,b.hide,b.full]},show:"showA",link:"linkTo",image_path:"setImagePath",color:"setColor"},{showA:function(){this.init();this.show()}})})();function dhtmlXComboFromSelect(x,w){typeof x=="string"&&(x=document.getElementById(x));w=w||x.getAttribute("width")||(window.getComputedStyle?window.getComputedStyle(x,null).width:x.currentStyle?x.currentStyle.width:0);if(!w||w=="auto"||w.indexOf("em")!=-1){w=x.offsetWidth||100}var v=document.createElement("SPAN");x.parentNode.insertBefore(v,x);x.style.display="none";for(var u=x.getAttribute("opt_type"),s=new dhtmlXCombo(v,x.name,w,u,x.tabIndex),o=[],n=-1,m=0;m<x.options.length;m++){x.options[m].selected&&(n=m);var l=x.options[m].innerHTML,k=x.options[m].getAttribute("value");if(typeof k=="undefined"||k===null){k=l}o[m]={value:k,text:l,img_src:x.options[m].getAttribute("img_src")}}o.length&&s.addOption(o);x.parentNode.removeChild(x);if(n>=0){s._skipFocus=!0,s.selectOption(n,null,!0)}x.onchange&&s.attachEvent("onChange",x.onchange);x.style.direction=="rtl"&&s.setRTL&&s.setRTL(!0);return s}var dhtmlXCombo_optionTypes=[];function dhtmlXCombo(g,f,k,j,h){typeof g=="string"&&(g=document.getElementById(g));this.dhx_Event();this.optionType=j!=window.undefined&&dhtmlXCombo_optionTypes[j]?j:"default";this._optionObject=dhtmlXCombo_optionTypes[this.optionType];this._disabled=!1;this.readonlyDelay=750;this.filterEntities="[,],{,},(,),+,*,\\,?,.,$,^".split(",");if(!window.dhx_glbSelectAr){window.dhx_glbSelectAr=[],window.dhx_openedSelect=null,window.dhx_SelectId=1,dhtmlxEvent(document.body,"click",this.closeAll),dhtmlxEvent(document.body,"keydown",function(d){try{(d||event).keyCode==9&&window.dhx_glbSelectAr[0].closeAll()}catch(c){}return !0})}if(g.tagName=="SELECT"){return dhtmlXComboFromSelect(g)}else{this._createSelf(g,f,k,h)}dhx_glbSelectAr.push(this)}dhtmlXCombo.prototype.setSize=function(b){this.DOMlist.style.width=b+"px";if(this.DOMlistF){this.DOMlistF.style.width=b+"px"}this.DOMelem.style.width=b+"px";this.DOMelem_input.style.width=Math.max(0,b-19)+"px"};dhtmlXCombo.prototype.enableFilteringMode=function(f,e,h,g){f=="between"?this._autoDisabled=this._anyPosition=this._filter=!0:this._filter=convertStringToBoolean(f);if(e){this._xml=e,this._autoxml=convertStringToBoolean(g)}if(convertStringToBoolean(h)){this._xmlCache=[]}};dhtmlXCombo.prototype.setFilteringParam=function(d,c){if(!this._prs){this._prs=[]}this._prs.push([d,c])};dhtmlXCombo.prototype.disable=function(d){var c=convertStringToBoolean(d);if(this._disabled!=c){this._disabled=this.DOMelem_input.disabled=c}};dhtmlXCombo.prototype.readonly=function(e,d){this.DOMelem_input.readOnly=e?!0:!1;if(d===!1||e===!1){this.DOMelem.onkeyup=function(){}}else{var f=this;this.DOMelem.onkeyup=function(g){g=g||window.event;f._searchTimeout&&window.clearTimeout(f._searchTimeout);if(g.keyCode!=9){g.cancelBubble=!0}if(g.keyCode>=48&&g.keyCode<=57||g.keyCode>=65&&g.keyCode<=90){if(!f._searchText){f._searchText=""}f._searchText+=String.fromCharCode(g.keyCode);for(var c=0;c<f.optionsArr.length;c++){var h=f.optionsArr[c].text;if(h.toString().toUpperCase().indexOf(f._searchText)==0){f.selectOption(c);break}}f._searchTimeout=window.setTimeout(function(){f._searchText=""},f.readonlyDelay);g.cancelBubble=!0}}}};dhtmlXCombo.prototype.getOption=function(d){for(var c=0;c<this.optionsArr.length;c++){if(this.optionsArr[c].value==d){return this.optionsArr[c]}}return null};dhtmlXCombo.prototype.getOptionByLabel=function(d){for(var c=0;c<this.optionsArr.length;c++){if(this.optionsArr[c].text==d||this.optionsArr[c]._ctext==d){return this.optionsArr[c]}}return null};dhtmlXCombo.prototype.getOptionByIndex=function(b){return this.optionsArr[b]};dhtmlXCombo.prototype.clearAll=function(b){b&&this.setComboText("");this.optionsArr=[];this.redrawOptions();b&&(this._selOption&&this._selOption.RedrawHeader(this,!0),this._confirmSelection())};dhtmlXCombo.prototype.deleteOption=function(d){var c=this.getIndexByValue(d);if(!(c<0)){if(this.optionsArr[c]==this._selOption){this._selOption=null}this.optionsArr.splice(c,1);this.redrawOptions()}};dhtmlXCombo.prototype.render=function(b){this._skiprender=!convertStringToBoolean(b);this.redrawOptions()};dhtmlXCombo.prototype.updateOption=function(g,f,k,j){var h=this.getOption(g);typeof f!="object"&&(f={text:k,value:f,css:j});h.setValue(f);this.redrawOptions()};dhtmlXCombo.prototype.addOption=function(e){args=!arguments[0].length||typeof arguments[0]!="object"?[arguments]:e;this.render(!1);for(var d=0;d<args.length;d++){var f=args[d];if(f.length){f.value=f[0]||"",f.text=f[1]||"",f.css=f[2]||""}this._addOption(f)}this.render(!0)};dhtmlXCombo.prototype._addOption=function(b){dOpt=new this._optionObject;this.optionsArr.push(dOpt);dOpt.setValue.apply(dOpt,[b]);this.redrawOptions()};dhtmlXCombo.prototype.getIndexByValue=function(d){for(var c=0;c<this.optionsArr.length;c++){if(this.optionsArr[c].value==d){return c}}return -1};dhtmlXCombo.prototype.getSelectedValue=function(){return this._selOption?this._selOption.value:null};dhtmlXCombo.prototype.getComboText=function(){return this.DOMelem_input.value};dhtmlXCombo.prototype.setComboText=function(b){this.DOMelem_input.value=b};dhtmlXCombo.prototype.setComboValue=function(d){this.setComboText(d);for(var c=0;c<this.optionsArr.length;c++){if(this.optionsArr[c].data()[0]==d){return this._skipFocus=!0,this.selectOption(c,null,!0)}}this.DOMelem_hidden_input.value=d};dhtmlXCombo.prototype.getActualValue=function(){return this.DOMelem_hidden_input.value};dhtmlXCombo.prototype.getSelectedText=function(){return this._selOption?this._selOption.text:""};dhtmlXCombo.prototype.getSelectedIndex=function(){for(var b=0;b<this.optionsArr.length;b++){if(this.optionsArr[b]==this._selOption){return b}}return -1};dhtmlXCombo.prototype.setName=function(b){this.DOMelem_hidden_input.name=b;this.DOMelem_hidden_input2=b.replace(/(\]?)$/,"_new_value$1");this.name=b};dhtmlXCombo.prototype.show=function(b){this.DOMelem.style.display=convertStringToBoolean(b)?"":"none"};dhtmlXCombo.prototype.destructor=function(){this.DOMParent.removeChild(this.DOMelem);this.DOMlist.parentNode.removeChild(this.DOMlist);this.DOMlistF&&this.DOMlistF.parentNode.removeChild(this.DOMlistF);var d=dhx_glbSelectAr;this.DOMParent=this.DOMlist=this.DOMlistF=this.DOMelem=0;for(var c=this.DOMlist.combo=this.DOMelem.combo=0;c<d.length;c++){if(d[c]==this){d[c]=null;d.splice(c,1);break}}};dhtmlXCombo.prototype._createSelf=function(j,h,o,n){if(o.toString().indexOf("%")!=-1){var m=this,l=parseInt(o)/100;window.setInterval(function(){if(j.parentNode){var a=j.parentNode.offsetWidth*l-2;if(!(a<0)&&a!=m._lastTs){m.setSize(m._lastTs=a)}}},500);o=parseInt(j.offsetWidth)}o=parseInt(o||100);this.ListPosition="Bottom";this.DOMParent=j;this._inID=null;this.name=h;this._selOption=null;this.optionsArr=[];var k=new this._optionObject;k.DrawHeader(this,h,o,n);this.DOMlist=document.createElement("DIV");this.DOMlist.className="dhx_combo_list "+(dhtmlx.skin?dhtmlx.skin+"_list":"");this.DOMlist.style.width=o-(_isIE?0:0)+"px";if(_isOpera||_isKHTML){this.DOMlist.style.overflow="auto"}this.DOMlist.style.display="none";document.body.insertBefore(this.DOMlist,document.body.firstChild);if(_isIE){this.DOMlistF=document.createElement("IFRAME"),this.DOMlistF.style.border="0px",this.DOMlistF.className="dhx_combo_list",this.DOMlistF.style.width=o-(_isIE?0:0)+"px",this.DOMlistF.style.display="none",this.DOMlistF.src="javascript:false;",document.body.insertBefore(this.DOMlistF,document.body.firstChild)}this.DOMlist.combo=this.DOMelem.combo=this;this.DOMelem_input.onkeydown=this._onKey;this.DOMelem_input.onkeypress=this._onKeyF;this.DOMelem_input.onblur=this._onBlur;this.DOMelem.onclick=this._toggleSelect;this.DOMlist.onclick=this._selectOption;this.DOMlist.onmousedown=function(){this._skipBlur=!0};this.DOMlist.onkeydown=function(b){(b||event).cancelBubble=!0;this.combo.DOMelem_input.onkeydown(b)};this.DOMlist.onmouseover=this._listOver};dhtmlXCombo.prototype._listOver=function(g){g=g||event;g.cancelBubble=!0;var f=_isIE?event.srcElement:g.target,k=this.combo;if(f.parentNode==k.DOMlist){k._selOption&&k._selOption.deselect();k._tempSel&&k._tempSel.deselect();for(var j=0;j<k.DOMlist.childNodes.length;j++){if(k.DOMlist.childNodes[j]==f){break}}var h=k.optionsArr[j];k._tempSel=h;k._tempSel.select();k._autoxml&&j+1==k._lastLength&&k._fetchOptions(j+1,k._lasttext||"")}};dhtmlXCombo.prototype._positList=function(){var b=this.getPosition(this.DOMelem);this.ListPosition=="Bottom"?(this.DOMlist.style.top=b[1]+this.DOMelem.offsetHeight-1+"px",this.DOMlist.style.left=b[0]+"px"):this.ListPosition=="Top"?(this.DOMlist.style.top=b[1]-this.DOMlist.offsetHeight+"px",this.DOMlist.style.left=b[0]+"px"):(this.DOMlist.style.top=b[1]+"px",this.DOMlist.style.left=b[0]+this.DOMelem.offsetWidth+"px")};dhtmlXCombo.prototype.getPosition=function(h,g){if(_isIE&&_isIE<8){if(!g){g=document.body}for(var m=h,l=0,k=0;m&&m!=g;){l+=m.offsetLeft-m.scrollLeft+m.clientLeft,k+=m.offsetTop-m.scrollTop+m.clientTop,m=m.offsetParent}document.documentElement.scrollTop&&(k+=document.documentElement.scrollTop);document.documentElement.scrollLeft&&(l+=document.documentElement.scrollLeft);return[l,k]}var j=getOffset(h);return[j.left,j.top]};dhtmlXCombo.prototype._correctSelection=function(){if(this.getComboText()!=""){for(var b=0;b<this.optionsArr.length;b++){if(!this.optionsArr[b].isHidden()){return this.selectOption(b,!0,!1)}}}this.unSelectOption()};dhtmlXCombo.prototype.selectNext=function(d){for(var c=this.getSelectedIndex()+d;this.optionsArr[c];){if(!this.optionsArr[c].isHidden()){return this.selectOption(c,!1,!1)}c+=d}};dhtmlXCombo.prototype._onKeyF=function(e){var d=this.parentNode.combo,f=e||event;f.cancelBubble=!0;f.keyCode=="13"||f.keyCode=="9"?(d._confirmSelection(),d.closeAll()):f.keyCode=="27"?(d._resetSelection(),d.closeAll()):d._activeMode=!0;return f.keyCode=="13"||f.keyCode=="27"?(d.callEvent("onKeyPressed",[f.keyCode]),!1):!0};dhtmlXCombo.prototype._onKey=function(e){var d=this.parentNode.combo;(e||event).cancelBubble=!0;var f=(e||event).keyCode;if(f>15&&f<19){return !0}if(f==27){return !0}if(d.DOMlist.style.display!="block"&&f!="13"&&f!="9"&&(!d._filter||d._filterAny)){d.DOMelem.onclick(e||event)}if(f!="13"&&f!="9"){if(window.setTimeout(function(){d._onKeyB(f)},1),f=="40"||f=="38"){return !1}}else{if(f==9){d._confirmSelection(),d.closeAll(),(e||event).cancelBubble=!1}}};dhtmlXCombo.prototype._onKeyB=function(e){if(e=="40"){var d=this.selectNext(1)}else{if(e=="38"){this.selectNext(-1)}else{this.callEvent("onKeyPressed",[e]);if(this._filter){return this.filterSelf(e==8||e==46)}for(var f=0;f<this.optionsArr.length;f++){if(this.optionsArr[f].data()[1]==this.DOMelem_input.value){return this.selectOption(f,!1,!1),!1}}this.unSelectOption()}}return !0};dhtmlXCombo.prototype._onBlur=function(){var b=this.parentNode._self;window.setTimeout(function(){if(b.DOMlist._skipBlur){return !(b.DOMlist._skipBlur=!1)}b._skipFocus=!0;b._confirmSelection();b.callEvent("onBlur",[])},100)};dhtmlXCombo.prototype.redrawOptions=function(){if(!this._skiprender){for(var b=this.DOMlist.childNodes.length-1;b>=0;b--){this.DOMlist.removeChild(this.DOMlist.childNodes[b])}for(b=0;b<this.optionsArr.length;b++){this.DOMlist.appendChild(this.optionsArr[b].render())}}};dhtmlXCombo.prototype.loadXML=function(f,e){this._load=!0;this.callEvent("onXLS",[]);if(this._prs){for(var h=0;h<this._prs.length;h++){f+=[getUrlSymbol(f),escape(this._prs[h][0]),"=",escape(this._prs[h][1])].join("")}}if(this._xmlCache&&this._xmlCache[f]){this._fillFromXML(this,null,null,null,this._xmlCache[f]),e&&e()}else{var g=new dtmlXMLLoaderObject(this._fillFromXML,this,!0,!0);if(e){g.waitCall=e}g._cPath=f;g.loadXML(f)}};dhtmlXCombo.prototype.loadXMLString=function(d){var c=new dtmlXMLLoaderObject(this._fillFromXML,this,!0,!0);c.loadXMLString(d)};dhtmlXCombo.prototype._fillFromXML=function(I,H,F,E,D){I._xmlCache&&(I._xmlCache[D._cPath]=D);var C=D.getXMLTopNode("complete");if(C.tagName!="complete"){I._load=!1}else{var A=D.doXPath("//complete"),y=D.doXPath("//option"),x=!1;I.render(!1);if(!A[0]||!A[0].getAttribute("add")){if(I.clearAll(),I._lastLength=y.length,I._xml){if(!y||!y.length){I.closeAll()}else{if(I._activeMode){I._positList(),I.DOMlist.style.display="block",_isIE&&I._IEFix(!0)}}}}else{I._lastLength+=y.length||Infinity,x=!0}for(var w=0;w<y.length;w++){var v={};v.text=y[w].firstChild?y[w].firstChild.nodeValue:"";for(var u=0;u<y[w].attributes.length;u++){var s=y[w].attributes[u];if(s){v[s.nodeName]=s.nodeValue}}I._addOption(v)}I.render(x!=!0||!!y.length);I._load&&I._load!==!0?I.loadXML(I._load):(I._load=!1,!I._lkmode&&I._filter&&!I._autoDisabled&&I._correctSelection());var o=D.doXPath("//option[@selected]");if(o.length){I._skipFocus=!0,I.selectOption(I.getIndexByValue(o[0].getAttribute("value")),!1,!0)}I.callEvent("onXLE",[])}};dhtmlXCombo.prototype.unSelectOption=function(){this._selOption&&this._selOption.deselect();this._tempSel&&this._tempSel.deselect();this._tempSel=this._selOption=null};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelection()};dhtmlXCombo.prototype._confirmSelection=function(g,f){var k=this.getComboText();this.setComboText("");this.setComboText(k);if(arguments.length==0){var j=this.getOptionByLabel(this.DOMelem_input.value),g=j?j.value:this.DOMelem_input.value,f=j==null;if(g==this.getActualValue()){return this._skipFocus=!1}}if(!this._skipFocus&&!this._disabled){try{this.DOMelem_input.focus()}catch(h){}}this._skipFocus=!1;this.DOMelem_hidden_input.value=g;this.DOMelem_hidden_input2.value=f?"true":"false";this.callEvent("onChange",[]);this._activeMode=!1};dhtmlXCombo.prototype._resetSelection=function(){var b=this.getOption(this.DOMelem_hidden_input.value);this.setComboValue(b?b.data()[0]:this.DOMelem_hidden_input.value);this.setComboText(b?b.data()[1]:this.DOMelem_hidden_input.value)};dhtmlXCombo.prototype.selectOption=function(j,h,o){arguments.length<3&&(o=!0);this.unSelectOption();var n=this.optionsArr[j];if(n){this._selOption=n;this._selOption.select();var m=this._selOption.content.offsetTop+this._selOption.content.offsetHeight-this.DOMlist.scrollTop-this.DOMlist.offsetHeight;m>0&&(this.DOMlist.scrollTop+=m);m=this.DOMlist.scrollTop-this._selOption.content.offsetTop;m>0&&(this.DOMlist.scrollTop-=m);var l=this._selOption.data();o&&(this.setComboText(l[1]),this._confirmSelection(l[0],!1));this._autoxml&&j+1==this._lastLength&&this._fetchOptions(j+1,this._lasttext||"");if(h){var k=this.getComboText();k!=l[1]&&(this.setComboText(l[1]),dhtmlXRange(this.DOMelem_input,k.length+1,l[1].length))}else{this.setComboText(l[1])}this._selOption.RedrawHeader(this);this.callEvent("onSelectionChange",[])}};dhtmlXCombo.prototype._selectOption=function(f){(f||event).cancelBubble=!0;for(var e=_isIE?event.srcElement:f.target,h=this.combo;!e._self;){if(e=e.parentNode,!e){return}}for(var g=0;g<h.DOMlist.childNodes.length;g++){if(h.DOMlist.childNodes[g]==e){break}}h.selectOption(g,!1,!0);h.closeAll();h.callEvent("onBlur",[]);h._activeMode=!1};dhtmlXCombo.prototype.openSelect=function(){if(!this._disabled){this.closeAll();this.DOMlist.style.display="block";this._positList();this.callEvent("onOpen",[]);this._tempSel&&this._tempSel.deselect();this._selOption&&this._selOption.select();if(this._selOption){var b=this._selOption.content.offsetTop+this._selOption.content.offsetHeight-this.DOMlist.scrollTop-this.DOMlist.offsetHeight;b>0&&(this.DOMlist.scrollTop+=b);b=this.DOMlist.scrollTop-this._selOption.content.offsetTop;b>0&&(this.DOMlist.scrollTop-=b)}_isIE&&this._IEFix(!0);this.DOMelem_input.focus();this._filter&&this.filterSelf()}};dhtmlXCombo.prototype._toggleSelect=function(d){var c=this.combo;c.DOMlist.style.display=="block"?c.closeAll():c.openSelect();(d||event).cancelBubble=!0};dhtmlXCombo.prototype._fetchOptions=function(e,d){if(d==""){return this.closeAll(),this.clearAll()}var f=this._xml+(this._xml.indexOf("?")!=-1?"&":"?")+"pos="+e+"&mask="+encodeURIComponent(d);this._lasttext=d;this._load?this._load=f:this.callEvent("onDynXLS",[d,e])&&this.loadXML(f)};dhtmlXCombo.prototype.disableAutocomplete=function(){this._autoDisabled=!0};dhtmlXCombo.prototype.filterSelf=function(j){var h=this.getComboText();if(this._xml){this._lkmode=j,this._fetchOptions(0,h)}var o=RegExp("(["+this.filterEntities.join("\\")+"])","g"),h=h.replace(o,"\\$1"),n=(this._anyPosition?"":"^")+h,m=RegExp(n,"i");this.filterAny=!1;for(var l=0;l<this.optionsArr.length;l++){var k=m.test(this.optionsArr[l].content?this.optionsArr[l].data()[1]:this.optionsArr[l].text);this.filterAny|=k;this.optionsArr[l].hide(!k)}this.filterAny?(this.DOMlist.style.display!="block"&&this.openSelect(),_isIE&&this._IEFix(!0)):(this.closeAll(),this._activeMode=!0);!j&&!this._autoDisabled?this._correctSelection():this.unSelectOption()};dhtmlXCombo.prototype._IEFix=function(b){this.DOMlistF.style.display=b?"block":"none";this.DOMlistF.style.top=this.DOMlist.style.top;this.DOMlistF.style.left=this.DOMlist.style.left;this.DOMlistF.style.width=this.DOMlist.offsetWidth+"px";this.DOMlistF.style.height=this.DOMlist.offsetHeight+"px"};dhtmlXCombo.prototype.closeAll=function(){if(window.dhx_glbSelectAr){for(var b=0;b<dhx_glbSelectAr.length;b++){if(dhx_glbSelectAr[b].DOMlist.style.display=="block"){dhx_glbSelectAr[b].DOMlist.style.display="none",_isIE&&dhx_glbSelectAr[b]._IEFix(!1)}dhx_glbSelectAr[b]._activeMode=!1}}};dhtmlXCombo.prototype.changeOptionId=function(d,c){(this.getOption(d)||{}).value=c};function dhtmlXRange(k,j,u){var s=typeof k=="object"?k:document.getElementById(k);try{s.focus()}catch(o){}var n=s.value.length;j--;if(j<0||j>u||j>n){j=0}u>n&&(u=n);if(j!=u){if(s.setSelectionRange){s.setSelectionRange(j,u)}else{if(s.createTextRange){var m=s.createTextRange();m.moveStart("character",j);m.moveEnd("character",u-n);try{m.select()}catch(l){}}}}}dhtmlXCombo_defaultOption=function(){this.init()};dhtmlXCombo_defaultOption.prototype.init=function(){this.value=null;this.text="";this.selected=!1;this.css=""};dhtmlXCombo_defaultOption.prototype.select=function(){if(this.content){this.content.className="dhx_selected_option"+(dhtmlx.skin?" combo_"+dhtmlx.skin+"_sel":"")}};dhtmlXCombo_defaultOption.prototype.hide=function(b){this.render().style.display=b?"none":""};dhtmlXCombo_defaultOption.prototype.isHidden=function(){return this.render().style.display=="none"};dhtmlXCombo_defaultOption.prototype.deselect=function(){this.content&&this.render();this.content.className=""};dhtmlXCombo_defaultOption.prototype.setValue=function(b){this.value=b.value||"";this.text=b.text||"";this.css=b.css||"";this.content=null};dhtmlXCombo_defaultOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV");this.content._self=this;this.content.style.cssText="width:100%; overflow:hidden;"+this.css;if(_isOpera||_isKHTML){this.content.style.padding="2px 0px 2px 0px"}this.content.innerHTML=this.text;this._ctext=typeof this.content.textContent!="undefined"?this.content.textContent:this.content.innerText}return this.content};dhtmlXCombo_defaultOption.prototype.data=function(){if(this.content){return[this.value,this._ctext?this._ctext:this.text]}};dhtmlXCombo_defaultOption.prototype.DrawHeader=function(g,f,k,j){var h=document.createElement("DIV");h.style.width=k+"px";h.className="dhx_combo_box "+(dhtmlx.skin||"");h._self=g;g.DOMelem=h;this._DrawHeaderInput(g,f,k,j);this._DrawHeaderButton(g,f,k);g.DOMParent.appendChild(g.DOMelem)};dhtmlXCombo_defaultOption.prototype._DrawHeaderInput=function(g,f,k,j){var h=document.createElement("input");h.setAttribute("autocomplete","off");h.type="text";h.className="dhx_combo_input";if(j){h.tabIndex=j}h.style.width=k-19-(document.compatMode=="BackCompat"?0:3)+"px";g.DOMelem.appendChild(h);g.DOMelem_input=h;h=document.createElement("input");h.type="hidden";h.name=f;g.DOMelem.appendChild(h);g.DOMelem_hidden_input=h;h=document.createElement("input");h.type="hidden";h.name=(f||"").replace(/(\]?)$/,"_new_value$1");h.value="true";g.DOMelem.appendChild(h);g.DOMelem_hidden_input2=h};dhtmlXCombo_defaultOption.prototype._DrawHeaderButton=function(d){var c=document.createElement("img");c.className="dhx_combo_img";if(dhtmlx.image_path){dhx_globalImgPath=dhtmlx.image_path}c.src=(window.dhx_globalImgPath?dhx_globalImgPath:"")+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif";d.DOMelem.appendChild(c);d.DOMelem_button=c};dhtmlXCombo_defaultOption.prototype.RedrawHeader=function(){};dhtmlXCombo_optionTypes["default"]=dhtmlXCombo_defaultOption;dhtmlXCombo.prototype.dhx_Event=function(){this.dhx_SeverCatcherPath="";this.attachEvent=function(a,b,c){c=c||this;a="ev_"+a;if(!this[a]||!this[a].addEvent){var d=new this.eventCatcher(c);d.addEvent(this[a]);this[a]=d}return a+":"+this[a].addEvent(b)};this.callEvent=function(a,b){return this["ev_"+a]?this["ev_"+a].apply(this,b):!0};this.checkEvent=function(a){return this["ev_"+a]?!0:!1};this.eventCatcher=function(a){var b=[],c=a,d=function(a,b){var a=a.split(":"),c="",d="",e=a[1];a[1]=="rpc"&&(c='<?xml version="1.0"?><methodCall><methodName>'+a[2]+"</methodName><params>",d="</params></methodCall>",e=b);var k=function(){};return k},e=function(){if(b){var a=!0}for(var d=0;d<b.length;d++){if(b[d]!=null){var e=b[d].apply(c,arguments),a=a&&e}}return a};e.addEvent=function(a){typeof a!="function"&&(a=a&&a.indexOf&&a.indexOf("server:")==0?new d(a,c.rpcServer):eval(a));return a?b.push(a)-1:!1};e.removeEvent=function(a){b[a]=null};return e};this.detachEvent=function(a){if(a!=!1){var b=a.split(":");this[b[0]].removeEvent(b[1])}}};(function(){dhtmlx.extend_api("dhtmlXCombo",{_init:function(b){if(b.image_path){dhx_globalImgPath=b.image_path}return[b.parent,b.name,b.width||"100%",b.type,b.index]},filter:"filter_command",auto_height:"enableOptionAutoHeight",auto_position:"enableOptionAutoPositioning",auto_width:"enableOptionAutoWidth",xml:"loadXML",readonly:"readonly",items:"addOption"},{filter_command:function(b){typeof b=="string"?this.enableFilteringMode(!0,b):this.enableFilteringMode(b)}})})();dhtmlXCombo_imageOption=function(){this.init()};dhtmlXCombo_imageOption.prototype=new dhtmlXCombo_defaultOption;dhtmlXCombo_imageOption.prototype.setValue=function(b){this.value=b.value||"";this.text=b.text||"";this.css=b.css||"";this.img_src=b.img_src||this.getDefImage()};dhtmlXCombo_imageOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV");this.content._self=this;this.content.style.cssText="width:100%; overflow:hidden;white-space:nowrap; "+this.css;var b="";this.img_src!=""&&(b+='<img src="'+this.img_src+'" style="display:inline-block;vertical-align:middle;"/>');b+='<div style="display:inline;vertical-align:middle;">'+this.text+"</div>";this.content.innerHTML=b;this._ctext=typeof this.content.textContent!="undefined"?this.content.textContent:this.content.innerText}return this.content};dhtmlXCombo_imageOption.prototype.data=function(){return[this.value,this._ctext?this._ctext:this.text,this.img_src]};dhtmlXCombo_imageOption.prototype.DrawHeader=function(f,e,h){var g=document.createElement("DIV");g.style.width=h+"px";g.className="dhx_combo_box";g._self=f;f.DOMelem=g;this._DrawHeaderImage(f,e,h);this._DrawHeaderInput(f,e,h-19);this._DrawHeaderButton(f,e,h);f.DOMParent.appendChild(f.DOMelem)};dhtmlXCombo_imageOption.prototype._DrawHeaderImage=function(d){var c=document.createElement("img");c.className="dhx_combo_option_img";c.style.visibility="hidden";d.DOMelem.appendChild(c);d.DOMelem_image=c};dhtmlXCombo_imageOption.prototype.RedrawHeader=function(d,c){d.DOMelem_image.style.visibility=c?"hidden":"visible";d.DOMelem_image.src=c?"":this.img_src};dhtmlXCombo_imageOption.prototype.getDefImage=function(){return""};dhtmlXCombo.prototype.setDefaultImage=function(b){dhtmlXCombo_imageOption.prototype.getDefImage=function(){return b}};dhtmlXCombo_optionTypes.image=dhtmlXCombo_imageOption;dhtmlXCombo_checkboxOption=function(){this.init()};dhtmlXCombo_checkboxOption.prototype=new dhtmlXCombo_defaultOption;dhtmlXCombo_checkboxOption.prototype.setValue=function(b){this.value=b.value||"";this.text=b.text||"";this.css=b.css||"";this.checked=b.checked||0};dhtmlXCombo_checkboxOption.prototype.render=function(){if(!this.content){this.content=document.createElement("DIV");this.content._self=this;this.content.style.cssText="width:100%; overflow:hidden;white-space:nowrap; "+this.css;var b="";b+=this.checked?'<input type="checkbox" checked  style="display:inline-block;vertical-align:middle;" />':'<input type="checkbox" style="display:inline-block;vertical-align:middle;"/>';b+='<div style="display:inline;vertical-align:middle;">'+this.text+"</div>";this.content.innerHTML=b;this._ctext=typeof this.content.textContent!="undefined"?this.content.textContent:this.content.innerText;this.content.firstChild.onclick=function(c){this.parentNode.parentNode.combo.DOMelem_input.focus();(c||event).cancelBubble=!0;if(!this.parentNode.parentNode.combo.callEvent("onCheck",[this.parentNode._self.value,this.checked])){return this.checked=!this.checked,!1}}}return this.content};dhtmlXCombo_checkboxOption.prototype.data=function(){return[this.value,this._ctext?this._ctext:this.text,this.render().firstChild.checked]};dhtmlXCombo_checkboxOption.prototype.DrawHeader=function(e,d,f){e.DOMelem=document.createElement("DIV");e.DOMelem.style.width=f+"px";e.DOMelem.className="dhx_combo_box";e.DOMelem._self=e;this._DrawHeaderCheckbox(e,d,f);this._DrawHeaderInput(e,d,f-19);this._DrawHeaderButton(e,d,f);e.DOMParent.appendChild(e.DOMelem)};dhtmlXCombo_checkboxOption.prototype._DrawHeaderCheckbox=function(d){var c=document.createElement("input");c.type="checkbox";c.className="dhx_combo_option_img";c.style.visibility="hidden";c.onclick=function(b){var a=d.getIndexByValue(d.getActualValue());a!=-1&&(d.setChecked(a,c.checked),d.callEvent("onCheck",[d.getActualValue(),d.optionsArr[a].content.firstChild.checked]));(b||event).cancelBubble=!0};d.DOMelem.appendChild(c);d.DOMelem_checkbox=c};dhtmlXCombo_checkboxOption.prototype.RedrawHeader=function(d,c){d.DOMelem_checkbox.style.visibility=c?"hidden":"";d.DOMelem_checkbox.checked=c?!1:this.content.firstChild.checked};dhtmlXCombo_optionTypes.checkbox=dhtmlXCombo_checkboxOption;dhtmlXCombo.prototype.getChecked=function(){for(var d=[],c=0;c<this.optionsArr.length;c++){this.optionsArr[c].data()[2]&&d.push(this.optionsArr[c].value)}return d};dhtmlXCombo.prototype.setChecked=function(d,c){this.optionsArr[d].content.firstChild.checked=c!==!1;this._selOption==this.optionsArr[d]&&this._selOption.RedrawHeader(this)};dhtmlXCombo.prototype.setCheckedByValue=function(d,c){return this.setChecked(this.getIndexByValue(d),c)};dhtmlXCombo.prototype.enableOptionAutoPositioning=function(b){if(!this.ListAutoPosit){this.ListAutoPosit=1}this.attachEvent("onOpen",function(){this._setOptionAutoPositioning(b)});this.attachEvent("onXLE",function(){this._setOptionAutoPositioning(b)})};dhtmlXCombo.prototype._setOptionAutoPositioning=function(f){if(typeof f!="undefined"&&!convertStringToBoolean(f)){return this.ListPosition="Bottom",this.ListAutoPosit=0,!0}var e=this.getPosition(this.DOMelem),h=this._getClientHeight()-e[1]-this.DOMelem.offsetHeight,g=this.autoHeight?this.DOMlist.scrollHeight:parseInt(this.DOMlist.offsetHeight);this.ListPosition=h<g&&e[1]>g?"Top":"Bottom";this._positList();_isIE&&this._IEFix(!0)};dhtmlXCombo.prototype._getClientHeight=function(){return document.compatMode=="CSS1Compat"&&!window.opera?document.documentElement.clientHeight:document.body.clientHeight};dhtmlXCombo.prototype.setOptionWidth=function(b){if(arguments.length>0&&(this.DOMlist.style.width=b+"px",this.DOMlistF)){this.DOMlistF.style.width=b+"px"}};dhtmlXCombo.prototype.setOptionHeight=function(b){if(arguments.length>0){this.DOMlist.style.height=_isIE?this.DOMlistF.style.height=b+"px":b+"px";if(this.DOMlistF){this.DOMlistF.style.height=this.DOMlist.style.height}this._positList();_isIE&&this._IEFix(!0)}};dhtmlXCombo.prototype.enableOptionAutoWidth=function(b){if(!this._listWidthConf){this._listWidthConf=this.DOMlist.offsetWidth}arguments.length==0&&(b=1);if(convertStringToBoolean(b)){this.autoOptionWidth=1,this.awOnOpen=this.attachEvent("onOpen",function(){this._setOptionAutoWidth()}),this.awOnXLE=this.attachEvent("onXLE",function(){this._setOptionAutoWidth()})}else{if(typeof this.awOnOpen!="undefined"){this.autoOptionWidth=0,this.detachEvent(this.awOnOpen),this.detachEvent(this.awOnXLE),this.setOptionWidth(this._listWidthConf)}}};dhtmlXCombo.prototype._setOptionAutoWidth=function(){var f=!this.ahOnOpen&&this.DOMlist.scrollHeight>this.DOMlist.offsetHeight;this.setOptionWidth(1);for(var e=this.DOMlist.offsetWidth,h=0;h<this.optionsArr.length;h++){var g=_isFF?this.DOMlist.childNodes[h].scrollWidth-2:this.DOMlist.childNodes[h].scrollWidth;if(g>e){e=this.DOMlist.childNodes[h].scrollWidth}}e+=f?18:0;this.setOptionWidth(this.DOMelem.offsetWidth>e?this.DOMelem.offsetWidth:e+2)};dhtmlXCombo.prototype.enableOptionAutoHeight=function(g,f){if(!this._listHeightConf){this._listHeightConf=this.DOMlist.style.height==""?100:parseInt(this.DOMlist.style.height)}arguments.length==0&&(g=1);this.autoHeight=convertStringToBoolean(g);var k=this;if(this.autoHeight){var j=function(){window.setTimeout(function(){k._setOptionAutoHeight(g,f)},1)};this.ahOnOpen=this.attachEvent("onOpen",j);if(!this.awOnOpen){this.ahOnXLE=this.attachEvent("onXLE",j)}var h;this.ahOnKey=this.attachEvent("onKeyPressed",function(){this._filter&&(h&&window.clearTimeout(h),window.setTimeout(function(){k.DOMlist.style.display=="block"&&k._setOptionAutoHeight(g,f)},50))})}else{typeof this.ahOnOpen!="undefined"&&(this.detachEvent(this.ahOnOpen),this.ahOnXLE&&this.detachEvent(this.ahOnXLE),this.ahOnKey&&this.detachEvent(this.ahOnKey),this.setOptionHeight(this._listHeightConf))}};dhtmlXCombo.prototype._setOptionAutoHeight=function(e,d){if(convertStringToBoolean(e)){this.setOptionHeight(1);var f=0;this.optionsArr.length>0?(f=this.DOMlist.scrollHeight>this.DOMlist.offsetHeight?this.DOMlist.scrollHeight+2:this.DOMlist.offsetHeight,arguments.length>1&&d&&(d=parseInt(d),f=f>d?d:f),this.setOptionHeight(f)):this.DOMlist.style.display="none"}};dhtmlXCombo.prototype.attachChildCombo=function(f,e){if(!this._child_combos){this._child_combos=[]}this._has_childen=1;this._child_combos[this._child_combos.length]=f;f.show(0);var h=this,g=arguments.length;this.attachEvent("onChange",function(){for(var a=0;a<h._child_combos.length;a++){h._child_combos[a]==f&&(f.show(1),f.callEvent("onMasterChange",[h.getActualValue(),h]))}if(h.getActualValue()==""){h.showSubCombo(h,0)}else{if(f._xml){if(g==1){e=f._xml}f._xml=h.deleteParentVariable(e);f._xml+=(f._xml.indexOf("?")!=-1?"&":"?")+"parent="+encodeURIComponent(h.getActualValue())}else{e&&(f.clearAll(!0),f.loadXML(e+(e.indexOf("?")!=-1?"&":"?")+"parent="+encodeURIComponent(h.getActualValue())))}}})};dhtmlXCombo.prototype.setAutoSubCombo=function(e,d){arguments.length==1&&(d="subcombo");if(this._parentCombo){f=new dhtmlXCombo(this._parentCombo.DOMParent,d,this._parentCombo.DOMelem.style.width),f._parentCombo=this._parentCombo}else{var f=new dhtmlXCombo(this.DOMParent,d,this.DOMelem.style.width);f._parentCombo=this}if(this._filter){f._filter=1}if(this._xml&&(f._xml=arguments.length>0?e:this._xml,e=f._xml,f._autoxml=this._autoxml,this._xmlCache)){f._xmlCache=[]}this.attachChildCombo(f,e);return f};dhtmlXCombo.prototype.detachChildCombo=function(d){for(var c=0;c<this._child_combos.length;c++){this._child_combos.splice(c,1)}d.show(1)};dhtmlXCombo.prototype.showSubCombo=function(e,d){if(e._child_combos){for(var f=0;f<e._child_combos.length;f++){e._child_combos[f].show(d),e.showSubCombo(e._child_combos[f],0)}}};dhtmlXCombo.prototype.deleteParentVariable=function(b){return b=b.replace(/parent\=[^&]*/g,"").replace(/\?\&/,"?")};function dataProcessor(b){this.serverProcessor=b;this.action_param="!nativeeditor_status";this.object=null;this.updatedRows=[];this.autoUpdate=!0;this.updateMode="cell";this._tMode="GET";this.post_delim="_";this._waitMode=0;this._in_progress={};this._invalid={};this.mandatoryFields=[];this.messages=[];this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",clear:"font-weight:normal;text-decoration:none;"};this.enableUTFencoding(!0);dhtmlxEventable(this);return this}dataProcessor.prototype={setTransactionMode:function(d,c){this._tMode=d;this._tSend=c},escape:function(b){return this._utf?encodeURIComponent(b):escape(b)},enableUTFencoding:function(b){this._utf=convertStringToBoolean(b)},setDataColumns:function(b){this._columns=typeof b=="string"?b.split(","):b},getSyncState:function(){return !this.updatedRows.length},enableDataNames:function(b){this._endnm=convertStringToBoolean(b)},enablePartialDataSend:function(b){this._changed=convertStringToBoolean(b)},setUpdateMode:function(d,c){this.autoUpdate=d=="cell";this.updateMode=d;this.dnd=c},ignore:function(d,c){this._silent_mode=!0;d.call(c||window);this._silent_mode=!1},setUpdated:function(g,f,k){if(!this._silent_mode){var j=this.findRow(g),k=k||"updated",h=this.obj.getUserData(g,this.action_param);h&&k=="updated"&&(k=h);f?(this.set_invalid(g,!1),this.updatedRows[j]=g,this.obj.setUserData(g,this.action_param,k),this._in_progress[g]&&(this._in_progress[g]="wait")):this.is_invalid(g)||(this.updatedRows.splice(j,1),this.obj.setUserData(g,this.action_param,""));f||this._clearUpdateFlag(g);this.markRow(g,f,k);f&&this.autoUpdate&&this.sendData(g)}},_clearUpdateFlag:function(){},markRow:function(h,g,m){var l="",k=this.is_invalid(h);k&&(l=this.styles[k],g=!0);if(this.callEvent("onRowMark",[h,g,m,k])&&(l=this.styles[g?m:"clear"]+l,this.obj[this._methods[0]](h,l),k&&k.details)){l+=this.styles[k+"_cell"];for(var j=0;j<k.details.length;j++){if(k.details[j]){this.obj[this._methods[1]](h,j,l)}}}},getState:function(b){return this.obj.getUserData(b,this.action_param)},is_invalid:function(b){return this._invalid[b]},set_invalid:function(e,d,f){f&&(d={value:d,details:f,toString:function(){return this.value.toString()}});this._invalid[e]=d},checkBeforeUpdate:function(){return !0},sendData:function(b){if(!this._waitMode||!(this.obj.mytype=="tree"||this.obj._h2)){this.obj.editStop&&this.obj.editStop();if(typeof b=="undefined"||this._tSend){return this.sendAllData()}if(this._in_progress[b]){return !1}this.messages=[];if(!this.checkBeforeUpdate(b)&&this.callEvent("onValidationError",[b,this.messages])){return !1}this._beforeSendData(this._getRowData(b),b)}},_beforeSendData:function(d,c){if(!this.callEvent("onBeforeUpdate",[c,this.getState(c),d])){return !1}this._sendData(d,c)},serialize:function(g,f){if(typeof g=="string"){return g}if(typeof f!="undefined"){return this.serialize_one(g,"")}else{var k=[],j=[],h;for(h in g){g.hasOwnProperty(h)&&(k.push(this.serialize_one(g[h],h+this.post_delim)),j.push(h))}k.push("ids="+this.escape(j.join(",")));dhtmlx.security_key&&k.push("dhx_security="+dhtmlx.security_key);return k.join("&")}},serialize_one:function(f,e){if(typeof f=="string"){return f}var h=[],g;for(g in f){f.hasOwnProperty(g)&&h.push(this.escape((e||"")+g)+"="+this.escape(f[g]))}return h.join("&")},_sendData:function(f,e){if(f){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),f]:[null,null,f])){return !1}e&&(this._in_progress[e]=(new Date).valueOf());var h=new dtmlXMLLoaderObject(this.afterUpdate,this,!0),g=this.serverProcessor+(this._user?getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");this._tMode!="POST"?h.loadXML(g+(g.indexOf("?")!=-1?"&":"?")+this.serialize(f,e)):h.loadXML(g,!0,this.serialize(f,e));this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var d=!0,c=0;c<this.updatedRows.length;c++){d&=this.checkBeforeUpdate(this.updatedRows[c])}if(!d&&!this.callEvent("onValidationError",["",this.messages])){return !1}if(this._tSend){this._sendData(this._getAllData())}else{for(c=0;c<this.updatedRows.length;c++){if(!this._in_progress[this.updatedRows[c]]&&!this.is_invalid(this.updatedRows[c])&&(this._beforeSendData(this._getRowData(this.updatedRows[c]),this.updatedRows[c]),this._waitMode&&(this.obj.mytype=="tree"||this.obj._h2))){break}}}}},_getAllData:function(){for(var f={},e=!1,h=0;h<this.updatedRows.length;h++){var g=this.updatedRows[h];!this._in_progress[g]&&!this.is_invalid(g)&&this.callEvent("onBeforeUpdate",[g,this.getState(g)])&&(f[g]=this._getRowData(g,g+this.post_delim),e=!0,this._in_progress[g]=(new Date).valueOf())}return e?f:null},setVerificator:function(d,c){this.mandatoryFields[d]=c||function(b){return b!=""}},clearVerificator:function(b){this.mandatoryFields[b]=!1},findRow:function(d){for(var c=0,c=0;c<this.updatedRows.length;c++){if(d==this.updatedRows[c]){break}}return c},defineAction:function(d,c){if(!this._uActions){this._uActions=[]}this._uActions[d]=c},afterUpdateCallback:function(j,h,o,n){var m=j,l=o!="error"&&o!="invalid";l||this.set_invalid(j,o);if(this._uActions&&this._uActions[o]&&!this._uActions[o](n)){return delete this._in_progress[m]}this._in_progress[m]!="wait"&&this.setUpdated(j,!1);var k=j;switch(o){case"inserted":case"insert":h!=j&&(this.obj[this._methods[2]](j,h),j=h);break;case"delete":case"deleted":return this.obj.setUserData(j,this.action_param,"true_deleted"),this.obj[this._methods[3]](j),delete this._in_progress[m],this.callEvent("onAfterUpdate",[j,o,h,n])}this._in_progress[m]!="wait"?(l&&this.obj.setUserData(j,this.action_param,""),delete this._in_progress[m]):(delete this._in_progress[m],this.setUpdated(h,!0,this.obj.getUserData(j,this.action_param)));this.callEvent("onAfterUpdate",[k,o,h,n])},afterUpdate:function(A,y,x,w,v){v.getXMLTopNode("data");if(v.xmlDoc.responseXML){for(var u=v.doXPath("//data/action"),s=0;s<u.length;s++){var o=u[s],n=o.getAttribute("type"),m=o.getAttribute("sid"),l=o.getAttribute("tid");A.afterUpdateCallback(m,l,n,o)}A.finalizeUpdate()}},finalizeUpdate:function(){this._waitMode&&this._waitMode--;(this.obj.mytype=="tree"||this.obj._h2)&&this.updatedRows.length&&this.sendData();this.callEvent("onAfterUpdateFinish",[]);this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(b){this.obj=b;this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(b){this.attachEvent("onAfterUpdate",b)},enableDebug:function(){},setOnBeforeUpdateHandler:function(b){this.attachEvent("onBeforeDataSending",b)},setAutoUpdate:function(e,d){e=e||2000;this._user=d||(new Date).valueOf();this._need_update=!1;this._loader=null;this._update_busy=!1;this.attachEvent("onAfterUpdate",function(j,h,l,k){this.afterAutoUpdate(j,h,l,k)});this.attachEvent("onFullSync",function(){this.fullSync()});var f=this;window.setInterval(function(){f.loadUpdate()},e)},afterAutoUpdate:function(d,c){return c=="collision"?(this._need_update=!0,!1):!0},fullSync:function(){if(this._need_update==!0){this._need_update=!1,this.loadUpdate()}return !0},getUpdates:function(d,c){if(this._update_busy){return !1}else{this._update_busy=!0}this._loader=this._loader||new dtmlXMLLoaderObject(!0);this._loader.async=!0;this._loader.waitCall=c;this._loader.loadXML(d)},_v:function(b){return b.firstChild?b.firstChild.nodeValue:""},_a:function(e){for(var d=[],f=0;f<e.length;f++){d[f]=this._v(e[f])}return d},loadUpdate:function(){var e=this,d=this.obj.getUserData(0,"version"),f=this.serverProcessor+getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+d].join("&"),f=f.replace("editing=true&","");this.getUpdates(f,function(){var a=e._loader.doXPath("//userdata");e.obj.setUserData(0,"version",e._v(a[0]));var n=e._loader.doXPath("//update");if(n.length){e._silent_mode=!0;for(var m=0;m<n.length;m++){var l=n[m].getAttribute("status"),k=n[m].getAttribute("id"),j=n[m].getAttribute("parent");switch(l){case"inserted":e.callEvent("insertCallback",[n[m],k,j]);break;case"updated":e.callEvent("updateCallback",[n[m],k,j]);break;case"deleted":e.callEvent("deleteCallback",[n[m],k,j])}}e._silent_mode=!1}e._update_busy=!1;e=null})}};function dhtmlXEditor(v,u){var s=this;this.skin=u||dhtmlx.skin||"dhx_skyblue";this.iconsPath=dhtmlx.image_path||"../../codebase/imgs/";typeof v=="string"&&(v=document.getElementById(v));for(this.base=v;this.base.childNodes.length>0;){this.base.removeChild(this.base.childNodes[0])}this.tbData=(this._isToolbar=this.initDhtmlxToolbar!=null&&window.dhtmlXToolbarObject!=null?!0:!1)?"":"<div class='dhxeditor_"+this.skin+"_btns'><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='b' cmd='applyBold' class='dhxeditor_"+this.skin+"_tbbtn btn_bold'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='i' cmd='applyItalic' class='dhxeditor_"+this.skin+"_tbbtn btn_italic'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='u' cmd='applyUnderscore' class='dhxeditor_"+this.skin+"_tbbtn btn_underline'></div></a><a href='javascript:void(0);' onclick='return false;' tabindex='-1'><div actv='c' cmd='clearFormatting' class='dhxeditor_"+this.skin+"_tbbtn btn_clearformat'></div></a><div class='verline_l'></div><div class='verline_r'></div></div>";var o=_isIE?this.base.currentStyle.position:window.getComputedStyle(this.base,null).getPropertyValue("position");if(!(o=="relative"||o=="absolute")){this.base.style.position="relative"}this.base.innerHTML=this.tbData+"<div style='position:absolute; width: 100%; overflow: hidden;'></div>";var n=new dhtmlXContainerLite(this.base);n.skin=this.skin;n.setContent(this.base.childNodes[this._isToolbar?0:1]);var m=this._isToolbar?0:this.base.childNodes[0].offsetHeight;this.base.adjustContent(this.base,m);this.cBlock=document.createElement("DIV");this.cBlock.className="dhxcont_content_blocker";this.cBlock.style.display="none";this.base.appendChild(this.cBlock);this.editor=document.createElement("IFRAME");this.editor.className="dhxeditor_mainiframe_"+this.skin;this.editor.frameBorder=0;if(_isOpera){this.editor.scrolling="yes"}var l=this.editor;if(_isIE){l.onreadystatechange=function(){if(l.readyState=="complete"){try{this.contentWindow.document.body.attachEvent("onfocus",function(c){s._ev("focus",c)}),this.contentWindow.document.body.attachEvent("onblur",function(c){s._ev("blur",c)}),this.contentWindow.document.body.attachEvent("onkeydown",function(c){s._ev("keydown",c)}),this.contentWindow.document.body.attachEvent("onkeyup",function(c){s._ev("keyup",c)}),this.contentWindow.document.body.attachEvent("onkeypress",function(c){s._ev("keypress",c)}),this.contentWindow.document.body.attachEvent("onmouseup",function(c){s._ev("mouseup",c)}),this.contentWindow.document.body.attachEvent("onmousedown",function(c){s._ev("mousedown",c)}),this.contentWindow.document.body.attachEvent("onclick",function(c){s._ev("click",c)})}catch(b){}}},l.onunload=function(){this.contentWindow.document.body.detachEvent("onfocus",function(){s._ev("focus",event)});this.contentWindow.document.body.detachEvent("onblur",function(){s._ev("blur",event)});this.contentWindow.document.body.detachEvent("onkeydown",function(){s._ev("keydown",event)});this.contentWindow.document.body.detachEvent("onkeyup",function(){s._ev("keyup",event)});this.contentWindow.document.body.detachEvent("onkeypress",function(){s._ev("keypress",event)});this.contentWindow.document.body.detachEvent("onmouseup",function(){s._ev("mouseup",event)});this.contentWindow.document.body.detachEvent("onmousedown",function(){s._ev("mousedown",event)});this.contentWindow.document.body.detachEvent("onclick",function(){s._ev("click",event)})}}else{var k=this.editor;l.onload=function(){this.contentWindow.addEventListener("focus",function(b){s._ev("focus",b)},!1);this.contentWindow.addEventListener("blur",function(b){s._ev("blur",b)},!1);this.contentWindow.addEventListener("keydown",function(b){s._ev("keydown",b)},!1);this.contentWindow.addEventListener("keyup",function(b){s._ev("keyup",b)},!1);this.contentWindow.addEventListener("keypress",function(b){s._ev("keypress",b)},!1);this.contentWindow.addEventListener("mouseup",function(b){s._ev("mouseup",b)},!1);this.contentWindow.addEventListener("mousedown",function(b){s._ev("mousedown",b)},!1);this.contentWindow.addEventListener("click",function(b){s._ev("click",b)},!1)};l.onunload=function(){this.contentWindow.removeEventListener("focus",function(b){s._ev("focus",b)},!1);this.contentWindow.removeEventListener("blur",function(b){s._ev("blur",b)},!1);this.contentWindow.removeEventListener("keydown",function(b){s._ev("keydown",b)},!1);this.contentWindow.removeEventListener("keyup",function(b){s._ev("keyup",b)},!1);this.contentWindow.removeEventListener("keypress",function(b){s._ev("keypress",b)},!1);this.contentWindow.removeEventListener("mouseup",function(b){s._ev("mouseup",b)},!1);this.contentWindow.removeEventListener("mousedown",function(b){s._ev("mousedown",b)},!1);this.contentWindow.removeEventListener("click",function(b){s._ev("click",b)},!1)}}this._ev=function(d,c){this.callEvent("onAccess",[d,c])};this._focus=function(){_isIE?this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()};this.base.attachObject(this.editor);this.edWin=this.editor.contentWindow;this.edDoc=this.edWin.document;this._prepareContent=function(g,f){var x="";g===!0&&this.getContent!=null&&(x=this.getContent());var w=this.editor.contentWindow.document;w.open("text/html","replace");_isOpera?w.write("<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body "+(f!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>"):window._KHTMLrv?w.write("<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body "+(f!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>"):_isIE?w.write("<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color: #ffffff; outline: none;} </style></head><body "+(f!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>"):w.write("<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; padding-left:1px !important; height:100%; margin:0px; font-family:Tahoma; font-size:10pt; background-color:#ffffff;} </style></head><body "+(f!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>");w.close();_isIE?w.contentEditable=f!==!0:w.designMode=f!==!0?"On":"Off";if(_isFF){try{w.execCommand("useCSS",!1,!0)}catch(h){}}g===!0&&this.setContent!=null&&this.setContent(x)};this._prepareContent();this.setIconsPath=function(){};this.init=function(){};this.setSizes=function(){var b=this._isToolbar?0:this.base.childNodes[0].offsetHeight;this.base.adjustContent(this.base,b)};this._resizeTM=null;this._resizeTMTime=100;this._doOnResize=function(){window.clearTimeout(s._resizeTM);s._resizeTM=window.setTimeout(function(){s.setSizes&&s.setSizes()},s._resizeTMTime)};this._doOnUnload=function(){window.detachEvent("onresize",this._doOnResize);window.removeEventListener("resize",this._doOnResize,!1)};dhtmlxEvent(window,"resize",this._doOnResize);this.base.childNodes[0].onselectstart=function(b){b=b||event;b.cancelBubble=!0;b.returnValue=!1;b.preventDefault&&b.preventDefault();return !1};for(var j=0;j<this.base.childNodes[0].childNodes.length-2;j++){this.base.childNodes[0].childNodes[j].childNodes[0].onmousedown=function(){var b=this.getAttribute("cmd");typeof s[b]=="function"&&(s[b](),s.callEvent("onToolbarClick",[this.getAttribute("actv")]));return !1},this.base.childNodes[0].childNodes[j].childNodes[0].onclick=function(){return !1}}this.runCommand=function(g,f){if(this._roMode!==!0){arguments.length<2&&(f=null);_isIE&&this.edWin.focus();try{var x=this.editor.contentWindow.document;x.execCommand(g,!1,f)}catch(w){}if(_isIE){this.edWin.focus();var h=this;window.setTimeout(function(){h.edWin.focus()},1)}}};this.applyBold=function(){this.runCommand("Bold")};this.applyItalic=function(){this.runCommand("Italic")};this.applyUnderscore=function(){this.runCommand("Underline")};this.clearFormatting=function(){this.runCommand("RemoveFormat")};this._isToolbar&&this.initDhtmlxToolbar();dhtmlxEventable(this);dhtmlxEvent(this.edDoc,"click",function(e){var c=e||window.event,f=c.target||c.srcElement;s.showInfo(f)});_isOpera&&dhtmlxEvent(this.edDoc,"mousedown",function(e){var c=e||window.event,f=c.target||c.srcElement;s.showInfo(f)});dhtmlxEvent(this.edDoc,"keyup",function(f){var c=f||window.event,h=c.keyCode,g=c.target||c.srcElement;(h==37||h==38||h==39||h==40||h==13)&&s.showInfo(g)});this.attachEvent("onFocusChanged",function(b){s._doOnFocusChanged&&s._doOnFocusChanged(b)});this.showInfo=function(f){if((f=this.getSelectionBounds().end?this.getSelectionBounds().end:f)&&this.setStyleProperty){try{if(this.edWin.getComputedStyle){var e=this.edWin.getComputedStyle(f,null),h=e.getPropertyValue("font-weight")==401?700:e.getPropertyValue("font-weight");this.style={fontStyle:e.getPropertyValue("font-style"),fontSize:e.getPropertyValue("font-size"),textDecoration:e.getPropertyValue("text-decoration"),fontWeight:h,fontFamily:e.getPropertyValue("font-family"),textAlign:e.getPropertyValue("text-align")};if(window._KHTMLrv){this.style.fontStyle=e.getPropertyValue("font-style"),this.style.vAlign=e.getPropertyValue("vertical-align"),this.style.del=this.isStyleProperty(f,"span","textDecoration","line-through"),this.style.u=this.isStyleProperty(f,"span","textDecoration","underline")}}else{e=f.currentStyle,this.style={fontStyle:e.fontStyle,fontSize:e.fontSize,textDecoration:e.textDecoration,fontWeight:e.fontWeight,fontFamily:e.fontFamily,textAlign:e.textAlign}}this.setStyleProperty(f,"h1");this.setStyleProperty(f,"h2");this.setStyleProperty(f,"h3");this.setStyleProperty(f,"h4");window._KHTMLrv||(this.setStyleProperty(f,"del"),this.setStyleProperty(f,"sub"),this.setStyleProperty(f,"sup"),this.setStyleProperty(f,"u"));this.callEvent("onFocusChanged",[this.style,e])}catch(g){return null}}};this.getSelectionBounds=function(){var w,h,D,C;if(this.edWin.getSelection){var A=this.edWin.getSelection();w=A.getRangeAt(A.rangeCount-1);D=w.startContainer;C=w.endContainer;h=w.commonAncestorContainer;if(D.nodeName=="#text"){h=h.parentNode}if(D.nodeName=="#text"){D=D.parentNode}if(D.nodeName.toLowerCase()=="body"){D=D.firstChild}if(C.nodeName=="#text"){C=C.parentNode}if(C.nodeName.toLowerCase()=="body"){C=C.lastChild}D==C&&(h=D);return{root:h,start:D,end:C}}else{if(this.edWin.document.selection){w=this.edDoc.selection.createRange();if(!w.duplicate){return null}h=w.parentElement();var y=w.duplicate(),x=w.duplicate();y.collapse(!0);x.moveToElementText(y.parentElement());x.setEndPoint("EndToStart",y);D=y.parentElement();y=w.duplicate();x=w.duplicate();x.collapse(!1);y.moveToElementText(x.parentElement());y.setEndPoint("StartToEnd",x);C=x.parentElement();if(D.nodeName.toLowerCase()=="body"){D=D.firstChild}if(C.nodeName.toLowerCase()=="body"){C=C.lastChild}D==C&&(h=D);return{root:h,start:D,end:C}}}return null};this.getContent=function(){return this.edDoc.body?_isFF?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):_isIE&&this.edDoc.body.innerText.length==0?"":this.edDoc.body.innerHTML:""};this.setContent=function(b){b=b||"";if(this.edDoc.body){if(navigator.userAgent.indexOf("Firefox")!=-1){if(typeof this._ffTest=="undefined"){this.editor.contentWindow.document.body.innerHTML="",this.runCommand("InsertHTML","test"),this._ffTest=this.editor.contentWindow.document.body.innerHTML.length>0}this._ffTest?this.editor.contentWindow.document.body.innerHTML=b:(this.editor.contentWindow.document.body.innerHTML="",b.length==0&&(b=" "),this.runCommand("InsertHTML",b))}else{this.editor.contentWindow.document.body.innerHTML=b}this.callEvent("onContentSet",[])}else{dhtmlxEvent(this.edWin,"load",function(){s.setContent(b)})}};this.setContentHTML=function(b){(new dtmlXMLLoaderObject(this._ajaxOnLoad,this,!1,!0)).loadXML(b)};this._ajaxOnLoad=function(g,f,x,w,h){h.xmlDoc.responseText&&g.setContent(h.xmlDoc.responseText)}}function dhtmlXContainerLite(d){var c=this;this.obj=d;this.dhxcont=null;this.setContent=function(b){this.dhxcont=b;this.dhxcont.innerHTML="<div style='position: relative; left: 0px; top: 0px; overflow: hidden;'></div>";this.dhxcont.mainCont=this.dhxcont.childNodes[0];this.obj.dhxcont=this.dhxcont};this.obj._genStr=function(h){for(var g="",k="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",j=0;j<h;j++){g+=k.charAt(Math.round(Math.random()*(k.length-1)))}return g};this.obj.adjustContent=function(A,y,x,w,v){this.dhxcont.style.left=(this._offsetLeft||0)+"px";this.dhxcont.style.top=(this._offsetTop||0)+y+"px";var u=A.clientWidth+(this._offsetWidth||0);if(w!==!0){this.dhxcont.style.width=Math.max(0,u)+"px"}if(w!==!0&&this.dhxcont.offsetWidth>u){this.dhxcont.style.width=Math.max(0,u*2-this.dhxcont.offsetWidth)+"px"}var s=A.clientHeight+(this._offsetHeight||0);this.dhxcont.style.height=Math.max(0,s-y)+(x!=null?x:0)+"px";if(this.dhxcont.offsetHeight>s-y){this.dhxcont.style.height=Math.max(0,(s-y)*2-this.dhxcont.offsetHeight)+"px"}if(v&&!isNaN(v)){this.dhxcont.style.height=Math.max(0,parseInt(this.dhxcont.style.height)-v)+"px"}if(this._minDataSizeH!=null&&parseInt(this.dhxcont.style.height)<this._minDataSizeH){this.dhxcont.style.height=this._minDataSizeH+"px"}if(this._minDataSizeW!=null&&parseInt(this.dhxcont.style.width)<this._minDataSizeW){this.dhxcont.style.width=this._minDataSizeW+"px"}if(w!==!0&&(this.dhxcont.mainCont.style.width=this.dhxcont.clientWidth+"px",this.dhxcont.mainCont.offsetWidth>this.dhxcont.clientWidth)){this.dhxcont.mainCont.style.width=Math.max(0,this.dhxcont.clientWidth*2-this.dhxcont.mainCont.offsetWidth)+"px"}var o=this.menu!=null?!this.menuHidden?this.menuHeight:0:0,n=this.toolbar!=null?!this.toolbarHidden?this.toolbarHeight:0:0,m=this.sb!=null?!this.sbHidden?this.sbHeight:0:0;this.dhxcont.mainCont.style.height=this.dhxcont.clientHeight+"px";if(this.dhxcont.mainCont.offsetHeight>this.dhxcont.clientHeight){this.dhxcont.mainCont.style.height=Math.max(0,this.dhxcont.clientHeight*2-this.dhxcont.mainCont.offsetHeight)+"px"}this.dhxcont.mainCont.style.height=Math.max(0,parseInt(this.dhxcont.mainCont.style.height)-o-n-m)+"px"};this.obj.attachToolbar=function(){var b=document.createElement("DIV");b.style.position="relative";b.style.overflow="hidden";b.id="dhxtoolbar_"+this._genStr(12);this.dhxcont.insertBefore(b,this.dhxcont.childNodes[this.menu!=null?1:0]);this.toolbar=new dhtmlXToolbarObject(b.id,this.skin);c.skin=="dhx_web"?(this.toolbarHeight=32,this.dhxcont.className="dhtmlx_editor_extended_"+c.skin):c.skin=="dhx_terrace"?(this._attached?(this.toolbarHeight=46,b.style.marginBottom="14px"):(this.toolbarHeight=34,b.style.marginTop="2px",b.style.marginLeft="2px",b.style.marginBottom="2px"),this.dhxcont.className="dhtmlx_editor_extended_"+c.skin):this.toolbarHeight=b.offsetHeight+(this._isLayout&&this.skin=="dhx_skyblue"?2:0);this.toolbarId=b.id;this._doOnAttachToolbar&&this._doOnAttachToolbar("init");this.adjust();return this.toolbar};this.obj.attachObject=function(h,g){typeof h=="string"&&(h=document.getElementById(h));if(g){h.style.visibility="hidden";h.style.display="";var k=h.offsetWidth,j=h.offsetHeight}this._attachContent("obj",h);if(g&&this._isWindow){h.style.visibility="visible",this._adjustToContent(k,j)}};this.obj.adjust=function(){if(this.skin=="dhx_skyblue"&&this.toolbar){if(this._isWindow||this._isLayout){document.getElementById(this.toolbarId).style.height="29px",this.toolbarHeight=document.getElementById(this.toolbarId).offsetHeight,this._doOnAttachToolbar&&this._doOnAttachToolbar("show")}this._isCell&&(document.getElementById(this.toolbarId).className+=" in_layoutcell");this._isAcc&&(document.getElementById(this.toolbarId).className+=" in_acccell")}};this.obj._attachContent=function(b,g,f){for(;c.dhxcont.mainCont.childNodes.length>0;){c.dhxcont.mainCont.removeChild(c.dhxcont.mainCont.childNodes[0])}if(b=="obj"){if(this._isWindow&&g.cmp==null&&this.skin=="dhx_skyblue"){this.dhxcont.mainCont.style.border="#a4bed4 1px solid",this.dhxcont.mainCont.style.backgroundColor="#FFFFFF",this._redraw()}c.dhxcont._frame=null;c.dhxcont.mainCont.appendChild(g);c.dhxcont.mainCont.style.overflow=f===!0?"auto":"hidden";g.style.display=""}};this.obj._dhxContDestruct=function(){for(;this.dhxcont.mainCont.childNodes.length>0;){this.dhxcont.mainCont.removeChild(this.dhxcont.mainCont.childNodes[0])}this.dhxcont.mainCont.innerHTML="";this.dhxcont.mainCont=null;try{delete this.dhxcont.mainCont}catch(f){}for(;this.dhxcont.childNodes.length>0;){this.dhxcont.removeChild(this.dhxcont.childNodes[0])}this.dhxcont.innerHTML="";this.dhxcont=null;try{delete this.dhxcont}catch(e){}this.attachToolbar=this.adjustContent=this.moveContentTo=this.attachObject=this.adjust=this._dhxContDestruct=this._attachContent=this._genStr=null}}(function(){dhtmlx.extend_api("dhtmlXEditor",{_init:function(b){return[b.parent,b.skin]},content:"setContent"},{})})();dhtmlXEditor.prototype.unload=function(){if(this._isToolbar){this._unloadExtModule()}else{for(;this.base.childNodes[0].childNodes.length>0;){if(this.base.childNodes[0].childNodes[0].tagName&&String(this.base.childNodes[0].childNodes[0].tagName).toLowerCase()=="a"){this.base.childNodes[0].childNodes[0].childNodes[0].onclick=null,this.base.childNodes[0].childNodes[0].childNodes[0].onmousedown=null,this.base.childNodes[0].childNodes[0].removeChild(this.base.childNodes[0].childNodes[0].childNodes[0])}this.base.childNodes[0].removeChild(this.base.childNodes[0].childNodes[0])}}this.tbData=this.base.childNodes[0].onselectstart=null;this.detachAllEvents();_isIE?this.editor.onreadystatechange=null:this.editor.onload=null;this.editor.parentNode.removeChild(this.editor);this.edWin=this.edDoc=this.editor=this.editor.onunload=null;this.base._dhxContDestruct();this.base._idd=null;for(this.base.name=null;this.base.childNodes.length>0;){this.base.removeChild(this.base.childNodes[0])}this.unload=this.isReadonly=this.setReadonly=this.setContentHTML=this.setContent=this.getContent=this.getSelectionBounds=this.showInfo=this.detachAllEvents=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=this.clearFormatting=this.applyUnderscore=this.applyItalic=this.applyBold=this.runCommand=this.setSizes=this.init=this.setIconsPath=this._doOnUnload=this._doOnResize=this._prepareContent=this._focus=this._ev=this._ajaxOnLoad=this.iconsPath=this.skin=this._resizeTMTime=this._resizeTM=this._isToolbar=this.cBlock=this.base=null};dhtmlXEditor.prototype.setReadonly=function(b){this._roMode=b===!0;this._prepareContent(!0,this._roMode);this.cBlock.style.display=this._roMode?"":"none"};dhtmlXEditor.prototype.isReadonly=function(){return this._roMode||!1};dhtmlXEditor.prototype.initDhtmlxToolbar=function(){this.tb=this.base.attachToolbar();this.tb.setSkin(this.skin);if(this.skin=="dhx_skyblue"){this.tb.base.style.borderLeft="none",this.tb.base.style.borderRight="none",this.tb.base.style.top="-1px"}this.setSizes();this.tb.setIconsPath(this.iconsPath+"dhxeditor_"+this.skin+"/");this._availFonts="Arial,Arial Narrow,Comic Sans MS,Courier,Georgia,Impact,Tahoma,Times New Roman,Verdana".split(",");this._initFont=this._availFonts[0];this._xmlFonts="";for(var f=0;f<this._availFonts.length;f++){var e=String(this._availFonts[f]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+e+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(e).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"};this._xmlSizes="";for(var h in this._availSizes){this._xmlSizes+='<item type="button" id="applyFontSize:'+h+":"+this._availSizes[h]+'" text="'+this._availSizes[h]+'"/>'}this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>';this.tb.loadXMLString(this.tbXML);this._checkAlign=function(b){this.tb.setItemState("alignCenter",!1);this.tb.setItemState("alignRight",!1);this.tb.setItemState("alignJustify",!1);this.tb.setItemState("alignLeft",!1);b&&this.tb.setItemState(b,!0)};this._checkH=function(b){this.tb.setItemState("applyH1",!1);this.tb.setItemState("applyH2",!1);this.tb.setItemState("applyH3",!1);this.tb.setItemState("applyH4",!1);b&&this.tb.setItemState(b,!0)};this._doOnFocusChanged=function(j){if(!j.h1&&!j.h2&&!j.h3&&!j.h4){var d=String(j.fontWeight).search(/bold/i)!=-1||Number(j.fontWeight)>=700;this.tb.setItemState("applyBold",d)}else{this.tb.setItemState("applyBold",!1)}var k="alignLeft";String(j.textAlign).search(/center/)!=-1&&(k="alignCenter");String(j.textAlign).search(/right/)!=-1&&(k="alignRight");String(j.textAlign).search(/justify/)!=-1&&(k="alignJustify");this.tb.setItemState(k,!0);this._checkAlign(k);this.tb.setItemState("applyH1",j.h1);this.tb.setItemState("applyH2",j.h2);this.tb.setItemState("applyH3",j.h3);this.tb.setItemState("applyH4",j.h4);if(window._KHTMLrv){j.sub=j.vAlign=="sub",j.sup=j.vAlign=="super"}this.tb.setItemState("applyItalic",j.fontStyle=="italic");this.tb.setItemState("applyStrikethrough",j.del);this.tb.setItemState("applySub",j.sub);this.tb.setItemState("applySuper",j.sup);this.tb.setItemState("applyUnderscore",j.u)};this._doOnToolbarClick=function(d){var c=String(d).split(":");this[c[0]]!=null&&typeof this[c[0]]=="function"&&(this[c[0]](c[1]),this.callEvent("onToolbarClick",[d]))};this._doOnStateChange=function(b){this[b]();switch(b){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(b);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(b)}this.callEvent("onToolbarClick",[b])};this._doOnBeforeStateChange=function(d,c){return(d=="alignLeft"||d=="alignCenter"||d=="alignRight"||d=="alignJustify")&&c==!0?!1:!0};var g=this;this.tb.attachEvent("onClick",function(b){g._doOnToolbarClick(b)});this.tb.attachEvent("onStateChange",function(d,c){g._doOnStateChange(d,c)});this.tb.attachEvent("onBeforeStateChange",function(d,c){return g._doOnBeforeStateChange(d,c)});this.applyBold=function(){this.runCommand("Bold")};this.applyItalic=function(){this.runCommand("Italic")};this.applyUnderscore=function(){this.runCommand("Underline")};this.applyStrikethrough=function(){this.runCommand("StrikeThrough")};this.alignLeft=function(){this.runCommand("JustifyLeft")};this.alignRight=function(){this.runCommand("JustifyRight")};this.alignCenter=function(){this.runCommand("JustifyCenter")};this.alignJustify=function(){this.runCommand("JustifyFull")};this.applySub=function(){this.runCommand("Subscript")};this.applySuper=function(){this.runCommand("Superscript")};this.applyH1=function(){this.runCommand("FormatBlock","<H1>")};this.applyH2=function(){this.runCommand("FormatBlock","<H2>")};this.applyH3=function(){this.runCommand("FormatBlock","<H3>")};this.applyH4=function(){this.runCommand("FormatBlock","<H4>")};this.createNumList=function(){this.runCommand("InsertOrderedList")};this.createBulList=function(){this.runCommand("InsertUnorderedList")};this.increaseIndent=function(){this.runCommand("Indent")};this.decreaseIndent=function(){this.runCommand("Outdent")};this.clearFormatting=function(){this.runCommand("RemoveFormat");this.tb.setItemState("applyBold",!1);this.tb.setItemState("applyItalic",!1);this.tb.setItemState("applyStrikethrough",!1);this.tb.setItemState("applySub",!1);this.tb.setItemState("applySuper",!1);this.tb.setItemState("applyUnderscore",!1)};this.getParentByTag=function(j,d){var d=d.toLowerCase(),k=j;do{if(d==""||k.nodeName.toLowerCase()==d){return k}}while(k=k.parentNode);return j};this.isStyleProperty=function(k,j,n,m){var j=j.toLowerCase(),l=k;do{if(l.nodeName.toLowerCase()==j&&l.style[n]==m){return !0}}while(l=l.parentNode);return !1};this.setStyleProperty=function(j,d){this.style[d]=!1;var k=this.getParentByTag(j,d);k&&k.tagName.toLowerCase()==d&&(this.style[d]=!0);if(d=="del"&&this.getParentByTag(j,"strike")&&this.getParentByTag(j,"strike").tagName.toLowerCase()=="strike"){this.style.del=!0}};this._unloadExtModule=function(){this.tb.unload();this.setStyleProperty=this.isStyleProperty=this.getParentByTag=this.clearFormatting=this.decreaseIndent=this.increaseIndent=this.createBulList=this.createNumList=this.applyH4=this.applyH3=this.applyH2=this.applyH1=this.applySuper=this.applySub=this.alignJustify=this.alignCenter=this.alignRight=this.alignLeft=this.applyStrikethrough=this.applyUnderscore=this.applyItalic=this.applyBold=this._doOnBeforeStateChange=this._doOnStateChange=this._doOnToolbarClick=this._doOnFocusChanged=this._checkH=this._checkAlign=this.tbXML=this._xmlSizes=this._availSizes=this._xmlFonts=this._initFont=this._availFonts=this.tb=null}};function dhtmlXForm(a,b,c){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var d=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize="13px";this._updateBlocks();this.forEachItem(function(b){d.getItemType(b)=="calendar"&&d.doWithItem(b,"setSkin",a)})};this.skinDetect=function(){var a=document.createElement("DIV");a.className="dhxform_skin_detect";document.body.firstChild?document.body.insertBefore(a,document.body.firstChild):document.body.appendChild(a);var b=a.offsetWidth;a.parentNode.removeChild(a);a=null;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[b]||null};this.skin=c||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||this.skinDetect()||"dhx_skyblue";this.separator=",";this.live_validate=!1;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=typeof a=="object"?a:document.getElementById(a);if(!a._isNestedForm){this._parentForm=!0,this.cont.style.fontSize="13px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(a){a=a||event;if(a.keyCode==13){var b=a.target||a.srcElement;typeof b.tagName!="undefined"&&String(b.tagName).toLowerCase()=="textarea"&&!a.ctrlKey||d.callEvent("onEnter",[])}}}this.b_index=null;this.base=[];this._prepare=function(a){this.b_index==null?this.b_index=0:this.b_index++;this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";typeof a!="undefined"&&(this.base[this.b_index].style.cssText+=" margin-left:"+a+"px!important;");this.cont.appendChild(this.base[this.b_index])};this.setSizes=function(){};this._mergeSettings=function(a){var b=-1,c={type:"settings"},d;for(d in this.idef){c[d]=this.idef[d]}for(var e=0;e<a.length;e++){if(typeof a[e]!="undefined"&&a[e].type=="settings"){for(d in a[e]){c[d]=a[e][d]}b=e}}a[b>=0?b:a.length]=c;return a};this._genStr=function(a){for(var b="",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",d=0;d<a;d++){b+=c.charAt(Math.round(Math.random()*(c.length-1)))}return b};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=this._parentForm?this._genStr(12)+"_":a._rId;this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(a,b,c,e,j,k){this.items[a]._index&&(this.getForm()._indexId.push(b),this.getForm()._idIndex[b]={ind:this.getForm()._indexId.length-1});if(!a){a=this._type}if(a=="list"&&j!=null&&this.itemPull[this.idPrefix+j]!=null&&typeof this.itemPull[this.idPrefix+j]._addSubListNode=="function"){var l=this.itemPull[this.idPrefix+j]._addSubListNode()}else{if(a=="newcolumn"){l={}}else{var m=null;if(typeof k!="undefined"&&!isNaN(k)&&a!="list"){for(var k=Math.max(parseInt(k),0)+1,n=0;n<this.base[this.b_index].childNodes.length;n++){this.base[this.b_index].childNodes[n]._isNestedForm!=!0&&(k--,k==0&&(m=this.base[this.b_index].childNodes[n]))}}else{if(a=="list"){for(var o in this.itemPull){if(o==this.idPrefix+b){m=this.itemPull[o].nextSibling,this.itemPull[o]._listBase!=null&&this.itemPull[o]._listBase.length>0&&(m=this.itemPull[o]._listBase[this.itemPull[o]._listBase.length-1])}}}}l=document.createElement("DIV");m?this.base[this.b_index].insertBefore(l,m):this.base[this.b_index].appendChild(l)}}l._idd=b;l._rId=this._rId;if(typeof l.style!="undefined"){if(typeof c.offsetLeft=="undefined"&&this.idef.offsetLeft>0){c.offsetLeft=this.idef.offsetLeft}if(typeof c.offsetTop=="undefined"&&this.idef.offsetTop>0){c.offsetTop=this.idef.offsetTop}var p="";typeof c.offsetLeft!="undefined"&&(p+=" padding-left:"+c.offsetLeft+"px!important;");typeof c.offsetTop!="undefined"&&(p+=" padding-top:"+c.offsetTop+"px!important;");l.style.cssText+=p}if(a=="block"&&isNaN(c.blockOffset)){c.blockOffset=this.idef.blockOffset}if(a=="list"){if(typeof l._ofsNested=="undefined"){l._ofsNested=this.idef_const.offsetNested}if(e!=null){l._sId=e}var q=this.items[a].render(l);if(!this.itemPull[this.idPrefix+b]._listObj){this.itemPull[this.idPrefix+b]._listObj=[]}if(!this.itemPull[this.idPrefix+b]._list){this.itemPull[this.idPrefix+b]._list=[]}if(!this.itemPull[this.idPrefix+b]._listBase){this.itemPull[this.idPrefix+b]._listBase=[]}this.itemPull[this.idPrefix+b]._listObj.push(q[0]);this.itemPull[this.idPrefix+b]._list.push(q[1]);this.itemPull[this.idPrefix+b]._listBase.push(l);q[1].checkEvent=function(a){return d.checkEvent(a)};q[1].callEvent=function(a,b){return d.callEvent(a,b)};q[1].getForm=function(){return d.getForm()};q[1]._initObj(this._mergeSettings(c));l._inBlcok&&(l.className+=" in_block");return q[1]}if(a=="newcolumn"){this._prepare(c.offset)}else{if(a=="label"&&this._ic++==0){c._isTopmost=!0}c.position=this.apos_css[!c.position||!this.apos_css[c.position]?this.idef.position:c.position];l.className=c.position+(typeof c.className=="string"?" "+c.className:"");if(!c.labelWidth){c.labelWidth=this.idef.labelWidth}if(!c.labelHeight){c.labelHeight=this.idef.labelHeight}if(typeof c.wrap!="undefined"){c.wrap=this._s2b(c.wrap)}c.labelAlign=this.align_css[c.labelAlign]?this.align_css[c.labelAlign]:this.align_css[this.idef.labelAlign];c.inputWidth=c.width?c.width:c.inputWidth?c.inputWidth:this.idef.inputWidth;if(!c.inputHeight){c.inputHeight=this.idef.inputHeight}if(typeof c.note!="undefined"){if(c.note.length!=null&&c.note[0]!=null){c.note=c.note[0]}if(typeof c.note.width=="undefined"){c.note.width=this.idef.noteWidth}if(c.note.width=="auto"){c.note.width=c.inputWidth}}l.checkEvent=function(a){return d.checkEvent(a)};l.callEvent=function(a,b){return d.callEvent(a,b)};l.getForm=function(){return d.getForm()};l._autoCheck=function(a){d._autoCheck(a)};if(typeof c.readonly=="string"){c.readonly=this._s2b(c.readonly)}if(typeof c.autoStart=="string"){c.autoStart=this._s2b(c.autoStart)}if(typeof c.autoRemove=="string"){c.autoRemove=this._s2b(c.autoRemove)}if(typeof c.titleScreen=="string"){c.titleScreen=this._s2b(c.titleScreen)}if(typeof c.info=="string"){c.info=this._s2b(c.info)}if(typeof c.hidden=="string"){c.hidden=this._s2b(c.hidden)}if(typeof c.checked=="string"){c.checked=this._s2b(c.checked)}if(typeof c.userdata!="undefined"){for(o in c.userdata){this.getForm().setUserData(b,o,c.userdata[o])}}if(c.validate){l._validate=typeof(c.validate!="undefined")&&(typeof c.validate=="function"||typeof window[c.validate]=="function")?[c.validate]:String(c.validate).split(this.separator)}if(typeof c.required!="undefined"){if(typeof c.required=="string"){c.required=this._s2b(c.required)}l._required=c.required==!0}if(l._required){if(!l._validate){l._validate=[]}for(var r=!1,n=0;n<l._validate.length;n++){r=r||l._validate[n]=="NotEmpty"}r||l._validate.push("NotEmpty")}l._ll=c.position==this.apos_css["label-left"]||c.position==this.apos_css["label-top"];this.objPull[this.idPrefix+b]=this.items[a].render(l,c);this.itemPull[this.idPrefix+b]=l}};this._initObj=function(a){this._prepare();for(var b=0;b<a.length;b++){if(typeof a[b]!="undefined"&&a[b].type=="settings"){for(var c in a[b]){this.idef[c]=a[b][c]}}}for(b=0;b<a.length;b++){this._prepareItem(a[b])}this._autoCheck()};this._prepareItem=function(a,b){var c=a!=null&&a.type!=null?a.type:"";if(this.items[c]){if(!a.name){a.name=this._genStr(12)}var d=a.name;if(this.objPull[this.idPrefix+d]!=null||c=="radio"){d=this._genStr(12)}var e=a;e.label=e.label||"";e.value=e.value;e.checked=this._s2b(e.checked);e.disabled=this._s2b(e.disabled);e.name=e.name||this._genStr(12);e.options=e.options||[];e.rows=e.rows||"none";e.uid=this._genStr(12);this._addItem(c,d,e,null,null,b);b=null;this._parentEnabled===!1&&this._disableItem(d);for(var k=0;k<e.options.length;k++){if(e.options[k].list!=null){if(!e.options[k].value){e.options[k].value=this._genStr()}var l=this._addItem("list",d,e.options[k].list,e.options[k].value,null);l._subSelect=!0;l._subSelectId=e.options[k].value}}if(a.list!=null){if(!a.listParent){a.listParent=e.name}l=this._addItem("list",d,a.list,null,a.listParent)}}};this._s2b=function(a){return a=="true"||a=="1"||a=="yes"||a==!0?!0:!1};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(a,b){for(var c=b?[]:{},d=0;d<a.childNodes.length;d++){if(typeof a.childNodes[d].tagName!="undefined"){var e=a.childNodes[d].tagName;if(this._xmlSubItems[e]!=null){var k=this._xmlSubItems[e];typeof c[k]=="undefined"&&(c[k]=[]);for(var l={},m=0;m<a.childNodes[d].attributes.length;m++){var n=a.childNodes[d].attributes[m].name,o=a.childNodes[d].attributes[m].value;l[n]=o}if(k=="note"){l.text=a.childNodes[d].firstChild.nodeValue}if(k=="_userdata"){l.value=a.childNodes[d].firstChild.nodeValue}var p=this._xmlToObject(a.childNodes[d]),q;for(q in p){if(q=="_userdata"){if(!l.userdata){l.userdata={}}for(m=0;m<p[q].length;m++){l.userdata[p[q][m].name]=p[q][m].value}}else{l[q]=p[q]}}b?c.push(l):c[k].push(l)}}}return c};this._xmlParser=function(){if(d._loadType=="json"){eval("var formJSONData="+this.xmlDoc.responseText),typeof formJSONData=="object"&&formJSONData!=null&&d._initObj(formJSONData)}else{var a=d._xmlToObject(this.getXMLTopNode("items"),!0);d._initObj(a)}d.cont&&d.cont.cmp&&d.cont.cmp=="form"&&d.setSizes();d.callEvent("onXLE",[]);typeof d._doOnLoad=="function"&&d._doOnLoad()};this._doOnLoad=null;this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this.loadStruct=function(a,b,c){this._loadType="xml";if(typeof b=="string"){if(b.toLowerCase()=="json"&&(this._loadType="json",typeof a!="string")){this._initObj(a);return}this._doOnLoad=c||null}else{this._doOnLoad=b||null}this.callEvent("onXLS",[]);this._xmlLoader.loadXML(a)};this.loadStructString=function(a,b){this._doOnLoad=b||null;this._xmlLoader.loadXMLString(a)};this._autoCheck=function(a){this._locked===!0?a=!1:typeof a=="undefined"&&(a=!0);for(var b in this.itemPull){var c=a&&this.itemPull[b]._udis!==!0;this[c?"_enableItem":"_disableItem"](this.itemPull[b]._idd);if(this.getForm()._idIndex[this.itemPull[b]._idd]!=null){this.getForm()._idIndex[this.itemPull[b]._idd].enabled=c}var d=c&&(typeof this.itemPull[b]._checked=="boolean"?this.itemPull[b]._checked:!0);if(this.itemPull[b]._list){for(var e=0;e<this.itemPull[b]._list.length;e++){var k=!0;if(this.itemPull[b]._list[e]._subSelect==!0){var k=!1,l=this.getItemValue(this.itemPull[b]._idd);typeof l=="object"&&typeof l.length=="number"||(l=[l]);for(var m=0;m<l.length;m++){k=l[m]==this.itemPull[b]._list[e]._subSelectId||k}this.itemPull[b]._listObj[e][k?"show":"hide"](this.itemPull[b]._listBase[e])}this.itemPull[b]._list[e]._autoCheck(d&&k)}}}};this.doWithItem=function(a,b,c,d,e,k){if(typeof a=="object"){var l=a[0],m=a[1],n=null,o=null,p;for(p in this.itemPull){if((this.itemPull[p]._value==m||m===null)&&this.itemPull[p]._group==l){return this.objPull[p][b](this.itemPull[p],c,d,e,k)}if(this.itemPull[p]._list!=null&&!o){for(var q=0;q<this.itemPull[p]._list.length;q++){o=this.itemPull[p]._list[q].doWithItem(a,b,c,d,e)}}}if(o!=null){return o}else{if(b=="getType"){return this.doWithItem(a[0],"getType")}}}else{if(this.itemPull[this.idPrefix+a]){return this.objPull[this.idPrefix+a][b](this.itemPull[this.idPrefix+a],c,d,e,k)}else{o=null;for(p in this.itemPull){if(this.itemPull[p]._list&&!o){for(q=0;q<this.itemPull[p]._list.length;q++){o==null&&(o=this.itemPull[p]._list[q].doWithItem(a,b,c,d,e,k))}}}return o}}};this._removeItem=function(a,b){b!=null?a=this.doWithItem([a,b],"destruct"):this.doWithItem(a,"destruct");this._clearItemData(a)};this._clearItemData=function(a){if(this.itemPull[this.idPrefix+a]){a=this.idPrefix+a;try{this.objPull[a]=null,this.itemPull[a]=null,delete this.objPull[a],delete this.itemPull[a]}catch(b){}}else{for(var c in this.itemPull){if(this.itemPull[c]._list){for(var d=0;d<this.itemPull[c]._list.length;d++){this.itemPull[c]._list[d]._clearItemData(a)}}}}};this.isItem=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isExist")};this.getItemType=function(a,b){a=[a,b||null];return this.doWithItem(a,"getType")};this.getItemsList=function(){var a=[],b=[],c;for(c in this.itemPull){var d=null,d=this.itemPull[c]._group?this.itemPull[c]._group:c.replace(this.idPrefix,"");b[d]!=!0&&a.push(d);b[d]=!0}return a};this.forEachItem=function(a){for(var b in this.objPull){if(this.objPull[b].t=="radio"?a(this.itemPull[b]._group,this.itemPull[b]._value):a(String(b).replace(this.idPrefix,"")),this.itemPull[b]._list){for(var c=0;c<this.itemPull[b]._list.length;c++){this.itemPull[b]._list[c].forEachItem(a)}}}};this.setItemLabel=function(a,b,c){c!=null?a=[a,b]:c=b;this.doWithItem(a,"setText",c)};this.getItemLabel=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"getText")};this.setItemText=this.setItemLabel;this.getItemText=this.getItemLabel;this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"check");this._autoCheck()};this.uncheckItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"unCheck");this._autoCheck()};this.isItemChecked=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(a,b){for(var c in this.itemPull){if(this.itemPull[c]._group==a&&(b==null||this.itemPull[c]._value==b)){return this.itemPull[c]._idd}if(this.itemPull[c]._list!=null){for(var d=0;d<this.itemPull[c]._list.length;d++){var e=this.itemPull[c]._list[d]._getRGroup(a,b);if(e!=null){return e}}}}return null};this.setItemValue=function(a,b){return this.getItemType(a)=="radio"?(this._getRGroup(a,b)!=null?this.checkItem(a,b):this.uncheckItem(a,this.getCheckedValue(a)),null):this.doWithItem(a,"setValue",b)};this.getItemValue=function(a,b){return this.getItemType(a)=="radio"?this.getCheckedValue(a):this.doWithItem(a,"getValue",b)};this.updateValues=function(){this._updateValues()};this.showItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"show")};this.hideItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"hide")};this.isItemHidden=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(a,b){this.doWithItem(a,"setWidth",b)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(a,b){this.doWithItem(a,"setHeight",b)};this.setItemFocus=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"setFocus")};this._updateValues=function(){for(var a in this.itemPull){if(this.objPull[a]&&typeof this.objPull[a].updateValue=="function"&&this.objPull[a].updateValue(this.itemPull[a]),this.itemPull[a]._list){for(var b=0;b<this.itemPull[a]._list.length;b++){this.itemPull[a]._list[b]._updateValues()}}}};this._getItemByName=function(a){for(var b in this.itemPull){if(this.itemPull[b]._idd==a){return this.itemPull[b]}if(this.itemPull[b]._list!=null){for(var c=0;c<this.itemPull[b]._list.length;c++){var d=this.itemPull[b]._list[c]._getItemByName(a);if(d!=null){return d}}}}return null};this._resetValidateCss=function(a){a.className=a.className.replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,b,c){var d=this[this.getItemType(a)=="radio"?"_getRGroup":"_getItemByName"](a);if(d){d._vcss!=null&&this._resetValidateCss(d),d._vcss=typeof c=="string"?c:"validate_"+(b===!0?"ok":"error"),d.className+=" "+d._vcss}};this.resetValidateCss=function(){for(var a in this.itemPull){if(this.itemPull[a]._vcss!=null&&this._resetValidateCss(this.itemPull[a]),this.itemPull[a]._list!=null){for(var b=0;b<this.itemPull[a]._list.length;b++){this.itemPull[a]._list[b].resetValidateCss()}}}};this.validate=function(){if(this.callEvent("onBeforeValidate",[])!=!1){var a=!0;this.forEachItem(function(b,c){typeof c!="undefined"&&(b=[b,c]);a=d.doWithItem(b,"_validate")&&a});this.callEvent("onAfterValidate",[a]);return a}};this.validateItem=function(a,b){typeof b!="undefined"&&(a=[a,b]);return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=a==!0};this.setReadonly=function(a,b){this.doWithItem(a,"setReadonly",b)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(a){for(var b=0;b<this._indexId.length;b++){var c=!0;if(a==!0){var d=this.getItemType(this._indexId[b]);dhtmlXForm.prototype.items[d].setFocus||(c=!1)}if(c&&this._idIndex[this._indexId[b]].enabled){return this._indexId[b]}}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(!0);a!=null&&this.setItemFocus(a)};this.enableItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"userEnable");this._autoCheck()};this.disableItem=function(a,b){b!=null&&(a=[a,b]);this.doWithItem(a,"userDisable");this._autoCheck()};this.isItemEnabled=function(a,b){b!=null&&(a=[a,b]);return this.doWithItem(a,"isUserEnabled")};this.clear=function(){var a={};this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");for(var b in this.itemPull){var c=this.itemPull[b]._idd;this.itemPull[b]._type=="ch"&&this.uncheckItem(c);this.itemPull[b]._type in {ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(c,"");if(this.itemPull[b]._type=="combo"){this.itemPull[b]._apiChange=!0;var d=this.getCombo(c);d.selectOption(0);d=null;this.itemPull[b]._apiChange=!1}if(this.itemPull[b]._type=="se"){var e=this.getOptions(c);if(e.length>0){e[0].selected=!0}}if(this.itemPull[b]._type=="ra"){var k=this.itemPull[b]._group;a[k]||(this.checkItem(k,this.doWithItem(c,"_getFirstValue")),a[k]=!0)}if(this.itemPull[b]._list){for(var l=0;l<this.itemPull[b]._list.length;l++){this.itemPull[b]._list[l].clear()}}if(this["setFormData_"+this.itemPull[b]._type]){this["setFormData_"+this.itemPull[b]._type](c,"")}}a=null;this._parentForm&&this._autoCheck();this.resetValidateCss()};this.unload=function(){for(var a in this.objPull){this._removeItem(String(a).replace(this.idPrefix,""))}this.detachAllEvents();this._ccTm&&window.clearTimeout(this._ccTm);this._formLS=null;this._xmlLoader.destructor();this._subSelectId=this._subSelect=this.idPrefix=this.skin=this.idef=this.b_index=this.align_css=this.apos_css=this.isReadonly=this.setReadonly=this.isLocked=this.unlock=this.lock=this.getItemsList=this.getFormData=this.setFormData=this.getEditor=this.getCombo=this.getColorPicker=this.getCalendar=this.setSizes=this.setRTL=this.getUserData=this.setUserData=this.getItemWidth=this.getCheckedValue=this.detachAllEvents=this._prepare=this._locked=this._mergeSettings=this._doLock=this._parentForm=this._parentEnabled=this._type=this._rGroup=this.setSkin=this.setItemWidth=this.setItemHeight=this.setFontSize=this.remove=this.loadStructString=this.loadStruct=this._ulToObject=this._ic=this.getOptions=this.isItemChecked=this.uncheckItem=this.checkItem=this.isItemHidden=this.hideItem=this.showItem=this.getItemValue=this.setItemValue=this.getItemText=this.setItemText=this.getItemLabel=this.setItemLabel=this._getPosition=this._setPosition=this.getItemPosition=this.setItemPosition=this.eventCatcher=this.detachEvent=this.checkEvent=this.callEvent=this.attachEvent=this.removeItem=this.addItem=this.getForm=this.unload=this.getItemType=this.doWithItem=this.clear=this.isItem=this.forEachItem=this._isItemEnabled=this._disableItem=this._enableItem=this._clearItemData=this._autoCheck=this._initObj=this._genStr=this._removeItem=this._addItem=this.itemPull=this.objPull=this.items=this.loadXMLString=this.loadXML=this._xmlToObject=this._xmlParser=this._xmlLoader=null;for(var b=0;b<this.base.length;b++){for(;this.base[b].childNodes.length>0;){this.base[b].removeChild(this.base[b].childNodes[0])}this.base[b].parentNode&&this.base[b].parentNode.removeChild(this.base[b]);this.base[b]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null};for(var e in this.items){this.items[e].t=e;if(typeof this.items[e]._index=="undefined"){this.items[e]._index=!0}if(!this.items[e].show){this.items[e].show=function(a){a.style.display="";if(a._listObj){for(var b=0;b<a._listObj.length;b++){a._listObj[b].show(a._listBase[b])}}}}if(!this.items[e].hide){this.items[e].hide=function(a){a.style.display="none";if(a._listObj){for(var b=0;b<a._listObj.length;b++){a._listObj[b].hide(a._listBase[b])}}}}if(!this.items[e].isHidden){this.items[e].isHidden=function(a){return a.style.display=="none"}}if(!this.items[e].userEnable){this.items[e].userEnable=function(a){a._udis=!1}}if(!this.items[e].userDisable){this.items[e].userDisable=function(a){a._udis=!0}}if(!this.items[e].isUserEnabled){this.items[e].isUserEnabled=function(a){return a._udis!==!0}}if(!this.items[e].getType){this.items[e].getType=function(){return this.t}}if(!this.items[e].isExist){this.items[e].isExist=function(){return !0}}if(!this.items[e]._validate){this.items[e]._validate=function(a){if(!a._validate||!a._enabled){return !0}for(var b=a._type=="ch"?this.isChecked(a)?this.getValue(a):0:this.getValue(a),c=!0,d=0;d<a._validate.length;d++){var e="is"+a._validate[d];if(!((b==null||b.length==0)&&e!="isNotEmpty")){var k=dhtmlxValidation[e];typeof k!="function"&&typeof a._validate[d]=="function"&&(k=a._validate[d]);typeof k!="function"&&typeof window[a._validate[d]]=="function"&&(k=window[a._validate[d]]);c=(typeof k=="function"?k(b):RegExp(a._validate[d]).test(b))&&c;k=null}}a.callEvent("onValidate"+(c?"Success":"Error"),[a._idd,b,c])!==!1&&a.getForm().setValidateCss(a._idd,c);return c}}}this._locked=!1;this._doLock=function(a){var b=a===!0?!0:!1;if(this._locked!=b){this._locked=b,this._autoCheck(!this._locked)}};this.lock=function(){this._doLock(!0)};this.unlock=function(){this._doLock(!1)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(a,b,c,d){return this.doWithItem(a,"setNumberFormat",b,c,d)};dhtmlxEventable(this);this.attachEvent("_onButtonClick",function(a,b){this.callEvent("onButtonClick",[a,b])});this._updateBlocks=function(){this.forEachItem(function(a){(d.getItemType(a)=="block"||d.getItemType(a)=="combo")&&d.doWithItem(a,"_setCss",d.skin,d.cont.style.fontSize)})};this._isObj=function(a){return a!=null&&typeof a=="object"&&typeof a.length=="undefined"};this._copyObj=function(a){if(this._isObj(a)){var b={},c;for(c in a){b[c]=typeof a[c]=="object"&&a[c]!=null?this._copyObj(a[c]):a[c]}}else{b=[];for(c=0;c<a.length;c++){b[c]=typeof a[c]=="object"&&a[c]!=null?this._copyObj(a[c]):a[c]}}return b};b!=null&&typeof b=="object"&&this._initObj(this._copyObj(b));this._parentForm&&this._updateBlocks();this._ccActive=!1;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(b){return this.doWithItem(b,"getInput")};dhtmlXForm.prototype.getSelect=function(b){return this.doWithItem(b,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={render:function(e,d){e._type="ch";e._enabled=!0;e._checked=!1;e._value=typeof d.value=="undefined"?null:String(d.value);e._ro=d.readonly==!0;if(d._autoInputWidth!==!1){d.inputWidth=14}this.doAddLabel(e,d);this.doAddInput(e,d,"INPUT","TEXT",!0,!0,"dhxform_textarea");e.childNodes[e._ll?1:0].className+=" dhxform_img_node";var f=document.createElement("DIV");f.className="dhxform_img chbx0";e.appendChild(f);if(!isNaN(d.inputLeft)){e.childNodes[e._ll?1:0].style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){e.childNodes[e._ll?1:0].style.top=parseInt(d.inputTop)+"px"}e.childNodes[e._ll?1:0].appendChild(f);e.childNodes[e._ll?1:0].firstChild.value=String(d.value);e._updateImgNode=function(h,g){var j=h.childNodes[h._ll?1:0].lastChild;j.className=g?j.className.replace(/dhxform_img/gi,"dhxform_actv_c"):j.className.replace(/dhxform_actv_c/gi,"dhxform_img");h=j=null};e._doOnFocus=function(b){b.getForm().callEvent("onFocus",[b._idd])};e._doOnBlur=function(b){b.getForm().callEvent("onBlur",[b._idd])};e._doOnKeyUpDown=function(g,c){this.callEvent(g,[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};d.checked==!0&&this.check(e);d.hidden==!0&&this.hide(e);d.disabled==!0&&this.userDisable(e);this.doAttachEvents(e);return this},destruct:function(b){b._doOnFocus=b._doOnBlur=b._updateImgNode=null;this.doUnloadNestedLists(b);this.doDestruct(b)},doAddLabel:function(e,d){var f=document.createElement("DIV");f.className="dhxform_label "+d.labelAlign;if(d.wrap==!0){f.style.whiteSpace="normal"}e._ll?e.insertBefore(f,e.firstChild):e.appendChild(f);if(typeof d.tooltip!="undefined"){f.title=d.tooltip}f.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(_dhxForm_isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+d.label+(d.info?"<span class='dhxform_info'>[?]</span>":"")+(e._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(d.labelWidth)){f.firstChild.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){f.firstChild.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){f.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){f.style.top=parseInt(d.labelTop)+"px"}},doAddInput:function(I,H,F,E,D,C,A){var y=document.createElement("DIV");y.className="dhxform_control";I._ll?I.appendChild(y):I.insertBefore(y,I.firstChild);var x=document.createElement(F);x.className=A;x.name=I._idd;x._idd=I._idd;x.id=H.uid;if(typeof E=="string"){x.type=E}if(F=="INPUT"||F=="TEXTAREA"){x.onkeyup=function(a){a=a||event;I.callEvent("onKeyUp",[this,a,this._idd])},x.onkeydown=function(a){a=a||event;I.callEvent("onKeyDown",[this,a,this._idd])}}y.appendChild(x);H.readonly&&this.setReadonly(I,!0);H.hidden==!0&&this.hide(I);H.disabled==!0&&this.userDisable(I);if(D){if(!isNaN(H.inputLeft)){y.style.left=parseInt(H.inputLeft)+"px"}if(!isNaN(H.inputTop)){y.style.top=parseInt(H.inputTop)+"px"}}var w="",v=!1;C&&(isNaN(H.inputWidth)||(w+="width:"+parseInt(H.inputWidth)+"px;",v=!0),isNaN(H.inputHeight)||(w+="height:"+parseInt(H.inputHeight)+"px;"));typeof H.style=="string"&&(w+=H.style);x.style.cssText=w;H.maxLength&&x.setAttribute("maxLength",H.maxLength);H.connector&&x.setAttribute("connector",H.connector);if(v){var u=parseInt(x.style.width),s=_isFF||_isChrome||_isIE?x.clientWidth:x.offsetWidth;if(s>u){x.style.width=u+(u-s)+"px"}}if(typeof H.note=="object"){var o=document.createElement("DIV");o.className="dhxform_note";o.style.width=(isNaN(H.note.width)?x.offsetWidth:parseInt(H.note.width))+"px";o._w=H.note.width;o.innerHTML=H.note.text;y.appendChild(o);o=null}},doUnloadNestedLists:function(d){if(d._list){for(var c=0;c<d._list.length;c++){d._list[c].unload(),d._list[c]=null,d._listObj[c]=null,d._listBase[c].parentNode.removeChild(d._listBase[c]),d._listBase[c]=null}d._list=null;d._listObj=null;d._listBase=null}},doDestruct:function(b){b.callEvent=null;b.checkEvent=null;b.getForm=null;b._autoCheck=null;b._checked=null;b._enabled=null;b._idd=null;b._type=null;b._value=null;b._group=null;b.onselectstart=null;b.childNodes[b._ll?1:0].onmousedown=null;b.childNodes[b._ll?1:0].ontouchstart=null;b.childNodes[b._ll?0:1].onmousedown=null;b.childNodes[b._ll?0:1].ontouchstart=null;b.childNodes[b._ll?0:1].childNodes[0].onfocus=null;b.childNodes[b._ll?0:1].childNodes[0].onblur=null;b.childNodes[b._ll?0:1].childNodes[0].onkeypress=null;b.childNodes[b._ll?0:1].childNodes[0].onkeyup=null;b.childNodes[b._ll?0:1].childNodes[0].onkeydown=null;b.childNodes[b._ll?0:1].childNodes[0].onmousedown=null;b.childNodes[b._ll?0:1].childNodes[0].ontouchstart=null;for(b.childNodes[b._ll?0:1].removeChild(b.childNodes[b._ll?0:1].childNodes[0]);b.childNodes.length>0;){b.removeChild(b.childNodes[0])}b.parentNode.removeChild(b);b=null},doAttachEvents:function(d){var c=this;d.childNodes[d._ll?1:0][_dhxForm_isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event;b.preventDefault&&b.preventDefault();var e=b.target||b.srcElement;if(!this.parentNode._enabled||this.parentNode._ro||typeof e.className!="undefined"&&e.className=="dhxform_note"){return b.cancelBubble=!0,b.returnValue=!1}c.doClick(this.parentNode)};d.childNodes[d._ll?0:1].childNodes[0][_dhxForm_isIPad?"ontouchstart":"onmousedown"]=function(b){b=b||event;b.preventDefault&&b.preventDefault();if(!this.parentNode.parentNode._enabled){return b.cancelBubble=!0,b.returnValue=!1}var e=b.target||b.srcElement;if(typeof e.className!="undefined"&&e.className=="dhxform_info"){return this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd]),b.cancelBubble=!0,b.returnValue=!1}c.doClick(this.parentNode.parentNode)}},doClick:function(b){b.childNodes[b._ll?0:1].childNodes[0].focus();b._enabled&&!b._ro&&!(b.checkEvent("onBeforeChange")&&b.callEvent("onBeforeChange",[b._idd,b._value,b._checked])!==!0)&&(this.setChecked(b,!b._checked),b._autoCheck(),b.callEvent("onChange",[b._idd,b._value,b._checked]))},doCheckValue:function(b){b._checked&&b._enabled?b.childNodes[b._ll?1:0].firstChild.setAttribute("name",String(b._idd)):b.childNodes[b._ll?1:0].firstChild.removeAttribute("name")},setChecked:function(d,c){d._checked=c===!0?!0:!1;d.childNodes[d._ll?1:0].lastChild.className=d.childNodes[d._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(d._checked?" chbx1":" chbx0");this.doCheckValue(d)},check:function(b){this.setChecked(b,!0)},unCheck:function(b){this.setChecked(b,!1)},isChecked:function(b){return b._checked},enable:function(b){if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b._enabled=!0;b.childNodes[b._ll?0:1].childNodes[0].tabIndex=0;b.childNodes[b._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(b)},disable:function(b){String(b.className).search("disabled")<0&&(b.className+=" disabled");b._enabled=!1;b.childNodes[b._ll?0:1].childNodes[0].tabIndex=-1;b.childNodes[b._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(b)},isEnabled:function(b){return b._enabled},setText:function(d,c){d.childNodes[d._ll?0:1].childNodes[0].innerHTML=c},getText:function(b){return b.childNodes[b._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(d,c){this.setChecked(d,c===!0||parseInt(c)==1||c=="true"||d._value===c)},getValue:function(d,c){return c=="realvalue"?d._value:typeof d._value=="undefined"||d._value==null?d._checked?1:0:d._value},setReadonly:function(d,c){d._ro=c===!0},isReadonly:function(b){return b._ro},setFocus:function(b){b.childNodes[b._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(g,f,k){g._type="ra";g._enabled=!0;g._checked=!1;g._group=f.name;g._value=f.value;g._uid=k;g._ro=f.readonly==!0;g._rName=g._rId+g._group;this.r[g._idd]=g;f.inputWidth=14;this.doAddLabel(g,f);this.doAddInput(g,f,"INPUT","TEXT",!0,!0,"dhxform_textarea");g.childNodes[g._ll?1:0].className+=" dhxform_img_node";var j=document.createElement("DIV");j.className="dhxform_img rdbt0";g.appendChild(j);if(!isNaN(f.inputLeft)){g.childNodes[g._ll?1:0].style.left=parseInt(f.inputLeft)+"px"}if(!isNaN(f.inputTop)){g.childNodes[g._ll?1:0].style.top=parseInt(f.inputTop)+"px"}g.childNodes[g._ll?1:0].appendChild(j);g.childNodes[g._ll?1:0].firstChild.value=String(f.value);g._updateImgNode=function(e,d){var l=e.childNodes[e._ll?1:0].lastChild;l.className=d?l.className.replace(/dhxform_img/gi,"dhxform_actv_r"):l.className.replace(/dhxform_actv_r/gi,"dhxform_img");e=l=null};g._doOnFocus=function(b){b.getForm().callEvent("onFocus",[b._group,b._value])};g._doOnBlur=function(b){b.getForm().callEvent("onBlur",[b._group,b._value])};g._doOnKeyUpDown=function(d,c){this.callEvent(d,[this.childNodes[this._ll?0:1].childNodes[0],c,this._group,this._value])};if(this.input[g._rName]==null){var h=document.createElement("INPUT");h.type="HIDDEN";h.name=f.name;h.firstValue=g._value;g.appendChild(h);this.input[g._rName]=h}if(!this.firstValue[g._rName]){this.firstValue[g._rName]=f.value}f.checked==!0&&this.check(g);f.hidden==!0&&this.hide(g);f.disabled==!0&&this.userDisable(g);this.doAttachEvents(g);return this},destruct:function(f){if(f.lastChild==this.input[f._rName]){var e=!1,h;for(h in this.r){!e&&this.r[h]._group==f._group&&this.r[h]._idd!=f._idd&&(this.r[h].appendChild(this.input[f._rName]),e=!0)}e||(this.input[f._rName].parentNode.removeChild(this.input[f._rName]),this.input[f._rName]=null,this.firstValue[f._rName]=null)}var g=f._idd;f._doOnFocus=f._doOnBlur=f._updateImgNode=null;this.doUnloadNestedLists(f);this.doDestruct(f);return g},doClick:function(d){d.childNodes[d._ll?0:1].childNodes[0].focus();if(d._enabled&&!d._checked&&!d._ro){var c=[d._group,d._value,!0];d.checkEvent("onBeforeChange")&&d.callEvent("onBeforeChange",c)!==!0||(this.setChecked(d,!0),d.getForm()._autoCheck(),d.callEvent("onChange",c))}},doCheckValue:function(e){var d=null,f;for(f in this.r){if(this.r[f]._checked&&this.r[f]._enabled&&this.r[f]._group==e._group&&this.r[f]._rId==e._rId){d=this.r[f]._value}}d!=null?(this.input[e._rName].setAttribute("name",String(e._group)),this.input[e._rName].setAttribute("value",d),this.input[e._rName]._value=d):(this.input[e._rName].removeAttribute("name"),this.input[e._rName].removeAttribute("value"),this.input[e._rName]._value=null)},setChecked:function(g,f){var f=f===!0,k;for(k in this.r){if(this.r[k]._group==g._group&&this.r[k]._rId==g._rId){var j=!1;if(this.r[k]._idd==g._idd){if(this.r[k]._checked!=f){this.r[k]._checked=f,j=!0}}else{if(this.r[k]._checked){this.r[k]._checked=!1,j=!0}}if(j){var h=this.r[k].childNodes[this.r[k]._ll?1:0].childNodes[1];h.className=h.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[k]._checked?" rdbt1":" rdbt0");h=null}}}this.doCheckValue(g)},getChecked:function(b){return this.input[b._rName]._value},_getFirstValue:function(b){return this.firstValue[b._rName]},_getId:function(b){return b._idd},setValue:function(){}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.select={render:function(d,c){d._type="se";d._enabled=!0;d._value=null;d._newValue=null;if((_isFF||_isIE)&&typeof c.inputWidth=="number"){c.inputWidth+=d._inpWidthFix||2}this.doAddLabel(d,c);this.doAddInput(d,c,"SELECT",null,!0,!0,"dhxform_select");this.doAttachEvents(d);this.doLoadOpts(d,c);c.connector?this.doLoadOptsConnector(d,c.connector):c.value!="undefined"&&this.setValue(d,c.value);return this},destruct:function(b){this.doUnloadNestedLists(b);b.callEvent=null;b.checkEvent=null;b.getForm=null;b._autoCheck=null;b._enabled=null;b._idd=null;b._type=null;b._value=null;b._newValue=null;b.onselectstart=null;b.childNodes[b._ll?1:0].childNodes[0].onclick=null;b.childNodes[b._ll?1:0].childNodes[0].onkeydown=null;b.childNodes[b._ll?1:0].childNodes[0].onchange=null;b.childNodes[b._ll?1:0].childNodes[0].onfocus=null;b.childNodes[b._ll?1:0].childNodes[0].onblur=null;b.childNodes[b._ll?1:0].childNodes[0].onkeyup=null;for(b.childNodes[b._ll?1:0].removeChild(b.childNodes[b._ll?1:0].childNodes[0]);b.childNodes.length>0;){b.removeChild(b.childNodes[0])}b.parentNode.removeChild(b);b=null},doAddLabel:function(e,d){var f=document.createElement("DIV");f.className="dhxform_label "+d.labelAlign;f.innerHTML="<label for='"+d.uid+"'>"+d.label+(d.info?"<span class='dhxform_info'>[?]</span>":"")+(e._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(d.wrap==!0){f.style.whiteSpace="normal"}if(typeof d.tooltip!="undefined"){f.title=d.tooltip}e.appendChild(f);if(typeof d.label=="undefined"||d.label==null||d.label.length==0){f.style.display="none"}if(!isNaN(d.labelWidth)){f.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){f.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){f.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){f.style.top=parseInt(d.labelTop)+"px"}if(d.info){f.onclick=function(g){var g=g||event,c=g.target||g.srcElement;if(typeof c.className!="undefined"&&c.className=="dhxform_info"){return this.parentNode.callEvent("onInfo",[this.parentNode._idd]),g.cancelBubble=!0,g.returnValue=!1}}}},doAttachEvents:function(e){var d=e.childNodes[e._ll?1:0].childNodes[0],f=this;d.onclick=function(){f.doOnChange(this);f.doValidate(this.parentNode.parentNode)};d.onkeydown=function(b){b=b||event;f.doOnChange(this);f.doValidate(this.parentNode.parentNode);this.parentNode.parentNode.callEvent("onKeyDown",[this,b,this.parentNode.parentNode._idd])};d.onchange=function(){f.doOnChange(this);f.doValidate(this.parentNode.parentNode)};d.onkeyup=function(b){b=b||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,b,this.parentNode.parentNode._idd])};d=null;this.doAttachChangeLS(e)},doAttachChangeLS:function(d){var c=d.childNodes[d._ll?1:0].childNodes[0];c.onfocus=function(){var b=this.parentNode.parentNode;b.getForm()._ccActivate(b._idd,this,b.getForm().getItemValue(b._idd,!0));b.getForm().callEvent("onFocus",[b._idd]);b=null};c.onblur=function(){var b=this.parentNode.parentNode;b.getForm()._ccDeactivate(b._idd);b.getForm().callEvent("onBlur",[b._idd]);b=null};c=null},doValidate:function(b){b.getForm().live_validate&&this._validate(b)},doLoadOpts:function(v,u,s){for(var o=v.childNodes[v._ll?1:0].childNodes[0],n=u.options,m=!1,l=0;l<n.length;l++){var k=n[l].text||n[l].label;if(!k||typeof k=="undefined"){k=""}var j=new Option(k,n[l].value);typeof n[l].img_src=="string"&&j.setAttribute("img_src",n[l].img_src);o.options.add(j);if(n[l].selected==!0||n[l].selected=="true"){j.selected=!0,v._value=n[l].value,m=!0}}if(!m&&o.selectedIndex>=0){v._value=o.options[o.selectedIndex].value}s===!0&&v.callEvent("onOptionsLoaded",[v._idd]);this._checkNoteWidth(v)},doLoadOptsConnector:function(e,d){var f=this;e._connector_working=!0;dhtmlxAjax.get(d,function(a){for(var j=a.doXPath("//item"),h=[],c=0;c<j.length;c++){h[c]={label:j[c].getAttribute("label"),value:j[c].getAttribute("value"),selected:j[c].getAttribute("selected")!=null}}f.doLoadOpts(e,{options:h},!0);e._connector_working=!1;if(e._connector_value!=null){f.setValue(e,e._connector_value),e._connector_value=null}thet=e=null})},doOnChange:function(e){var d=e.parentNode.parentNode;d._newValue=e.selectedIndex>=0?e.options[e.selectedIndex].value:null;if(d._newValue!=d._value){if(d.checkEvent("onBeforeChange")&&d.callEvent("onBeforeChange",[d._idd,d._value,d._newValue])!==!0){for(var f=0;f<e.options.length;f++){if(e.options[f].value==d._value){e.options[f].selected=!0}}return}d._value=d._newValue;d.callEvent("onChange",[d._idd,d._value])}d._autoCheck()},setText:function(d,c){c||(c="");d.childNodes[d._ll?0:1].childNodes[0].innerHTML=c;d.childNodes[d._ll?0:1].style.display=c.length==0||c==null?"none":""},getText:function(b){return b.childNodes[b._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(b){if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b._enabled=!0;b.childNodes[b._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(b){String(b.className).search("disabled")<0&&(b.className+=" disabled");b._enabled=!1;b.childNodes[b._ll?1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(b){return b.childNodes[b._ll?1:0].childNodes[0].options},setValue:function(f,e){if(f._connector_working){f._connector_value=e}else{for(var h=this.getOptions(f),g=0;g<h.length;g++){if(h[g].value==e){h[g].selected=!0,f._value=h[g].value}}f._list!=null&&f._list.length>0&&f.getForm()._autoCheck();f.getForm()._ccReload(f._idd,f._value)}},getValue:function(f){for(var e=-1,h=this.getOptions(f),g=0;g<h.length;g++){if(h[g].selected){e=h[g].value}}return e},setWidth:function(d,c){d.childNodes[d._ll?1:0].childNodes[0].style.width=c+"px"},getSelect:function(b){return b.childNodes[b._ll?1:0].childNodes[0]},setFocus:function(b){b.childNodes[b._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(d){var c;if(d.childNodes[d._ll?1:0].childNodes[1]!=null){if(c=d.childNodes[d._ll?1:0].childNodes[1],c.className!=null&&c.className.search(/dhxform_note/gi)>=0&&c._w=="auto"){c.style.width=d.childNodes[d._ll?1:0].childNodes[0].offsetWidth+"px"}}c=null}};(function(){for(var b in {doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(j,h,o){var n=j.childNodes[j._ll?1:0].childNodes[0];n.multiple=!0;if(!isNaN(h.size)){n.size=Number(h.size)}j._value=[];j._newValue=[];for(var m=h.options,l=0;l<m.length;l++){var k=new Option(m[l].text||m[l].label,m[l].value);n.options.add(k);if(m[l].selected==!0||m[l].selected=="true"){k.selected=!0,j._value.push(m[l].value)}}o===!0&&j.callEvent("onOptionsLoaded",[j._idd]);this._checkNoteWidth(j)},doAttachEvents:function(e){var d=e.childNodes[e._ll?1:0].childNodes[0],f=this;d.onfocus=function(){f.doOnChange(this);var b=this.parentNode.parentNode;b.getForm().callEvent("onFocus",[b._idd]);b=null};d.onblur=function(){f.doOnChange(this);var b=this.parentNode.parentNode;b.getForm().callEvent("onBlur",[b._idd]);b=null};d.onclick=function(){f.doOnChange(this);var b=this.parentNode.parentNode;b._autoCheck();b=null}},doOnChange:function(f){var e=f.parentNode.parentNode;e._newValue=[];for(var h=0;h<f.options.length;h++){f.options[h].selected&&e._newValue.push(f.options[h].value)}if(e._value.sort().toString()!=e._newValue.sort().toString()){if(e.checkEvent("onBeforeChange")&&e.callEvent("onBeforeChange",[e._idd,e._value,e._newValue])!==!0){for(var g={},h=0;h<e._value.length;h++){g[e._value[h]]=!0}for(h=0;h<f.options.length;h++){f.options[h].selected=g[f.options[h].value]==!0}g=null;return}e._value=[];for(h=0;h<e._newValue.length;h++){e._value.push(e._newValue[h])}e.callEvent("onChange",[e._idd,e._value])}e._autoCheck()},setValue:function(g,f){var k={};typeof f=="string"&&(f=f.split(","));typeof f!="object"&&(f=[f]);for(var j=0;j<f.length;j++){k[f[j]]=!0}for(var h=this.getOptions(g),j=0;j<h.length;j++){h[j].selected=k[h[j].value]==!0}g._autoCheck()},getValue:function(f){for(var e=[],h=this.getOptions(f),g=0;g<h.length;g++){h[g].selected&&e.push(h[g].value)}return e}};(function(){for(var b in dhtmlXForm.prototype.items.select){dhtmlXForm.prototype.items.multiselect[b]||(dhtmlXForm.prototype.items.multiselect[b]=dhtmlXForm.prototype.items.select[b])}})();dhtmlXForm.prototype.items.input={render:function(h,g){var m=!isNaN(g.rows);h._type="ta";h._enabled=!0;this.doAddLabel(h,g);this.doAddInput(h,g,m?"TEXTAREA":"INPUT",m?null:"TEXT",!0,!0,"dhxform_textarea");this.doAttachEvents(h);if(m){h.childNodes[h._ll?1:0].childNodes[0].rows=g.rows}if(typeof g.numberFormat!="undefined"){var l,k=null,j=null;if(typeof g.numberFormat!="string"){l=g.numberFormat[0],k=g.numberFormat[1]||null,j=g.numberFormat[2]||null}else{l=g.numberFormat;if(typeof g.groupSep=="string"){k=g.groupSep}if(typeof g.decSep=="string"){j=g.decSep}}this.setNumberFormat(h,l,k,j,!1)}this.setValue(h,g.value);return this},doAttachEvents:function(d){var c=this;if(d._type=="ta"||d._type=="se"||d._type=="pw"){d.childNodes[d._ll?1:0].childNodes[0].onfocus=function(){var b=this.parentNode.parentNode;if(b._df!=null){this.value=b._value||""}b.getForm()._ccActivate(b._idd,this,this.value);b.getForm().callEvent("onFocus",[b._idd]);b=null}}d.childNodes[d._ll?1:0].childNodes[0].onblur=function(){var b=this.parentNode.parentNode;b.getForm()._ccDeactivate(b._idd);c.updateValue(b,!0);b.getForm().live_validate&&c._validate(b);b.getForm().callEvent("onBlur",[b._idd]);b=null}},updateValue:function(f,e){var h=f.childNodes[f._ll?1:0].childNodes[0].value;if(e||!(f._df!=null&&h==this._getFmtValue(f,h))){var g=this;f._value!=h?f.checkEvent("onBeforeChange")&&f.callEvent("onBeforeChange",[f._idd,f._value,h])!==!0?f._df!=null?g.setValue(f,f._value):f.childNodes[f._ll?1:0].childNodes[0].value=f._value:(f._df!=null?g.setValue(f,h):f._value=h,f.callEvent("onChange",[f._idd,h])):f._df!=null&&this.setValue(f,f._value)}},setValue:function(f,e){f._value=typeof e!="undefined"&&e!=null?e:"";var h=String(f._value)||"",g=f.childNodes[f._ll?1:0].childNodes[0];f._df!=null&&typeof this._getFmtValue=="function"&&(h=this._getFmtValue(f,h));if(g.value!=h){g.value=h,f.getForm()._ccReload(f._idd,h)}g=null},getValue:function(d){var c=d.getForm();c._formLS&&c._formLS[d._idd]!=null&&this.updateValue(d);c=null;return typeof d._value!="undefined"&&d._value!=null?d._value:""},setReadonly:function(d,c){d._ro=c===!0;d._ro?d.childNodes[d._ll?1:0].childNodes[0].setAttribute("readOnly","true"):d.childNodes[d._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(b){if(!b._ro){b._ro=!1}return b._ro},getInput:function(b){return b.childNodes[b._ll?1:0].childNodes[0]},setNumberFormat:function(k,j,u,s,o){typeof o!="boolean"&&(o=!0);if(j==""){return k._df=null,o&&this.setValue(k,k._value),!0}if(typeof j=="string"){var n=j.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(n==null||n.length!=4){return !1}k._df={i_len:!1,i_sep:typeof u=="string"?u:",",d_len:!1,d_sep:typeof s=="string"?s:".",s_bef:typeof n[1]=="string"?n[1]:"",s_aft:typeof n[3]=="string"?n[3]:""};var m=n[2].split(".");if(m[1]!=null){k._df.d_len=m[1].length}var l=m[0].split(",");if(l.length>1){k._df.i_len=l[l.length-1].length}o&&this.setValue(k,k._value);return !0}},_getFmtValue:function(a,b){var c=b.match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(c!=null&&c.length==5){var d="";c[1]!=null&&(d+=c[1]);d+=a._df.s_bef;if(a._df.i_len!==!1){for(var e=0,f="",g=c[2].length-1;g>=0;g--){f=""+c[2].charAt(g)+f,++e==a._df.i_len&&g>0&&(f=a._df.i_sep+f,e=0)}d+=f}else{d+=c[2]}if(a._df.d_len!==!1){for(c[4]==null&&(c[4]="");c[4].length<a._df.d_len;){c[4]+="0"}eval("var t0 = new RegExp(/\\d{"+a._df.d_len+"}/);");var h=c[4].match(t0);h!=null&&(d+=a._df.d_sep+h);t0=h=null}d+=a._df.s_aft;return d}return b}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.password={render:function(d,c){d._type="pw";d._enabled=!0;this.doAddLabel(d,c);this.doAddInput(d,c,"INPUT","PASSWORD",!0,!0,"dhxform_textarea");this.doAttachEvents(d);this.setValue(d,c.value);return this}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.file={render:function(d,c){d._type="fl";d._enabled=!0;this.doAddLabel(d,c);this.doAddInput(d,c,"INPUT","FILE",!0,!1,"dhxform_textarea");d.childNodes[d._ll?1:0].childNodes[0].onchange=function(){d.callEvent("onChange",[d._idd,this.value])};return this},setValue:function(){},getValue:function(b){return b.childNodes[b._ll?1:0].childNodes[0].value}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.label={_index:!1,render:function(e,d){e._type="lb";e._enabled=!0;e._checked=!0;var f=document.createElement("DIV");f.className="dhxform_txt_label2"+(d._isTopmost?" topmost":"");f.innerHTML=d.label;e.appendChild(f);d.hidden==!0&&this.hide(e);d.disabled==!0&&this.userDisable(e);if(!isNaN(d.labelWidth)){f.style.width=parseInt(d.labelWidth)+"px"}if(!isNaN(d.labelHeight)){f.style.height=parseInt(d.labelHeight)+"px"}if(!isNaN(d.labelLeft)){f.style.left=parseInt(d.labelLeft)+"px"}if(!isNaN(d.labelTop)){f.style.top=parseInt(d.labelTop)+"px"}return this},destruct:function(b){this.doUnloadNestedLists(b);b._autoCheck=null;b._enabled=null;b._type=null;b.callEvent=null;b.checkEvent=null;b.getForm=null;b.onselectstart=null;b.parentNode.removeChild(b);b=null},enable:function(b){if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b._enabled=!0},disable:function(b){String(b.className).search("disabled")<0&&(b.className+=" disabled");b._enabled=!1},setText:function(d,c){d.firstChild.innerHTML=c},getText:function(b){return b.firstChild.innerHTML}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.button={render:function(f,e){f._type="bt";f._enabled=!0;f._name=e.name;f.className=String(f.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");if(!isNaN(e.width)){var h=Math.max(e.width,10)}var g=typeof h!="undefined";f._doOnKeyUpDown=function(d,c){this.callEvent(d,[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};f.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr" '+(g?' style="width:'+h+'px;"':"")+'onkeypress="var e=event||window.arguments[0];if((e.keyCode==32||e.charCode==32||e.keyCode==13||e.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;e.cancelBubble=true;e.returnValue=false;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);return false;}" ontouchstart="var e=event;e.preventDefault();if(!this.parentNode._busy){this.parentNode._busy=true;_dhxForm_doClick(this.childNodes[0],[\'mousedown\',\'mouseup\']);}" onfocus="this.parentNode._doOnFocus(this.parentNode);" onblur="_dhxForm_doClick(this.childNodes[0],\'mouseout\');this.parentNode._doOnBlur(this.parentNode);" onkeyup=\'var e=event||window.arguments[0];this.parentNode._doOnKeyUpDown("onKeyUp",e);\' onkeydown=\'var e=event||window.arguments[0];this.parentNode._doOnKeyUpDown("onKeyDown",e);\' ><table cellspacing="0" cellpadding="0" border="0" align="left" style="font-size:inherit; '+(g?"width:"+h+"px;table-layout:fixed;":"")+'"><tr><td class="btn_l"><div class="btn_l">&nbsp;</div></td><td class="btn_m" '+(g?'style="width:'+(h-10)+'px;"':"")+'><div class="btn_txt'+(g?" btn_txt_fixed_size":"")+'">'+e.value+'</div></td><td class="btn_r"><div class="btn_r">&nbsp;</div></td></tr></table></div>';if(!isNaN(e.inputLeft)){f.childNodes[0].style.left=parseInt(e.inputLeft)+"px"}if(!isNaN(e.inputTop)){f.childNodes[0].style.top=parseInt(e.inputTop)+"px"}e.hidden==!0&&this.hide(f);e.disabled==!0&&this.userDisable(f);if(typeof e.tooltip!="undefined"){f.firstChild.title=e.tooltip}f.onselectstart=function(b){b=b||event;b.cancelBubble=!0;return b.returnValue=!1};f.childNodes[0].onselectstart=function(b){b=b||event;b.cancelBubble=!0;return b.returnValue=!1};f.childNodes[0].childNodes[0].onmouseover=function(){var b=this.parentNode.parentNode;if(b._enabled){this._isOver=!0,this.className="dhxform_btn_over",b=null}};f.childNodes[0].childNodes[0].onmouseout=function(){var b=this.parentNode.parentNode;if(b._enabled){this.className="",this._isOver=this._pressed=this._allowClick=!1,b=null}};f.childNodes[0].childNodes[0].onmousedown=function(){if(!this._pressed){var b=this.parentNode.parentNode;if(b._enabled){this.className="dhxform_btn_pressed",this._pressed=this._allowClick=!0,b=null}}};f.childNodes[0].childNodes[0].onmouseup=function(){if(this._pressed){var b=this.parentNode.parentNode;if(b._enabled){b._busy=!1,this.className=this._isOver?"dhxform_btn_over":"",this._pressed&&this._allowClick&&b.callEvent("_onButtonClick",[b._name,b._cmd]),this._pressed=this._allowClick=!1,b=null}}};f._doOnFocus=function(b){b.getForm().callEvent("onFocus",[b._idd])};f._doOnBlur=function(b){b.getForm().callEvent("onBlur",[b._idd])};return this},destruct:function(b){this.doUnloadNestedLists(b);b.callEvent=null;b.checkEvent=null;b.getForm=null;b._autoCheck=null;b._type=null;b._enabled=null;b._cmd=null;b._name=null;b.onselectstart=null;b.childNodes[0].onselectstart=null;b.childNodes[0].onkeypress=null;b.childNodes[0].ontouchstart=null;b.childNodes[0].onblur=null;b.childNodes[0].childNodes[0].onmouseover=null;b.childNodes[0].childNodes[0].onmouseout=null;b.childNodes[0].childNodes[0].onmousedown=null;for(b.childNodes[0].childNodes[0].onmouseup=null;b.childNodes.length>0;){b.removeChild(b.childNodes[0])}b.parentNode.removeChild(b);b=null},enable:function(b){if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b._enabled=!0;b.childNodes[0].removeAttribute("disabled");b.childNodes[0].setAttribute("role","link");b.childNodes[0].setAttribute("tabIndex","0")},disable:function(b){String(b.className).search("disabled")<0&&(b.className+=" disabled");b._enabled=!1;b.childNodes[0].setAttribute("disabled","true");b.childNodes[0].removeAttribute("role");b.childNodes[0].removeAttribute("tabIndex")},setText:function(d,c){d.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML=c},getText:function(b){return b.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].childNodes[0].innerHTML},setFocus:function(b){b.childNodes[0].focus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.hidden={_index:!1,render:function(e,d){e.style.display="none";e._name=d.name;e._type="hd";e._enabled=!0;var f=document.createElement("INPUT");f.type="HIDDEN";f.name=d.name;f.value=d.value||"";e.appendChild(f);return this},destruct:function(b){for(this.doUnloadNestedLists(b);b.childNodes.length>0;){b.removeChild(b.childNodes[0])}b._autoCheck=null;b._name=null;b._type=null;b._enabled=null;b.onselectstart=null;b.callEvent=null;b.checkEvent=null;b.getForm=null;b.parentNode.removeChild(b);b=null},enable:function(b){b._enabled=!0;b.childNodes[0].setAttribute("name",b._name)},disable:function(b){b._enabled=!1;b.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return !0},setValue:function(d,c){d.childNodes[0].value=c},getValue:function(b){return b.childNodes[0].value},getInput:function(b){return b.childNodes[0]}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.list={_index:!1,render:function(b){b._type="list";b._enabled=!0;b._isNestedForm=!0;b.style.paddingLeft=b._ofsNested+"px";b.className="dhxform_base_nested"+(b._custom_css||"");return[this,new dhtmlXForm(b)]},destruct:function(){}};dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(g,f){g._type="fs";parseInt(f.inputWidth);g._width=f.width;g._enabled=!0;g._checked=!0;g.className="fs_"+f.position+(typeof f.className=="string"?" "+f.className:"");var k=document.createElement("FIELDSET");k.className="dhxform_fs";var j=String(f.labelAlign).replace("align_","");k.innerHTML="<legend class='fs_legend' align='"+j+"' style='text-align:"+j+"'>"+f.label+"</legend>";g.appendChild(k);if(!isNaN(f.inputLeft)){k.style.left=parseInt(f.inputLeft)+"px"}if(!isNaN(f.inputTop)){k.style.top=parseInt(f.inputTop)+"px"}if(f.inputWidth!="auto"&&!isNaN(f.inputWidth)){k.style.width=parseInt(f.inputWidth)+"px";var h=parseInt(k.style.width);if(k.offsetWidth>h){k.style.width=h+(h-k.offsetWidth)+"px"}}g._addSubListNode=function(){var b=document.createElement("DIV");b._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(b);return b};f.hidden==!0&&this.hide(g);f.disabled==!0&&this.userDisable(g);return this},destruct:function(b){this.doUnloadNestedLists(b);b._checked=null;b._enabled=null;b._idd=null;b._type=null;b._width=null;b.onselectstart=null;b._addSubListNode=null;b._autoCheck=null;b.callEvent=null;b.checkEvent=null;for(b.getForm=null;b.childNodes.length>0;){b.removeChild(b.childNodes[0])}b.parentNode.removeChild(b);b=null},setText:function(d,c){d.childNodes[0].childNodes[0].innerHTML=c},getText:function(b){return b.childNodes[0].childNodes[0].innerHTML},enable:function(b){b._enabled=!0;if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}},disable:function(b){b._enabled=!1;String(b.className).search("disabled")<0&&(b.className+=" disabled")},setWidth:function(d,c){d.childNodes[0].style.width=c+"px";d._width=c},getWidth:function(b){return b._width}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.block={_index:!1,render:function(e,d){e._type="bl";e._width=d.width;e._enabled=!0;e._checked=!0;e.className="block_"+d.position+(typeof d.className=="string"?" "+d.className:"");var f=document.createElement("DIV");f.className="dhxform_obj_"+e.getForm().skin+" dhxform_block";f.style.fontSize=e.getForm().cont.style.fontSize;if(d.style){f.style.cssText=d.style}if(typeof d.id!="undefined"){f.id=d.id}e.appendChild(f);if(!isNaN(d.inputLeft)){f.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){f.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"&&!isNaN(d.inputWidth)){f.style.width=parseInt(d.inputWidth)+"px"}if(!isNaN(d.blockOffset)){e._ofsNested=d.blockOffset}e._addSubListNode=function(){var b=document.createElement("DIV");b._inBlcok=!0;if(typeof this._ofsNested!="undefined"){b._ofsNested=this._ofsNested}this.childNodes[0].appendChild(b);return b};d.hidden==!0&&this.hide(e);d.disabled==!0&&this.userDisable(e);return this},_setCss:function(e,d,f){e.firstChild.className="dhxform_obj_"+d+" dhxform_block";e.firstChild.style.fontSize=f}};(function(){for(var b in {enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[b]=dhtmlXForm.prototype.items.fieldset[b]}})();dhtmlXForm.prototype.items.newcolumn={_index:!1};dhtmlXForm.prototype.items.template={render:function(e,d){var f=!isNaN(d.rows);e._type="tp";e._enabled=!0;if(d.format){if(typeof d.format=="function"){e.format=d.format}if(typeof window[d.format]=="function"){e.format=window[d.format]}}if(!e.format){e.format=function(g,c){return c}}this.doAddLabel(e,d);this.doAddInput(e,d,"DIV",null,!0,!0,"dhxform_item_template");e._value=d.value||"";e.childNodes[1].childNodes[0].innerHTML=e.format(e._idd,e._value);return this},setValue:function(d,c){d._value=c;d.childNodes[1].childNodes[0].innerHTML=d.format(d._idd,d._value)},getValue:function(b){return b._value},enable:function(b){if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b._enabled=!0},disable:function(b){String(b.className).search("disabled")<0&&(b.className+=" disabled");b._enabled=!1}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype._ulToObject=function(x,w){for(var v=[],u=0;u<x.childNodes.length;u++){if(String(x.childNodes[u].tagName||"").toLowerCase()=="li"){for(var s={},o=x.childNodes[u],n=0;n<w.length;n++){o.getAttribute(w[n])!=null&&(s[String(w[n]).replace("ftype","type")]=o.getAttribute(w[n]))}if(!s.label){try{s.label=o.firstChild.nodeValue}catch(m){}}var l=o.getElementsByTagName("UL");l[0]!=null&&(s[s.type=="select"?"options":"list"]=dhtmlXForm.prototype._ulToObject(l[0],w));for(n=0;n<o.childNodes.length;n++){if(String(o.childNodes[n].tagName||"").toLowerCase()=="userdata"){if(!s.userdata){s.userdata={}}s.userdata[o.childNodes[n].getAttribute("name")]=o.childNodes[n].firstChild.nodeValue}}v[v.length]=s}if(String(x.childNodes[u].tagName||"").toLowerCase()=="div"){s={type:"label"};try{s.label=x.childNodes[u].firstChild.nodeValue}catch(k){}v[v.length]=s}}return v};dhtmlxEvent(window,"load",function(){for(var j="ftype,name,value,label,check,checked,disabled,text,rows,select,selected,width,style,className,labelWidth,labelHeight,labelLeft,labelTop,inputWidth,inputHeight,inputLeft,inputTop,position,size".split(","),h=document.getElementsByTagName("UL"),o=[],n=0;n<h.length;n++){if(h[n].className=="dhtmlxForm"){var m=document.createElement("DIV");o[o.length]={nodeUL:h[n],nodeForm:m,data:dhtmlXForm.prototype._ulToObject(h[n],j),name:h[n].getAttribute("name")||null}}}for(n=0;n<o.length;n++){o[n].nodeUL.parentNode.insertBefore(o[n].nodeForm,o[n].nodeUL);var l=new dhtmlXForm(o[n].nodeForm,o[n].data);o[n].name!==null&&(window[o[n].name]=l);var k=o[n].nodeUL.getAttribute("oninit")||null;o[n].nodeUL.parentNode.removeChild(o[n].nodeUL);o[n].nodeUL=null;o[n].nodeForm=null;o[n].data=null;o[n]=null;if(k){if(typeof k=="function"){k()}else{if(typeof window[k]=="function"){window[k]()}}}}});if(window.dhtmlXContainer){if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachForm||(dhtmlx.attaches.attachForm=function(d){var c=document.createElement("DIV");c.id="dhxFormObj_"+this._genStr(12);c.style.position="relative";c.style.width="100%";c.style.height="100%";dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(c):c.style.overflow="auto";c.cmp="form";this.attachObject(c,!1,!0,!1);this.vs[this.av].form=new dhtmlXForm(c,d);this.vs[this.av].form.setSkin(this.skin);this.vs[this.av].form.setSizes();this.vs[this.av].formObj=c;this.skin=="dhx_terrace"&&(this.adjust(),this.updateNestedObjects());return this.vs[this._viewRestore()].form});if(!dhtmlx.detaches){dhtmlx.detaches={}}dhtmlx.detaches.detachForm||(dhtmlx.detaches.detachForm=function(b){if(b.form){b.form.unload(),b.form=null,b.formObj=null,b.attachForm=null}})}dhtmlXForm.prototype.setUserData=function(g,f,k,j){if(typeof j!="undefined"){var h=this.doWithItem([g,f],"_getId");h!=null&&(g=h,f=k,k=j)}if(!this._userdata){this._userdata={}}this._userdata[g]=this._userdata[g]||{};this._userdata[g][f]=k};dhtmlXForm.prototype.getUserData=function(f,e,h){if(typeof h!="undefined"){var g=this.doWithItem([f,e],"_getId");g!=null&&(f=g,e=h)}return this._userdata!=null&&typeof this._userdata[f]!="undefined"&&typeof this._userdata[f][e]!="undefined"?this._userdata[f][e]:""};dhtmlXForm.prototype.setRTL=function(b){if(this._rtl=b===!0?!0:!1){String(this.cont).search(/dhxform_rtl/gi)<0&&(this.cont.className+=" dhxform_rtl")}else{if(String(this.cont).search(/dhxform_rtl/gi)>=0){this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")}}};_dhxForm_doClick=function(f,e){if(typeof e=="object"){var h=e[1],e=e[0]}if(document.createEvent){var g=document.createEvent("MouseEvents");g.initEvent(e,!0,!1);f.dispatchEvent(g)}else{if(document.createEventObject){g=document.createEventObject(),g.button=1,f.fireEvent("on"+e,g)}}h&&window.setTimeout(function(){_dhxForm_doClick(f,h)},100)};dhtmlXForm.prototype.setFormData=function(e){for(var d in e){var f=this.getItemType(d);switch(f){case"checkbox":this[e[d]==!0||parseInt(e[d])==1||e[d]=="true"||e[d]==this.getItemValue(d,"realvalue")?"checkItem":"uncheckItem"](d);break;case"radio":this.checkItem(d,e[d]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(d,e[d]);break;default:if(this["setFormData_"+f]){this["setFormData_"+f](d,e[d])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,d,e[d])}}}};dhtmlXForm.prototype.getFormData=function(D,C){var A={},y=this,x;for(x in this.itemPull){var w=this.itemPull[x]._idd,v=this.itemPull[x]._type;v=="ch"&&(A[w]=this.isItemChecked(w)?this.getItemValue(w):0);v=="ra"&&!A[this.itemPull[x]._group]&&(A[this.itemPull[x]._group]=this.getCheckedValue(this.itemPull[x]._group));v in {se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(A[w]=this.getItemValue(w,D));this["getFormData_"+v]&&(A[w]=this["getFormData_"+v](w));if(v=="up"){var u=this.getItemValue(w),s;for(s in u){A[s]=u[s]}}if(this.itemPull[x]._list){for(var o=0;o<this.itemPull[x]._list.length;o++){var n=this.itemPull[x]._list[o].getFormData(D,C),m;for(m in n){A[m]=n[m]}}}}if(!C&&this.hId&&this._userdata[this.hId]){for(x in this._userdata[this.hId]){A[x]||(A[x]=this._userdata[this.hId][x])}}return A};dhtmlXForm.prototype.adjustParentSize=function(){for(var v=0,u=-1,s=0;s<this.base.length;s++){if(v+=this.base[s].firstChild.offsetWidth,this.base[s].offsetHeight>u){u=this.base[s].offsetHeight}}var o=!1;try{if(o=this.cont.parentNode.parentNode.parentNode.parentNode._isCell==!0){var n=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(m){}if(o&&typeof n!="undefined"){v>0&&n.setWidth(v+10),u>0&&n.setHeight(u+n.firstChild.firstChild.offsetHeight+5),o=n=null}else{var l=!1;try{if(l=this.cont.parentNode.parentNode.parentNode.parentNode._isWindow==!0){var k=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(j){}if(l&&typeof k!="undefined"){this.cont.style.display="none",(v>0||u>0)&&k._adjustToContent(v+10,u+10),this.cont.style.display="",l=k=null}}};window._dhxForm_isIPad=navigator.userAgent.search(/iPad/gi)>=0;dhtmlXForm.prototype.load=function(a,b,c){var d=this;d.callEvent("onXLS",[]);typeof b=="function"&&(c=b,b="xml");dhtmlxAjax.get(a,function(e){var f={};if(b=="json"){eval("data="+e.xmlDoc.responseText)}else{var g=e.doXPath("//data")[0];if(g&&g.getAttribute("dhx_security")){dhtmlx.security_key=g.getAttribute("dhx_security")}for(var h=e.doXPath("//data/*"),i=0;i<h.length;i++){f[h[i].tagName]=h[i].firstChild?h[i].firstChild.nodeValue:""}}var j=a.match(/(\?|\&)id\=([a-z0-9_]*)/i);j&&j[0]&&(j=j[0].split("=")[1]);if(d.callEvent("onBeforeDataLoad",[j,f])){d.formId=j,d._last_load_data=f,d.setFormData(f),d.resetDataProcessor("updated")}d.callEvent("onXLE",[]);c&&c.call(this)})};dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))};dhtmlXForm.prototype.send=function(k,j,u,s){typeof j=="function"&&(u=j,j="post");if(s===!0||this.validate()){var o=this.getFormData(!0),n=[],m;for(m in o){n.push(m+"="+encodeURIComponent(o[m]))}var l=function(b){u&&u.call(this,b,b.xmlDoc.responseText)};j=="get"?dhtmlxAjax.get(k+(k.indexOf("?")==-1?"?":"&")+n.join("&"),l):dhtmlxAjax.post(k,n.join("&"),l)}};dhtmlXForm.prototype.save=function(){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(d,c){this.formId=c};dhtmlXForm.prototype._dp_init=function(b){b._methods=["dummy","dummy","_changeFormId","dummy"];b._getRowData=function(d){var e=this.obj.getFormData(!0);e[this.action_param]=this.obj.getUserData(d,this.action_param);return e};b._clearUpdateFlag=function(){};b.attachEvent("onAfterUpdate",function(f,j,h,g){if(j=="inserted"||j=="updated"){this.obj.resetDataProcessor("updated"),this.obj._last_load_data=this.obj.getFormData(!0)}this.obj.callEvent("onAfterSave",[this.obj.formId,g]);return !0});b.autoUpdate=!1;b.setTransactionMode("POST",!0);this.dp=b;this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&b.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(b){if(this.dp){this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,b)}};dhtmlXForm.prototype._ccActivate=function(e,d,f){if(!this._formLS){this._formLS={}}this._formLS[e]||(this._formLS[e]={input:d,value:f});if(!this._ccActive){this._ccActive=!0,this._ccDo()}d=null};dhtmlXForm.prototype._ccDeactivate=function(b){this._ccTm&&window.clearTimeout(this._ccTm);this._ccActive=!1;if(this._formLS!=null&&this._formLS[b]!=null){this._formLS[b].input=null,this._formLS[b]=null,delete this._formLS[b]}};dhtmlXForm.prototype._ccDo=function(){this._ccTm&&window.clearTimeout(this._ccTm);for(var f in this._formLS){var e=this._formLS[f].input;if(String(e.tagName).toLowerCase()=="select"){var h="";if(e.selectedIndex>=0&&e.selectedIndex<e.options.length){h=e.options[e.selectedIndex].value}}else{h=e.value}if(h!=this._formLS[f].value){this._formLS[f].value=h,this.callEvent("onInputChange",[e._idd,h,this])}e=null}if(this._ccActive){var g=this;this._ccTm=window.setTimeout(function(){g._ccDo();g=null},100)}};dhtmlXForm.prototype._ccReload=function(d,c){if(this._formLS&&this._formLS[d]){this._formLS[d].value=c}};if(!window.dhtmlxValidation){dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(b){return b==""},isNotEmpty:function(b){return b instanceof Array?b.length>0:!b==""},isValidBoolean:function(b){return !!b.match(/^(0|1|true|false)$/)},isValidEmail:function(b){return !!b.match(/(^[a-z]([a-z0-9_\.]*)@([a-z_\.]*)([.][a-z]{3})$)|(^[a-z]([a-z_\.]*)@([a-z_\-\.]*)(\.[a-z]{2,3})$)/i)},isValidInteger:function(b){return !!b.match(/(^-?\d+$)/)},isValidNumeric:function(b){return !!b.match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(b){return !!b.match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(d){var c=d.match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return c&&!!(c[1]<=9999&&c[2]<=12&&c[3]<=31&&c[4]<=59&&c[5]<=59&&c[6]<=59)||!1},isValidDate:function(d){var c=d.match(/^(\d{4})-(\d{2})-(\d{2})$/);return c&&!!(c[1]<=9999&&c[2]<=12&&c[3]<=31)||!1},isValidTime:function(d){var c=d.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return c&&!!(c[1]<=24&&c[2]<=59&&c[3]<=59)||!1},isValidIPv4:function(d){var c=d.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return c&&!!(c[1]<=255&&c[2]<=255&&c[3]<=255&&c[4]<=255)||!1},isValidCurrency:function(b){return b.match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/)&&!0||!1},isValidSSN:function(b){return b.match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(b){return b.match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation}dhtmlXForm.prototype.items.calendar={render:function(f,e){var h=this;f._type="calendar";f._enabled=!0;this.doAddLabel(f,e);this.doAddInput(f,e,"INPUT","TEXT",!0,!0,"dhxform_textarea calendar");this.doAttachChangeLS(f);f.childNodes[f._ll?1:0].childNodes[0]._idd=f._idd;f.childNodes[f._ll?1:0].childNodes[0].onblur=function(){var b=this.parentNode.parentNode;b.getForm()._ccDeactivate(b._idd);h.checkEnteredValue(this.parentNode.parentNode);b.getForm().callEvent("onBlur",[b._idd]);b=null};f._f=e.dateFormat||null;f._f0=e.serverDateFormat||f._f;var g=f.getForm();f._c=new dhtmlXCalendarObject(f.childNodes[f._ll?1:0].childNodes[0],e.skin||g.skin||"dhx_skyblue");f._c._nullInInput=!0;f._c.enableListener(f.childNodes[f._ll?1:0].childNodes[0]);f._f!=null&&f._c.setDateFormat(f._f);g._s2b(e.enableTime)||f._c.hideTime();g._s2b(e.showWeekNumbers)&&f._c.showWeekNumbers();isNaN(e.weekStart)||f._c.setWeekStartDay(e.weekStart);typeof e.calendarPosition!="undefined"&&f._c.setPosition(e.calendarPosition);e.minutesInterval!=null&&f._c.setMinutesInterval(e.minutesInterval);f._c._itemIdd=f._idd;f._c.attachEvent("onBeforeChange",function(a){if(f._value!=a){if(f.checkEvent("onBeforeChange")&&f.callEvent("onBeforeChange",[f._idd,f._value,a])!==!0){return !1}f._value=a;h.setValue(f,a);f.callEvent("onChange",[this._itemIdd,f._value])}return !0});this.setValue(f,e.value);g=null;return this},getCalendar:function(b){return b._c},setSkin:function(d,c){d._c.setSkin(c)},setValue:function(d,c){!c||c==null||typeof c=="undefined"||c==""?(d._value=null,d.childNodes[d._ll?1:0].childNodes[0].value=""):(d._value=c instanceof Date?c:d._c._strToDate(c,d._f0||d._c._dateFormat),d.childNodes[d._ll?1:0].childNodes[0].value=d._c._dateToStr(d._value,d._f||d._c._dateFormat));d._c.setDate(d._value)},getValue:function(e,d){var f=e._c.getDate();return d===!0&&f==null?"":d===!0?e._c._dateToStr(f,e._f0||e._c._dateFormat):f},setDateFormat:function(e,d,f){e._f=d;e._f0=f||e._f;e._c.setDateFormat(e._f);this.setValue(e,this.getValue(e))},destruct:function(f){f._c.disableListener(f.childNodes[f._ll?1:0].childNodes[0]);f._c.unload();f._c=null;try{delete f._c}catch(e){}f._f=null;try{delete f._f}catch(h){}f._f0=null;try{delete f._f0}catch(g){}f.childNodes[f._ll?1:0].childNodes[0]._idd=null;f.childNodes[f._ll?1:0].childNodes[0].onblur=null;this.d2(f);f=null},checkEnteredValue:function(b){this.setValue(b,b._c.getDate())}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(b){return this.doWithItem(b,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(e,d,f){this.doWithItem(e,"setDateFormat",d,f)};dhtmlXForm.prototype.items.upload={render:function(e,d){e._type="up";e._enabled=!0;e._checked=!0;e.className=d.position+(typeof d.className=="string"?" "+d.className:"");var f=document.createElement("DIV");e.appendChild(f);if(!isNaN(d.inputLeft)){e.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){e.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"&&!isNaN(d.inputWidth)){f.style.width=parseInt(d.inputWidth)+"px"}e._uploader=new dhtmlXFileUploader(f,d.swfPath||"",d.swfUrl||"",d.mode||null,d.swfLogs,d.slXap||"",d.slUrl||"",d.slLogs||"");e._uploader.setURL(d.url||"");e._uploader.callEvent=e.callEvent;typeof d.autoStart!="undefined"&&e._uploader.setAutoStart(d.autoStart);typeof d.autoRemove!="undefined"&&e._uploader.setAutoRemove(d.autoRemove);typeof d.titleScreen!="undefined"&&e._uploader.enableTitleScreen(d.titleScreen);typeof d.titleText!="undefined"&&e._uploader.setTitleText(d.titleText);d.hidden==!0&&this.hide(e);d.disabled==!0&&this.userDisable(e);if(!(d.inputHeight=="auto"||parseInt(d.inputHeight)==NaN)){e._uploader.p_files.style.height=parseInt(d.inputHeight)+"px"}return this},destruct:function(b){this.doUnloadNestedLists(b);b._uploader.unload();b._uploader=null;b._checked=null;b._enabled=null;b._idd=null;b._type=null;b.onselectstart=null;b._autoCheck=null;b.callEvent=null;b.checkEvent=null;for(b.getForm=null;b.childNodes.length>0;){b.removeChild(b.childNodes[0])}b.parentNode.removeChild(b);b=null},setText:function(){},getText:function(){},enable:function(b){b._enabled=!0;if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b._uploader.enable()},disable:function(b){b._enabled=!1;String(b.className).search("disabled")<0&&(b.className+=" disabled");b._uploader.disable()},setWidth:function(d,c){d.childNodes[0].style.width=c+"px";d._width=c},getWidth:function(b){return b._width||parseInt(b.childNodes[0].style.width)},setValue:function(b){b._uploader.clear()},getValue:function(g){var f=g._uploader.getData(),k={},j=0,h;for(h in f){k[g._idd+"_r_"+j]=f[h].realName,k[g._idd+"_s_"+j]=f[h].serverName,j++}k[g._idd+"_count"]=j;return k},getUploader:function(b){return b._uploader},getStatus:function(b){return b._uploader.getStatus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.setFormData_upload=function(b){this.doWithItem(b,"setValue")};dhtmlXForm.prototype.getUploader=function(b){return this.doWithItem(b,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(b){return this.doWithItem(b,"getStatus")};function dhtmlXFileUploader(a,b,c,d,e,f,g,h){var i=this;if(typeof d=="string"&&typeof this[d]=="function"){this.engine=d}else{if(this.engine="html4",typeof window.FormData!="undefined"&&typeof window.XMLHttpRequest!="undefined"&&typeof window.XMLHttpRequestUpload!="undefined"){this.engine="html5"}else{if(typeof window.swfobject!="undefined"){var j=swfobject.getFlashPlayerVersion();if(j.major>=10){this.engine="flash"}}else{if(this._sl_v=this.getSLVersion()){this.engine="sl"}}}}typeof a=="string"&&(a=document.getElementById(a));this._swf_file_url=b||"";this._swf_upolad_url=c||"";this._swf_logs=e;this._sl_xap=f;this._sl_upload_url=g;this._sl_logs=h;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";a.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoRemove=this._autoStart=!1;this._enabled=this._titleScreen=!0;this._uploaded_count=0;this._uid=function(){this._idd?this._idd++:this._idd=(new Date).getTime();return this._idd};this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){i._enabled&&!i._uploading&&(i._switchButton(!0),i._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){i._enabled&&(i._uploadStop(),i._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){i._enabled&&i.clear()},tooltip:"Clear list"}};this.buttons={};for(var a in this.b_opts){var b=document.createElement("DIV");b.innerHTML="&nbsp;";b.className="dhx_file_uploader_button button_"+a;b.onclick=this.b_opts[a].onclick;if(this.b_opts[a].tooltip){b.title=this.b_opts[a].tooltip}this.p_controls.appendChild(b);this.buttons[a]=b;b=null}this.buttons.cancel.style.display="none"};this._readableSize=function(a){for(var b=!1,c="b,Kb,Mb,Gb,Tb,Pb,Eb".split(","),d=0;d<c.length;d++){a>1024?a/=1024:b===!1&&(b=d)}b===!1&&(b=c.length-1);return Math.round(a*100)/100+" "+c[b]};this._addFileToList=function(a,b,c,d,e){this._checkTitleScreen();var g=document.createElement("DIV");g._idd=a;g.className="dhx_file dhx_file_"+d;g.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+e+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(g);g.childNodes[0].style.width=g.offsetWidth-127+"px";this._items[a]=g;this._updateFileNameSize(a);g.childNodes[2].onclick=function(){if(i._enabled){var a=this.parentNode._idd;i._removeFileFromQueue(a)}};this.callEvent("onFileAdd",[b])};this._removeFileFromList=function(a){if(this._items[a]){this._items[a].childNodes[2].onclick=null,this._items[a].parentNode.removeChild(this._items[a]),this._items[a]=null,delete this._items[a],this._data[a]&&(this._data[a]=null,delete this._data[a]),this._checkTitleScreen()}};this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"&nbsp;");this._items[a].childNodes[0].title=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"")};this._updateFileInList=function(a,b,c){if(this._items[a]){this._items[a].className="dhx_file dhx_file_"+b,b=="uploading"&&c<100&&this._progress_type=="loader"?(this._items[a].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[a].childNodes[1].innerHTML="&nbsp;"):(this._items[a].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[a].childNodes[1].innerHTML=c+"%"),this._updateFileNameSize(a)}};this._removeFilesByState=function(a){for(var b in this._files){(a===!0||this._files[b].state==a)&&this._removeFileFromQueue(b)}};this._switchButton=function(a){if(a==!0){this.buttons.upload.style.display="none",this.buttons.cancel.style.display=""}else{var b=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;b>0&&this.callEvent("onUploadComplete",[b])}};this._uploadStart=function(){if(!this._uploading){for(var a in this._files){if(this._files[a].state=="fail"){this._files[a].state="added",this._updateFileInList(a,"added",0)}}}this._uploading=!0;var b=!1;for(a in this._files){if(!b&&[this._files[a].state]=="added"){b=!0,this._files[a].state="uploading",this._updateFileInList(a,"uploading",0),this._doUploadFile(a)}}if(!b){this._uploading=!1,this._switchButton(!1)}};this._onUploadSuccess=function(a,b,c){if(typeof c!="undefined"&&this.engine=="flash"){try{eval("var t="+c.data)}catch(d){}if(typeof t!="undefined"&&t.state==!0&&t.name!=null){b=t.name}else{this._onUploadFail(a);return}}this._uploaded_count++;this._data[a]={realName:this._files[a].name,serverName:b};this._files[a].state="uploaded";this._updateFileInList(a,"uploaded",100);this.callEvent("onUploadFile",[this._files[a].name,b]);this._autoRemove&&this._removeFileFromQueue(a);this._uploading&&this._uploadStart()};this._onUploadFail=function(a){this._files[a].state="fail";this._updateFileInList(a,"fail",0);this.callEvent("onUploadFail",[this._files[a].name]);this._uploading&&this._uploadStart()};this._onUploadAbort=function(a){this._uploading=!1;this._files[a].state="added";this._updateFileInList(a,"added",0);this.callEvent("onUploadCancel",[this._files[a].name])};this._checkTitleScreen=function(){var a=0,b;for(b in this._files){a++}if(a==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen){this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"}if((a>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML=""}};this.callEvent=function(){};this.upload=function(){this._uploading||this._uploadStart()};this.setAutoStart=function(a){this._autoStart=a==!0};this.setAutoRemove=function(a){this._autoRemove=a==!0};this.enableTitleScreen=function(a){this._titleScreen=a==!0;this._checkTitleScreen()};this.setTitleText=function(a){this._titleText=a;if(this.p.className.search("dhx_file_uploader_title")>=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(a){this._url=a};this.setSWFURL=function(a){this._swf_upolad_url=a};this.enable=function(){this._enabled=!0;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=!1;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var a=0,b;for(b in this._files){if(this._files[b].state!="uploaded"){return -1}a=1}return a};this.getData=function(){return this._data};this.clear=function(){this._uploading&&i._uploadStop();i._switchButton(!1);i._removeFilesByState(!0);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(!0);this._items=this._files=this._data=null;this._unloadEngine();for(var a in this.buttons){this.buttons[a].onclick=null,this.buttons[a].parentNode.removeChild(this.buttons[a]),this.buttons[a]=null,delete this.buttons[a]}this.buttons=null;for(a in this.b_opts){this.b_opts[a].onclick=null,this.b_opts[a]=null,delete this.b_opts[a]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_controls=null;this.p_files.parentNode.removeChild(this.p_files);this.engine=this._swf_upolad_url=this._swf_file_url=this.unload=this.clear=this.getData=this.getStatus=this.disable=this.enable=this.setURL=this.setTitleText=this.enableTitleScreen=this.setAutoRemove=this.setAutoStart=this.upload=this.callEvent=this._checkTitleScreen=this._onUploadAbort=this._onUploadFail=this._onUploadSuccess=this._uploadStart=this._switchButton=this._removeFilesByState=this._updateFileInList=this._updateFileNameSize=this._removeFileFromList=this._addFileToList=this._readableSize=this._initToolbar=this._uid=this._idd=this._uploading=this._url=this._uploaded_count=this._titleText=this._titleScreen=this._progress_type=this._enabled=this._autoStart=this._autoRemove=this.p_files=null;this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");i=a=this.p=null};var k=new this[this.engine],l;for(l in k){this[l]=k[l],k[l]=null}l=k=a=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var e=this;this.buttons.browse.onclick=function(){e._enabled&&e.f.click()};this._progress_type="percentage";this._upload_dnd=this._upload_mp=!0;var d=window.navigator.userAgent,f=!0;if(d.match(/Windows/gi)!=null&&d.match(/AppleWebKit/gi)!=null&&d.match(/Safari/gi)!=null){if(d.match(/Version\/5\.1\.5/gi)){this._upload_mp=!1}if(d.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=!1}if(d.match(/Version\/5\.1\.1/gi)){this._upload_dnd=this._upload_mp=!1}if(d.match(/Version\/5\.1\.2/gi)){this._upload_dnd=!1}}this._addFileInput();this._upload_dnd?(this.p.ondragenter=function(b){b.dataTransfer&&(b.stopPropagation(),b.preventDefault())},this.p.ondragover=function(b){b.dataTransfer&&(b.stopPropagation(),b.preventDefault())},this.p.ondrop=function(a){a.dataTransfer&&(a.stopPropagation(),a.preventDefault(),e._enabled&&e._parseFilesInInput(a.dataTransfer.files))},this._titleText="Drag-n-Drop files here or<br>click to select files for upload."):this._titleText="Click to select files for upload."},_addFileInput:function(){if(this.f!=null){this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null}var b=this;this.f=document.createElement("INPUT");this.f.type="file";if(this._upload_mp){this.f.multiple="1"}this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){b._parseFilesInInput(this.files);_isOpera&&b._addFileInput()}},_doUploadFile:function(a){var b=this;if(!this._loader){this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(a){b._files[this._idd].state=="uploading"&&b._updateFileInList(this._idd,"uploading",Math.round(a.loaded*100/a.total))},this._loader.onload=function(){try{eval("var r="+this.responseText)}catch(a){}typeof r=="object"&&typeof r.state!="undefined"&&r.state==!0?(b._onUploadSuccess(this.upload._idd,r.name),r=null):b._onUploadFail(this.upload._idd)},this._loader.onerror=function(){b._onUploadFail(this.upload._idd)},this._loader.onabort=function(){b._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=a;var c=new FormData;c.append("file",this._files[a].file);this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5&"+(new Date).getTime(),!0);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(c)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(d){for(var c=0;c<d.length;c++){this._addFileToQueue(d[c])}},_addFileToQueue:function(d){var c=d._idd||this._uid();this._files[c]={file:d,name:d.name,size:d.size,state:"added"};this._addFileToList(c,d.name,d.size,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(f){if(this._files[f]){var e=this._files[f].name,h=this._data!=null&&this._data[f]!=null?this._data[f].serverName:null,g=!1;this._uploading&&f==this._loader.upload._idd&&this._files[f].state=="uploading"&&(this._uploadStop(),g=!0);this._files[f].file=null;this._files[f].name=null;this._files[f].size=null;this._files[f].state=null;this._files[f]=null;delete this._files[f];this._removeFileFromList(f);this.callEvent("onFileRemove",[e,h]);g&&this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader=this._loader.upload._idd=null}this._unloadEngine=this._removeFileFromQueue=this._addFileToQueue=this._parseFilesInInput=this._uploadStop=this._doUploadFile=this._initEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var e=this,d=this._uid();if(!this.k){this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+(new Date).getTime(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>',this.fr=this.k.firstChild,window.navigator.userAgent.indexOf("MSIE")>=0?this.fr.onreadystatechange=function(){this.readyState=="complete"&&e._onLoad()}:this.fr.onload=function(){e._onLoad()}}var f=document.createElement("DIV");f.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+(new Date).getTime()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+d+"'><input type='file' name='file' class='dhx_file_input'></form>";this.k.appendChild(f);f.firstChild.lastChild._idd=d;f.firstChild.lastChild.onchange=function(){e._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";e._addForm()};f=null},_onLoad:function(){if(this._uploading){try{eval("var r="+this.fr.contentWindow.document.body.innerHTML)}catch(a){}if(typeof r=="object"&&typeof r.state!="undefined"){if(r.state=="cancelled"){this._onUploadAbort(this.fr._idd);r=null;return}else{if(r.state==!0){if(typeof r.size!="undefined"&&!isNaN(r.size)){this._files[this.fr._idd].size=r.size}this._onUploadSuccess(this.fr._idd,r.name);r=null;return}}}this._onUploadFail(this.fr._idd)}},_addFileToQueue:function(d){var c=d.value.match(/[^\\\/]*$/g),c=c[0]!=null?c[0]:d.value;this._files[d._idd]={name:c,form:d.parentNode,node:d.parentNode.parentNode,input:d,state:"added"};this._addFileToList(d._idd,d.value,!1,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(e){var d=this._files[e].name,f=this._data!=null&&this._data[e]!=null?this._data[e].serverName:null;this._files[e].input.onchange=null;this._files[e].form.removeChild(this._files[e].input);this._files[e].node.removeChild(this._files[e].form);this._files[e].node.parentNode.removeChild(this._files[e].node);this._files[e].input=null;this._files[e].name=null;this._files[e].form=null;this._files[e].node=null;this._files[e].size=null;this._files[e].state=null;this._files[e]=null;delete this._files[e];this._removeFileFromList(e);this.callEvent("onFileRemove",[d,f])},_doUploadFile:function(b){this.fr._idd=b;this._files[b].form.action=this._url;this._files[b].form.submit()},_uploadStop:function(){if(this._uploading){this.fr.contentWindow.location.href=this._url+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel&etc="+(new Date).getTime()}},_unloadEngine:function(){if(this.k){this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null}this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._onLoad=this._addForm=this._initEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(!window.dhtmlXFileUploaderSWFObjects){window.dhtmlXFileUploaderSWFObjects={items:{},uid:function(){this.id?this.id++:this.id=(new Date).getTime();return this.id},callEvent:function(g,f,h){window.dhtmlXFileUploaderSWFObjects.items[g].uploader[f].apply(window.dhtmlXFileUploaderSWFObjects.items[g].uploader,h)}}}var d=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhtmlXFileUploaderSWFObjects.uid();this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf("?")>=0?"&":"?")+"etc="+(new Date).getTime();this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var c=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+c.major+"."+c.minor+"."+c.release;this._progress_type="percentage";window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_addFileToQueue:function(e,d,f){this._files[e]={name:d,size:f,state:"added"};this._addFileToList(e,d,f,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(f){if(this._files[f]){var e=this._files[f].name,h=this._data!=null&&this._data[f]!=null?this._data[f].serverName:null,g=!1;this._uploading&&this._files[f].state=="uploading"&&(this._uploadStop(),g=!0);swfobject.getObjectById(this._swf_obj_id).removeFileById(f);this._files[f].name=null;this._files[f].size=null;this._files[f].state=null;this._files[f]=null;delete this._files[f];this._removeFileFromList(f);this.callEvent("onFileRemove",[e,h]);g&&this._uploadStart()}},_doUploadFile:function(b){swfobject.getObjectById(this._swf_obj_id).upload(b,this._swf_upolad_url)},_uploadStop:function(){for(var b in this._files){this._files[b].state=="uploading"&&swfobject.getObjectById(this._swf_obj_id).uploadStop(b)}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null,delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]}this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._swf_obj_id=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof this._sl_v=="undefined"){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},uid:function(){this.id?this.id++:this.id=(new Date).getTime();return this.id},callEvent:function(e,d,f){window.dhtmlXFileUploaderSLObjects.items[e].uploader[d].apply(window.dhtmlXFileUploaderSLObjects.items[e].uploader,f)}}}this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhtmlXFileUploaderSLObjects.uid();this._sl_v!=!1?(this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'):(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title="");this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(e,d,f){this._files[e]={name:d,size:f,state:"added"};this._addFileToList(e,d,f,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(d){if(this._files[d]){var c=!1;this._uploading&&this._files[d].state=="uploading"&&(this._uploadStop(),c=!0);document.getElementById([this._sl_obj_id]).Content.a.removeFileById(d);this._files[d].name=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);c&&this._uploadStart()}},_doUploadFile:function(b){document.getElementById(this._sl_obj_id).Content.a.upload(b,this._sl_upload_url,"&mode=sl&etc="+(new Date).getTime())},_uploadStop:function(){this._uploading=!1;for(var b in this._files){this._files[b].state=="uploading"&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(b)}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._unloadEngine=this._uploadStop=this._doUploadFile=this._removeFileFromQueue=this._addFileToQueue=this._initEngine=this._sl_obj_id=null}};dhtmlXFileUploader.prototype.setSLURL=function(b){this._sl_upload_url=b};dhtmlXFileUploader.prototype.getSLVersion=function(){var g=!1;if(_isIE){try{var f=new ActiveXObject("AgControl.AgControl");if(f!=null){for(var k=4,j=0;f.isVersionSupported([k,j].join("."));){g=[k,j],++j>9&&(k++,j=0)}}f=null}catch(h){}}else{navigator.plugins["Silverlight Plug-In"]!=null&&(g=navigator.plugins["Silverlight Plug-In"].description.split("."))}return g};dhtmlXForm.prototype.items.colorpicker={ev:!1,inp:null,colorpicker:{},cz:{},render:function(e,d){var f=this;e._type="colorpicker";e._enabled=!0;this.doAddLabel(e,d);this.doAddInput(e,d,"INPUT","TEXT",!0,!0,"dhxform_textarea");this.doAttachChangeLS(e);e._value=d.value||"";e.childNodes[e._ll?1:0].childNodes[0].value=e._value;this.cz[e._idd]=document.createElement("DIV");this.cz[e._idd].style.position="absolute";this.cz[e._idd].style.top="0px";this.cz[e._idd].style.zIndex=249;document.body.insertBefore(this.cz[e._idd],document.body.firstChild);this.colorpicker[e._idd]=new dhtmlXColorPicker(this.cz[e._idd],null,e.getForm()._s2b(d.enableCustomColors),!0);this.colorpicker[e._idd].setImagePath(d.imagePath||"");this.colorpicker[e._idd].setSkin("");this.colorpicker[e._idd].init();typeof d.customColors!="undefined"&&this.colorpicker[e._idd].setCustomColors(d.customColors);this.colorpicker[e._idd].elements.cs_Content.onclick=function(b){(b||event).cancelBubble=!0};this.colorpicker[e._idd].setOnSelectHandler(function(a){if(e._value!=a&&!(e.checkEvent("onBeforeChange")&&e.callEvent("onBeforeChange",[e._idd,e._value,a])!==!0)){e._value=a,f.setValue(e,a),e.callEvent("onChange",[e._idd,e._value])}});e.childNodes[e._ll?1:0].childNodes[0]._idd=e._idd;e.childNodes[e._ll?1:0].childNodes[0].onclick=function(){f.colorpicker[this._idd].isVisible()?(f.colorpicker[this._idd].hide(),f.inp=null):(f.checkEnteredValue(this.parentNode.parentNode),f.colorpicker[this._idd].setPosition(getAbsoluteLeft(this),getAbsoluteTop(this)+this.offsetHeight-1),f.colorpicker[this._idd].setColor(e._value),f.colorpicker[this._idd].show(),f.inp=this._idd)};e.childNodes[e._ll?1:0].childNodes[0].onblur=function(){var b=this.parentNode.parentNode;b.getForm()._ccDeactivate(b._idd);f.checkEnteredValue(this.parentNode.parentNode);b.getForm().callEvent("onBlur",[b._idd]);b=null};if(!this.ev){_isIE?document.body.attachEvent("onclick",this.clickEvent):window.addEventListener("click",this.clickEvent,!1),this.ev=!0}return this},clickEvent:function(){dhtmlXForm.prototype.items.colorpicker.hideAllColorPickers()},hideAllColorPickers:function(){for(var b in this.colorpicker){b!=this.inp&&this.colorpicker[b].hide()}this.inp=null},getColorPicker:function(b){return this.colorpicker[b._idd]},destruct:function(g){this.colorpicker[g._idd].elements.cs_Content.onclick=null;this.colorpicker[g._idd].unload&&this.colorpicker[g._idd].unload();this.colorpicker[g._idd]=null;try{delete this.colorpicker[g._idd]}catch(f){}this.cz[g._idd].parentNode.removeChild(this.cz[g._idd]);this.cz[g._idd]=null;try{delete this.cz[g._idd]}catch(k){}var j=0,h;for(h in this.colorpicker){j++}if(j==0){_isIE?document.body.detachEvent("onclick",this.clickEvent):window.removeEventListener("click",this.clickEvent,!1),this.ev=!1}g.childNodes[g._ll?1:0].childNodes[0]._idd=null;g.childNodes[g._ll?1:0].childNodes[0].onclick=null;g.childNodes[g._ll?1:0].childNodes[0].onblur=null;this.d2(g);g=null},checkEnteredValue:function(b){this.setValue(b,b.childNodes[b._ll?1:0].childNodes[0].value)}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.colorpicker.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(b){return this.doWithItem(b,"getColorPicker")};if(typeof dhtmlXColorPicker!="undefined"){dhtmlXColorPicker.prototype.unload=function(){this.elements.cs_SelectorVer.parentNode.removeChild(this.elements.cs_SelectorVer);this.elements.cs_SelectorHor.parentNode.removeChild(this.elements.cs_SelectorHor);this.elements.cs_SelectorVer=null;this.elements.cs_SelectorHor=null;this.elements.cs_SelectorDiv.ondblclick=null;this.elements.cs_SelectorDiv.onmousedown=null;this.elements.cs_SelectorDiv.z=null;this.elements.cs_SelectorDiv.parentNode.removeChild(this.elements.cs_SelectorDiv);this.elements.cs_SelectorDiv=null;this.elements.cs_LumSelectArrow.onmousedown=null;this.elements.cs_LumSelectArrow.z=null;this.elements.cs_LumSelectArrow.parentNode.removeChild(this.elements.cs_LumSelectArrow);this.elements.cs_LumSelectArrow=null;this.elements.cs_LumSelectLine.parentNode.removeChild(this.elements.cs_LumSelectLine);for(this.elements.cs_LumSelectLine=null;this.elements.cs_LumSelect.childNodes.length>0;){this.elements.cs_LumSelect.removeChild(this.elements.cs_LumSelect.childNodes[0])}this.elements.cs_LumSelect.ondblclick=null;this.elements.cs_LumSelect.onmousedown=null;this.elements.cs_LumSelect.z=null;this.elements.cs_LumSelect.parentNode.removeChild(this.elements.cs_LumSelect);this.elements.cs_LumSelect=null;this.elements.cs_EndColor.parentNode.removeChild(this.elements.cs_EndColor);this.elements.cs_EndColor=null;this.elements.cs_InputHue.onchange=null;this.elements.cs_InputHue.z=null;this.elements.cs_InputHue.parentNode.removeChild(this.elements.cs_InputHue);this.elements.cs_InputHue=null;this.elements.cs_InputRed.onchange=null;this.elements.cs_InputRed.z=null;this.elements.cs_InputRed.parentNode.removeChild(this.elements.cs_InputRed);this.elements.cs_InputRed=null;this.elements.cs_InputSat.onchange=null;this.elements.cs_InputSat.z=null;this.elements.cs_InputSat.parentNode.removeChild(this.elements.cs_InputSat);this.elements.cs_InputSat=null;this.elements.cs_InputGreen.onchange=null;this.elements.cs_InputGreen.z=null;this.elements.cs_InputGreen.parentNode.removeChild(this.elements.cs_InputGreen);this.elements.cs_InputGreen=null;this.elements.cs_Hex.onchange=null;this.elements.cs_Hex.z=null;this.elements.cs_Hex.parentNode.removeChild(this.elements.cs_Hex);this.elements.cs_Hex=null;this.elements.cs_InputLum.onchange=null;this.elements.cs_InputLum.z=null;this.elements.cs_InputLum.parentNode.removeChild(this.elements.cs_InputLum);this.elements.cs_InputLum=null;this.elements.cs_InputBlue.onchange=null;this.elements.cs_InputBlue.z=null;this.elements.cs_InputBlue.parentNode.removeChild(this.elements.cs_InputBlue);this.elements.cs_InputBlue=null;this.elements.cs_ButtonOk.onclick=null;this.elements.cs_ButtonOk.onmouseout=null;this.elements.cs_ButtonOk.onmouseover=null;this.elements.cs_ButtonOk.z=null;this.elements.cs_ButtonOk.parentNode.removeChild(this.elements.cs_ButtonOk);this.elements.cs_ButtonOk=null;this.elements.cs_ButtonCancel.onclick=null;this.elements.cs_ButtonCancel.onmouseout=null;this.elements.cs_ButtonCancel.onmouseover=null;this.elements.cs_ButtonCancel.z=null;this.elements.cs_ButtonCancel.parentNode.removeChild(this.elements.cs_ButtonCancel);this.elements.cs_ButtonCancel=null;this.elements.cs_ContentTable.parentNode.removeChild(this.elements.cs_ContentTable);this.elements.cs_ContentTable=null;this.elements.cs_Content.parentNode.removeChild(this.elements.cs_Content);this.z=this.elements.cs_Content=null;this.detachAllEvents();this.customColors=this.linkToObjects=this.language=this.elements=this.container=this._changeValueHEX=this._changeValueRGB=this._changeValueHSV=this._selectCustomColor=this._getColorHEX=this._reinitCustomColors=this._initCustomColors=this._hex2dec=this._dec2hex=this._colorizeLum=this._drawLum=this._rgb2hsv=this._hsv2rgb=this._drawValues=this._calculateColor=this._getOffsetLeft=this._getOffsetTop=this._getOffset=this._stopMoveLum=this._mouseMoveLum=this._startMoveLum=this._stopMoveColor=this._mouseMoveColor=this._startMoveColor=this._setLumPos=this._getScrollers=this._setCrossPos=this._initEvents=this._initCsIdElement=this.unload=this.showA=this.show=this.normalButton=this.hoverButton=this.isVisible=this.setSkin=this.loadUserLanguage=this.init=this.setImagePath=this.hideOnSelect=this.linkTo=this.getSelectedColor=this.setOnCancelHandler=this.setOnSelectHandler=this.hide=this.setPosition=this.close=this.setColor=this.setCustomColors=this.redraw=this.restoreFromHEX=this.restoreFromHSV=this.restoreFromRGB=this.addCustomColor=this.restoreColor=this.saveColor=this.clickCancel=this.clickOk=this.resetHandlers=this.generate=this.detachAllEvents=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=null}}dhtmlXForm.prototype.items.container={render:function(d,c){d._type="container";d._enabled=!0;this.doAddLabel(d,c);this.doAddInput(d,c,"DIV",null,!0,!0,"dhxform_container");return this},getContainer:function(b){return b.childNodes[b._ll?1:0].childNodes[0]},enable:function(b){b._enabled=!0;if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b.callEvent("onEnable",[b._idd])},disable:function(b){b._enabled=!1;String(b.className).search("disabled")<0&&(b.className+=" disabled");b.callEvent("onDisable",[b._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(b){return this.doWithItem(b,"getContainer")};(function(){for(var b in dhtmlXForm.prototype.items.input){dhtmlXForm.prototype.items.container[b]||(dhtmlXForm.prototype.items.container[b]=dhtmlXForm.prototype.items.input[b])}})();dhtmlXForm.prototype.items.combo={render:function(d,c){d._type="combo";d._enabled=!0;d._value=null;d._newValue=null;this.doAddLabel(d,c);this.doAddInput(d,c,"SELECT",null,!0,!0,"dhxform_select");this.doAttachEvents(d);this.doLoadOpts(d,c);d.onselectstart=function(b){b=b||event;return b.returnValue=!0};d.childNodes[d._ll?1:0].childNodes[0].setAttribute("opt_type",c.comboType||"");d._combo=new dhtmlXComboFromSelect(d.childNodes[d._ll?1:0].childNodes[0]);d._combo._currentComboValue=d._combo.getSelectedValue();d._combo.DOMelem_input.id=c.uid;d._combo.DOMelem_button.onmousedown=function(){return !1};c.connector&&this.doLoadOptsConnector(d,c.connector);c.filtering&&d._combo.enableFilteringMode(!0);c.readonly==!0&&this.setReadonly(d,!0);c.style&&(d._combo.DOMelem_input.style.cssText+=c.style);typeof window.addEventListener=="function"?(d._combo.DOMelem_input.addEventListener("focus",this._comboFocus,!1),d._combo.DOMelem_input.addEventListener("blur",this._comboBlur,!1)):(d._combo.DOMelem_input.attachEvent("onfocus",this._comboFocus),d._combo.DOMelem_input.attachEvent("onblur",this._comboBlur));return this},destruct:function(b){b.childNodes[b._ll?1:0].childNodes[0].onchange=null;typeof window.addEventListener=="function"?(b._combo.DOMelem_input.removeEventListener("focus",this._comboFocus,!1),b._combo.DOMelem_input.removeEventListener("blur",this._comboBlur,!1)):(b._combo.DOMelem_input.detachEvent("onfocus",this._comboFocus),b._combo.DOMelem_input.detachEvent("onblur",this._comboBlur));b._combo._currentComboValue=null;b._combo.destructor();b._combo=null;b._apiChange=null;this.d2(b);b=null},doAttachEvents:function(d){var c=this;d.childNodes[d._ll?1:0].childNodes[0].onchange=function(){c.doOnChange(this);c.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(b){b.getForm().hot_validate&&this._validate(b)},doOnChange:function(d){var c=d.DOMParent.parentNode.parentNode;if(!c._apiChange){d._newComboValue=d.getSelectedValue();if(d._newComboValue!=d._currentComboValue){if(c.checkEvent("onBeforeChange")&&c.callEvent("onBeforeChange",[c._idd,d._currentComboValue,d._newComboValue])!==!0){return window.setTimeout(function(){d.setComboValue(d._currentComboValue)},1),!1}d._currentComboValue=d._newComboValue;c.callEvent("onChange",[c._idd,d._currentComboValue])}c._autoCheck(c._enabled)}},doLoadOptsConnector:function(f,e){var h=this,g=f;f._connector_working=!0;f._apiChange=!0;f._combo.loadXML(e,function(){g.callEvent("onOptionsLoaded",[g._idd]);g._connector_working=!1;if(g._connector_value!=null){h.setValue(g,g._connector_value),g._connector_value=null}g._apiChange=!1;h=g=null})},enable:function(b){if(String(b.className).search("disabled")>=0){b.className=String(b.className).replace(/disabled/gi,"")}b._enabled=!0;b._combo.disable(!1);b._combo.DOMelem_button.src=(window.dhx_globalImgPath?dhx_globalImgPath:"")+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif"},disable:function(b){String(b.className).search("disabled")<0&&(b.className+=" disabled");b._enabled=!1;b._combo.disable(!0);b._combo.DOMelem_button.src=(window.dhx_globalImgPath?dhx_globalImgPath:"")+"combo_select_dis"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif"},getCombo:function(b){return b._combo},setValue:function(d,c){d._connector_working?d._connector_value=c:(d._apiChange=!0,d._combo.setComboValue(c),d._combo._currentComboValue=d._combo.getActualValue(),d._apiChange=!1)},getValue:function(b){return b._combo.getActualValue()},setWidth:function(d,c){d.childNodes[d._ll?1:0].childNodes[0].style.width=c+"px"},setReadonly:function(d,c){if(d._combo){d._combo_ro=c,d._combo.readonly(d._combo_ro)}},isReadonly:function(b){return b._combo_ro||!1},setFocus:function(b){b._enabled&&b._combo.DOMelem_input.focus()},_setCss:function(e,d,f){e._combo.DOMlist.style.fontSize=f},_comboFocus:function(f){var f=f||event,e=(f.target||f.srcElement).parentNode.parentNode,h=e.parentNode.parentNode;h.getForm().skin=="dhx_terrace"&&e.className.search(/combo_in_focus/)<0&&(e.className+=" combo_in_focus");for(var g=0;g<h._combo.DOMlist.childNodes.length;g++){h._combo.DOMlist.childNodes[g].onmousedown=function(){return !1}}h.callEvent("onFocus",[h._idd]);h=e=null},_comboBlur:function(f){var f=f||event,e=(f.target||f.srcElement).parentNode.parentNode,h=e.parentNode.parentNode;if(h.getForm().skin=="dhx_terrace"&&e.className.search(/combo_in_focus/)>=0){e.className=e.className.replace(/combo_in_focus/gi,"")}for(var g=0;g<h._combo.DOMlist.childNodes.length;g++){h._combo.DOMlist.childNodes[g].onmousedown=null}h.callEvent("onBlur",[h._idd]);h=e=null}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(b){return this.doWithItem(b,"getCombo")};dhtmlXForm.prototype.items.editor={editor:{},render:function(f,e){var h=!isNaN(e.rows);f._type="editor";f._enabled=!0;this.doAddLabel(f,e);this.doAddInput(f,e,"DIV",null,!0,!0,"dhxform_item_template dhxeditor_inside");f._value=e.value||"";var g=this;this.editor[f._idd]=new dhtmlXEditor(f.childNodes[f._ll?1:0].childNodes[0]);this.editor[f._idd].setContent(f._value);this.editor[f._idd].attachEvent("onAccess",function(a,d){_dhxForm_doClick(document.body,"click");if(a=="blur"){if(g.doOnBlur(f,this),f.callEvent("onBlur",[f._idd]),f.getForm().skin=="dhx_terrace"){f.childNodes[f._ll?1:0].childNodes[0].className="dhxform_item_template dhxeditor_inside"}}else{if(f.callEvent("onEditorAccess",[f._idd,a,d,this,f.getForm()]),f.callEvent("onFocus",[f._idd]),f.getForm().skin=="dhx_terrace"){f.childNodes[f._ll?1:0].childNodes[0].className="dhxform_item_template dhxeditor_inside_focus"}}});this.editor[f._idd].attachEvent("onToolbarClick",function(a){f.callEvent("onEditorToolbarClick",[f._idd,a,this,f.getForm()])});e.readonly&&this.setReadonly(f,!0);f.childNodes[f._ll?0:1].childNodes[0].removeAttribute("for");f.childNodes[f._ll?0:1].childNodes[0].onclick=function(){g.editor[f._idd]._focus()};if(!this.editor[f._idd]._isToolbar){this.editor[f._idd].base.firstChild.onmousedown=function(){return !1}}return this},doOnBlur:function(e,d){var f=d.getContent();if(e._value!=f){e.checkEvent("onBeforeChange")&&e.callEvent("onBeforeChange",[e._idd,e._value,f])!==!0?d.setContent(e._value):(e._value=f,e.callEvent("onChange",[e._idd,f]))}},setValue:function(d,c){if(d._value!=c){d._value=c,this.editor[d._idd].setContent(d._value)}},getValue:function(b){b._value=this.editor[b._idd].getContent();return b._value},enable:function(b){this.editor[b._idd].setReadonly(!1);this.doEn(b)},disable:function(b){this.editor[b._idd].setReadonly(!0);this.doDis(b)},setReadonly:function(d,c){this.editor[d._idd].setReadonly(c)},getEditor:function(b){return this.editor[b._idd]||null},destruct:function(b){b.childNodes[b._ll?0:1].childNodes[0].onclick=null;this.editor[b._idd].unload();this.editor[b._idd]=null;this.d2(b);b=null},setFocus:function(b){this.editor[b._idd]._focus()}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[b]=dhtmlXForm.prototype.items.template[b]}})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(b){return this.doWithItem(b,"getEditor")};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};function dhtmlxArray(b){return dhtmlXHeir(b||[],dhtmlxArray._master)}dhtmlxArray._master={_dhx_find:function(d){for(var c=0;c<this.length;c++){if(d==this[c]){return c}}return -1},_dhx_insertAt:function(e,d){this[this.length]=null;for(var f=this.length-1;f>=e;f--){this[f]=this[f-1]}this[e]=d},_dhx_removeAt:function(b){this.splice(b,1)},_dhx_swapItems:function(e,d){var f=this[e];this[e]=this[d];this[d]=f}};function dhtmlXGridObject(f){if(_isIE){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}}if(f){if(typeof f=="object"){if(this.entBox=f,!this.entBox.id){this.entBox.id="cgrid2_"+this.uid()}}else{this.entBox=document.getElementById(f)}}else{this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()}this.entBox.innerHTML="";dhtmlxEventable(this);var h=this;this._wcorr=0;this.fontWidth=7;this.row=this.cell=null;this.iconURL="";this.editor=null;this._dclE=this._f2kE=!0;this.combos=[];this.defVal=[];this.rowsAr={};this.rowsBuffer=dhtmlxArray();this.rowsCol=dhtmlxArray();this._data_cache={};this._ecache={};this._ud_enabled=!0;this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,!0,this.no_cashe);this._maskArr=[];this.selectedRows=dhtmlxArray();this.UserData={};this._sizeFix=this._borderFix=0;this.entBox.className+=" gridbox";this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%";this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%";this.entBox.style.cursor="default";this.entBox.onselectstart=function(){return !1};var g=function(d){var c=document.createElement("TABLE");c.cellSpacing=c.cellPadding=0;c.style.cssText="width:100%;table-layout:fixed;";c.className=d.substr(2);return c};this.obj=g("c_obj");this.hdr=g("c_hdr");this.hdr.style.marginRight="10px";this.hdr.style.paddingRight="10px";this.objBox=document.createElement("DIV");this.objBox.style.width="100%";this.objBox.style.overflow="auto";this.objBox.appendChild(this.obj);this.objBox.className="objbox";dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this);this.hdrBox=document.createElement("DIV");this.hdrBox.style.width="100%";this.hdrBox.style.height="20px";this.hdrBox.style.overflow="hidden";this.hdrBox.className="xhdr";this.preloadImagesAr=[];this.sortImg=document.createElement("IMG");this.sortImg.style.display="none";this.hdrBox.appendChild(this.sortImg);this.hdrBox.appendChild(this.hdr);this.hdrBox.style.position="relative";this.entBox.appendChild(this.hdrBox);this.entBox.appendChild(this.objBox);this.entBox.grid=this;this.objBox.grid=this;this.hdrBox.grid=this;this.obj.grid=this;this.hdr.grid=this;this.cellWidthPX=[];this.cellWidthPC=[];this.cellWidthType=this.entBox.cellwidthtype||"px";this.delim=this.entBox.delimiter||",";this._csvDelim=",";this.hdrLabels=[];this.columnIds=[];this.columnColor=[];this._hrrar=[];this.cellType=dhtmlxArray();this.cellAlign=[];this.initCellWidth=[];this.fldSort=[];this._srdh=_isIE&&document.compatMode!="BackCompat"?22:20;this.imgURL=window.dhx_globalImgPath||"";this.isActive=!1;this.isEditable=!0;this.pagingOn=this.useImagesInHeader=!1;this.rowsBufferOutSize=0;dhtmlxEvent(window,"unload",function(){try{h.destructor&&h.destructor()}catch(b){}});this.setSkin=function(j){this.skin_name=j;var d=this.entBox.className.split(" gridbox")[0];this.entBox.className=d+" gridbox gridbox_"+j;this.skin_h_correction=0;this.enableAlterCss("ev_"+j,"odd_"+j,this.isTreeGrid());this._fixAlterCss();switch(j){case"clear":this._topMb=document.createElement("DIV");this._topMb.className="topMumba";this._topMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinC_top_left.gif'><img style='right:20px' src='"+this.imgURL+"skinC_top_right.gif'>";this.entBox.appendChild(this._topMb);this._botMb=document.createElement("DIV");this._botMb.className="bottomMumba";this._botMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinD_bottom_left.gif'><img style='right:20px' src='"+this.imgURL+"skinD_bottom_right.gif'>";this.entBox.appendChild(this._botMb);if(this.entBox.style.position!="absolute"){this.entBox.style.position="relative"}this.skin_h_correction=20;break;case"dhx_terrace":this._srdh=40;this.forceDivInHeader=!0;break;case"dhx_skyblue":case"dhx_web":case"glassy_blue":case"dhx_black":case"dhx_blue":case"modern":case"light":this._srdh=20;this.forceDivInHeader=!0;break;case"xp":this.forceDivInHeader=!0;this._srdh=_isIE&&document.compatMode!="BackCompat"?26:22;break;case"mt":this._srdh=_isIE&&document.compatMode!="BackCompat"?26:22;break;case"gray":if(_isIE&&document.compatMode!="BackCompat"){this._srdh=22}}if(_isIE&&this.hdr){var k=this.hdr.parentNode;k.removeChild(this.hdr);k.appendChild(this.hdr)}this.setSizes()};_isIE&&this.preventIECaching(!0);if(window.dhtmlDragAndDropObject){this.dragger=new dhtmlDragAndDropObject}this._doOnScroll=function(d,c){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(d,c)};this.doOnScroll=function(d,c){this.hdrBox.scrollLeft=this.objBox.scrollLeft;if(this.ftr){this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft}if(!c&&this._srnd){this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){h._update_srnd_view&&h._update_srnd_view()},100)}};this.attachToObject=function(b){b.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()};this.init=function(k){if(this.isTreeGrid()&&!this._h2){this._h2=new dhtmlxHierarchy;if(this._fake&&!this._realfake){this._fake._h2=this._h2}this._tgc={imgURL:null}}if(this._hstyles){this.editStop();this.fldSorted=this.r_fldSorted=this.resized=this.lastClicked=null;this.cellWidthPX=[];this.cellWidthPC=[];if(this.hdr.rows.length>0){var c=this.xmlFileUrl;this.clearAll(!0);this.xmlFileUrl=c}for(var o=this.hdr.insertRow(0),n=0;n<this.hdrLabels.length;n++){o.appendChild(document.createElement("TH")),o.childNodes[n]._cellIndex=n,o.childNodes[n].style.height="0px"}_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?o.style.position="absolute":o.style.height="auto";o=this.hdr.insertRow(_isKHTML?2:1);o._childIndexes=[];for(var m=0,n=0;n<this.hdrLabels.length;n++){o._childIndexes[n]=n-m,this.hdrLabels[n]==this.splitSign&&n!=0?(_isKHTML&&o.insertCell(n-m),o.cells[n-m-1].colSpan=(o.cells[n-m-1].colSpan||1)+1,o.childNodes[n-m-1]._cellIndex++,m++,o._childIndexes[n]=n-m):(o.insertCell(n-m),o.childNodes[n-m]._cellIndex=n,o.childNodes[n-m]._cellIndexS=n,this.setColumnLabel(n,this.hdrLabels[n]))}if(m==0){o._childIndexes=null}this._cCount=this.hdrLabels.length;_isIE&&window.setTimeout(function(){h.setSizes&&h.setSizes()},1);this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));var l=this.obj.firstChild;if(!l.firstChild){l.appendChild(document.createElement("TR"));l=l.firstChild;_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?l.style.position="absolute":l.style.height="auto";for(n=0;n<this.hdrLabels.length;n++){l.appendChild(document.createElement("TH")),l.childNodes[n].style.height="0px"}}this._c_order=null;this.multiLine!=!0&&(this.obj.className+=" row20px");this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.src=this.imgURL+"sort_desc.gif";this.sortImg.defLeft=0;this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1;this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();k&&this.parseXML();this.obj.scrollTop=0;this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this);this._initDrF&&this._initD();this._init_point&&this._init_point()}};this.setColumnSizes=function(D){for(var C=0,A=[],y=0,x=0;x<this._cCount;x++){if(this.initCellWidth[x]=="*"&&!this._hrrar[x]){this._awdth=!1,A.push(x)}else{if(this.cellWidthType=="%"){typeof this.cellWidthPC[x]=="undefined"&&(this.cellWidthPC[x]=this.initCellWidth[x]);var w=D*this.cellWidthPC[x]/100||0;y>0.5&&(w++,y--);var v=this.cellWidthPX[x]=Math.floor(w),y=y+w-v}else{typeof this.cellWidthPX[x]=="undefined"&&(this.cellWidthPX[x]=this.initCellWidth[x])}this._hrrar[x]||(C+=this.cellWidthPX[x]*1)}}if(A.length){var u=Math.floor((D-C)/A.length);u<0&&(u=1);for(x=0;x<A.length;x++){var s=Math.max(this._drsclmW?this._drsclmW[A[x]]||0:0,u);this.cellWidthPX[A[x]]=s;C+=s}if(D>C){var o=A[A.length-1];this.cellWidthPX[o]+=D-C;C=D}this._setAutoResize()}this.obj.style.width=C+"px";this.hdr.style.width=C+"px";if(this.ftr){this.ftr.style.width=C+"px"}this.chngCellWidth();return C};this.setSizes=function(){if(this.hdr.rows[0]){var Q=this.quirks=_isIE&&document.compatMode=="BackCompat",P=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes){if(this.globalBox){var O=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){var N=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x;this.entBox.style.width=Math.max(0,this.globalBox.clientWidth+(Q?O*2:0)-this._fake.entBox.clientWidth)+"px";N!=this.globalBox.clientWidth&&this._fake._correctSplit(this._fake.entBox.clientWidth)}if(this._delta_y&&!this._realfake){this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(Q?O*2:0)+"px"}}else{if(this._delta_x){this.entBox.parentNode&&this.entBox.parentNode.tagName=="TD"?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-P*2+"px"):this.entBox.style.width=this._delta_x}if(this._delta_y){this.entBox.style.height=this._delta_y}}}window.clearTimeout(this._sizeTime);if(!this.entBox.offsetWidth&&(!this.globalBox||!this.globalBox.offsetWidth)){this._sizeTime=window.setTimeout(function(){h.setSizes&&h.setSizes()},250)}else{var L=!this._wthB&&(this.entBox.cmp||this._delta_x)&&(this.skin_name||"").indexOf("dhx")==0&&!Q?2:0,K=!this._wthB&&(this.entBox.cmp||this._delta_y)&&(this.skin_name||"").indexOf("dhx")==0&&!Q?2:0;this._sizeFix&&(L-=this._sizeFix,K-=this._sizeFix);var J=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,I=dhtmlx.$customScroll?0:18,H=this.entBox.clientWidth-(this.skin_h_correction||0)*(Q?0:1)-L,F=this.entBox.clientWidth-(this.skin_h_correction||0)-L,E=this.entBox.clientHeight-K,D=this.setColumnSizes(F-(J?I:0)-(this._correction_x||0)),C=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||this.objBox.style.overflowX=="scroll",A=this.hdr.clientHeight,y=this.ftr?this.ftr.clientHeight:0,c=H,x=E-A-y;this._awdth&&this._awdth[0]&&this._awdth[1]==99999&&(C=0);if(this._ahgr&&(x=this._ahgrMA?this.entBox.parentNode.clientHeight-A-y:this.obj.offsetHeight+(C?I:0)+(this._correction_y||0),this._ahgrM&&(x=this._ahgrF?Math.min(this._ahgrM,x+A+y)-A-y:Math.min(this._ahgrM,x)),J&&x>=this.obj.scrollHeight+(C?I:0))){J=!1,this.setColumnSizes(F-(this._correction_x||0))}if(this._awdth&&this._awdth[0]){if(this.cellWidthType=="%"){this.cellWidthType="px"}this._fake&&(D+=this._fake.entBox.clientWidth);c=Math.min(Math.max(D+(J?I:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this._fake&&(c-=this._fake.entBox.clientWidth)}x=Math.max(0,x);this._ff_size_delta=this._ff_size_delta==0.1?0.2:0.1;if(!_isFF){this._ff_size_delta=0}if(!this.dontSetSizes){this.entBox.style.width=Math.max(0,c+(Q?2:0)*P+this._ff_size_delta)+"px",this.entBox.style.height=x+(Q?2:0)*P+A+y+"px"}this.objBox.style.height=x+(Q&&!J?2:0)*P+"px";this.hdrBox.style.height=A+"px";x!=E&&this.doOnScroll(0,!this._srnd);var w=this["setSizes_"+this.skin_name];w&&w.call(this);this.setSortImgPos();A!=this.hdr.clientHeight&&this._ahgr&&this.setSizes();this.callEvent("onSetSizes",[])}}};this.setSizes_clear=function(){var j=this.hdr.offsetHeight,d=this.entBox.offsetWidth,k=j+this.objBox.offsetHeight;this._topMb.style.top=(j||0)+"px";this._topMb.style.width=d+20+"px";this._botMb.style.top=k-3+"px";this._botMb.style.width=d+20+"px"};this.chngCellWidth=function(){if(_isOpera&&this.ftr){this.ftr.width=this.objBox.scrollWidth+"px"}for(var d=this._cCount,c=0;c<d;c++){if(this.hdr.rows[0].cells[c].style.width=this.cellWidthPX[c]+"px",this.obj.rows[0].childNodes[c].style.width=this.cellWidthPX[c]+"px",this.ftr){this.ftr.rows[0].cells[c].style.width=this.cellWidthPX[c]+"px"}}};this.setDelimiter=function(b){this.delim=b};this.setInitWidthsP=function(d,c){this.cellWidthType="%";this.initCellWidth=d.split(this.delim.replace(/px/gi,""));c||this._setAutoResize()};this._setAutoResize=function(){if(!this._realfake){var d=window,c=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(c._resize_timer);if(c._setAutoResize){c._resize_timer=window.setTimeout(function(){c.setSizes&&c.setSizes();c._fake&&c._fake._correctSplit()},100)}})}};this.setInitWidths=function(d){this.cellWidthType="px";this.initCellWidth=d.split(this.delim);if(_isFF){for(var c=0;c<this.initCellWidth.length;c++){this.initCellWidth[c]!="*"&&(this.initCellWidth[c]=parseInt(this.initCellWidth[c]))}}};this.enableMultiline=function(b){this.multiLine=convertStringToBoolean(b)};this.enableMultiselect=function(b){this.selMultiRows=convertStringToBoolean(b)};this.setImagesPath=this.setImagePath=function(b){this.imgURL=b};this.setIconsPath=this.setIconPath=function(b){this.iconURL=b};this.changeCursorState=function(j){var d=j.target||j.srcElement;d.tagName!="TD"&&(d=this.getFirstParentOfType(d,"TD"));if(d){if(d.tagName=="TD"&&this._drsclmn&&!this._drsclmn[d._cellIndex]){return d.style.cursor="default"}var k=(j.layerX||0)+(!_isIE&&j.target.tagName=="DIV"?d.offsetLeft:0);d.style.cursor=d.offsetWidth-(j.offsetX||(parseInt(this.getPosition(d,this.hdrBox))-k)*-1)<(_isOpera?20:10)?"E-resize":"default";if(_isOpera){this.hdrBox.scrollLeft=this.objBox.scrollLeft}}};this.startColResize=function(j){this.resized&&this.stopColResize();this.resized=null;var c=j.target||j.srcElement;c.tagName!="TD"&&(c=this.getFirstParentOfType(c,"TD"));var m=j.clientX,l=this.hdr.offsetWidth,k=parseInt(c.offsetWidth);if(c.tagName=="TD"&&c.style.cursor!="default"&&(!this._drsclmn||this._drsclmn[c._cellIndex])){h._old_d_mm=document.body.onmousemove,h._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(b){h&&h.doColResize(b||window.event,c,k,m,l)},document.body.onmouseup=function(){h&&h.stopColResize()}}};this.stopColResize=function(){document.body.onmousemove=h._old_d_mm||"";document.body.onmouseup=h._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])};this.doColResize=function(A,y,x,w,v){y.style.cursor="E-resize";this.resized=y;var u=x+(A.clientX-w),s=v+(A.clientX-w);if(this.callEvent("onResize",[y._cellIndex,u,this])){if(_isIE){this.objBox.scrollLeft=this.hdrBox.scrollLeft}if(y.colSpan>1){for(var o=[],n=0;n<y.colSpan;n++){o[n]=Math.round(u*this.hdr.rows[0].childNodes[y._cellIndexS+n].offsetWidth/y.offsetWidth)}for(n=0;n<y.colSpan;n++){this._setColumnSizeR(y._cellIndexS+n*1,o[n])}}else{this._setColumnSizeR(y._cellIndex,u)}this.doOnScroll(0,1);this.setSizes();this._fake&&this._awdth&&this._fake._correctSplit()}};this._setColumnSizeR=function(k,j){if(j>(this._drsclmW&&!this._notresize?this._drsclmW[k]||10:10)){this.obj.rows[0].childNodes[k].style.width=j+"px";this.hdr.rows[0].childNodes[k].style.width=j+"px";if(this.ftr){this.ftr.rows[0].childNodes[k].style.width=j+"px"}if(this.cellWidthType=="px"){this.cellWidthPX[k]=j}else{var m=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(m-=17);var l=Math.round(j/m*100);this.cellWidthPC[k]=l}this.sortImg.style.display!="none"&&this.setSortImgPos()}};this.setSortImgState=function(l,k,s,o){s=(s||"asc").toLowerCase();if(convertStringToBoolean(l)){this.sortImg.src=s=="asc"?this.imgURL+"sort_asc.gif":this.imgURL+"sort_desc.gif";this.sortImg.style.display="";this.fldSorted=this.hdr.rows[0].childNodes[k];var n=this.hdr.rows[o||1];if(n){for(var m=0;m<n.childNodes.length;m++){if(n.childNodes[m]._cellIndexS==k){return this.r_fldSorted=n.childNodes[m],this.setSortImgPos()}}return this.setSortImgState(l,k,s,(o||1)+1)}}else{this.sortImg.style.display="none",this.fldSorted=this.r_fldSorted=null}};this.setSortImgPos=function(l,k,s,o){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:l]){if(o||(o=l?this.hdr.rows[s||0].cells[l]:this.r_fldSorted),o!=null){var n=this.getPosition(o,this.hdrBox),m=o.offsetWidth;this.sortImg.style.left=Number(n[0]+m-13)+"px";this.sortImg.defLeft=parseInt(this.sortImg.style.left);this.sortImg.style.top=Number(n[1]+5)+"px";if(!this.useImagesInHeader&&!k){this.sortImg.style.display="inline"}this.sortImg.style.left=this.sortImg.defLeft+"px"}}};this.setActive=function(b){arguments.length==0&&(b=!0);b==!0?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))};this._doClick=function(k){var j=0,n=this.getFirstParentOfType(_isIE?k.srcElement:k.target,"TD");if(n){var m=!0;if(this.markedCells){var l=0;if(k.shiftKey||k.metaKey){l=1}k.ctrlKey&&(l=2);this.doMark(n,l);return !0}if(this.selMultiRows!=!1&&(k.shiftKey&&this.row!=null&&this.selectedRows.length&&(j=1),k.ctrlKey||k.metaKey)){j=2}this.doClick(n,m,j)}};this._doContClick=function(o){var m=this.getFirstParentOfType(_isIE?o.srcElement:o.target,"TD");if(!m||typeof m.parentNode.idd=="undefined"){return this.callEvent("onEmptyClick",[o]),!0}if(o.button==2||_isMacOS&&o.ctrlKey){if(!this.callEvent("onRightClick",[m.parentNode.idd,m._cellIndex,o])){var x=function(b){(b||event).cancelBubble=!0;return !1};(o.srcElement||o.target).oncontextmenu=x;return x(o)}if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[m.parentNode.idd,m._cellIndex,this])){return !0}if(_isIE){o.srcElement.oncontextmenu=function(){event.cancelBubble=!0;return !1}}if(this._ctmndx.showContextMenu){var w=window.document.documentElement,v=window.document.body,u=[w.scrollLeft||v.scrollLeft,w.scrollTop||v.scrollTop];if(_isIE){var s=o.clientX+u[0],n=o.clientY+u[1]}else{s=o.pageX,n=o.pageY}this._ctmndx.showContextMenu(s-1,n-1);this.contextID=this._ctmndx.contextMenuZoneId=m.parentNode.idd+"_"+m._cellIndex;this._ctmndx._skip_hide=!0}else{m.contextMenuId=m.parentNode.idd+"_"+m._cellIndex,m.contextMenu=this._ctmndx,m.a=this._ctmndx._contextStart,m.a(m,o),m.a=null}o.cancelBubble=!0;return !1}}else{this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd())}return !0};this.doClick=function(K,J,I,H){this.selMultiRows||(I=0);var F=this.row?this.row.idd:0;this.setActive(!0);I||(I=0);if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,"")}if(K.tagName=="TD"){if(this.checkEvent("onSelectStateChanged")){var E=this.getSelectedId()}var D=this.row;if(I==1){var C=this.rowsCol._dhx_find(K.parentNode),A=this.rowsCol._dhx_find(this.lastClicked);if(C>A){var y=A,x=C}else{y=C,x=A}for(var w=0;w<this.rowsCol.length;w++){if(w>=y&&w<=x){if(this.rowsCol[w]&&!this.rowsCol[w]._sRow){this.rowsCol[w].className.indexOf("rowselected")==-1&&this.callEvent("onBeforeSelect",[this.rowsCol[w].idd,F])&&(this.rowsCol[w].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[w])}else{return this.clearSelection(),this.doClick(K,J,0,H)}}}}else{if(I==2&&K.parentNode.className.indexOf("rowselected")!=-1){K.parentNode.className=K.parentNode.className.replace(/rowselected/g,"");this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(K.parentNode));var u=!0,H=!1}}this.editStop();if(typeof K.parentNode.idd=="undefined"){return !0}if(!u&&!K.parentNode._sRow){if(this.callEvent("onBeforeSelect",[K.parentNode.idd,F])){if(this.getSelectedRowId()!=K.parentNode.idd){if(I==0&&this.clearSelection(),this.cell=K,D==K.parentNode&&this._chRRS&&(J=!1),this.row=K.parentNode,this.row.className+=" rowselected",this.selectedRows._dhx_find(this.row)==-1){this.selectedRows[this.selectedRows.length]=this.row}}else{this.cell=K,this.row=K.parentNode}}else{J=!1}}if(this.cell&&this.cell.parentNode.className.indexOf("rowselected")!=-1){this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"}if(I!=1&&!this.row){return}this.lastClicked=K.parentNode;var c=this.row.idd,N=this.cell;J&&typeof c!="undefined"&&N&&!u?h.onRowSelectTime=setTimeout(function(){h.callEvent&&h.callEvent("onRowSelect",[c,N._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[c]);if(this.checkEvent("onSelectStateChanged")){var L=this.getSelectedId();E!=L&&this.callEvent("onSelectStateChanged",[L,E])}}this.isActive=!0;H!==!1&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)};this.selectAll=function(){this.clearSelection();var d=this.rowsBuffer;if(this.pagingOn){d=this.rowsCol}for(var c=0;c<d.length;c++){this.render_row(c).className+=" rowselected"}this.selectedRows=dhtmlxArray([].concat(d));if(this.selectedRows.length){this.row=this.selectedRows[0],this.cell=this.row.cells[0]}this._fake&&!this._realfake&&this._fake.selectAll()};this.selectCell=function(m,l,v,u,s,o){v||(v=!1);typeof m!="object"&&(m=this.render_row(m));if(!m||m==-1){return null}var n=m.childNodes[l];n||(n=m.childNodes[0]);this.markedCells?this.doMark(n,u?2:0):u?this.doClick(n,v,3,o):this.doClick(n,v,0,o);s&&this.editCell()};this.moveToVisible=function(A,y){if(this.pagingOn){var x=Math.floor(this.getRowIndex(A.parentNode.idd)/this.rowsBufferOutSize)+1;x!=this.currentPage&&this.changePage(x)}try{if(A.offsetHeight){var w=A.offsetLeft+A.offsetWidth+20,v=0;w>this.objBox.offsetWidth+this.objBox.scrollLeft?A.offsetLeft>this.objBox.scrollLeft&&(v=A.offsetLeft-5):A.offsetLeft<this.objBox.scrollLeft&&(w-=A.offsetWidth*2/3,w<this.objBox.scrollLeft&&(v=A.offsetLeft-5));if(v&&!y){this.objBox.scrollLeft=v}}if(A.offsetHeight){w=A.offsetTop}else{var u=this._realfake?this._fake.rowsAr[A.parentNode.idd]:A.parentNode,w=this.rowsBuffer._dhx_find(u)*this._srdh}var s=w+A.offsetHeight+38;if(s>this.objBox.offsetHeight+this.objBox.scrollTop){var o=w}else{w<this.objBox.scrollTop&&(o=w-5)}if(o){this.objBox.scrollTop=o}}catch(n){}};this.editCell=function(){if(!(this.editor&&this.cell==this.editor.cell)){this.editStop();if(this.isEditable!=!0||!this.cell){return !1}var b=this.cell;if(b.parentNode._locked){return !1}this.editor=this.cells4(b);if(this.editor!=null){if(this.editor.isDisabled()){return this.editor=null,!1}this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])!=!1&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),b.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}};this.editStop=function(k){if(_isOpera&&this._Opera_stop){if(this._Opera_stop*1+50>(new Date).valueOf()){return}this._Opera_stop=null}if(this.editor&&this.editor!=null){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),k){var j=this.editor.val;this.editor.detach();this.editor.setValue(j);this.editor=null;this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,j])}else{if(this.editor.detach()){this.cell.wasChanged=!0}var m=this.editor;this.editor=null;var l=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,m.getValue(),m.val]);if(typeof l=="string"||typeof l=="number"){m[m.setImage?"setLabel":"setValue"](l)}else{if(!l){m[m.setImage?"setLabel":"setValue"](m.val)}}this._ahgr&&this.multiLine&&this.setSizes()}}};this._nextRowCell=function(j,d,k){j=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(j),d);return !j?null:j.childNodes[j._childIndexes?j._childIndexes[k]:k]};this._getNextCell=function(k,j,m){var k=k||this.cell,l=k.parentNode;this._tabOrder?(m=this._tabOrder[k._cellIndex],typeof m!="undefined"&&(k=m<0?this._nextRowCell(l,j,Math.abs(m)-1):l.childNodes[m])):(m=k._cellIndex+j,m>=0&&m<this._cCount?(l._childIndexes&&(m=l._childIndexes[k._cellIndex]+j),k=l.childNodes[m]):k=this._nextRowCell(l,j,j==1?0:this._cCount-1));return !k?(j==1&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),j==-1&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null):k.style.display!="none"&&(!this.smartTabOrder||!this.cells(k.parentNode.idd,k._cellIndex).isDisabled())?k:this._getNextCell(k,j)};this._nextRow=function(j,d){var k=this.render_row(j+d);return !k||k==-1?null:k&&k.style.display=="none"?this._nextRow(j+d,d):k};this.scrollPage=function(j){if(this.rowsBuffer.length){var d=this._realfake?this._fake:this,k=Math.floor((d._r_select||this.getRowIndex(this.row.idd)||0)+j*this.objBox.offsetHeight/(this._srdh||20));k<0&&(k=0);k>=this.rowsBuffer.length&&(k=this.rowsBuffer.length-1);if(this._srnd&&!this.rowsBuffer[k]){this.objBox.scrollTop+=Math.floor(j*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20);if(this._fake){this._fake.objBox.scrollTop=this.objBox.scrollTop}d._r_select=k}else{this.selectCell(k,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd);if(!this.multiLine&&!this._srnd&&!this._realfake&&(this.objBox.scrollTop=this.getRowById(this.getRowId(k)).offsetTop,this._fake)){this._fake.objBox.scrollTop=this.objBox.scrollTop}d._r_select=null}}};this.doKey=function(j){if(!j){return !0}if((j.target||j.srcElement).value!==window.undefined){var d=j.target||j.srcElement;if(!d.parentNode||d.parentNode.className.indexOf("editable")==-1){return !0}}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject){return globalActiveDHTMLGridObject.doKey(j)}if(this.isActive==!1){return !0}if(this._htkebl){return !0}if(!this.callEvent("onKeyPress",[j.keyCode,j.ctrlKey,j.shiftKey,j])){return !1}var k="k"+j.keyCode+"_"+(j.ctrlKey?1:0)+"_"+(j.shiftKey?1:0);if(this.cell){if(this._key_events[k]){if(!1===this._key_events[k].call(this)){return !0}j.preventDefault&&j.preventDefault();j.cancelBubble=!0;return !1}this._key_events.k_other&&this._key_events.k_other.call(this,j)}return !0};this.selectRow=function(k,j,m,l){typeof k!="object"&&(k=this.render_row(k));this.selectCell(k,0,j,m,!1,l)};this.wasDblClicked=function(j){var d=this.getFirstParentOfType(_isIE?j.srcElement:j.target,"TD");if(d){var k=d.parentNode.idd;return this.callEvent("onRowDblClicked",[k,d._cellIndex,j])}};this._onHeaderClick=function(j,d){var k=this.grid,d=d||k.getFirstParentOfType(_isIE?event.srcElement:j.target,"TD");if(this.grid.resized==null){if(!this.grid.callEvent("onHeaderClick",[d._cellIndexS,j||window.event])){return !1}k.sortField(d._cellIndexS,!1,d)}this.grid.resized=null};this.deleteSelectedRows=function(){var l=this.selectedRows.length;if(l!=0){var k=this.selectedRows;this.selectedRows=dhtmlxArray();for(var s=l-1;s>=0;s--){var o=k[s];if(this.deleteRow(o.idd,o)){if(o==this.row){var n=s}}else{this.selectedRows[this.selectedRows.length]=o}}if(n){try{n+1>this.rowsCol.length&&n--,this.selectCell(n,0,!0)}catch(m){this.cell=this.row=null}}}};this.getSelectedRowId=function(){for(var k=[],j={},m=0;m<this.selectedRows.length;m++){var l=this.selectedRows[m].idd;j[l]||(k[k.length]=l,j[l]=!0)}return k.length==0?null:k.join(this.delim)};this.getSelectedCellIndex=function(){return this.cell!=null?this.cell._cellIndex:-1};this.getColWidth=function(b){return parseInt(this.cellWidthPX[b])};this.setColWidth=function(d,c){if(c=="*"){this.initCellWidth[d]="*"}else{if(this._hrrar[d]){return}this.cellWidthType=="px"?this.cellWidthPX[d]=parseInt(c):this.cellWidthPC[d]=parseInt(c)}this.setSizes()};this.getRowIndex=function(d){for(var c=0;c<this.rowsBuffer.length;c++){if(this.rowsBuffer[c]&&this.rowsBuffer[c].idd==d){return c}}return -1};this.getRowId=function(b){return this.rowsBuffer[b]?this.rowsBuffer[b].idd:this.undefined};this.setRowId=function(d,c){this.changeRowId(this.getRowId(d),c)};this.changeRowId=function(l,k){if(l!=k){var s=this.rowsAr[l];s.idd=k;this.UserData[l]&&(this.UserData[k]=this.UserData[l],this.UserData[l]=null);if(this._h2&&this._h2.get[l]){this._h2.get[k]=this._h2.get[l],this._h2.get[k].id=k,delete this._h2.get[l]}this.rowsAr[l]=null;this.rowsAr[k]=s;for(var o=0;o<s.childNodes.length;o++){if(s.childNodes[o]._code){s.childNodes[o]._code=this._compileSCL(s.childNodes[o]._val,s.childNodes[o])}}if(this._mat_links&&this._mat_links[l]){var n=this._mat_links[l];delete this._mat_links[l];for(var m in n){for(o=0;o<n[m].length;o++){this._compileSCL(n[m][o].original,n[m][o])}}}this.callEvent("onRowIdChange",[l,k])}};this.setColumnIds=function(b){this.columnIds=b.split(this.delim)};this.setColumnId=function(d,c){this.columnIds[d]=c};this.getColIndexById=function(d){for(var c=0;c<this.columnIds.length;c++){if(this.columnIds[c]==d){return c}}};this.getColumnId=function(b){return this.columnIds[b]};this.getColLabel=this.getColumnLabel=function(k,j,n){for(var m=(n||this.hdr).rows[(j||0)+1],l=0;l<m.cells.length;l++){if(m.cells[l]._cellIndexS==k){return _isIE?m.cells[l].innerText:m.cells[l].textContent}}return""};this.getFooterLabel=function(d,c){return this.getColumnLabel(d,c,this.ftr)};this.setRowTextBold=function(d){var c=this.getRowById(d);if(c){c.style.fontWeight="bold"}};this.setRowTextStyle=function(k,j){var n=this.getRowById(k);if(n){for(var m=0;m<n.childNodes.length;m++){var l=n.childNodes[m]._attrs.style||"";n.childNodes[m].style.cssText=l+"width:"+n.childNodes[m].style.width+";"+j}}};this.setRowColor=function(k,j){for(var m=this.getRowById(k),l=0;l<m.childNodes.length;l++){m.childNodes[l].bgColor=j}};this.setCellTextStyle=function(l,k,s){var o=this.getRowById(l);if(o){var n=o.childNodes[o._childIndexes?o._childIndexes[k]:k];if(n){var m="";n.style.cssText=m+"width:"+n.style.width+";"+s}}};this.setRowTextNormal=function(d){var c=this.getRowById(d);if(c){c.style.fontWeight="normal"}};this.doesRowExist=function(b){return this.getRowById(b)!=null?!0:!1};this.getColumnsNum=function(){return this._cCount};this.moveRowUp=function(k){var j=this.getRowById(k);if(this.isTreeGrid()){return this.moveRowUDTG(k,-1)}var m=this.rowsCol._dhx_find(j);if(j.previousSibling&&m!=0){j.parentNode.insertBefore(j,j.previousSibling);this.rowsCol._dhx_swapItems(m,m-1);this.setSizes();var l=this.rowsBuffer._dhx_find(j);this.rowsBuffer._dhx_swapItems(l,l-1);this._cssEven&&this._fixAlterCss(m-1)}};this.moveRowDown=function(k){var j=this.getRowById(k);if(this.isTreeGrid()){return this.moveRowUDTG(k,1)}var m=this.rowsCol._dhx_find(j);if(j.nextSibling){this.rowsCol._dhx_swapItems(m,m+1);j.nextSibling.nextSibling?j.parentNode.insertBefore(j,j.nextSibling.nextSibling):j.parentNode.appendChild(j);this.setSizes();var l=this.rowsBuffer._dhx_find(j);this.rowsBuffer._dhx_swapItems(l,l+1);this._cssEven&&this._fixAlterCss(m)}};this.getCombo=function(b){this.combos[b]||(this.combos[b]=new dhtmlXGridComboObject);return this.combos[b]};this.setUserData=function(j,d,k){j||(j="gridglobaluserdata");this.UserData[j]||(this.UserData[j]=new Hashtable);this.UserData[j].put(d,k)};this.getUserData=function(j,d){j||(j="gridglobaluserdata");this.getRowById(j);var k=this.UserData[j];return k?k.get(d):""};this.setEditable=function(b){this.isEditable=convertStringToBoolean(b)};this.selectRowById=function(k,j,m,l){l||(l=!1);this.selectCell(this.getRowById(k),0,l,j,!1,m)};this.clearSelection=function(){this.editStop();for(var d=0;d<this.selectedRows.length;d++){var c=this.rowsAr[this.selectedRows[d].idd];if(c){c.className=c.className.replace(/rowselected/g,"")}}this.selectedRows=dhtmlxArray();this.row=null;if(this.cell!=null){this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null}this.callEvent("onSelectionCleared",[])};this.copyRowContent=function(k,j){var m=this.getRowById(k);if(this.isTreeGrid()){this._copyTreeGridRowContent(m,k,j)}else{for(var l=0;l<m.cells.length;l++){this.cells(j,l).setValue(this.cells(k,l).getValue())}}if(!_isIE){this.getRowById(k).cells[0].height=m.cells[0].offsetHeight}};this.setFooterLabel=function(j,d,k){return this.setColumnLabel(j,d,k,this.ftr)};this.setColumnLabel=function(H,F,E,D){var C=(D||this.hdr).rows[E||1],A=C._childIndexes?C._childIndexes[H]:H;if(C.cells[A]){if(this.useImagesInHeader){C.cells[A].style.textAlign="left";C.cells[A].innerHTML="<img src='"+this.imgURL+""+F+"' onerror='this.src = \""+this.imgURL+"imageloaderror.gif\"'>";var y=new Image;y.src=this.imgURL+""+F.replace(/(\.[a-z]+)/,".des$1");this.preloadImagesAr[this.preloadImagesAr.length]=y;var x=new Image;x.src=this.imgURL+""+F.replace(/(\.[a-z]+)/,".asc$1");this.preloadImagesAr[this.preloadImagesAr.length]=x}else{var w="<div class='hdrcell'>";if(F.indexOf("img:[")!=-1){var v=F.replace(/.*\[([^>]+)\].*/,"$1"),F=F.substr(F.indexOf("]")+1,F.length);w+="<img width='18px' height='18px' align='absmiddle' src='"+v+"' hspace='2'>"}w+=F;w+="</div>";C.cells[A].innerHTML=w;if(this._hstyles[A]){C.cells[A].style.cssText=this._hstyles[A]}}if((F||"").indexOf("#")!=-1){var u=F.match(/(^|{)#([^}]+)(}|$)/);if(u){var s="_in_header_"+u[2];if(this[s]){this[s](this.forceDivInHeader?C.cells[A].firstChild:C.cells[A],A,F.split(u[0]))}}}}};this.setColLabel=function(k,j,m,l){return this.setColumnLabel(k,j,(m||0)+1,l)};this.clearAll=function(k){if(this.obj.rows[0]){if(this._h2&&(this._h2=new dhtmlxHierarchy,this._fake)){this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2}this.limit=this._limitC=0;this.editStop(!0);this._dLoadTimer&&window.clearTimeout(this._dLoadTimer);if(this._dload){this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0}for(var j=this.rowsCol.length,j=this.obj.rows.length,m=j-1;m>0;m--){var l=this.obj.rows[m];l.parentNode.removeChild(l)}if(k){this._master_row=null;this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(m=this.hdr.rows.length-1;m>=0;m--){l=this.hdr.rows[m],l.parentNode.removeChild(l)}if(this.ftr){this.ftr.parentNode.removeChild(this.ftr),this.ftr=null}this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null}this.cell=this.row=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();if(this.pagingOn||this._srnd){this.xmlFileUrl=""}this.pagingOn&&this.changePage(1);this._contextCallTimer&&window.clearTimeout(this._contextCallTimer);this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;this.setSortImgState(!1);this.setSizes();this.callEvent("onClearAll",[])}};this.sortField=function(D,C,A){if(this.getRowsNum()==0){return !1}var y=this.hdr.rows[0].cells[D];if(y&&y.tagName=="TH"&&this.fldSort.length-1>=y._cellIndex&&this.fldSort[y._cellIndex]!="na"){var x=this.getSortingState(),w=x[0]==D&&x[1]=="asc"?"des":"asc";if(this.callEvent("onBeforeSorting",[D,this.fldSort[D],w])){this.sortImg.src=this.imgURL+"sort_"+(w=="asc"?"asc":"desc")+".gif";if(this.useImagesInHeader){var v=this.hdr.rows[1].cells[y._cellIndex].firstChild;if(this.fldSorted!=null){var u=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;u.src=u.src.replace(/(\.asc\.)|(\.des\.)/,".")}v.src=v.src.replace(/(\.[a-z]+)$/,"."+w+"$1")}this.sortRows(y._cellIndex,this.fldSort[y._cellIndex],w);this.fldSorted=y;this.r_fldSorted=A;var s=this.hdr.rows[1],s=A.parentNode,o=s._childIndexes?s._childIndexes[y._cellIndex]:y._cellIndex;this.setSortImgPos(!1,!1,!1,A)}}};this.enableHeaderImages=function(b){this.useImagesInHeader=b};this.setHeader=function(D,C,A){for(var y=typeof D!="object"?this._eSplit(D):[].concat(D),x=[],w=new dhtmlxArray(0),v=[],u=[],s=[],o=0;o<y.length;o++){x[x.length]=Math.round(100/y.length),w[w.length]="ed",v[v.length]="left",u[u.length]="middle",s[s.length]="na"}this.splitSign=C||"#cspan";this.hdrLabels=y;this.cellWidth=x;this.initCellWidth.length||this.setInitWidthsP(x.join(this.delim),!0);this.cellType=w;this.cellVAlign=u;this.fldSort=s;this._hstyles=A||[]};this._eSplit=function(j){if(![].push){return j.split(this.delim)}var d="r"+(new Date).valueOf(),k=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(j||"").replace(RegExp(k,"g"),d).replace(RegExp("\\\\"+d,"g"),this.delim).split(d)};this.getColType=function(b){return this.cellType[b]};this.getColTypeById=function(b){return this.cellType[this.getColIndexById(b)]};this.setColTypes=function(j){this.cellType=dhtmlxArray(j.split(this.delim));this._strangeParams=[];for(var d=0;d<this.cellType.length;d++){if(this.cellType[d].indexOf("[")!=-1){var k=this.cellType[d].split(/[\[\]]+/g);this.cellType[d]=k[0];this.defVal[d]=k[1];k[1].indexOf("=")==0&&(this.cellType[d]="math",this._strangeParams[d]=k[0])}window["eXcell_"+this.cellType[d]]||dhtmlxError.throwError("Configuration","Incorrect cell type: "+this.cellType[d],[this,this.cellType[d]])}};this.setColSorting=function(b){this.fldSort=b.split(this.delim)};this.setColAlign=function(d){this.cellAlign=d.split(this.delim);for(var c=0;c<this.cellAlign.length;c++){this.cellAlign[c]=this.cellAlign[c]._dhx_trim()}};this.setColVAlign=function(b){this.cellVAlign=b.split(this.delim)};this.setNoHeader=function(b){this.noHeader=convertStringToBoolean(b)};this.showRow=function(d){this.getRowById(d);this._h2&&this.openItem(this._h2.get[d].parent.id);for(var c=this.getRowById(d).childNodes[0];c&&c.style.display=="none";){c=c.nextSibling}c&&this.moveToVisible(c,!0)};this.setStyle=function(A,y,x,w){this.ssModifier=[A,y,x,x,w];for(var v=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],u=0;!_isIE;){try{var s=document.styleSheets[u].cssRules.length}catch(o){u++;continue}break}for(var n=0;n<v.length;n++){this.ssModifier[n]&&(_isIE?document.styleSheets[0].addRule(v[n],this.ssModifier[n]):document.styleSheets[u].insertRule(v[n]+(" { "+this.ssModifier[n]+" }"),document.styleSheets[u].cssRules.length))}};this.setColumnColor=function(b){this.columnColor=b.split(this.delim)};this.enableAlterCss=function(k,j,m,l){(k||j)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();this._fake&&this._fake._fixAlterCss()});this._cssSP=m;this._cssSU=l;this._cssEven=k;this._cssUnEven=j};this._fixAlterCss=function(j){if(this._h2&&(this._cssSP||this._cssSU)){return this._fixAlterCssTGR(j)}if(this._cssEven||this._cssUnEven){for(var d=j=j||0,k=j;k<this.rowsCol.length;k++){if(this.rowsCol[k]&&this.rowsCol[k].style.display!="none"){this.rowsCol[k]._cntr?d=1:(this.rowsCol[k].className=this.rowsCol[k].className.indexOf("rowselected")!=-1?d%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[k]._css||""):this._cssEven+" rowselected "+(this.rowsCol[k]._css||""):d%2==1?this._cssUnEven+" "+(this.rowsCol[k]._css||""):this._cssEven+" "+(this.rowsCol[k]._css||""),d++)}}}};this.getPosition=function(l,k){if(!k){var s=getOffset(l);return[s.left,s.top]}for(var k=k||document.body,o=l,n=0,m=0;o&&o!=k;){n+=o.offsetLeft-o.scrollLeft,m+=o.offsetTop-o.scrollTop,o=o.offsetParent}k==document.body&&(_isIE?(m+=document.body.offsetTop||document.documentElement.offsetTop,n+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(n+=document.body.offsetLeft,m+=document.body.offsetTop));return[n,m]};this.getFirstParentOfType=function(d,c){for(;d&&d.tagName!=c&&d.tagName!="BODY";){d=d.parentNode}return d};this.objBox.onscroll=function(){this.grid._doOnScroll()};this.objBox.ontouchend=function(){this.hdrBox.scrollLeft=this.objBox.scrollLeft};this.hdrBox.onscroll=function(){if(!this._try_header_sync){this._try_header_sync=!0;if(this.grid.objBox.scrollLeft!=this.scrollLeft){this.grid.objBox.scrollLeft=this.scrollLeft}this._try_header_sync=!1}};if(!_isOpera||_OperaRv>8.5){this.hdr.onmousemove=function(b){this.grid.changeCursorState(b||window.event)},this.hdr.onmousedown=function(b){return this.grid.startColResize(b||window.event)}}this.obj.onmousemove=this._drawTooltip;this.objBox.onclick=function(b){(b||event).cancelBubble=!0};this.obj.onclick=function(b){this.grid._doClick(b||window.event);this.grid._sclE?this.grid.editCell(b||window.event):this.grid.editStop();(b||event).cancelBubble=!0};_isMacOS?this.entBox.oncontextmenu=function(d){d.cancelBubble=!0;d.returnValue=!1;var c=this.grid;if(c._realfake){c=c._fake}return c._doContClick(d||window.event)}:(this.entBox.onmousedown=function(b){return this.grid._doContClick(b||window.event)},this.entBox.oncontextmenu=function(b){if(this.grid._ctmndx){(b||event).cancelBubble=!0}return !this.grid._ctmndx});this.obj.ondblclick=function(d){if(!this.grid.wasDblClicked(d||window.event)){return !1}if(this.grid._dclE){var c=this.grid.getFirstParentOfType(_isIE?event.srcElement:d.target,"TR");c==this.grid.row&&this.grid.editCell(d||window.event)}(d||event).cancelBubble=!0;if(_isOpera){return !1}};this.hdr.onclick=this._onHeaderClick;this.sortImg.onclick=function(){h._onHeaderClick.apply({grid:h},[null,h.r_fldSorted])};this.hdr.ondblclick=this._onHeaderDblClick;if(!document.body._dhtmlxgrid_onkeydown){dhtmlxEvent(document,"keydown",function(b){if(globalActiveDHTMLGridObject){return globalActiveDHTMLGridObject.doKey(b||window.event)}}),document.body._dhtmlxgrid_onkeydown=!0}dhtmlxEvent(document.body,"click",function(){h.editStop&&h.editStop();h.isActive&&h.setActive(!1)});if(this.entBox.style.height.toString().indexOf("%")!=-1){this._delta_y=this.entBox.style.height}if(this.entBox.style.width.toString().indexOf("%")!=-1){this._delta_x=this.entBox.style.width}(this._delta_x||this._delta_y)&&this._setAutoResize();this.setColHidden=this.setColumnsVisibility;this.enableCollSpan=this.enableColSpan;this.setMultiselect=this.enableMultiselect;this.setMultiLine=this.enableMultiline;this.deleteSelectedItem=this.deleteSelectedRows;this.getSelectedId=this.getSelectedRowId;this.getHeaderCol=this.getColumnLabel;this.isItemExists=this.doesRowExist;this.getColumnCount=this.getColumnsNum;this.setSelectedRow=this.selectRowById;this.setHeaderCol=this.setColumnLabel;this.preventIECashing=this.preventIECaching;this.enableAutoHeigth=this.enableAutoHeight;this.getUID=this.uid;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}dhtmlXGridObject.prototype={getRowAttribute:function(d,c){return this.getRowById(d)._attrs[c]},setRowAttribute:function(e,d,f){this.getRowById(e)._attrs[d]=f},isTreeGrid:function(){return this.cellType._dhx_find("tree")!=-1},setRowHidden:function(h,g){var m=convertStringToBoolean(g),l=this.getRowById(h);if(l){l.expand===""&&this.collapseKids(l);if(g&&l.style.display!="none"){l.style.display="none";var k=this.selectedRows._dhx_find(l);if(k!=-1){l.className=l.className.replace("rowselected","");for(var j=0;j<l.childNodes.length;j++){l.childNodes[j].className=l.childNodes[j].className.replace(/cellselected/g,"")}this.selectedRows._dhx_removeAt(k)}this.callEvent("onGridReconstructed",[])}if(!g&&l.style.display=="none"){l.style.display="",this.callEvent("onGridReconstructed",[])}this.callEvent("onRowHide",[h,g]);this.setSizes()}},enableRowsHover:function(d,c){this._unsetRowHover(!1,!0);this._hvrCss=c;if(convertStringToBoolean(d)){if(!this._elmnh){this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0}}else{if(this._elmnh){this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1}}},enableEditEvents:function(e,d,f){this._sclE=convertStringToBoolean(e);this._dclE=convertStringToBoolean(d);this._f2kE=convertStringToBoolean(f)},enableLightMouseNavigation:function(b){if(convertStringToBoolean(b)){if(!this._elmn){this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return !0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(d){var e=this.grid.getFirstParentOfType(d?d.target:event.srcElement,"TD");if(e){this.grid.editStop(),this.grid.doClick(e),this.grid.editCell(),(d||event).cancelBubble=!0}},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0}}else{if(this._elmn){this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1}}},_unsetRowHover:function(e,d){that=d?this:this.grid;if(that._lahRw&&that._lahRw!=d){for(var f=0;f<that._lahRw.childNodes.length;f++){that._lahRw.childNodes[f].className=that._lahRw.childNodes[f].className.replace(that._hvrCss,"")}that._lahRw=null}},_setRowHover:function(e){var d=this.grid.getFirstParentOfType(e?e.target:event.srcElement,"TD");if(d&&d.parentNode!=this.grid._lahRw){this.grid._unsetRowHover(0,d);d=d.parentNode;if(!d.idd||d.idd=="__filler__"){return}for(var f=0;f<d.childNodes.length;f++){d.childNodes[f].className+=" "+this.grid._hvrCss}this.grid._lahRw=d}this._honmousemove(e)},_autoMoveSelect:function(d){if(!this.grid.editor){var c=this.grid.getFirstParentOfType(d?d.target:event.srcElement,"TD");c.parentNode.idd&&this.grid.doClick(c,!0,0)}this._onmousemove(d)},destructor:function(){this.editStop(!0);if(this._sizeTime){this._sizeTime=window.clearTimeout(this._sizeTime)}this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,"");if(this.formInputs){for(var e=0;e<this.formInputs.length;e++){this.parentForm.removeChild(this.formInputs[e])}}var d;this.xmlLoader=this.xmlLoader.destructor();for(e=0;e<this.rowsCol.length;e++){if(this.rowsCol[e]){this.rowsCol[e].grid=null}}for(e in this.rowsAr){this.rowsAr[e]&&(this.rowsAr[e]=null)}this.rowsCol=new dhtmlxArray;this.rowsAr={};this.entBox.innerHTML="";var f=function(){};this.setSizes=this._update_srnd_view=this.callEvent=this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=f;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;if(this._fake){this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=f,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=f}for(d in this){if(this[d]&&this[d].m_obj){this[d].m_obj=null}this[d]=null}this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null);return null},getSortingState:function(){var b=[];if(this.fldSorted){b[0]=this.fldSorted._cellIndex,b[1]=this.sortImg.src.indexOf("sort_desc.gif")!=-1?"des":"asc"}return b},enableAutoHeight:function(e,d,f){this._ahgr=convertStringToBoolean(e);this._ahgrF=convertStringToBoolean(f);this._ahgrM=d||null;if(arguments.length==1){this.objBox.style.overflowY=e?"hidden":"auto"}if(d=="auto"){this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize()}},enableStableSorting:function(b){this._sst=convertStringToBoolean(b);this.rowsCol.stablesort=function(g){for(var l=this.length-1,k=0;k<this.length-1;k++){for(var j=0;j<l;j++){if(g(this[j],this[j+1])>0){var h=this[j];this[j]=this[j+1];this[j+1]=h}}l--}}},enableKeyboardSupport:function(b){this._htkebl=!convertStringToBoolean(b)},enableContextMenu:function(b){this._ctmndx=b},setScrollbarWidthCorrection:function(){},enableTooltips:function(d){this._enbTts=d.split(",");for(var c=0;c<this._enbTts.length;c++){this._enbTts[c]=convertStringToBoolean(this._enbTts[c])}},enableResizing:function(d){this._drsclmn=d.split(",");for(var c=0;c<this._drsclmn.length;c++){this._drsclmn[c]=convertStringToBoolean(this._drsclmn[c])}},setColumnMinWidth:function(d,c){if(arguments.length==2){if(!this._drsclmW){this._drsclmW=[]}this._drsclmW[c]=d}else{this._drsclmW=d.split(",")}},enableCellIds:function(b){this._enbCid=convertStringToBoolean(b)},lockRow:function(e,d){var f=this.getRowById(e);if(f){f._locked=convertStringToBoolean(d),this.cell&&this.cell.parentNode.idd==e&&this.editStop()}},_getRowArray:function(f){for(var e=[],h=0;h<f.childNodes.length;h++){var g=this.cells3(f,h);e[h]=g.getValue()}return e},_launchCommands:function(f){for(var e=0;e<f.length;e++){for(var h=[],g=0;g<f[e].childNodes.length;g++){if(f[e].childNodes[g].nodeType==1){h[h.length]=f[e].childNodes[g].firstChild.data}}this[f[e].getAttribute("command")].apply(this,h)}},_parseHead:function(Q){var P=this.xmlLoader.doXPath("./head",Q);if(P.length){var O=this.xmlLoader.doXPath("./column",P[0]),N=this.xmlLoader.doXPath("./settings",P[0]),L="setInitWidths",K=!1;if(N[0]){for(var J=0;J<N[0].childNodes.length;J++){switch(N[0].childNodes[J].tagName){case"colwidth":N[0].childNodes[J].firstChild&&N[0].childNodes[J].firstChild.data=="%"&&(L="setInitWidthsP");break;case"splitat":K=N[0].childNodes[J].firstChild?N[0].childNodes[J].firstChild.data:!1}}}this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call",P[0]));if(O.length>0){this.hdr.rows.length>0&&this.clearAll(!0);for(var I=[[],[],[],[],[],[],[],[],[]],H=",width,type,align,sort,color,format,hidden,id".split(","),F=["",L,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],E=0;E<O.length;E++){for(var D=1;D<H.length;D++){I[D].push(O[E].getAttribute(H[D]))}I[0].push((O[E].firstChild?O[E].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}this.setHeader(I[0]);for(E=0;E<F.length;E++){if(F[E]){this[F[E]](I[E].join(this.delim))}}for(E=0;E<O.length;E++){if(this.cellType[E].indexOf("co")==0||this.cellType[E]=="clist"){var C=this.xmlLoader.doXPath("./option",O[E]);if(C.length){var A=[];if(this.cellType[E]=="clist"){for(D=0;D<C.length;D++){A[A.length]=C[D].firstChild?C[D].firstChild.data:""}this.registerCList(E,A)}else{for(var y=this.getCombo(E),D=0;D<C.length;D++){y.put(C[D].getAttribute("value"),C[D].firstChild?C[D].firstChild.data:"")}}}}else{I[6][E]&&(this.cellType[E].toLowerCase().indexOf("calendar")!=-1||this.fldSort[E]=="date"?this.setDateFormat(I[6][E]):this.setNumberFormat(I[6][E],E))}}this.init();var x=I[7].join(this.delim);this.setColHidden&&x.replace(/,/g,"")!=""&&this.setColHidden(x);K&&this.splitAt&&this.splitAt(K)}this._launchCommands(this.xmlLoader.doXPath("./afterInit/call",P[0]))}var w=this.xmlLoader.doXPath("//rows/userdata",Q);if(w.length>0){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(D=0;D<w.length;D++){for(var v="",u=0;u<w[D].childNodes.length;u++){v+=w[D].childNodes[u].nodeValue}this.UserData.gridglobaluserdata.put(w[D].getAttribute("name"),v)}}},getCheckedRows:function(d){var c=[];this.forEachRowA(function(a){this.cells(a,d).getValue()!=0&&c.push(a)},!0);return c.join(",")},checkAll:function(){for(var d=arguments.length?arguments[0]:1,c=0;c<this.getColumnsNum();c++){this.getColType(c)=="ch"&&this.setCheckedRows(c,d)}},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(d,c){this.forEachRowA(function(a){this.cells(a,d).isCheckbox()&&this.cells(a,d).setValue(c)})},_drawTooltip:function(g){var f=this.grid.getFirstParentOfType(g?g.target:event.srcElement,"TD");if(!f||this.grid.editor&&this.grid.editor.cell==f){return !0}var k=f.parentNode;if(k.idd&&k.idd!="__filler__"){var j=g?g.target:event.srcElement;if(k.idd==window.unknown){return !0}if(!this.grid.callEvent("onMouseOver",[k.idd,f._cellIndex,g||window.event])){return !0}if(this.grid._enbTts&&!this.grid._enbTts[f._cellIndex]){if(j.title){j.title=""}return !0}if(!(f._cellIndex>=this.grid._cCount)){var h=this.grid.cells3(k,f._cellIndex);if(h&&h.cell&&h.cell._attrs){if(j._title){h.cell.title=""}if(!h.cell._attrs.title){j._title=!0}if(h){j.title=h.cell._attrs.title||(h.getTitle?h.getTitle():(h.getValue()||"").toString().replace(/<[^>]*>/gi,""))}return !0}}}},enableCellWidthCorrection:function(b){if(_isFF){this._wcorr=parseInt(b)}},getAllRowIds:function(e){for(var d=[],f=0;f<this.rowsBuffer.length;f++){this.rowsBuffer[f]&&d.push(this.rowsBuffer[f].idd)}return d.join(e||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},preventIECaching:function(b){this.no_cashe=convertStringToBoolean(b);this.xmlLoader.rSeed=this.no_cashe},enableColumnAutoSize:function(b){this._eCAS=convertStringToBoolean(b)},_onHeaderDblClick:function(e){var d=this.grid,f=d.getFirstParentOfType(_isIE?event.srcElement:e.target,"TD");if(!d._eCAS){return !1}d.adjustColumnSize(f._cellIndexS)},adjustColumnSize:function(k,j){if(!this._hrrar||!this._hrrar[k]){this._notresize=!0;var u=0;this._setColumnSizeR(k,20);for(var s=1;s<this.hdr.rows.length;s++){var o=this.hdr.rows[s];if((o=o.childNodes[o._childIndexes?o._childIndexes[k]:k])&&(!o.colSpan||o.colSpan<2)&&o._cellIndex==k){o.childNodes[0]&&o.childNodes[0].className=="hdrcell"&&(o=o.childNodes[0]),u=Math.max(u,o.scrollWidth)}}for(var n=this.obj.rows.length,m=1;m<n;m++){var l=this.obj.rows[m];this.rowsAr[l.idd]&&!(l._childIndexes&&l._childIndexes[k]!=k)&&l.childNodes[k]&&(l=_isFF||_isOpera||j?l.childNodes[k].textContent.length*this.fontWidth:l.childNodes[k].scrollWidth,l>u&&(u=l))}u+=20+(j||0);this._setColumnSizeR(k,u);this._notresize=!1;this.setSizes()}},detachHeader:function(e,d){var d=d||this.hdr,f=d.rows[e+1];f&&f.parentNode.removeChild(f);this.setSizes()},detachFooter:function(b){this.detachHeader(b,this.ftr)},attachHeader:function(f,e,h){typeof f=="string"&&(f=this._eSplit(f));typeof e=="string"&&(e=e.split(this.delim));h=h||"_aHead";if(this.hdr.rows.length){if(f){this._createHRow([f,e],this[h=="_aHead"?"hdr":"ftr"])}else{if(this[h]){for(var g=0;g<this[h].length;g++){this.attachHeader.apply(this,this[h][g])}}}}else{this[h]||(this[h]=[]),this[h][this[h].length]=[f,e,h]}},_createHRow:function(K,J){if(!J){if(this.entBox.style.position!="absolute"){this.entBox.style.position="relative"}var I=document.createElement("DIV");I.className="ftr";this.entBox.appendChild(I);var H=document.createElement("TABLE");H.cellPadding=H.cellSpacing=0;if(!_isIE||_isIE==8){H.width="100%",H.style.paddingRight="20px"}H.style.marginRight="20px";H.style.tableLayout="fixed";I.appendChild(H);H.appendChild(document.createElement("TBODY"));this.ftr=J=H;for(var F=H.insertRow(0),E=this.hdrLabels.length<=1?K[0].length:this.hdrLabels.length,D=0;D<E;D++){F.appendChild(document.createElement("TH")),F.childNodes[D]._cellIndex=D}_isIE&&_isIE<8?F.style.position="absolute":F.style.height="auto"}var C=K[1],I=document.createElement("TR");J.rows[0].parentNode.appendChild(I);for(D=0;D<K[0].length;D++){if(K[0][D]=="#cspan"){var A=I.cells[I.cells.length-1];A.colSpan=(A.colSpan||1)+1}else{if(K[0][D]=="#rspan"&&J.rows.length>1){for(var y=J.rows.length-2,x=!1,A=null;!x;){for(var A=J.rows[y],w=0;w<A.cells.length;w++){if(A.cells[w]._cellIndex==D){x=w+1;break}}y--}A=A.cells[x-1];A.rowSpan=(A.rowSpan||1)+1}else{var v=document.createElement("TD");v._cellIndex=v._cellIndexS=D;if(this._hrrar&&this._hrrar[D]&&!_isIE){v.style.display="none"}if(typeof K[0][D]=="object"){v.appendChild(K[0][D])}else{if(v.innerHTML=this.forceDivInHeader?"<div class='hdrcell'>"+(K[0][D]||"&nbsp;")+"</div>":K[0][D]||"&nbsp;",(K[0][D]||"").indexOf("#")!=-1){if(H=K[0][D].match(/(^|{)#([^}]+)(}|$)/)){var u="_in_header_"+H[2];if(this[u]){this[u](this.forceDivInHeader?v.firstChild:v,D,K[0][D].split(H[0]))}}}}if(C){v.style.cssText=C[D]}I.appendChild(v)}}}var s=J;if(_isKHTML){J._kTimer&&window.clearTimeout(J._kTimer),J._kTimer=window.setTimeout(function(){J.rows[1].style.display="none";window.setTimeout(function(){J.rows[1].style.display=""},1)},500)}},forEachRow:function(d){for(var c in this.rowsAr){this.rowsAr[c]&&this.rowsAr[c].idd&&d.apply(this,[this.rowsAr[c].idd])}},forEachRowA:function(d){for(var c=0;c<this.rowsBuffer.length;c++){this.rowsBuffer[c]&&d.call(this,this.render_row(c).idd)}},forEachCell:function(f,e){var h=this.getRowById(f);if(h){for(var g=0;g<this._cCount;g++){e(this.cells3(h,g),g)}}},enableAutoWidth:function(e,d,f){this._awdth=[convertStringToBoolean(e),parseInt(d||99999),parseInt(f||0)];if(arguments.length==1){this.objBox.style.overflowX=e?"hidden":"auto"}},updateFromXML:function(f,e,h,g){typeof e=="undefined"&&(e=!0);this._refresh_mode=[!0,e,h];this.load(f,g)},_refreshFromXML:function(x){this._f_rowsBuffer&&this.filterBy(0,"");reset=!1;if(window.eXcell_tree){eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(d){var c=this.grid._h2.get[this.cell.parentNode.idd];c&&this.cell.parentNode.valTag?this.setLabel(d):this.setValueX(d)}}var w=this.cellType._dhx_find("tree");x.getXMLTopNode("rows");var v=x.doXPath("//rows")[0].getAttribute("parent")||0,u={};this._refresh_mode[2]&&(w!=-1?this._h2.forEachChild(v,function(b){u[b.id]=!0},this):this.forEachRow(function(b){u[b]=!0}));for(var s=x.doXPath("//row"),o=0;o<s.length;o++){var n=s[o],m=n.getAttribute("id");u[m]=!1;v=n.parentNode.getAttribute("id")||v;if(this.rowsAr[m]&&this.rowsAr[m].tagName!="TR"){this._h2?this._h2.get[m].buff.data=n:this.rowsBuffer[this.getRowIndex(m)].data=n,this.rowsAr[m]=n}else{if(this.rowsAr[m]){this._process_xml_row(this.rowsAr[m],n,-1),this._postRowProcessing(this.rowsAr[m],!0)}else{if(this._refresh_mode[1]){var l={idd:m,data:n,_parser:this._process_xml_row,_locator:this._get_xml_data},k=this.rowsBuffer.length;this._refresh_mode[1]=="top"?(this.rowsBuffer.unshift(l),k=0):this.rowsBuffer.push(l);if(this._h2){reset=!0,this._h2.add(m,n.parentNode.getAttribute("id")||n.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]}this.rowsAr[m]=n;n=this.render_row(k);this._insertRowAt(n,k?-1:0)}}}}if(this._refresh_mode[2]){for(m in u){u[m]&&this.rowsAr[m]&&this.deleteRow(m)}}this._refresh_mode=null;if(window.eXcell_tree){eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX}reset&&this._renderSort();if(this._f_rowsBuffer){this._f_rowsBuffer=null,this.filterByAll()}},getCustomCombo:function(e,d){var f=this.cells(e,d).cell;if(!f._combo){f._combo=new dhtmlXGridComboObject}return f._combo},setTabOrder:function(f){var e=f.split(this.delim);this._tabOrder=[];for(var h=this._cCount||f.length,g=0;g<h;g++){e[g]={c:parseInt(e[g]),ind:g}}e.sort(function(d,c){return d.c>c.c?1:-1});for(g=0;g<h;g++){this._tabOrder[e[g].ind]=!e[g+1]||typeof e[g].c=="undefined"?(e[0].ind+1)*-1:e[g+1].ind}},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var b=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[b+1],this.cell._cellIndex,!0)},k13_0_1:function(){var b=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[b-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0},k9_0_0:function(){this.editStop();if(!this.callEvent("onTab",[!0])){return !0}var b=this._getNextCell(null,1);if(b){this.selectCell(b.parentNode,b._cellIndex,this.row!=b.parentNode,!1,!0),this._still_active=!0}},k9_0_1:function(){this.editStop();if(!this.callEvent("onTab",[!1])){return !1}var b=this._getNextCell(null,-1);if(b){this.selectCell(b.parentNode,b._cellIndex,this.row!=b.parentNode,!1,!0),this._still_active=!0}},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var b=this.cells4(this.cell);if(!b.changeState||b.changeState()===!1){return !1}},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.collapseKids(this.row)}else{return !1}},k39_0_0:function(){if(!this.editor&&this.isTreeGrid()){this.expandKids(this.row)}else{return !1}},k40_0_0:function(){var e=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftNext()}else{if(!this.row.idd){return}var d=Math.max(e._r_select||0,this.getRowIndex(this.row.idd)),f=this._nextRow(d,1);if(f){e._r_select=null,this.selectCell(f,this.cell._cellIndex,!0),e.pagingOn&&e.showRow(f.idd)}else{if(!this.callEvent("onLastRow",[])){return !1}this._key_events.k34_0_0.apply(this,[]);this.pagingOn&&this.rowsCol[d+1]&&this.selectCell(d+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var e=this._realfake?this._fake:this;if(this.editor&&this.editor.combo){this.editor.shiftPrev()}else{if(!this.row.idd){return}var d=this.getRowIndex(this.row.idd)+1;if(d!=-1&&(!this.pagingOn||d!=1)){var f=this._nextRow(d-1,-1);this.selectCell(f,this.cell._cellIndex,!0);e.pagingOn&&f&&e.showRow(f.idd)}else{this._key_events.k33_0_0.apply(this,[])}}this._still_active=!0}},_build_master_row:function(){for(var e=document.createElement("DIV"),d=["<table><tr>"],f=0;f<this._cCount;f++){d.push("<td></td>")}d.push("</tr></table>");e.innerHTML=d.join("");this._master_row=e.firstChild.rows[0]},_prepareRow:function(e){this._master_row||this._build_master_row();for(var d=this._master_row.cloneNode(!0),f=0;f<d.childNodes.length;f++){d.childNodes[f]._cellIndex=f;if(this._enbCid){d.childNodes[f].id="c_"+e+"_"+f}this.dragAndDropOff&&this.dragger.addDraggableItem(d.childNodes[f],this)}d.idd=e;d.grid=this;return d},_process_jsarray_row:function(e,d){e._attrs={};for(var f=0;f<e.childNodes.length;f++){e.childNodes[f]._attrs={}}this._fillRow(e,this._c_order?this._swapColumns(d):d);return e},_get_jsarray_data:function(d,c){return d[c]},_process_json_row:function(d,c){c=this._c_order?this._swapColumns(c.data):c.data;return this._process_some_row(d,c)},_process_some_row:function(e,d){e._attrs={};for(var f=0;f<e.childNodes.length;f++){e.childNodes[f]._attrs={}}this._fillRow(e,d);return e},_get_json_data:function(d,c){return d.data[c]},_process_js_row:function(f,e){for(var h=[],g=0;g<this.columnIds.length;g++){h[g]=e[this.columnIds[g]],!h[g]&&h[g]!==0&&(h[g]="")}this._process_some_row(f,h);f._attrs=e;return f},_get_js_data:function(d,c){return d[this.columnIds[c]]},_process_csv_row:function(e,d){e._attrs={};for(var f=0;f<e.childNodes.length;f++){e.childNodes[f]._attrs={}}this._fillRow(e,this._c_order?this._swapColumns(d.split(this.csv.cell)):d.split(this.csv.cell));return e},_get_csv_data:function(d,c){return d.split(this.csv.cell)[c]},_process_store_row:function(g,f){for(var k=[],j=0;j<this.columnIds.length;j++){k[j]=f[this.columnIds[j]]}for(var h=0;h<g.childNodes.length;h++){g.childNodes[h]._attrs={}}g._attrs=f;this._fillRow(g,k)},_process_xml_row:function(A,y){var x=this.xmlLoader.doXPath(this.xml.cell,y),w=[];A._attrs=this._xml_attrs(y);if(this._ud_enabled){for(var v=this.xmlLoader.doXPath("./userdata",y),u=v.length-1;u>=0;u--){for(var s="",o=0;o<v[u].childNodes.length;o++){s+=v[u].childNodes[o].nodeValue}this.setUserData(A.idd,v[u].getAttribute("name"),s)}}for(o=0;o<x.length;o++){var n=x[this._c_order?this._c_order[o]:o];if(n){var m=A._childIndexes?A._childIndexes[o]:o,l=n.getAttribute("type");if(A.childNodes[m]){if(l){A.childNodes[m]._cellType=l}A.childNodes[m]._attrs=this._xml_attrs(n)}n.getAttribute("xmlcontent")||(n=n.firstChild?n.firstChild.data:"");w.push(n)}}for(;o<A.childNodes.length;o++){A.childNodes[o]._attrs={}}A.parentNode&&A.parentNode.tagName=="row"&&(A._attrs.parent=A.parentNode.getAttribute("idd"));this._fillRow(A,w);return A},_get_xml_data:function(d,c){for(d=d.firstChild;;){if(!d){return""}d.tagName=="cell"&&c--;if(c<0){break}d=d.nextSibling}return d.firstChild?d.firstChild.data:""},_fillRow:function(h,g){this.editor&&this.editStop();for(var m=0;m<h.childNodes.length;m++){if(m<g.length||this.defVal[m]){var l=h.childNodes[m]._cellIndex,k=g[l],j=this.cells4(h.childNodes[m]);if(this.defVal[l]&&(k==""||typeof k=="undefined")){k=this.defVal[l]}j&&j.setValue(k)}else{h.childNodes[m].innerHTML="&nbsp;",h.childNodes[m]._clearCell=!0}}return h},_postRowProcessing:function(k,j){if(k._attrs["class"]){k._css=k.className=k._attrs["class"]}if(k._attrs.locked){k._locked=!0}if(k._attrs.bgColor){k.bgColor=k._attrs.bgColor}for(var u=0,s=0;s<k.childNodes.length;s++){var o=k.childNodes[s],n=o._cellIndex,m=o._attrs.style||k._attrs.style;m&&(o.style.cssText+=";"+m);if(o._attrs["class"]){o.className=o._attrs["class"]}if(m=o._attrs.align||this.cellAlign[n]){o.align=this.cellAlign[n]}o.vAlign=o._attrs.valign||this.cellVAlign[n];var l=o._attrs.bgColor||this.columnColor[n];if(l){o.bgColor=l}o._attrs.colspan&&!j&&(this.setColspan(k.idd,s+u,o._attrs.colspan),u+=o._attrs.colspan-1);if(this._hrrar&&this._hrrar[n]&&!j){o.style.display="none"}}this.callEvent("onRowCreated",[k.idd,k,null])},load:function(e,d,f){this.callEvent("onXLS",[this]);arguments.length==2&&typeof d!="function"&&(f=d,d=null);f=f||"xml";if(!this.xmlFileUrl){this.xmlFileUrl=e}this._data_type=f;this.xmlLoader.onloadAction=function(b,l,k,j,c){b.callEvent&&(c=b["_process_"+f](c),b._contextCallTimer||b.callEvent("onXLE",[b,0,0,c]),d&&(d(),d=null))};this.xmlLoader.loadXML(e)},loadXML:function(d,c){this.load(d,c,"xml")},parse:function(e,d,f){arguments.length==2&&typeof d!="function"&&(f=d,d=null);this._data_type=f=f||"xml";e=this["_process_"+f](e);this._contextCallTimer||this.callEvent("onXLE",[this,0,0,e]);d&&d()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(e){var d={};if(e.attributes.length){for(var f=0;f<e.attributes.length;f++){d[e.attributes[f].name]=e.attributes[f].value}}return d},_process_xml:function(A){if(!A.doXPath){var y=new dtmlXMLLoaderObject(function(){});typeof A=="string"?y.loadXMLString(A):(y.xmlDoc=A.responseXML?A:{},y.xmlDoc.responseXML=A);A=y}if(this._refresh_mode){return this._refreshFromXML(A)}this._parsing=!0;var x=A.getXMLTopNode(this.xml.top);if(x.tagName==this.xml.top){var w=x.getAttribute("dhx_security");if(w){dhtmlx.security_key=w}this._parseHead(x);var v=A.doXPath(this.xml.row,x),u=parseInt(A.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),s=parseInt(A.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0),s=Math.min(s,32000000/this._srdh),o=!1;s&&s!=this.rowsBuffer.length&&(this.rowsBuffer[s-1]||(this.rowsBuffer.length&&(o=!0),this.rowsBuffer[s-1]=null),s<this.rowsBuffer.length&&(this.rowsBuffer.splice(s,this.rowsBuffer.length-s),o=!0));if(this.isTreeGrid()){return this._process_tree_xml(A)}for(var n=0;n<v.length;n++){if(!this.rowsBuffer[n+u]){var m=v[n].getAttribute("id")||n+u+1;this.rowsBuffer[n+u]={idd:m,data:v[n],_parser:this._process_xml_row,_locator:this._get_xml_data};this.rowsAr[m]=v[n]}}this.callEvent("onDataReady",[]);if(o&&this._srnd){var l=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=l}else{this.render_dataset()}this._parsing=!1;return A.xmlDoc.responseXML?A.xmlDoc.responseXML:A.xmlDoc}},_process_jsarray:function(a){this._parsing=!0;if(a&&a.xmlDoc){eval("dhtmlx.temp="+a.xmlDoc.responseText+";"),a=dhtmlx.temp}for(var b=0;b<a.length;b++){var c=b+1;this.rowsBuffer.push({idd:c,data:a[b],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data});this.rowsAr[c]=a[b]}this.render_dataset();this._parsing=!1},_process_csv:function(g){this._parsing=!0;if(g.xmlDoc){g=g.xmlDoc.responseText}g=g.replace(/\r/g,"");g=g.split(this.csv.row);if(this._csvHdr){this.clearAll();var f=g.splice(0,1)[0].split(this.csv.cell);this._csvAID||f.splice(0,1);this.setHeader(f.join(this.delim));this.init()}for(var k=0;k<g.length;k++){if(g[k]||k!=g.length-1){if(this._csvAID){var j=k+1;this.rowsBuffer.push({idd:j,data:g[k],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var h=g[k].split(this.csv.cell),j=h.splice(0,1)[0];this.rowsBuffer.push({idd:j,data:h,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[j]=g[k]}}this.render_dataset();this._parsing=!1},_process_js:function(b){return this._process_json(b,"js")},_process_json:function(a,b){this._parsing=!0;if(a&&a.xmlDoc){eval("dhtmlx.temp="+a.xmlDoc.responseText+";"),a=dhtmlx.temp}if(b=="js"){if(a.data){a=a.data}for(var c=0;c<a.length;c++){var d=a[c],e=d.id||c+1;this.rowsBuffer.push({idd:e,data:d,_parser:this._process_js_row,_locator:this._get_js_data});this.rowsAr[e]=a[c]}}else{for(c=0;c<a.rows.length;c++){e=a.rows[c].id,this.rowsBuffer.push({idd:e,data:a.rows[c],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[e]=a.rows[c]}}if(a.dhx_security){dhtmlx.security_key=a.dhx_security}this.render_dataset();this._parsing=!1},render_dataset:function(k,j){if(this._srnd){if(this._fillers){return this._update_srnd_view()}j=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(k=Math.max(k||0,(this.currentPage-1)*this.rowsBufferOutSize),j=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(k=k||0,j=j||this.rowsBuffer.length);for(var u=k;u<j;u++){var s=this.render_row(u);if(s==-1){if(this.xmlFileUrl&&this.callEvent("onDynXLS",[u,this._dpref?this._dpref:j-u])){this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+u+"&count="+(this._dpref?this._dpref:j-u),this._data_type)}j=u;break}if(!s.parentNode||!s.parentNode.tagName){if(this._insertRowAt(s,u),s._attrs.selected||s._attrs.select){this.selectRow(s,s._attrs.call?!0:!1,!0),s._attrs.selected=s._attrs.select=null}}if(this._ads_count&&u-k==this._ads_count){var o=this;this._context_parsing=this._context_parsing||this._parsing;return this._contextCallTimer=window.setTimeout(function(){o._contextCallTimer=null;o.render_dataset(u,j);if(!o._contextCallTimer){o._context_parsing?o.callEvent("onXLE",[]):o._fixAlterCss(),o.callEvent("onDistributedEnd",[]),o._context_parsing=!1}},this._ads_time)}}if(this._srnd&&!this._fillers){var n=this.rowsBuffer.length-j;for(this._fillers=[];n>0;){var m=_isIE||window._FFrv?Math.min(n,50000):n,l=this._add_filler(j,m);l&&this._fillers.push(l);n-=m;j+=m}}this.setSizes()},render_row:function(e){if(!this.rowsBuffer[e]){return -1}if(this.rowsBuffer[e]._parser){var d=this.rowsBuffer[e];if(this.rowsAr[d.idd]&&this.rowsAr[d.idd].tagName=="TR"){return this.rowsBuffer[e]=this.rowsAr[d.idd]}var f=this._prepareRow(d.idd);this.rowsBuffer[e]=f;this.rowsAr[d.idd]=f;d._parser.call(this,f,d.data);this._postRowProcessing(f);return f}return this.rowsBuffer[e]},_get_cell_value:function(e,d,f){return e._locator?(this._c_order&&(d=this._c_order[d]),e._locator.call(this,e.data,d)):this.cells3(e,d)[f?f:"getValue"]()},sortRows:function(j,h,o){o=(o||"asc").toLowerCase();h=h||this.fldSort[j];j=j||0;if(this.isTreeGrid()){this.sortTreeRows(j,h,o)}else{var n={},m=this.cellType[j],l="getValue";m=="link"&&(l="getContent");if(m=="dhxCalendar"||m=="dhxCalendarA"){l="getDate"}for(var k=0;k<this.rowsBuffer.length;k++){n[this.rowsBuffer[k].idd]=this._get_cell_value(this.rowsBuffer[k],j,l)}this._sortRows(j,h,o,n)}this.callEvent("onAfterSorting",[j,h,o])},_sortCore:function(h,g,m,l,k){var j="sort";if(this._sst){k.stablesort=this.rowsCol.stablesort,j="stablesort"}if(g=="str"){k[j](function(d,c){return m=="asc"?l[d.idd]>l[c.idd]?1:l[d.idd]<l[c.idd]?-1:0:l[d.idd]<l[c.idd]?1:l[d.idd]>l[c.idd]?-1:0})}else{if(g=="int"){k[j](function(d,c){var o=parseFloat(l[d.idd]),o=isNaN(o)?-99999999999999:o,n=parseFloat(l[c.idd]),n=isNaN(n)?-99999999999999:n;return m=="asc"?o-n:n-o})}else{if(g=="date"){k[j](function(d,c){var o=Date.parse(l[d.idd])||Date.parse("01/01/1900"),n=Date.parse(l[c.idd])||Date.parse("01/01/1900");return m=="asc"?o-n:n-o})}}}},_sortRows:function(f,e,h,g){this._sortCore(f,e,h,g,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(f){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0);this.callEvent("onResetView",[]);var e=this.obj.rows[0].parentNode,h=e.removeChild(e.childNodes[0],!0);if(_isKHTML){for(var g=e.parentNode.childNodes.length-1;g>=0;g--){e.parentNode.childNodes[g].tagName=="TR"&&e.parentNode.removeChild(e.parentNode.childNodes[g],!0)}}else{if(_isIE){for(g=e.childNodes.length-1;g>=0;g--){e.childNodes[g].removeNode(!0)}}else{e.innerHTML=""}}e.appendChild(h);this.rowsCol=dhtmlxArray();this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;f||this.render_dataset()}},deleteRow:function(h,g){g||(g=this.getRowById(h));if(g){this.editStop();if(!this._realfake&&this.callEvent("onBeforeRowDeleted",[h])==!1){return !1}var m=0;if(this.cellType._dhx_find("tree")!=-1&&!this._realfake){m=this._h2.get[h].parent.id,this._removeTrGrRow(g)}else{g.parentNode&&g.parentNode.removeChild(g);var l=this.rowsCol._dhx_find(g);l!=-1&&this.rowsCol._dhx_removeAt(l);for(var k=0;k<this.rowsBuffer.length;k++){if(this.rowsBuffer[k]&&this.rowsBuffer[k].idd==h){this.rowsBuffer._dhx_removeAt(k);l=k;break}}}this.rowsAr[h]=null;for(k=0;k<this.selectedRows.length;k++){this.selectedRows[k].idd==h&&this.selectedRows._dhx_removeAt(k)}if(this._srnd){for(k=0;k<this._fillers.length;k++){var j=this._fillers[k];j&&this._update_fillers(k,j[1]>=l?-1:0,j[0]>=l?-1:0)}this._update_srnd_view()}this.pagingOn&&this.changePage();this._realfake||this.callEvent("onAfterRowDeleted",[h,m]);this.callEvent("onGridReconstructed",[]);this._ahgr&&this.setSizes();return !0}},_addRow:function(v,u,s){if(s==-1||typeof s=="undefined"){s=this.rowsBuffer.length}typeof u=="string"&&(u=u.split(this.delim));var o=this._prepareRow(v);o._attrs={};for(var n=0;n<o.childNodes.length;n++){o.childNodes[n]._attrs={}}this.rowsAr[o.idd]=o;if(this._h2){this._h2.get[o.idd].buff=o}this._fillRow(o,u);this._postRowProcessing(o);if(this._skipInsert){return this._skipInsert=!1,this.rowsAr[o.idd]=o}if(this.pagingOn){return this.rowsBuffer._dhx_insertAt(s,o),this.rowsAr[o.idd]=o}if(this._fillers){this.rowsCol._dhx_insertAt(s,null);this.rowsBuffer._dhx_insertAt(s,o);this._fake&&this._fake.rowsCol._dhx_insertAt(s,null);this.rowsAr[o.idd]=o;for(var m=!1,l=0;l<this._fillers.length;l++){var k=this._fillers[l];if(k&&k[0]<=s&&k[0]+k[1]>=s){k[1]+=1;var j=k[2].firstChild.style.height=parseInt(k[2].firstChild.style.height)+this._srdh+"px",m=!0;if(this._fake){this._fake._fillers[l][1]++,this._fake._fillers[l][2].firstChild.style.height=j}}k&&k[0]>s&&(k[0]+=1,this._fake&&this._fake._fillers[l][0]++)}m||this._fillers.push(this._add_filler(s,1,s==0?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[s-1]));return o}this.rowsBuffer._dhx_insertAt(s,o);return this._insertRowAt(o,s)},addRow:function(f,e,h){var g=this._addRow(f,e,h);this.dragContext||this.callEvent("onRowAdded",[f]);this.pagingOn&&this.changePage(this.currentPage);this._srnd&&this._update_srnd_view();g._added=!0;this._ahgr&&this.setSizes();this.callEvent("onGridReconstructed",[]);return g},_insertRowAt:function(f,e,h){this.rowsAr[f.idd]=f;if(this._skipInsert){return this._skipInsert=!1,f}if(e<0||!e&&parseInt(e)!==0){e=this.rowsCol.length}else{if(e>this.rowsCol.length){e=this.rowsCol.length}}if(this._cssEven){var g=f.className.replace(this._cssUnEven,"");f.className+=(this._cssSP?this.getLevel(f.idd):e)%2==1?g+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(f.idd):""):g+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(f.idd):"")}h||(e==this.obj.rows.length-1||!this.rowsCol[e]?_isKHTML?this.obj.appendChild(f):this.obj.firstChild.appendChild(f):this.rowsCol[e].parentNode.insertBefore(f,this.rowsCol[e]));this.rowsCol._dhx_insertAt(e,f);this.callEvent("onRowInserted",[f,e]);return f},getRowById:function(e){var d=this.rowsAr[e];if(d){if(d.tagName!="TR"){for(var f=0;f<this.rowsBuffer.length;f++){if(this.rowsBuffer[f]&&this.rowsBuffer[f].idd==e){return this.render_row(f)}}if(this._h2){return this.render_row(null,d.idd)}}return d}return null},cellById:function(d,c){return this.cells(d,c)},cells:function(f,e){if(arguments.length==0){return this.cells4(this.cell)}else{var h=this.getRowById(f)}var g=h._childIndexes?h.childNodes[h._childIndexes[e]]:h.childNodes[e];!g&&h._childIndexes&&(g=h.firstChild||{});return this.cells4(g)},cellByIndex:function(d,c){return this.cells2(d,c)},cells2:function(f,e){var h=this.render_row(f),g=h._childIndexes?h.childNodes[h._childIndexes[e]]:h.childNodes[e];!g&&h._childIndexes&&(g=h.firstChild||{});return this.cells4(g)},cells3:function(e,d){var f=e._childIndexes?e.childNodes[e._childIndexes[d]]:e.childNodes[d];return this.cells4(f)},cells4:function(d){var c=window["eXcell_"+(d._cellType||this.cellType[d._cellIndex])];if(c){return new c(d)}},cells5:function(e,d){d=d||e._cellType||this.cellType[e._cellIndex];if(!this._ecache[d]){var f=window["eXcell_"+d]?window["eXcell_"+d]:eXcell_ro;this._ecache[d]=new f(e)}this._ecache[d].cell=e;return this._ecache[d]},dma:function(b){if(!this._ecache){this._ecache={}}if(b&&!this._dma){this._dma=this.cells4,this.cells4=this.cells5}else{if(!b&&this._dma){this.cells4=this._dma,this._dma=null}}},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(b){this.smartTabOrder=arguments.length>0?convertStringToBoolean(b):!0},setExternalTabOrder:function(g,f){var k=this;this.tabStart=typeof g=="object"?g:document.getElementById(g);var j=this.tabStart.onkeydown;this.tabStart.onkeydown=function(d){j&&j.call(this,d);var c=d||window.event;if(c.keyCode==9&&!c.shiftKey){return c.cancelBubble=!0,k.selectCell(0,0,0,0,1),k.smartTabOrder&&k.cells2(0,0).isDisabled()&&k._key_events.k9_0_0.call(k),this.blur(),!1}};if(_isOpera){this.tabStart.onkeypress=this.tabStart.onkeydown}this.tabEnd=typeof f=="object"?f:document.getElementById(f);var h=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(d){h&&h.call(this,d);var c=d||window.event;if(c.keyCode==9&&c.shiftKey){return c.cancelBubble=!0,k.selectCell(k.getRowsNum()-1,k.getColumnCount()-1,0,0,1),k.smartTabOrder&&k.cells2(k.getRowsNum()-1,k.getColumnCount()-1).isDisabled()&&k._key_events.k9_0_1.call(k),this.blur(),!1}};if(_isOpera){this.tabEnd.onkeypress=this.tabEnd.onkeydown}},uid:function(){if(!this._ui_seed){this._ui_seed=(new Date).valueOf()}return this._ui_seed++},clearAndLoad:function(){var b=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=b;this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var b=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,b,Math.min(b+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}};(function(){function h(d,c){this[d]=c}function g(d,c){this[d].call(this,c)}function m(d,c){this[d].call(this,c.join(this.delim))}function l(n,f){for(var u=0;u<f.length;u++){if(typeof f[u]=="object"){var s=this.getCombo(u),o;for(o in f[u]){s.put(o,f[u][o])}}}}function k(D,C){function A(e,c,f){x[c]||(x[c]=[]);if(typeof f=="object"){f.toString=function(){return this.text}}x[c][e]=f}for(var y=1,x=[],w=0;w<C.length;w++){if(typeof C[w]=="object"&&C[w].length){for(var v=0;v<C[w].length;v++){A(w,v,C[w][v])}}else{A(w,0,C[w])}}for(w=0;w<x.length;w++){for(v=0;v<x[0].length;v++){var u=x[w][v];x[w][v]=(u||"").toString()||"&nbsp;";if(u&&u.colspan){for(var s=1;s<u.colspan;s++){A(v+s,w,"#cspan")}}if(u&&u.rowspan){for(s=1;s<u.rowspan;s++){A(v,w+s,"#rspan")}}}}this.setHeader(x[0]);for(w=1;w<x.length;w++){this.attachHeader(x[w])}}var j=[{name:"label",def:"&nbsp;",operation:"setHeader",type:k},{name:"id",def:"",operation:"columnIds",type:h},{name:"width",def:"*",operation:"setInitWidths",type:m},{name:"align",def:"left",operation:"cellAlign",type:h},{name:"valign",def:"middle",operation:"cellVAlign",type:h},{name:"sort",def:"na",operation:"fldSort",type:h},{name:"type",def:"ro",operation:"setColTypes",type:m},{name:"options",def:"",operation:"",type:l}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(b){return[b.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(b){for(var s=0;s<j.length;s++){for(var o=[],n=0;n<b.length;n++){o[n]=b[n][j[s].name]||j[s].def}var f=j[s].type||g;f.call(this,j[s].operation,o,b)}this.init()},rows:function(){},headers:function(d){for(var c=0;c<d.length;c++){this.attachHeader(d[c])}}})})();dhtmlXGridObject.prototype._dp_init=function(b){b.attachEvent("insertCallback",function(e,g){this.obj._h2?this.obj.addRow(g,f,null,parent):this.obj.addRow(g,[],0);var f=this.obj.getRowById(g);f&&(this.obj._process_xml_row(f,e.firstChild),this.obj._postRowProcessing(f))});b.attachEvent("updateCallback",function(e,g){var f=this.obj.getRowById(g);f&&(this.obj._process_xml_row(f,e.firstChild),this.obj._postRowProcessing(f))});b.attachEvent("deleteCallback",function(d,e){this.obj.setUserData(e,this.action_param,"true_deleted");this.obj.deleteRow(e)});b._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(a,h,g){if(b._columns&&!b._columns[g]){return !0}var f=this.cells(h,g);a==1?f.isCheckbox()&&b.setUpdated(h,!0):a==2&&f.wasChanged()&&b.setUpdated(h,!0);return !0});this.attachEvent("onRowPaste",function(a){b.setUpdated(a,!0)});this.attachEvent("onUndo",function(a){b.setUpdated(a,!0)});this.attachEvent("onRowIdChange",function(a,f){var e=b.findRow(a);e<b.updatedRows.length&&(b.updatedRows[e]=f)});this.attachEvent("onSelectStateChanged",function(){b.updateMode=="row"&&b.sendData();return !0});this.attachEvent("onEnter",function(){b.updateMode=="row"&&b.sendData();return !0});this.attachEvent("onBeforeRowDeleted",function(a){if(!this.rowsAr[a]){return !0}if(this.dragContext&&b.dnd){return window.setTimeout(function(){b.setUpdated(a,!0)},1),!0}var d=b.getState(a);this._h2&&this._h2.forEachChild(a,function(c){b.setUpdated(c.id,!1);b.markRow(c.id,!0,"deleted")},this);if(d=="inserted"){return b.set_invalid(a,!1),b.setUpdated(a,!1),!0}if(d=="deleted"){return !1}if(d=="true_deleted"){return b.setUpdated(a,!1),!0}b.setUpdated(a,!0,"deleted");return !1});this.attachEvent("onBindUpdate",function(a){if(typeof a=="object"){a=a.id}b.setUpdated(a,!0)});this.attachEvent("onRowAdded",function(a){if(this.dragContext&&b.dnd){return !0}b.setUpdated(a,!0,"inserted");return !0});b._getRowData=function(j){var u=[];u.gr_id=j;this.obj.isTreeGrid()&&(u.gr_pid=this.obj.getParentId(j));for(var s=this.obj.getRowById(j),o=0;o<this.obj._cCount;o++){var n=this.obj._c_order?this.obj._c_order[o]:o,m=this.obj.cells(s.idd,o);if(!this._changed||m.wasChanged()){this._endnm?u[this.obj.getColumnId(o)]=m.getValue():u["c"+n]=m.getValue()}}var l=this.obj.UserData[j];if(l){for(var k=0;k<l.keys.length;k++){l.keys[k]&&l.keys[k].indexOf("__")!=0&&(u[l.keys[k]]=l.values[k])}}if(l=this.obj.UserData.gridglobaluserdata){for(k=0;k<l.keys.length;k++){u[l.keys[k]]=l.values[k]}}return u};b._clearUpdateFlag=function(e){var g=this.obj.getRowById(e);if(g){for(var f=0;f<this.obj._cCount;f++){this.obj.cells(e,f).cell.wasChanged=!1}}};b.checkBeforeUpdate=function(g){for(var l=!0,k=[],j=0;j<this.obj._cCount;j++){if(this.mandatoryFields[j]){var h=this.mandatoryFields[j].call(this.obj,this.obj.cells(g,j).getValue(),g,j);typeof h=="string"?(this.messages.push(h),l=!1):(l&=h,k[j]=!h)}}l||(this.set_invalid(g,"invalid",k),this.setUpdated(g,!1));return l}};function dhtmlXGridCellObject(b){this.destructor=function(){return this.base=this.grid=this.cell=this.cell.obj=null};this.cell=b;this.getValue=function(){return this.cell.firstChild&&this.cell.firstChild.tagName=="TEXTAREA"?this.cell.firstChild.value:this.cell.innerHTML._dhx_trim()};this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()};this.getFont=function(){arOut=Array(3);if(this.cell.style.fontFamily){arOut[0]=this.cell.style.fontFamily}if(this.cell.style.fontWeight=="bold"||this.cell.parentNode.style.fontWeight=="bold"){arOut[1]="bold"}if(this.cell.style.fontStyle=="italic"||this.cell.parentNode.style.fontWeight=="italic"){arOut[1]+="italic"}arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"";return arOut.join("-")};this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"};this.getBgColor=function(){return this.cell.bgColor?this.cell.bgColor:"#FFFFFF"};this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(c){fntAr=c.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];if(fntAr.length==3){if(/bold/.test(fntAr[1])){this.cell.style.fontWeight="bold"}if(/italic/.test(fntAr[1])){this.cell.style.fontStyle="italic"}if(/underline/.test(fntAr[1])){this.cell.style.textDecoration="underline"}}};this.setTextColor=function(c){this.cell.style.color=c};this.setBgColor=function(c){c==""&&(c=null);this.cell.bgColor=c};this.setHorAlign=function(c){this.cell.style.textAlign=c.length==1?c=="c"?"center":c=="l"?"left":"right":c};this.wasChanged=function(){return this.cell.wasChanged?!0:!1};this.isCheckbox=function(){var c=this.cell.firstChild;return c&&c.tagName=="INPUT"?(type=c.type,type=="radio"||type=="checkbox"?!0:!1):!1};this.isChecked=function(){if(this.isCheckbox()){return this.cell.firstChild.checked}};this.isDisabled=function(){return this.cell._disabled};this.setChecked=function(c){if(this.isCheckbox()){c!="true"&&c!=1&&(c=!1),this.cell.firstChild.checked=c}};this.setDisabled=function(c){c!="true"&&c!=1&&(c=!1);if(this.isCheckbox()){this.cell.firstChild.disabled=c,this.disabledF&&this.disabledF(c)}this.cell._disabled=c}}dhtmlXGridCellObject.prototype={getAttribute:function(b){return this.cell._attrs[b]},setAttribute:function(d,c){this.cell._attrs[d]=c},getInput:function(){if(this.obj&&(this.obj.tagName=="INPUT"||this.obj.tagName=="TEXTAREA")){return this.obj}var b=(this.obj||this.cell).getElementsByTagName("TEXTAREA");b.length||(b=(this.obj||this.cell).getElementsByTagName("INPUT"));return b[0]}};dhtmlXGridCellObject.prototype.setValue=function(b){typeof b!="number"&&(!b||b.toString()._dhx_trim()=="")?(b="&nbsp;",this.cell._clearCell=!0):this.cell._clearCell=!1;this.setCValue(b)};dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent};dhtmlXGridCellObject.prototype.setCValue=function(b){this.cell.innerHTML=b};dhtmlXGridCellObject.prototype.setCTxtValue=function(b){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(b))};dhtmlXGridCellObject.prototype.setLabel=function(b){this.cell.innerHTML=b};dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()};function eXcell(){this.val=this.obj=null;this.changeState=function(){return !1};this.edit=function(){this.val=this.getValue()};this.detach=function(){return !1};this.getPosition=function(f){for(var e=f,h=0,g=0;e.tagName!="BODY";){h+=e.offsetLeft,g+=e.offsetTop,e=e.offsetParent}return[h,g]}}eXcell.prototype=new dhtmlXGridCellObject;function eXcell_ed(b){if(b){this.cell=b,this.grid=this.cell.parentNode.grid}this.edit=function(){this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=this.cell.offsetHeight-(_isIE?4:4)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(c){(c||event).cancelBubble=!0};this.obj.onmousedown=function(c){(c||event).cancelBubble=!0};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);this.obj.onselectstart=function(c){c||(c=event);return c.cancelBubble=!0};_isIE&&(this.obj.focus(),this.obj.blur());this.obj.focus()};this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){this.setValue(this.obj.value);return this.val!=this.getValue()}}eXcell_ed.prototype=new eXcell;function eXcell_edtxt(b){if(b){this.cell=b,this.grid=this.cell.parentNode.grid}this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(c){!c||c.toString()._dhx_trim()==""?(c=" ",this.cell._clearCell=!0):this.cell._clearCell=!1;this.setCTxtValue(c)}}eXcell_edtxt.prototype=new eXcell_ed;function eXcell_ch(b){if(b){this.cell=b,this.grid=this.cell.parentNode.grid}this.disabledF=function(c){this.cell.innerHTML=c==!0||c==1?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")};this.changeState=function(c){c===!0&&!this.grid.isActive&&(window.globalActiveDHTMLGridObject!=null&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0));if(this.grid.isEditable&&!this.cell.parentNode._locked&&!this.isDisabled()){this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.val=="1"?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"])):this.editor=null}};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return !0};this.isChecked=function(){return this.getValue()=="1"?!0:!1};this.setChecked=function(c){this.setValue(c.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}eXcell_ch.prototype=new eXcell;eXcell_ch.prototype.setValue=function(d){this.cell.style.verticalAlign="middle";if(d&&(d=d.toString()._dhx_trim(),d=="false"||d=="0")){d=""}d?(d="1",this.cell.chstate="1"):(d="0",this.cell.chstate="0");var c=this;this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+d+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};function eXcell_ra(b){this.base=eXcell_ch;this.base(b);this.grid=b.parentNode.grid;this.disabledF=function(c){this.cell.innerHTML=c==!0||c==1?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")};this.changeState=function(c){if(!(c===!1&&this.getValue()==1)&&this.grid.isEditable&&!this.cell.parentNode._locked){this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=!1?(this.val=this.getValue(),this.val=="1"?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"])):this.editor=null}};this.edit=null}eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(d){this.cell.style.verticalAlign="middle";if(d&&(d=d.toString()._dhx_trim(),d=="false"||d=="0")){d=""}if(d){if(!this.grid._RaSeCol){this.grid._RaSeCol=[]}if(this.grid._RaSeCol[this.cell._cellIndex]){var c=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);c.setValue("0");this.grid.rowsAr[c.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,c.cell.parentNode.idd,c.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell;d="1";this.cell.chstate="1"}else{d="0",this.cell.chstate="0"}this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+d+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)};function eXcell_txt(b){if(b){this.cell=b,this.grid=this.cell.parentNode.grid}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(c){(c||event).cancelBubble=!0};var e=this.grid.getPosition(this.cell);this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;if(_isFF){var g=document.createElement("DIV");g.appendChild(this.obj);g.style.overflow="auto";g.className="dhx_textarea";this.obj.style.margin="0px 0px 0px 0px";this.obj.style.border="0px";this.obj=g}document.body.appendChild(this.obj);if(_isOpera){this.obj.onkeypress=function(c){if(c.keyCode==9){return !1}}}this.obj.onkeydown=function(d){var c=d||event;if(c.keyCode==9){return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:c.keyCode,shiftKey:c.shiftKey,srcElement:"0"}),!1}};this.obj.style.left=e[0]+"px";this.obj.style.top=e[1]+this.cell.offsetHeight+"px";var f=this.cell.offsetWidth<200?200:this.cell.offsetWidth;this.obj.style.width=f+(_isFF?18:16)+"px";if(_isFF){this.obj.firstChild.style.width=parseInt(this.obj.style.width)+"px",this.obj.firstChild.style.height=this.obj.offsetHeight-3+"px"}if(_isIE){this.obj.select(),this.obj.value=this.obj.value}_isFF?this.obj.firstChild.focus():this.obj.focus()};this.detach=function(){var c="",c=_isFF?this.obj.firstChild.value:this.obj.value;this.cell._clearCell=c==""?!0:!1;this.setValue(c);document.body.removeChild(this.obj);this.obj=null;return this.val!=this.getValue()};this.getValue=function(){return this.obj?_isFF?this.obj.firstChild.value:this.obj.value:this.cell._clearCell?"":typeof this.cell._brval!="undefined"?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}eXcell_txt.prototype=new eXcell;function eXcell_txttxt(b){if(b){this.cell=b,this.grid=this.cell.parentNode.grid}this.getValue=function(){return this.cell.firstChild&&this.cell.firstChild.tagName=="TEXTAREA"?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(c){this.cell._brval=c;!c||c.toString()._dhx_trim()==""?(c=" ",this.cell._clearCell=!0):this.cell._clearCell=!1;this.setCTxtValue(c)}}eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(b){this.cell._brval=b;!b||b.toString()._dhx_trim()==""?(b="&nbsp;",this.cell._clearCell=!0):this.cell._clearCell=!1;!this.grid.multiLine||this.cell._clearCell?this.setCValue(b,this.cell._brval):this.setCValue(b.replace(/\n/g,"<br/>"),b)};function eXcell_co(b){if(b){this.cell=b,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0}this.shiftNext=function(){var c=this.list.options[this.list.selectedIndex+1];if(c){c.selected=!0}this.obj.value=this.list.options[this.list.selectedIndex].text;return !0};this.shiftPrev=function(){if(this.list.selectedIndex!=0){var c=this.list.options[this.list.selectedIndex-1];if(c){c.selected=!0}this.obj.value=this.list.options[this.list.selectedIndex].text}return !0};this.edit=function(){this.val=this.getValue();this.text=this.getText()._dhx_trim();var j=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=this.cell.offsetHeight-4+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(c){(c||event).cancelBubble=!0};this.obj.onmousedown=function(c){(c||event).cancelBubble=!0};this.obj.value=this.text;this.obj.onselectstart=function(c){c||(c=event);return c.cancelBubble=!0};var s=this;this.obj.onkeyup=function(f){var c=(f||event).keyCode;if(!(c==38||c==40||c==9)){for(var v=this.readonly?String.fromCharCode(c):this.value,u=s.list.options,h=0;h<u.length;h++){if(u[h].text.indexOf(v)==0){return u[h].selected=!0}}}};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=j[0]+"px";this.list.style.top=j[1]+this.cell.offsetHeight+"px";this.list.onclick=function(e){var c=e||window.event,f=c.target||c.srcElement;if(f.tagName=="OPTION"){f=f.parentNode}s.editable=!1;s.grid.editStop();c.cancelBubble=!0};for(var o=this.combo.getKeys(),n=!1,m=0,l=0;l<o.length;l++){var k=this.combo.get(o[l]);this.list.options[this.list.options.length]=new Option(k,o[l]);o[l]==this.val&&(m=this.list.options.length-1,n=!0)}n==!1&&(this.list.options[this.list.options.length]=new Option(this.text,this.val===null?"":this.val),m=this.list.options.length-1);document.body.appendChild(this.list);this.list.size="6";this.cstate=1;this.editable?this.cell.innerHTML="":(this.obj.style.width="1px",this.obj.style.height="1px");this.cell.appendChild(this.obj);this.list.options[m].selected=!0;if(!_isFF||this.editable){this.obj.focus(),this.obj.focus()}if(!this.editable){this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(c){c=c||window.event;s.grid.setActive(!0);if(c.keyCode<30){return s.grid.doKey({target:s.cell,keyCode:c.keyCode,shiftKey:c.shiftKey,ctrlKey:c.ctrlKey})}}}};this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value};this.detach=function(){if(this.val!=this.getValue()){this.cell.wasChanged=!0}if(this.list.parentNode!=null){if(this.editable){var e=this.list.options[this.list.selectedIndex];if(e&&e.text==this.obj.value){this.setValue(this.list.value)}else{var g=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),f=g.values._dhx_find(this.obj.value);f!=-1?this.setValue(g.keys[f]):this.setCValue(this.cell.combo_value=this.obj.value)}}else{this.setValue(this.list.value)}}this.list.parentNode&&this.list.parentNode.removeChild(this.list);this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj);return this.val!=this.getValue()}}eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};eXcell_co.prototype.setValue=function(f){if(typeof f=="object"){var e=this.grid.xmlLoader.doXPath("./option",f);if(e.length){this.cell._combo=new dhtmlXGridComboObject}for(var h=0;h<e.length;h++){this.cell._combo.put(e[h].getAttribute("value"),e[h].firstChild?e[h].firstChild.data:"")}f=f.firstChild.data}if((f||"").toString()._dhx_trim()==""){f=null}this.cell.combo_value=f;if(f!==null){var g=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(f);this.setCValue(g===null?f:g,f)}else{this.setCValue("&nbsp;",f)}};function eXcell_coro(b){this.base=eXcell_co;this.base(b);this.editable=!1}eXcell_coro.prototype=new eXcell_co;function eXcell_cotxt(b){this.base=eXcell_co;this.base(b)}eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent};eXcell_cotxt.prototype.setValue=function(e){if(typeof e=="object"){var d=this.grid.xmlLoader.doXPath("./option",e);if(d.length){this.cell._combo=new dhtmlXGridComboObject}for(var f=0;f<d.length;f++){this.cell._combo.put(d[f].getAttribute("value"),d[f].firstChild?d[f].firstChild.data:"")}e=e.firstChild.data}if((e||"").toString()._dhx_trim()==""){e=null}e!==null?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(e)||e,e):this.setCTxtValue(" ",e);this.cell.combo_value=e};function eXcell_corotxt(b){this.base=eXcell_co;this.base(b);this.editable=!1}eXcell_corotxt.prototype=new eXcell_cotxt;function eXcell_cp(d){try{this.cell=d,this.grid=this.cell.parentNode.grid}catch(c){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var b=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=b[0]+"px";this.obj.style.zIndex=1000;this.obj.style.top=b[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(b){b.length==1&&(b="0"+b);return b};this.colorPanel=function(A,y){var x=document.createElement("TABLE");y.appendChild(x);x.cellSpacing=0;x.editor_obj=this;x.style.cursor="default";x.onclick=function(f){var e=f||window.event,h=e.target||e.srcElement,g=h.parentNode.parentNode.parentNode.editor_obj;g.setValue(h._bg);g.grid.editStop()};for(var w=256/A,v=0;v<=256/w;v++){for(var u=x.insertRow(v),s=0;s<=256/w;s++){for(var o=0;o<=256/w;o++){R=new Number(w*v)-(v==0?0:1);G=new Number(w*s)-(s==0?0:1);B=new Number(w*o)-(o==0?0:1);var n=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16)),m=u.insertCell(s);m.width="10px";m.innerHTML="&nbsp;";m.title=n.toUpperCase();m.style.backgroundColor="#"+n;m._bg="#"+n;if(this.val!=null&&"#"+n.toUpperCase()==this.val.toUpperCase()){m.style.border="2px solid white"}}}}};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){this.obj.offsetParent!=null&&document.body.removeChild(this.obj);return this.val!=this.getValue()}}eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(b){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?this.cell.offsetHeight-2:16)+";background-color:"+(b||"")+";border:0px;'>&nbsp;</div>",b);this.cell.firstChild._bg=b};function eXcell_img(d){try{this.cell=d,this.grid=this.cell.parentNode.grid}catch(c){}this.getValue=function(){if(this.cell.firstChild.tagName=="IMG"){return this.cell.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"")}else{if(this.cell.firstChild.tagName=="A"){var b=this.cell.firstChild.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"");b+="^"+this.cell.lnk;this.cell.trg&&(b+="^"+this.cell.trg);return b}}};this.isDisabled=function(){return !0}}eXcell_img.prototype=new eXcell;eXcell_img.prototype.getTitle=function(){return this.cell._brval};eXcell_img.prototype.setValue=function(e){var d=e;if(e.indexOf("^")!=-1){var f=e.split("^"),e=f[0],d=this.cell._attrs.title||f[1];if(f.length>2&&(this.cell.lnk=f[2],f[3])){this.cell.trg=f[3]}this.cell.titFl="1"}this.setCValue("<img src='"+this.grid.iconURL+(e||"")._dhx_trim()+"' border='0'>",e);if(this.cell.lnk){this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"}this.cell._brval=d};function eXcell_price(b){this.base=eXcell_ed;this.base(b);this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(d){isNaN(parseFloat(d))&&(d=this.val||0);var c="green";d<0&&(c="red");this.setCValue("<span>$</span><span style='padding-right:2px;color:"+c+";'>"+d+"</span>",d)};function eXcell_dyn(b){this.base=eXcell_ed;this.base(b);this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.setValue=function(e){if(!e||isNaN(Number(e))){e!==""&&(e=0)}if(e>0){var d="green",f="dyn_up.gif"}else{e==0?(d="black",f="dyn_.gif"):(d="red",f="dyn_down.gif")}this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='"+this.grid.imgURL+""+f+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:"+d+";'>"+e+"</span></div>",e)};function eXcell_ro(b){if(b){this.cell=b,this.grid=this.cell.parentNode.grid}this.edit=function(){};this.isDisabled=function(){return !0};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}eXcell_ro.prototype=new eXcell;function eXcell_ron(b){this.cell=b;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return !0};this.getValue=function(){return this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}eXcell_ron.prototype=new eXcell;eXcell_ron.prototype.setValue=function(b){if(b!==0&&(!b||b.toString()._dhx_trim()=="")){return this.setCValue("&nbsp;"),this.cell._clearCell=!0}this.cell._clearCell=!1;this.setCValue(b?this.grid._aplNF(b,this.cell._cellIndex):"0")};function eXcell_rotxt(b){this.cell=b;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return !0};this.setValue=function(c){c?this.cell._clearCell=!1:(c=" ",this.cell._clearCell=!0);this.setCTxtValue(c)};this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}eXcell_rotxt.prototype=new eXcell;function dhtmlXGridComboObject(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;this.put=function(e,d){for(var f=0;f<this.keys.length;f++){if(this.keys[f]==e){return this.values[f]=d,!0}}this.values[this.values.length]=d;this.keys[this.keys.length]=e};this.get=function(d){for(var c=0;c<this.keys.length;c++){if(this.keys[c]==d){return this.values[c]}}return null};this.clear=function(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray};this.remove=function(d){for(var c=0;c<this.keys.length;c++){if(this.keys[c]==d){return this.keys._dhx_removeAt(c),this.values._dhx_removeAt(c),!0}}};this.size=function(){for(var d=0,c=0;c<this.keys.length;c++){this.keys[c]!=null&&d++}return d};this.getKeys=function(){for(var d=[],c=0;c<this.keys.length;c++){this.keys[c]!=null&&(d[d.length]=this.keys[c])}return d};this.save=function(){this._save=[];for(var b=0;b<this.keys.length;b++){this._save[b]=[this.keys[b],this.values[b]]}};this.restore=function(){if(this._save){this.keys[b]=[];this.values[b]=[];for(var b=0;b<this._save.length;b++){this.keys[b]=this._save[b][0],this.values[b]=this._save[b][1]}}};return this}function Hashtable(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray;return this}Hashtable.prototype=new dhtmlXGridComboObject;dhtmlXGridObject.prototype.filterBy=function(g,f,k){if(this.isTreeGrid()){return this.filterTreeBy(g,f,k)}if(this._f_rowsBuffer){if(!k&&(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake)){this._fake.rowsBuffer=this.rowsBuffer}}else{this._f_rowsBuffer=[].concat(this.rowsBuffer)}if(this.rowsBuffer.length){var j=!0;this.dma(!0);if(typeof g=="object"){for(var h=0;h<f.length;h++){this._filterA(g[h],f[h])}}else{this._filterA(g,f)}this.dma(!1);this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0);this._reset_view();this.callEvent("onGridReconstructed",[])}};dhtmlXGridObject.prototype._filterA=function(f,e){if(e!=""){var h=!0;typeof e=="function"?h=!1:e=(e||"").toString().toLowerCase();if(this.rowsBuffer.length){for(var g=this.rowsBuffer.length-1;g>=0;g--){(h?this._get_cell_value(this.rowsBuffer[g],f).toString().toLowerCase().indexOf(e)==-1:!e.call(this,this._get_cell_value(this.rowsBuffer[g],f),this.rowsBuffer[g].idd))&&this.rowsBuffer.splice(g,1)}}}};dhtmlXGridObject.prototype.getFilterElement=function(d){if(this.filters){for(var c=0;c<this.filters.length;c++){if(this.filters[c][1]==d){return this.filters[c][0].combo||this.filters[c][0]}}return null}};dhtmlXGridObject.prototype.collectValues=function(v){var u=this.callEvent("onCollectValues",[v]);if(u!==!0){return u}if(this.isTreeGrid()){return this.collectTreeValues(v)}this.dma(!0);this._build_m_order();for(var v=this._m_order?this._m_order[v]:v,s={},o=[],n=this._f_rowsBuffer||this.rowsBuffer,m=0;m<n.length;m++){var l=this._get_cell_value(n[m],v);if(l&&(!n[m]._childIndexes||n[m]._childIndexes[v]!=n[m]._childIndexes[v-1])){s[l]=!0}}this.dma(!1);var k=this.combos[v]||(this._col_combos?this._col_combos[v]:!1),j;for(j in s){if(s[j]===!0){if(k){if(k.get&&k.get(j)){j=k.get(j)}else{if(k.getOption&&k.getOption(j)){j=k.getOption(j).text}}}o.push(j)}}return o.sort()};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var b=0;b<this._c_order.length;b++){this._m_order[this._c_order[b]]=b}}};dhtmlXGridObject.prototype.filterByAll=function(){var h=[],g=[];this._build_m_order();for(var m=0;m<this.filters.length;m++){if(!(m>=this._cCount)){var l=this._m_order?this._m_order[this.filters[m][1]]:this.filters[m][1];g.push(l);var k=this.filters[m][0].old_value=this.filters[m][0].value;this.filters[m][0]._filter&&(k=this.filters[m][0]._filter());var j;if(typeof k!="function"&&(j=this.combos[l]||(this._col_combos?this._col_combos[l]:!1))){j.values?(l=j.values._dhx_find(k),k=l==-1?k:j.keys[l]):j.getOptionByLabel&&(k=j.getOptionByLabel(k)?j.getOptionByLabel(k).value:k)}h.push(k)}}if(this.callEvent("onFilterStart",[g,h])&&(this.filterBy(g,h),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length)){this._f_rowsBuffer=null}};dhtmlXGridObject.prototype.makeFilter=function(f,e){if(!this.filters){this.filters=[]}typeof f!="object"&&(f=document.getElementById(f));if(f){var h=this;if(!f.style.width){f.style.width="90%"}if(f.tagName=="SELECT"){this.filters.push([f,e]);this._loadSelectOptins(f,e);f.onchange=function(){h.filterByAll()};if(_isIE){f.style.marginTop="1px"}this.attachEvent("onEditCell",function(j,b,a){this._build_m_order();j==2&&this.filters&&(this._m_order?a==this._m_order[e]:a==e)&&this._loadSelectOptins(f,e);return !0})}else{if(f.tagName=="INPUT"){this.filters.push([f,e]),f.old_value=f.value="",f.onkeydown=function(){this._timer&&window.clearTimeout(this._timer);this._timer=window.setTimeout(function(){if(f.value!=f.old_value){h.filterByAll(),f.old_value=f.value}},500)}}else{if(f.tagName=="DIV"&&f.className=="combo"){this.filters.push([f,e]);f.style.padding="0px";f.style.margin="0px";if(!window.dhx_globalImgPath){window.dhx_globalImgPath=this.imgURL}var g=new dhtmlXCombo(f,"_filter","90%");g.filterSelfA=g.filterSelf;g.filterSelf=function(){this.getSelectedIndex()==0&&this.setComboText("");this.filterSelfA.apply(this,arguments);this.optionsArr[0].hide(!1)};g.enableFilteringMode(!0);f.combo=g;f.value="";this._loadComboOptins(f,e);g.attachEvent("onChange",function(){f.value=g.getSelectedValue();if(f.value===null){f.value=""}h.filterByAll()})}}}f.parentNode&&(f.parentNode.className+=" filter");this._filters_ready()}};dhtmlXGridObject.prototype.findCell=function(j,h,o,n){n=n||function(d,c){return c.toString().toLowerCase().indexOf(d)!=-1};n===!0&&(n=function(d,c){return c.toString().toLowerCase()==d});var m=[],j=j.toString().toLowerCase();typeof o!="number"&&(o=o?1:0);if(!this.rowsBuffer.length){return m}for(var l=h||0;l<this._cCount;l++){if(this._h2){this._h2.forEachChild(0,function(a){if(o&&m.length==o){return m}n(j,this._get_cell_value(a.buff,l))&&m.push([a.id,l])},this)}else{for(var k=0;k<this.rowsBuffer.length;k++){if(n(j,this._get_cell_value(this.rowsBuffer[k],l))&&(m.push([this.rowsBuffer[k].idd,l]),o&&m.length==o)){return m}}}if(typeof h!="undefined"){break}}return m};dhtmlXGridObject.prototype.makeSearch=function(f,e,h){typeof f!="object"&&(f=document.getElementById(f));if(f){var g=this;if(f.tagName=="INPUT"){f.onkeypress=function(){this._timer&&window.clearTimeout(this._timer);this._timer=window.setTimeout(function(){if(f.value!=""){var a=g.findCell(f.value,e,!0,h);a.length&&(g._h2&&g.openItem(a[0][0]),g.selectCell(g.getRowIndex(a[0][0]),e||0))}},500)}}f.parentNode&&(f.parentNode.className+=" filter")}};dhtmlXGridObject.prototype._loadSelectOptins=function(h,g){var m=this.collectValues(g),l=h.value;h.innerHTML="";h.options[0]=new Option("","");for(var k=this._filter_tr?this._filter_tr[g]:null,j=0;j<m.length;j++){h.options[h.options.length]=new Option(k?k(m[j]):m[j],m[j])}h.value=l};dhtmlXGridObject.prototype.setSelectFilterLabel=function(d,c){if(!this._filter_tr){this._filter_tr=[]}this._filter_tr[d]=c};dhtmlXGridObject.prototype._loadComboOptins=function(g,f){if(g.combo){var k=this.collectValues(f);g.combo.clearAll();g.combo.render(!1);for(var j=[["","&nbsp;"]],h=0;h<k.length;h++){j.push([k[h],k[h]])}g.combo.addOption(j);g.combo.render(!0)}};dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters){for(var b=0;b<this.filters.length;b++){switch(this.filters[b][0].tagName.toLowerCase()){case"select":this._loadSelectOptins.apply(this,this.filters[b]);break;case"div":this._loadComboOptins.apply(this,this.filters[b])}}}};dhtmlXGridObject.prototype._filters_ready=function(){this.attachEvent("onXLE",this.refreshFilters);this.attachEvent("onRowCreated",function(e,d){if(this._f_rowsBuffer){for(var f=0;f<this._f_rowsBuffer.length;f++){if(this._f_rowsBuffer[f].idd==e){return this._f_rowsBuffer[f]=d}}}});this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null;if(!this.hdr.rows.length){this.filters=[]}});window.dhtmlXCombo&&this.attachEvent("onScroll",dhtmlXCombo.prototype.closeAll);this._filters_ready=function(){}};dhtmlXGridObject.prototype._in_header_text_filter=function(d,c){d.innerHTML="<input type='text'>";d.onclick=d.onmousedown=function(b){return(b||event).cancelBubble=!0};d.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(d.firstChild,c)};dhtmlXGridObject.prototype._in_header_text_filter_inc=function(d,c){d.innerHTML="<input type='text'>";d.onclick=d.onmousedown=function(b){return(b||event).cancelBubble=!0};d.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(d.firstChild,c);d.firstChild._filter=function(){return d.firstChild.value==""?"":function(a){return a.toString().toLowerCase().indexOf(d.firstChild.value.toLowerCase())==0}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_select_filter=function(d,c){d.innerHTML="<select></select>";d.onclick=function(b){(b||event).cancelBubble=!0;return !1};this.makeFilter(d.firstChild,c)};dhtmlXGridObject.prototype._in_header_select_filter_strict=function(e,d){e.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>";e.onclick=function(b){(b||event).cancelBubble=!0;return !1};this.makeFilter(e.firstChild,d);var f=this.combos;e.firstChild._filter=function(){var a=e.firstChild.value;if(!a){return""}f[d]&&(a=f[d].keys[f[d].values._dhx_find(a)]);a=a.toLowerCase();return function(b){return b.toString().toLowerCase()==a}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_combo_filter=function(d,c){d.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>";d.onselectstart=function(){return event.cancelBubble=!0};d.onclick=d.onmousedown=function(b){return(b||event).cancelBubble=!0};this.makeFilter(d.firstChild,c)};dhtmlXGridObject.prototype._search_common=function(b){b.innerHTML="<input type='text' style='width:90%; '>";b.onclick=b.onmousedown=function(c){return(c||event).cancelBubble=!0};b.onselectstart=function(){return event.cancelBubble=!0}};dhtmlXGridObject.prototype._in_header_text_search=function(d,c){this._search_common(d,c);this.makeSearch(d.firstChild,c)};dhtmlXGridObject.prototype._in_header_text_search_strict=function(d,c){this._search_common(d,c);this.makeSearch(d.firstChild,c,!0)};dhtmlXGridObject.prototype._in_header_numeric_filter=function(d,c){this._in_header_text_filter.call(this,d,c);d.firstChild._filter=function(){var j=this.value,h,m="==",l=parseFloat(j.replace("=","")),k=null;if(j){if(j.indexOf("..")!=-1){return j=j.split(".."),l=parseFloat(j[0]),k=parseFloat(j[1]),function(b){return b>=l&&b<=k?!0:!1}}if(h=j.match(/>=|<=|>|</)){m=h[0],l=parseFloat(j.replace(m,""))}return Function("v"," if (v "+m+" "+l+" ) return true; return false;")}return""}};dhtmlXGridObject.prototype._in_header_master_checkbox=function(f,e,h){f.innerHTML=h[0]+"<input type='checkbox' />"+h[1];var g=this;f.getElementsByTagName("input")[0].onclick=function(b){g._build_m_order();var j=g._m_order?g._m_order[e]:e,d=this.checked?1:0;g.forEachRowA(function(k){var c=this.cells(k,j);if(c.isCheckbox()){c.setValue(d),c.cell.wasChanged=!0}this.callEvent("onEditCell",[1,k,j,d]);this.callEvent("onCheckbox",[k,j,d])});(b||event).cancelBubble=!0}};dhtmlXGridObject.prototype._in_header_stat_total=function(f,e,h){var g=function(){var b=0;this._build_m_order();for(var l=this._m_order?this._m_order[e]:e,k=0;k<this.rowsBuffer.length;k++){var j=parseFloat(this._get_cell_value(this.rowsBuffer[k],l));b+=isNaN(j)?0:j}return this._maskArr[l]?this._aplNF(b,l):Math.round(b*100)/100};this._stat_in_header(f,g,e,h,h)};dhtmlXGridObject.prototype._in_header_stat_multi_total=function(k,j,u){var s=u[1].split(":");u[1]="";for(var o=0;o<s.length;o++){s[o]=parseInt(s[o])}for(var n=function(){for(var b=0,h=0;h<this.rowsBuffer.length;h++){for(var f=1,d=0;d<s.length;d++){f*=parseFloat(this._get_cell_value(this.rowsBuffer[h],s[d]))}b+=isNaN(f)?0:f}return this._maskArr[j]?this._aplNF(b,j):Math.round(b*100)/100},m=[],l=0;l<s.length;l++){m[s[l]]=!0}this._stat_in_header(k,n,m,u,u)};dhtmlXGridObject.prototype._in_header_stat_max=function(f,e,h){var g=function(){this._build_m_order();var b=this._m_order?this._m_order[e]:e,k=-999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var j=0;j<this.rowsBuffer.length;j++){k=Math.max(k,parseFloat(this._get_cell_value(this.rowsBuffer[j],b)))}return this._maskArr[e]?this._aplNF(k,e):k};this._stat_in_header(f,g,e,h)};dhtmlXGridObject.prototype._in_header_stat_min=function(f,e,h){var g=function(){this._build_m_order();var b=this._m_order?this._m_order[e]:e,k=999999999;if(this.getRowsNum()==0){return"&nbsp;"}for(var j=0;j<this.rowsBuffer.length;j++){k=Math.min(k,parseFloat(this._get_cell_value(this.rowsBuffer[j],b)))}return this._maskArr[e]?this._aplNF(k,e):k};this._stat_in_header(f,g,e,h)};dhtmlXGridObject.prototype._in_header_stat_average=function(f,e,h){var g=function(){this._build_m_order();var b=this._m_order?this._m_order[e]:e,m=0,l=0;if(this.getRowsNum()==0){return"&nbsp;"}for(var k=0;k<this.rowsBuffer.length;k++){var j=parseFloat(this._get_cell_value(this.rowsBuffer[k],b));m+=isNaN(j)?0:j;l++}return this._maskArr[e]?this._aplNF(m/l,e):Math.round(m/l*100)/100};this._stat_in_header(f,g,e,h)};dhtmlXGridObject.prototype._in_header_stat_count=function(f,e,h){var g=function(){return this.getRowsNum()};this._stat_in_header(f,g,e,h)};dhtmlXGridObject.prototype._stat_in_header=function(h,g,m,l){var k=this,j=function(){this.dma(!0);h.innerHTML=(l[0]?l[0]:"")+g.call(this)+(l[1]?l[1]:"");this.dma(!1);this.callEvent("onStatReady",[])};if(!this._stat_events){this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var d=0;d<this._stat_events.length;d++){for(var c=0;c<4;c++){this.detachEvent(this._stat_events[d][c])}}this._stat_events=[]}})}this._stat_events.push([this.attachEvent("onGridReconstructed",j),this.attachEvent("onXLE",j),this.attachEvent("onFilterEnd",j),this.attachEvent("onEditCell",function(e,c,f){e==2&&(f==m||m&&m[f])&&j.call(this);return !0})]);h.innerHTML=""};dhtmlXGridObject.prototype.enableDragAndDrop=function(b){b=="temporary_disabled"?(this.dADTempOff=!1,b=!0):this.dADTempOff=!0;this.dragAndDropOff=convertStringToBoolean(b);this._drag_validate=!0;if(b){this.objBox.ondragstart=function(c){(c||event).cancelBubble=!0;return !1}}};dhtmlXGridObject.prototype.setDragBehavior=function(b){this.dadmodec=this.dadmodefix=0;switch(b){case"child":this.dadmode=0;this._sbmod=!1;break;case"sibling":this.dadmode=1;this._sbmod=!1;break;case"sibling-next":this.dadmode=1;this._sbmod=!0;break;case"complex":this.dadmode=2;this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}};dhtmlXGridObject.prototype.enableDragOrder=function(b){this._dndorder=convertStringToBoolean(b)};dhtmlXGridObject.prototype._checkParent=function(f,e){var h=this._h2.get[f.idd].parent;if(h.parent){for(var g=0;g<e.length;g++){if(e[g]==h.id){return !0}}return this._checkParent(this.rowsAr[h.id],e)}};dhtmlXGridObject.prototype._createDragNode=function(k,j){this.editStop();if(window.dhtmlDragAndDrop.dragNode){return null}if(!this.dADTempOff){return null}k.parentObject={};k.parentObject.treeNod=this;var u=this.callEvent("onBeforeDrag",[k.parentNode.idd,k._cellIndex,j]);if(!u){return null}var s=[];s[this.selMultiRows?s.length:0]=k.parentNode.idd;if(this.isTreeGrid()){for(var o=s.length-1;o>=0;o--){this._checkParent(this.rowsAr[s[o]],s)&&s.splice(o,1)}}var n=this;s.length&&this._dndorder&&s.sort(function(d,c){return n.rowsAr[d].rowIndex>n.rowsAr[c].rowIndex?1:-1});var m=this.getFirstParentOfType(_isIE?j.srcElement:j.target,"TD");if(m){this._dndExtra=m._cellIndex}this._dragged=[];for(o=0;o<s.length;o++){if(this.rowsAr[s[o]]){this._dragged[this._dragged.length]=this.rowsAr[s[o]],this.rowsAr[s[o]].treeNod=this}}k.parentObject.parentNode=k.parentNode;var l=document.createElement("div");l.innerHTML=u!==!0?u:this.rowToDragElement(k.parentNode.idd);l.style.position="absolute";l.className="dragSpanDiv";return l};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV");this._sdrgc.innerHTML="&nbsp;";this._sdrgc.className="gridDragLine";this.objBox.appendChild(this._sdrgc)};function dragContext(x,w,v,u,s,o,n,m,l,k){this.source=x||"grid";this.target=w||"grid";this.mode=v||"move";this.dropmode=u||"child";this.sid=s||0;this.tid=o;this.sobj=n||null;this.tobj=m||null;this.sExtra=l||null;this.tExtra=k||null;return this}dragContext.prototype.valid=function(){if(this.sobj!=this.tobj){return !0}if(this.sid==this.tid){return !1}if(this.target=="treeGrid"){for(var b=this.tid;b=this.tobj.getParentId(b);){if(this.sid==b){return !1}}}return !0};dragContext.prototype.close=function(){this.tobj=this.sobj=null};dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)};dragContext.prototype.set=function(d,c){this[d]=c;return this};dragContext.prototype.uid=function(){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];){this.nid+=(new Date).valueOf()}return this};dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):this.source=="tree"?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)};dragContext.prototype.attrs=function(){return this.source=="tree"?{}:this.sobj.rowsAr[this.sid]._attrs};dragContext.prototype.childs=function(){return this.source=="treeGrid"?this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null:null};dragContext.prototype.pid=function(){if(!this.tid){return 0}if(!this.tobj._h2){return 0}if(this.target=="treeGrid"){if(this.dropmode=="child"){return this.tid}else{var e=this.tobj.rowsAr[this.tid],d=this.tobj._h2.get[e.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&e.nextSibling){var f=this.tobj._h2.get[e.nextSibling.idd].parent.id;if(f==this.tid){return this.tid}if(f!=d){return f}}return d}}};dragContext.prototype.ind=function(){if(this.tid==window.unknown){return this.tobj.rowsBuffer.length}this.target=="treeGrid"&&(this.dropmode=="child"?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid)));var d=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&this.dropmode=="sibling"){var c=this.tobj.rowsAr[this.tid];if(c.nextSibling&&this._h2.get[c.nextSibling.idd].parent.id==this.tid){return d+1}}return d+1+(this.target=="treeGrid"&&d>=0&&this.tobj._h2.get[this.tobj.rowsBuffer[d].idd].state=="minus"?this.tobj._getOpenLenght(this.tobj.rowsBuffer[d].idd,0):0)};dragContext.prototype.img=function(){return this.target!="grid"&&this.sobj._h2?this.sobj.getItemImage(this.sid):null};dragContext.prototype.slist=function(){for(var d=[],c=0;c<this.sid.length;c++){d[d.length]=this.sid[c][this.source=="tree"?"id":"idd"]}return d.join(",")};dhtmlXGridObject.prototype._drag=function(D,C,A,y){if(this._realfake){return this._fake._drag()}var x=this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var w=A.parentNode,v=D.parentObject;if(!w.idd){w.grid=this,this.dadmodefix=0}var u=new dragContext(0,0,0,w.grid.dadmode==1||w.grid.dadmodec?"sibling":"child");if(v&&v.childNodes){u.set("source","tree").set("sobj",v.treeNod).set("sid",u.sobj._dragged)}else{if(!v){return !0}v.treeNod.isTreeGrid&&v.treeNod.isTreeGrid()&&u.set("source","treeGrid");u.set("sobj",v.treeNod).set("sid",u.sobj._dragged)}w.grid.isTreeGrid()?u.set("target","treeGrid"):u.set("dropmode","sibling");u.set("tobj",w.grid).set("tid",w.idd);var s=this.getFirstParentOfType(y,"TD");s&&u.set("tExtra",s._cellIndex);s&&u.set("sExtra",u.sobj._dndExtra);u.sobj.dpcpy&&u.set("mode","copy");if(u.tobj._realfake){u.tobj=u.tobj._fake}if(u.sobj._realfake){u.sobj=u.sobj._fake}u.tobj._clearMove();if(v&&v.treeNod&&v.treeNod._nonTrivialRow){v.treeNod._nonTrivialRow(this,u.tid,u.dropmode,v)}else{u.tobj.dragContext=u;if(!u.tobj.callEvent("onDrag",[u.slist(),u.tid,u.sobj,u.tobj,u.sExtra,u.tExtra])){return u.tobj.dragContext=null}var o=[];if(typeof u.sid=="object"){for(var n=u.copy(),m=0;m<u.sid.length;m++){if(n.set("alfa",!m).set("sid",u.sid[m][u.source=="tree"?"id":"idd"]).valid()){n.tobj._dragRoutine(n),n.target=="treeGrid"&&n.dropmode=="child"&&n.tobj.openItem(n.tid),o[o.length]=n.nid,n.set("dropmode","sibling").set("tid",n.nid)}}n.close()}else{u.tobj._dragRoutine(u)}u.tobj.laterLink&&u.tobj.laterLink();u.tobj.callEvent("onDrop",[u.slist(),u.tid,o.join(","),u.sobj,u.tobj,u.sExtra,u.tExtra])}u.tobj.dragContext=null;u.close()};dhtmlXGridObject.prototype._dragRoutine=function(x){if(x.sobj==x.tobj&&x.source=="grid"&&x.mode=="move"&&!this._fake){if(!x.sobj._dndProblematic){var w=x.sobj.rowsAr[x.sid],v=x.sobj.rowsCol._dhx_find(w);x.sobj.rowsCol._dhx_removeAt(x.sobj.rowsCol._dhx_find(w));x.sobj.rowsBuffer._dhx_removeAt(x.sobj.rowsBuffer._dhx_find(w));x.sobj.rowsBuffer._dhx_insertAt(x.ind(),w);if(x.tobj._fake){x.tobj._fake.rowsCol._dhx_removeAt(v);var u=x.tobj._fake.rowsAr[x.sid];u.parentNode.removeChild(u)}x.sobj._insertRowAt(w,x.ind());x.nid=x.sid;x.sobj.callEvent("onGridReconstructed",[])}}else{var s;this._h2&&typeof x.tid!="undefined"&&x.dropmode=="sibling"&&(this._sbmod||x.tid)?x.alfa&&this._sbmod&&this._h2.get[x.tid].childs.length?(this.openItem(x.tid),s=x.uid().tobj.addRowBefore(x.nid,x.data(),this._h2.get[x.tid].childs[0].id,x.img(),x.childs())):s=x.uid().tobj.addRowAfter(x.nid,x.data(),x.tid,x.img(),x.childs()):s=x.uid().tobj.addRow(x.nid,x.data(),x.ind(),x.pid(),x.img(),x.childs());s._attrs=x.attrs();if(x.source=="tree"){this.callEvent("onRowAdded",[x.nid]);var o=x.sobj._globalIdStorageFind(x.sid);if(o.childsCount){for(var n=x.copy().set("tid",x.nid).set("dropmode",x.target=="grid"?"sibling":"child"),m=0;m<o.childsCount;m++){x.tobj._dragRoutine(n.set("sid",o.childNodes[m].id)),x.mode=="move"&&m--}n.close()}}else{if(x.tobj._copyUserData(x),this.callEvent("onRowAdded",[x.nid]),x.source=="treeGrid"){if(x.sobj==x.tobj){s._xml=x.sobj.rowsAr[x.sid]._xml}var l=x.sobj._h2.get[x.sid];if(l&&l.childs.length){n=x.copy().set("tid",x.nid);x.target=="grid"?n.set("dropmode","sibling"):(n.tobj.openItem(x.tid),n.set("dropmode","child"));for(var k=l.childs.length,m=0;m<k;m++){if(x.sobj.render_row_tree(null,l.childs[m].id),x.tobj._dragRoutine(n.set("sid",l.childs[m].id)),k!=l.childs.length){m--,k=l.childs.length}}n.close()}}}if(x.mode=="move"&&(x.sobj[x.source=="tree"?"deleteItem":"deleteRow"](x.sid),x.sobj==x.tobj&&!x.tobj.rowsAr[x.sid])){x.tobj.changeRowId(x.nid,x.sid),x.nid=x.sid}}};dhtmlXGridObject.prototype.gridToGrid=function(f,e){for(var h=[],g=0;g<e.hdr.rows[0].cells.length;g++){h[g]=e.cells(f,g).getValue()}return h};dhtmlXGridObject.prototype.checkParentLine=function(d,c){return !this._h2||!c||!d?!1:d.id==c?!0:this.checkParentLine(d.parent,c)};dhtmlXGridObject.prototype._dragIn=function(h,g,m,l){if(!this.dADTempOff){return 0}var k=this.isTreeGrid(),j=g.parentNode.idd?g.parentNode:g.parentObject;if(this._drag_validate){if(h.parentNode==g.parentNode){return 0}if(k&&this==j.grid&&this.checkParentLine(this._h2.get[h.parentNode.idd],g.parentNode.idd)){return 0}}if(!this.callEvent("onDragIn",[j.idd||j.id,h.parentNode.idd,j.grid||j.treeNod,h.grid||h.parentNode.grid])){return this._setMove(h,m,l,!0)}this._setMove(h,m,l);k&&h.parentNode.expand!=""?(this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1000),this._autoOpenId=h.parentNode.idd):this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);return h};dhtmlXGridObject.prototype._autoOpenItem=function(d,c){c.openItem(c._autoOpenId)};dhtmlXGridObject.prototype._dragOut=function(d){this._clearMove();var c=d.parentNode.parentObject?d.parentObject.id:d.parentNode.idd;this.callEvent("onDragOut",[c]);this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)};dhtmlXGridObject.prototype._setMove=function(k,j,u,s){if(k.parentNode.idd){var o=getAbsoluteTop(k),n=getAbsoluteTop(this.objBox);if(o-n>parseInt(this.objBox.offsetHeight)-50){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20}if(o-n+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30){this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20}if(s){return 0}if(this.dadmode==2){var m=u-o+(document.body.scrollTop||document.documentElement.scrollTop)-2-k.offsetHeight/2;Math.abs(m)-k.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=m<0?-1:1):this.dadmodec=0}else{this.dadmodec=this.dadmode}if(this.dadmodec){this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=o-n+parseInt(this.objBox.scrollTop)+(this.dadmodefix>=0?k.offsetHeight:0)+"px"}else{if(this._llSelD=k,k.parentNode.tagName=="TR"){for(var l=0;l<k.parentNode.childNodes.length;l++){m=k.parentNode.childNodes[l],m._bgCol=m.style.backgroundColor,m.style.backgroundColor="#FFCCCC"}}}}};dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc){this._sdrgc.style.display="none"}if(this._llSelD&&this._llSelD.parentNode.tagName=="TR"){for(var d=this._llSelD.parentNode.childNodes,c=0;c<d.length;c++){d[c].style.backgroundColor=d[c]._bgCol}}this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(d){var c=this.cells(d,0).getValue();return c};dhtmlXGridObject.prototype._copyUserData=function(e){if(!e.tobj.UserData[e.nid]||e.tobj!=e.sobj){e.tobj.UserData[e.nid]=new Hashtable;var d=e.sobj.UserData[e.sid],f=e.tobj.UserData[e.nid];if(d){f.keys=f.keys.concat(d.keys),f.values=f.values.concat(d.values)}}};dhtmlXGridObject.prototype.moveRow=function(f,e,h,g){switch(e){case"row_sibling":this.moveRowTo(f,h,"move","sibling",this,g);break;case"up":this.moveRowUp(f);break;case"down":this.moveRowDown(f)}};dhtmlXGridObject.prototype.loadCSVFile=function(d,c){this.load(d,c,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(b){this._csvAID=convertStringToBoolean(b)};dhtmlXGridObject.prototype.enableCSVHeader=function(b){this._csvHdr=convertStringToBoolean(b)};dhtmlXGridObject.prototype.setCSVDelimiter=function(b){this.csv.cell=b};dhtmlXGridObject.prototype._csvAID=!0;dhtmlXGridObject.prototype.loadCSVString=function(b){this.parse(b,"csv")};dhtmlXGridObject.prototype.serializeToCSV=function(j){this.editStop();this._agetm=this._mathSerialization?"getMathValue":this._strictText||j?"getTitle":"getValue";var h=[];if(this._csvHdr){for(var o=1;o<this.hdr.rows.length;o++){for(var n=[],m=0;m<this._cCount;m++){(!this._srClmn||this._srClmn[m])&&n.push(this.getColumnLabel(m,o-1))}h.push(this.csvParser.str(n,this.csv.cell,this.csv.row))}}for(var m=0,l=this.rowsBuffer.length;m<l;m++){var k=this._serializeRowToCVS(null,m);k!=""&&h.push(k)}return this.csvParser.block(h,this.csv.row)};dhtmlXGridObject.prototype._serializeRowToCVS=function(D,C,A,y){var x=[];D||(D=this.render_row(C),this._fake&&!this._fake.rowsAr[D.idd]&&this._fake.render_row(C));if(!this._csvAID){x[x.length]=D.idd}for(var A=A||0,y=y||this._cCount,w=!1,v=A;D.childNodes[A]._cellIndex>v&&A;){A--}for(var u=A;v<y;u++){if(!D.childNodes[u]){break}var s=D.childNodes[u]._cellIndex;if((!this._srClmn||this._srClmn[s])&&(!this._serialize_visible||!this._hrrar[s])){for(var o=D.childNodes[u],n=this.cells(D.idd,s);v!=s;){if(v++,x.push(""),v>=y){break}}if(v>=y){break}v++;zxVal=n.cell?n[this._agetm]():"";this._chAttr&&n.wasChanged()&&(w=!0);x[x.length]=zxVal===null?"":zxVal;if(this._ecspn&&o.colSpan&&o.colSpan>1){for(var o=o.colSpan-1,m=0;m<o;m++){x[x.length]="",v++}}}else{v++}}return this._onlChAttr&&!w?"":this.csvParser.str(x,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(b){window.clipboardData?window.clipboardData.setData("Text",b):(new Clipboard).copy(b)};dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()};dhtmlXGridObject.prototype.cellToClipboard=function(e,d){if(!e||!d){if(!this.selectedRows[0]){return}e=this.selectedRows[0].idd;d=this.cell._cellIndex}var f=this.cells(e,d);this.toClipBoard(((f.getLabel?f.getLabel():f.getValue())||"").toString())};dhtmlXGridObject.prototype.updateCellFromClipboard=function(e,d){if(!e||!d){if(!this.selectedRows[0]){return}e=this.selectedRows[0].idd;d=this.cell._cellIndex}var f=this.cells(e,d);f[f.setImage?"setLabel":"setValue"](this.fromClipBoard())};dhtmlXGridObject.prototype.rowToClipboard=function(f){var e="";this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";if(f){e=this._serializeRowToCVS(this.getRowById(f))}else{for(var h=[],g=0;g<this.selectedRows.length;g++){h[h.length]=this._serializeRowToCVS(this.selectedRows[g]),e=this.csvParser.block(h,this.csv.row)}}this.toClipBoard(e)};dhtmlXGridObject.prototype.updateRowFromClipboard=function(h){var g=this.fromClipBoard();if(g){var m=h?this.getRowById(h):this.selectedRows[0];if(m){var l=this.csvParser,g=l.unblock(g,this.csv.cell,this.csv.row)[0];this._csvAID||g.splice(0,1);for(var k=0;k<g.length;k++){var j=this.cells3(m,k);j[j.setImage?"setLabel":"setValue"](g[k])}}}};dhtmlXGridObject.prototype.csvParser={block:function(d,c){return d.join(c)},unblock:function(h,g,m){for(var l=(h||"").split(m),k=0;k<l.length;k++){l[k]=(l[k]||"").split(g)}var j=l.length-1;l[j].length==1&&l[j][0]==""&&l.splice(j,1);return l},str:function(d,c){return d.join(c)}};dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('\\\\"',"g"),block:function(d,c){return d.join(c)},unblock:function(F,E,D){var C=[[]],A=0;if(!F){return C}for(var y=/^[ ]*"/,x=/"[ ]*$/,w=RegExp(".*"+D+".*$"),v=F.split(E),u=0;u<v.length;u++){if(v[u].match(y)){for(var s=v[u].replace(y,"");!v[u].match(x);){u++,s+=v[u]}C[A].push(s.replace(x,"").replace(this._quote_esc,'"'))}else{if(v[u].match(w)){var o=v[u].indexOf(D);C[A].push(v[u].substr(0,o));A++;C[A]=[];v[u]=v[u].substr(o+1);u--}else{(v[u]||u!=v.length-1)&&C[A].push(v[u])}}}var n=C.length-1;n>0&&!C[n].length&&C.splice(n,1);return C},str:function(e,d){for(var f=0;f<e.length;f++){e[f]='"'+e[f].replace(this._quote,'\\"')+'"'}return e.join(d)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var e=this.fromClipBoard();if(e){for(var d=this.csvParser.unblock(e,this.csv.cell,this.csv.row),f=0;f<d.length;f++){d[f]&&(e=d[f],e.length&&(this._csvAID?this.addRow(this.getRowsNum()+2,e):(this.rowsAr[e[0]]&&(e[0]=this.uid()),this.addRow(e[0],e.slice(1)))))}}};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var b=this.fromClipBoard();b&&this.loadCSVString(b)};dhtmlXGridObject.prototype.getXLS=function(j){if(!this.xslform){this.xslform=document.createElement("FORM");this.xslform.action=(j||"")+"xls.php";this.xslform.method="post";this.xslform.target=_isIE?"_blank":"";document.body.appendChild(this.xslform);var h=document.createElement("INPUT");h.type="hidden";h.name="csv";this.xslform.appendChild(h);var o=document.createElement("INPUT");o.type="hidden";o.name="csv_header";this.xslform.appendChild(o)}var n=this.serializeToCSV();this.xslform.childNodes[0].value=n;for(var m=[],l=this._cCount,k=0;k<l;k++){m.push(this.getHeaderCol(k))}m=m.join(",");this.xslform.childNodes[1].value=m;this.xslform.submit()};dhtmlXGridObject.prototype.printView=function(U,T){var S="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  </style>",Q=null;if(this._fake){for(var Q=[].concat(this._hrrar),P=0;P<this._fake._cCount;P++){this._hrrar[P]=null}}S+="<base  href='"+document.location.href+"'></base>";this.parentGrid||(S+=U||"");S+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var O=Math.max(this.rowsBuffer.length,this.rowsCol.length),N=this._cCount,L=this._printWidth();S+='<tr class="header_row_1">';for(P=0;P<N;P++){if(!this._hrrar||!this._hrrar[P]){for(var K=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(P)]:P],J=K.colSpan||1,I=K.rowSpan||1,H=1;H<J;H++){L[P]+=L[H]}S+='<td rowspan="'+I+'" width="'+L[P]+'%" style="background-color:lightgrey;" colspan="'+J+'">'+this.getHeaderCol(P)+"</td>";P+=J-1}}S+="</tr>";for(P=2;P<this.hdr.rows.length;P++){if(_isIE){S+="<tr style='background-color:lightgrey' class='header_row_"+P+"'>";for(var F=this.hdr.rows[P].childNodes,H=0;H<F.length;H++){if(!this._hrrar||!this._hrrar[F[H]._cellIndex]){S+=F[H].outerHTML}}S+="</tr>"}else{S+="<tr class='header_row_"+P+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[P].innerHTML:"")+this.hdr.rows[P].innerHTML+"</tr>"}}for(P=0;P<O;P++){if(S+="<tr>",this.rowsCol[P]&&this.rowsCol[P]._cntr){S+=this.rowsCol[P].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>"}else{if(!(this.rowsCol[P]&&this.rowsCol[P].style.display=="none")){var E;if(this.rowsCol[P]){E=this.rowsCol[P].idd}else{if(this.rowsBuffer[P]){E=this.rowsBuffer[P].idd}else{continue}}for(H=0;H<N;H++){if(!this._hrrar||!this._hrrar[H]){if(this.rowsAr[E]&&this.rowsAr[E].tagName=="TR"){var D=this.cells(E,H),C=D._setState?"":D.getContent?D.getContent():D.getImage||D.combo?D.cell.innerHTML:D.getValue()}else{C=this._get_cell_value(this.rowsBuffer[P],H)}var A=this.columnColor[H]?"background-color:"+this.columnColor[H]+";":"",y=this.cellAlign[H]?"text-align:"+this.cellAlign[H]+";":"",x=D.getAttribute("colspan");S+='<td style="'+A+y+'" '+(x?'colSpan="'+x+'"':"")+">"+(C===""?"&nbsp;":C)+"</td>";x&&(H+=x-1)}}S+="</tr>";if(this.rowsCol[P]&&this.rowsCol[P]._expanded){var u=this.cells4(this.rowsCol[P]._expanded.ctrl);S+=u.getSubGrid?'<tr><td colspan="'+N+'">'+u.getSubGrid().printView()+"</td></tr>":'<tr><td colspan="'+N+'">'+this.rowsCol[P]._expanded.innerHTML+"</td></tr>"}}}}if(this.ftr){for(P=1;P<this.ftr.childNodes[0].rows.length;P++){S+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[P].innerHTML:"")+this.ftr.childNodes[0].rows[P].innerHTML+"</tr>"}}S+="</table>";if(this.parentGrid){return S}S+=T||"";var w=window.open("","_blank");w.document.write(S);w.document.write("<script>window.onerror=function(){return true;}<\/script>");w.document.close();if(this._fake){this._hrrar=Q}};dhtmlXGridObject.prototype._printWidth=function(){for(var j=[],h=0,o=0;o<this._cCount;o++){var n=this.getColWidth(o);j.push(n);h+=n}for(var m=[],l=0,o=0;o<j.length;o++){var k=Math.floor(j[o]/h*100);l+=k;m.push(k)}m[m.length-1]+=100-l;return m};dhtmlXGridObject.prototype.loadObject=function(){};dhtmlXGridObject.prototype.loadJSONFile=function(){};dhtmlXGridObject.prototype.serializeToObject=function(){};dhtmlXGridObject.prototype.serializeToJSON=function(){};if(!window.clipboardData){window.clipboardData={_make:function(){var e=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!e){return null}var d=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!d){return null}d.addDataFlavor("text/unicode");var f=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);this._p=[e,d,f];return !0},setData:function(f,e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(h){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[f,e]),""}if(!this._make()){return !1}this._p[2].data=e;this._p[1].setTransferData("text/unicode",this._p[2],e.length*2);var g=Components.interfaces.nsIClipboard;this._p[0].setData(this._p[1],null,g.kGlobalClipboard)},getData:function(g){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(f){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[g]),""}if(!this._make()){return !1}this._p[0].getData(this._p[1],this._p[0].kGlobalClipboard);var k={},j={};try{this._p[1].getTransferData("text/unicode",j,k)}catch(h){return""}j&&(j=j.value.QueryInterface(Components.interfaces.nsISupportsString));return j?j.data.substring(0,k.value/2):""}}}dhtmlXGridObject.prototype.enableBlockSelection=function(d){if(typeof this._bs_mode=="undefined"){var c=this;this.obj.onmousedown=function(b){c._bs_mode&&c._OnSelectionStart(b||event,this);return !0};this._CSVRowDelimiter=this.csv.row;this.attachEvent("onResize",function(){c._HideSelection();return !0});this.attachEvent("onGridReconstructed",function(){c._HideSelection();return !0});this.attachEvent("onFilterEnd",this._HideSelection)}if(d===!1){return this._bs_mode=!1,this._HideSelection()}else{this._bs_mode=!0}};dhtmlXGridObject.prototype.forceLabelSelection=function(b){this._strictText=convertStringToBoolean(b)};dhtmlXGridObject.prototype.disableBlockSelection=function(){this.obj.onmousedown=null};dhtmlXGridObject.prototype._OnSelectionStart=function(h){var g=this;if(h.button!=2){var m=h.srcElement||h.target;if(this.editor){if(m.tagName&&(m.tagName=="INPUT"||m.tagName=="TEXTAREA")){return}this.editStop()}g.setActive(!0);var l=this.getPosition(this.obj),k=h.clientX-l[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),j=h.clientY-l[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));this._CreateSelection(k-4,j-4);if(m==this._selectionObj){this._HideSelection(),this._startSelectionCell=null}else{for(;m.tagName.toLowerCase()!="td";){m=m.parentNode}this._startSelectionCell=m}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex])){return this._startSelectionCell=null}this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(){g._blsTimer&&window.clearTimeout(g._blsTimer)};this.obj.onmmold=this.obj.onmousemove;this._init_pos=[k,j];this._selectionObj.onmousemove=this.obj.onmousemove=function(a){a=a||h;a.returnValue=!1;g._OnSelectionMove(a)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(a){a=a||h;g._OnSelectionStop(a,this);return !0};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return !1}}};dhtmlXGridObject.prototype._getCellByPos=function(f,e){this._fake&&(f+=this._fake.objBox.scrollHeight);for(var h=0,g=0;g<this.obj.rows.length;g++){if(e-=this.obj.rows[g].offsetHeight,e<=0){h=this.obj.rows[g];break}}if(!h||!h.idd){return null}for(g=0;g<this._cCount;g++){if(f-=this.getColWidth(g),f<=0){for(;;){if(h._childIndexes&&h._childIndexes[g+1]==h._childIndexes[g]){h=h.previousSibling}else{return this.cells(h.idd,g).cell}}}}return null};dhtmlXGridObject.prototype._OnSelectionMove=function(I){var H=this;this._ShowSelection();var F=this.getPosition(this.obj),E=I.clientX-F[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),D=I.clientY-F[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(Math.abs(this._init_pos[0]-E)<5&&Math.abs(this._init_pos[1]-D)<5){return this._HideSelection()}var C=this._endSelectionCell;if(this._startSelectionCell==null){this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(I.srcElement||I.target,"TD")}else{if(I.srcElement||I.target){if((I.srcElement||I.target).className=="dhtmlxGrid_selection"){this._endSelectionCell=this._getCellByPos(E,D)||this._endSelectionCell}else{var A=this.getFirstParentOfType(I.srcElement||I.target,"TD");if(A.parentNode.idd){this._endSelectionCell=A}}}}if(this._endSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])){this._endSelectionCell=C}var y=this.objBox.scrollLeft+this.objBox.clientWidth,x=this.objBox.scrollTop+this.objBox.clientHeight,w=this.objBox.scrollLeft,v=this.objBox.scrollTop,u=!1;this._blsTimer&&window.clearTimeout(this._blsTimer);E+20>=y?(this.objBox.scrollLeft+=20,u=!0):E-20<w&&(this.objBox.scrollLeft-=20,u=!0);D+20>=x&&!this._realfake?(this.objBox.scrollTop+=20,u=!0):D-20<v&&!this._realfake&&(this.objBox.scrollTop-=20,u=!0);this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);if(u){var s=I.clientX,o=I.clientY;this._blsTimer=window.setTimeout(function(){H._OnSelectionMove({clientX:s,clientY:o})},100)}};dhtmlXGridObject.prototype._OnSelectionStop=function(e){var d=this;this._blsTimer&&window.clearTimeout(this._blsTimer);this.obj.onmousedown=function(a){d._bs_mode&&d._OnSelectionStart(a||e,this);return !0};this.obj.onmousemove=this.obj.onmmold||null;this._selectionObj.onmousemove=null;document.body.onmouseup=this._oldDMP||null;if(parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2){this._HideSelection()}else{var f=this.getFirstParentOfType(e.srcElement||e.target,"TD");if(!f||!f.parentNode.idd){f=this._endSelectionCell}if(!f){return this._HideSelection()}for(;f.tagName.toLowerCase()!="td";){f=f.parentNode}this._stopSelectionCell=f;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}};dhtmlXGridObject.prototype._RedrawSelectionPos=function(I,H){var F={};F.LeftTopCol=I._cellIndex;F.LeftTopRow=this.getRowIndex(I.parentNode.idd);F.RightBottomCol=H._cellIndex;F.RightBottomRow=this.getRowIndex(H.parentNode.idd);var E=I.offsetWidth,D=I.offsetHeight,I=this.getPosition(I,this.obj),C=H.offsetWidth,A=H.offsetHeight,H=this.getPosition(H,this.obj);if(I[0]<H[0]){var y=I[0],x=H[0]+C}else{var w=F.RightBottomCol;F.RightBottomCol=F.LeftTopCol;F.LeftTopCol=w;y=H[0];x=I[0]+E}if(I[1]<H[1]){var v=I[1],u=H[1]+A}else{w=F.RightBottomRow,F.RightBottomRow=F.LeftTopRow,F.LeftTopRow=w,v=H[1],u=I[1]+D}var s=x-y,o=u-v;this._selectionObj.style.left=y+"px";this._selectionObj.style.top=v+"px";this._selectionObj.style.width=s+"px";this._selectionObj.style.height=o+"px";return F};dhtmlXGridObject.prototype._CreateSelection=function(e,d){if(this._selectionObj==null){var f=document.createElement("div");f.style.position="absolute";f.style.display="none";f.className="dhtmlxGrid_selection";this._selectionObj=f;this._selectionObj.onmousedown=function(b){b=b||event;if(b.button==2||_isMacOS&&b.ctrlKey){return this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",b])}};this._selectionObj.oncontextmenu=function(b){(b||event).cancelBubble=!0;return !1};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=e+"px";this._selectionObj.style.top=d+"px";this._selectionObj.startX=e;this._selectionObj.startY=d};dhtmlXGridObject.prototype._ShowSelection=function(){if(this._selectionObj){this._selectionObj.style.display=""}};dhtmlXGridObject.prototype._HideSelection=function(){if(this._selectionObj){this._selectionObj.style.display="none"}this._selectionArea=null};dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(this._selectionArea!=null){var e=[];this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue";this._serialize_visible=!0;for(var d=this._selectionArea.LeftTopRow;d<=this._selectionArea.RightBottomRow;d++){var f=this._serializeRowToCVS(this.rowsBuffer[d],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);e[e.length]=this._csvAID?f:f.substr(f.indexOf(this.csv.cell)+1)}e=e.join(this._CSVRowDelimiter);this.toClipBoard(e);this._serialize_visible=!1}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){var F=this.fromClipBoard();if(this._selectionArea!=null){var E=this._selectionArea.LeftTopRow,D=this._selectionArea.LeftTopCol}else{if(this.cell!=null&&!this.editor){E=this.getRowIndex(this.cell.parentNode.idd),D=this.cell._cellIndex}else{return !1}}var F=this.csvParser.unblock(F,this.csv.cell,this.csv.row),C=E+F.length,A=D+F[0].length;if(A>this._cCount){A=this._cCount}for(var y=0,x=E;x<C;x++){var w=this.render_row(x);if(w!=-1){for(var v=0,u=D;u<A;u++){if(this._hrrar[u]){A=Math.max(A+1,this._cCount)}else{var s=this.cells3(w,u);if(s.isDisabled()){v++}else{this._onEditUndoRedo&&this._onEditUndoRedo(2,w.idd,u,F[y][v],s.getValue());if(s.combo){for(var o=s.combo.values,n=0;n<o.length;n++){if(F[y][v]==o[n]){s.setValue(s.combo.keys[n]);o=null;break}}o!=null&&s.editable?s.setValue(F[y][v++]):v++}else{s[s.setImage?"setLabel":"setValue"](F[y][v++])}s.cell.wasChanged=!0}}}this.callEvent("onRowPaste",[w.idd]);y++}}};dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:this.getSelectedRowId()!==null?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null};dhtmlXGridObject.prototype.enableSmartRendering=function(e,d,f){arguments.length>2&&(d&&!this.rowsBuffer[d-1]&&(this.rowsBuffer[d-1]=0),d=f);this._srnd=convertStringToBoolean(e);this._srdh=this._srdh||20;this._dpref=d||0};dhtmlXGridObject.prototype.enablePreRendering=function(b){this._srnd_pr=parseInt(b||50)};dhtmlXGridObject.prototype.forceFullLoading=function(g,f){for(var k=0;k<this.rowsBuffer.length;k++){if(!this.rowsBuffer[k]){var j=g||this.rowsBuffer.length-k;if(this.callEvent("onDynXLS",[k,j])){var h=this;this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+k+"&count="+j,function(){window.setTimeout(function(){h.forceFullLoading(g,f)},100)},this._data_type)}return}}f&&f.call(this)};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(b){this._srdh=parseInt(b)};dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};dhtmlXGridObject.prototype._add_filler=function(j,h,o,n){if(!h){return null}var m="__filler__",l=this._prepareRow(m);l.firstChild.style.width="1px";for(var k=1;k<l.childNodes.length;k++){l.childNodes[k].style.display="none"}l.firstChild.style.height=h*this._srdh+"px";(o=o||this.rowsCol[j])&&o.nextSibling?o.parentNode.insertBefore(l,o.nextSibling):_isKHTML?this.obj.appendChild(l):this.obj.rows[0].parentNode.appendChild(l);this.callEvent("onAddFiller",[j,h,l,o,n]);return[j,h,l]};dhtmlXGridObject.prototype._update_srnd_view=function(){var j=Math.floor(this.objBox.scrollTop/this._srdh),h=j+this._get_view_size();if(this.multiLine){for(var o=this.objBox.scrollTop,j=0;o>0;){o-=this.rowsCol[j]?this.rowsCol[j].offsetHeight:this._srdh,j++}h=j+this._get_view_size();j>0&&j--}h+=this._srnd_pr||0;if(h>this.rowsBuffer.length){h=this.rowsBuffer.length}for(var n=j;n<h;n++){if(!this.rowsCol[n]){var m=this._add_from_buffer(n);if(m==-1){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[h-1]){var l=this._dpref?this._dpref:h-n,k=Math.max(0,h-this._dpref);this._current_load=[k,h-k]}else{this._current_load=[n,this._dpref?this._dpref:h-n]}this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}return}else{if(this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n]),this._updateParentLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n])),n&&n==(this._realfake?this._fake:this)._r_select){this.selectCell(n,this.cell?this.cell._cellIndex:0,!0)}}}}if(this._fake&&!this._realfake&&this.multiLine){this._fake.objBox.scrollTop=this.objBox.scrollTop}};dhtmlXGridObject.prototype._add_from_buffer=function(h){var g=this.render_row(h);if(g==-1){return -1}if(g._attrs.selected||g._attrs.select){this.selectRow(g,!1,!0),g._attrs.selected=g._attrs.select=null}if(this._cssSP){if(this._h2){var m=this._h2.get[g.idd];g.className+=" "+(m.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+m.level+(this.rowsAr[m.id]._css||"")}}else{if(this._cssEven&&h%2==0){g.className=this._cssEven+(g.className.indexOf("rowselected")!=-1?" rowselected ":" ")+(g._css||"")}else{if(this._cssUnEven&&h%2==1){g.className=this._cssUnEven+(g.className.indexOf("rowselected")!=-1?" rowselected ":" ")+(g._css||"")}}}for(var l=0;l<this._fillers.length;l++){var k=this._fillers[l];if(k&&k[0]<=h&&k[0]+k[1]>h){var j=h-k[0];j==0?(this._insert_before(h,g,k[2]),this._update_fillers(l,-1,1)):j==k[1]-1?(this._insert_after(h,g,k[2]),this._update_fillers(l,-1,0)):(this._fillers.push(this._add_filler(h+1,k[1]-j-1,k[2],1)),this._insert_after(h,g,k[2]),this._update_fillers(l,-k[1]+j,0));break}}};dhtmlXGridObject.prototype._update_fillers=function(f,e,h){var g=this._fillers[f];g[1]+=e;g[0]+=h;g[1]?(g[2].firstChild.style.height=parseFloat(g[2].firstChild.style.height)+e*this._srdh+"px",this.callEvent("onUpdateFiller",[g[2]])):(this.callEvent("onRemoveFiller",[g[2]]),g[2].parentNode.removeChild(g[2]),this._fillers.splice(f,1))};dhtmlXGridObject.prototype._insert_before=function(e,d,f){f.parentNode.insertBefore(d,f);this.rowsCol[e]=d;this.callEvent("onRowInserted",[d,null,f,"before"])};dhtmlXGridObject.prototype._insert_after=function(e,d,f){f.nextSibling?f.parentNode.insertBefore(d,f.nextSibling):f.parentNode.appendChild(d);this.rowsCol[e]=d;this.callEvent("onRowInserted",[d,null,f,"after"])};function dhtmlXGridFromTable(a,b){typeof a!="object"&&(a=document.getElementById(a));var c=document.createElement("DIV");c.setAttribute("width",a.getAttribute("gridWidth")||(a.offsetWidth?a.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(a,null).width:a.currentStyle?a.currentStyle.width:0));c.setAttribute("height",a.getAttribute("gridHeight")||(a.offsetHeight?a.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(a,null).height:a.currentStyle?a.currentStyle.height:0));c.className=a.className;a.className="";if(a.id){c.id=a.id}var d=a,e=a.getAttribute("dragAndDrop");d.parentNode.insertBefore(c,d);var f=d.getAttribute("name")||"name_"+(new Date).valueOf(),g=new dhtmlXGridObject(c);window[f]=g;var h=d.getAttribute("onbeforeinit"),i=d.getAttribute("oninit");h&&eval(h);g.setImagePath(g.imgURL||d.getAttribute("imgpath")||d.getAttribute("image_path")||"");var j=d.getAttribute("skin");j&&g.setSkin(j);b&&b(g);for(var k=d.rows[0],l="",m="",n="",o="",p="",q=0;q<k.cells.length;q++){l+=(l?",":"")+k.cells[q].innerHTML;var r=k.cells[q].getAttribute("width")||k.cells[q].offsetWidth||(window.getComputedStyle?window.getComputedStyle(k.cells[q],null).width:k.cells[q].currentStyle?k.cells[q].currentStyle.width:0);m+=(m?",":"")+(r=="*"?r:parseInt(r));n+=(n?",":"")+(k.cells[q].getAttribute("align")||"left");o+=(o?",":"")+(k.cells[q].getAttribute("type")||"ed");p+=(p?",":"")+(k.cells[q].getAttribute("sort")||"str");var s=k.cells[q].getAttribute("format");if(s){k.cells[q].getAttribute("type").toLowerCase().indexOf("calendar")!=-1?g._dtmask=s:g.setNumberFormat(s,q)}}g.setHeader(l);g.setInitWidths(m);g.setColAlign(n);g.setColTypes(o);g.setColSorting(p);a.getAttribute("gridHeight")=="auto"&&g.enableAutoHeigth(!0);a.getAttribute("multiline")&&g.enableMultiline(!0);var v=d.getAttribute("lightnavigation");v&&g.enableLightMouseNavigation(v);var t=d.getAttribute("evenrow"),u=d.getAttribute("unevenrow");(t||u)&&g.enableAlterCss(t,u);e&&g.enableDragAndDrop(!0);g.init();a.getAttribute("split")&&g.splitAt(a.getAttribute("split"));g._process_inner_html(d,1);i&&eval(i);a.parentNode&&a.parentNode.removeChild&&a.parentNode.removeChild(a);return g}dhtmlXGridObject.prototype._process_html=function(e){if(e.tagName&&e.tagName=="TABLE"){return this._process_inner_html(e,0)}var d=document.createElement("DIV");d.innerHTML=e.xmlDoc.responseText;var f=d.getElementsByTagName("TABLE")[0];this._process_inner_html(f,0)};dhtmlXGridObject.prototype._process_inner_html=function(g,f){for(var k=g.rows.length,j=f;j<k;j++){var h=g.rows[j].getAttribute("id")||j;this.rowsBuffer.push({idd:h,data:g.rows[j],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset();this.setSizes()};dhtmlXGridObject.prototype._process_html_row=function(k,j){var u=j.getElementsByTagName("TD"),s=[];k._attrs=this._xml_attrs(j);for(var o=0;o<u.length;o++){var n=u[o],m=n.getAttribute("type");if(k.childNodes[o]){if(m){k.childNodes[o]._cellType=m}k.childNodes[o]._attrs=this._xml_attrs(u[o])}n.firstChild?s.push(n.innerHTML):s.push("");if(n.colSpan>1){k.childNodes[o]._attrs.colspan=n.colSpan;for(var l=1;l<n.colSpan;l++){s.push("")}}}for(;o<k.childNodes.length;o++){k.childNodes[o]._attrs={}}this._fillRow(k,this._c_order?this._swapColumns(s):s);return k};dhtmlXGridObject.prototype._get_html_data=function(d,c){for(d=d.firstChild;;){if(!d){return""}d.tagName=="TD"&&c--;if(c<0){break}d=d.nextSibling}return d.firstChild?d.firstChild.data:""};dhtmlxEvent(window,"load",function(){for(var d=document.getElementsByTagName("table"),c=0;c<d.length;c++){d[c].className=="dhtmlxGrid"&&dhtmlXGridFromTable(d[c])}});dhtmlxValidation=function(){};dhtmlxValidation.prototype={trackInput:function(f,e,h,g){dhtmlxEvent(f,"keyup",function(){if(dhtmlxValidation._timer){window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null}dhtmlxValidation._timer=window.setTimeout(function(){if(dhtmlxValidation.checkInput(f,e)){f.className=f.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),g&&g(f,f.value,e)}else{if(!h||h(f,f.value,e)){f.className+=" dhtmlx_live_validation_error"}}},250)})},checkInput:function(d,c){return this.checkValue(d.value,c)},checkValue:function(f,e){typeof e=="string"&&(e=e.split(","));for(var h=!0,g=0;g<e.length;g++){this["is"+e[g]]?h=h&&this["is"+e[g]](f):alert("Incorrect validation rule: "+e[g])}return h},isEmpty:function(b){return b==""},isNotEmpty:function(b){return !b==""},isValidBoolean:function(b){return !!b.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(b){return !!b.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(b){return !!b.toString().match(/(^-?\d+$)/)},isValidNumeric:function(b){return !!b.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(b){return !!b.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(d){var c=d.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return c&&!!(c[1]<=9999&&c[2]<=12&&c[3]<=31&&c[4]<=59&&c[5]<=59&&c[6]<=59)||!1},isValidDate:function(d){var c=d.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return c&&!!(c[1]<=9999&&c[2]<=12&&c[3]<=31)||!1},isValidTime:function(d){var c=d.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return c&&!!(c[1]<=24&&c[2]<=59&&c[3]<=59)||!1},isValidIPv4:function(d){var c=d.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return c&&!!(c[1]<=255&&c[2]<=255&&c[3]<=255&&c[4]<=255)||!1},isValidCurrency:function(b){return b.toString().match(/^\$?\s?\d+?[\.,\,]?\d+?\s?\$?$/)&&!0||!1},isValidSSN:function(b){return b.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(b){return b.toString().match(/^\d{9}$/)&&!0||!1}};dhtmlxValidation=new dhtmlxValidation;dhtmlXGridObject.prototype.enableValidation=function(d,c){this._validators=(d=convertStringToBoolean(d))?{data:[]}:!1;if(arguments.length>1){this._validators._live=c}if(!this._validators._event){this._validators._event=this.attachEvent("onEditCell",this.validationEvent)}};dhtmlXGridObject.prototype.setColValidators=function(b){this._validators||this.enableValidation(!0);typeof b=="string"&&(b=b.split(this.delim));this._validators.data=b};dhtmlXGridObject.prototype.validationEvent=function(k,j,u,s){var o=this._validators;if(!o){return !0}var n=o.data[u]||this.cells(j,u).getAttribute("validate")||"";if(k==1&&n){var m=this.editor||(this._fake||{}).editor;if(!m){return !0}m.cell.className=m.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");if(o._live){var l=this;dhtmlxValidation.trackInput(m.getInput(),n,function(b,f,c){return l.callEvent("onLiveValidationError",[j,u,f,b,c])},function(b,f,c){return l.callEvent("onLiveValidationCorrect",[j,u,f,b,c])})}}k==2&&this.validateCell(j,u,n,s);return !0};dhtmlXGridObject.prototype.validateCell=function(j,h,o,n){o=o||this._validators.data[h]||this.cells(j,h).getAttribute("validate");n=n||this.cells(j,h).getValue();if(o){var m=this.cells(j,h).cell,l=!0;typeof o=="string"&&(o=o.split(this.delim));for(var k=0;k<o.length;k++){dhtmlxValidation.checkValue(n,o[k])||(this.callEvent("onValidationError",[j,h,n,o[k]])&&(m.className+=" dhtmlx_validation_error"),l=!1)}if(l){this.callEvent("onValidationCorrect",[j,h,n,o]),m.className=m.className.replace(/[ ]*dhtmlx_validation_error/g,"")}return l}};function eXcell_dhxCalendar(f){if(f&&(this.cell=f,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var h=this.grid;e.attachEvent("onClick",function(){this._last_operation_calendar=!0;window.setTimeout(function(){h.editStop()},1);return !0});var g=function(b){(b||event).cancelBubble=!0};dhtmlxEvent(e.base,"click",g);e=null}}eXcell_dhxCalendar.prototype=new eXcell;eXcell_dhxCalendar.prototype.edit=function(){var d=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(d[0],d[1]+this.cell.offsetHeight);this.grid._grid_calendarA._last_operation_calendar=!1;this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;var c=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val||new Date);this.grid._grid_calendarA.draw=c};eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;if(this.grid._grid_calendarA._last_operation_calendar){var e=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),d=this.grid._grid_calendarA.getDate();this.cell.val=new Date(d);this.setCValue(e,d);this.cell._clearCell=!e;var f=this.val;this.val=this._val;return this.cell.val.valueOf()!=f}return !1}};eXcell_dhxCalendar.prototype.setValue=function(b){b&&typeof b=="object"?(this.cell.val=b,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",b).toString(),this.cell.val)):(!b||b.toString()._dhx_trim()==""?(b="&nbsp",this.cell._clearCell=!0,this.cell.val=""):(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",b.toString(),null,!0)),this.grid._dtmask_inc&&(b=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))),this.cell.val=="NaN"||this.cell.val=="Invalid Date"?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((b||"").toString(),this.cell.val))};function eXcell_dhxCalendarA(f){if(f&&(this.cell=f,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var h=this.grid;e.attachEvent("onClick",function(){this._last_operation_calendar=!0;window.setTimeout(function(){h.editStop()},1);return !0});var g=function(b){(b||event).cancelBubble=!0};dhtmlxEvent(e.base,"click",g)}}eXcell_dhxCalendarA.prototype=new eXcell;eXcell_dhxCalendarA.prototype.edit=function(){var d=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(d[0]*1+this.cell.offsetWidth,d[1]*1);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=!1;this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;var c=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.draw=c;this.grid._grid_calendarA.draw();this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=this.cell.offsetHeight-(_isIE?4:2)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(b){(b||event).cancelBubble=!0};this.obj.onmousedown=function(b){(b||event).cancelBubble=!0};this.obj.value=this.getValue();this.cell.innerHTML="";this.cell.appendChild(this.obj);if(_isFF&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40)){this.obj.style.height="36px",this.obj.style.overflow="scroll"}this.obj.onselectstart=function(b){b||(b=event);return b.cancelBubble=!0};this.obj.focus();this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){this.cell._cediton=!1;if(this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var e=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),d=this.grid._grid_calendarA.getDate();this.cell.val=new Date(d);this.setCValue(e,d);this.cell._clearCell=!e;var f=this.val;this.val=this._val;return this.cell.val.valueOf()!=(f|0).valueOf()}this.setValue(this.obj.value);f=this.val;this.val=this._val;return this.cell.val.valueOf()!=(f||"").valueOf()}};eXcell_dhxCalendarA.prototype.setValue=function(b){b&&typeof b=="object"?(this.cell.val=b,this.cell._clearCell=!1,this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",b).toString(),this.cell.val)):(!b||b.toString()._dhx_trim()==""?(b="&nbsp",this.cell._clearCell=!0,this.cell.val=""):(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",b.toString(),null,!0)),this.grid._dtmask_inc&&(b=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))),this.cell.val=="NaN"||this.cell.val=="Invalid Date"?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((b||"").toString(),this.cell.val))};function eXcell_cntr(b){this.cell=b;this.grid=this.cell.parentNode.grid;if(!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEn",function(){this.resetCounter(b._cellIndex)}),this.grid.attachEvent("onBeforeSorting",function(){var a=this;window.setTimeout(function(){a.resetCounter&&(a._fake&&!a._realfake&&b._cellIndex<a._fake._cCount?a._fake.resetCounter(b._cellIndex):a.resetCounter(b._cellIndex))},1);return !0})}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(){this.cell.style.paddingRight="2px";var c=this.cell;window.setTimeout(function(){if(c.parentNode){var a=c.parentNode.rowIndex;if(c.parentNode.grid.currentPage||a<0||c.parentNode.grid._srnd){a=c.parentNode.grid.rowsBuffer._dhx_find(c.parentNode)+1}if(!(a<=0)){c.innerHTML=a,c.parentNode.grid._fake&&c._cellIndex<c.parentNode.grid._fake._cCount&&c.parentNode.grid._fake.rowsAr[c.parentNode.idd]&&c.parentNode.grid._fake.cells(c.parentNode.idd,c._cellIndex).setCValue(a),c=null}}},100)}}dhtmlXGridObject.prototype.resetCounter=function(d){this._fake&&!this._realfake&&d<this._fake._cCount&&this._fake.resetCounter(d,this.currentPage);var c=d||0;this.currentPage&&(c=(this.currentPage-1)*this.rowsBufferOutSize);for(c=0;c<this.rowsBuffer.length;c++){if(this.rowsBuffer[c]&&this.rowsBuffer[c].tagName=="TR"&&this.rowsAr[this.rowsBuffer[c].idd]){this.rowsAr[this.rowsBuffer[c].idd].childNodes[d].innerHTML=c+1}}};eXcell_cntr.prototype=new eXcell;function eXcell_link(b){this.cell=b;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return !0};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var c=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(c?"^"+c:"")}else{return""}};this.setValue=function(d){if(typeof d!="number"&&(!d||d.toString()._dhx_trim()=="")){return this.setCValue("&nbsp;",e),this.cell._clearCell=!0}var e=d.split("^");e.length==1?e[1]="":e.length>1&&(e[1]="href='"+e[1]+"'",e[1]+=e.length==3?" target='"+e[2]+"'":" target='_blank'");this.setCValue("<a "+e[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+e[0]+"</a>",e)}}eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var b=this.cell.firstChild;return b&&b.tagName?b.getAttribute("href"):""};eXcell_link.prototype.getContent=function(){var b=this.cell.firstChild;return b&&b.tagName?b.innerHTML:""};function dhtmlXLayoutPanel(){}function dhtmlXLayoutObject(h,g,m){if(window.dhtmlXContainer){var l=this;this._autodetectSkin=function(){var d=document.createElement("DIV");d.className="dhxlayout_skin_detect";document.body.childNodes.length>0?document.body.insertBefore(d,document.body.childNodes[0]):document.body.appendChild(d);var c=d.offsetWidth;document.body.removeChild(d);d=null;return c==199?"dhx_skyblue":c==299?"dhx_blue":c==399?"dhx_black":c==499?"dhx_web":c==599?"dhx_terrace":"dhx_skyblue"};this.skin=m!=null?m:typeof dhtmlx!="undefined"&&typeof dhtmlx.skin=="string"?dhtmlx.skin:this._autodetectSkin();this.setSkin=function(d){if(this.skinParams[d]){this.skin=d;this._CPanelHeight=this.skinParams[this.skin].cpanel_height;this._collapsedW=this.skinParams[this.skin].cpanel_collapsed_width;this._collapsedH=this.skinParams[this.skin].cpanel_collapsed_height;this.tpl.className="dhtmlxLayoutPolyContainer_"+this.skin+(this._r?" dhxlayout_rtl":"");this.sizer.className="dhxLayout_Sizer_"+this.skin;this.dhxWins&&this.dhxWins.setSkin(this.skin);for(var c in this.polyObj){this.polyObj[c].skin=this.skin}this.base.skin=this.skin;this._fixIcons();this.setSizes()}};this._isIPad=navigator.userAgent.search(/iPad/gi)>=0;this._dblClickTM=600;this._mBottom=this._mTop=0;typeof h=="string"&&(h=document.getElementById(h));if((h._isWindow==!0||h._isCell)&&!this.base){if(h._isCell&&h.attachLayout){return h.attachLayout(g,m)}if(h.isWindow){return h.attachLayout(g,m)}this.base=h}if(h==document.body&&!this.base){document.body.style.overflow="hidden"}if((typeof h=="object"||h==document.body)&&!this.base){var k=document.createElement("DIV");k.className="dhxcont_global_layout_area";h.appendChild(k);h._isLayout=!0;this.cont=new dhtmlXContainer(h);this.cont.setContent(k);if(h==document.body){if(this.skin=="dhx_skyblue"||this.skin=="dhx_blue"){this.cont.obj._offsetTop=2,this.cont.obj._offsetLeft=2,this.cont.obj._offsetHeight=-4,this.cont.obj._offsetWidth=-4}if(this.skin=="dhx_web"){this.cont.obj._offsetTop=9,this.cont.obj._offsetLeft=9,this.cont.obj._offsetHeight=-18,this.cont.obj._offsetWidth=-18}if(this.skin=="dhx_terrace"){this.cont.obj._offsetTop=14,this.cont.obj._offsetLeft=14,this.cont.obj._offsetHeight=-28,this.cont.obj._offsetWidth=-28}document.body.className+=" dhxlayout_fullscreened"}h.adjustContent(h,this._mTop,null,null,this._mBottom);this.base=document.createElement("DIV");this.base.style.overflow="hidden";this.base.style.position="absolute";this.base.style.left="0px";this.base.style.top="0px";this.base.style.width=k.childNodes[0].style.width;this.base.style.height=k.childNodes[0].style.height;k.childNodes[0].appendChild(this.base);if(h==document.body){this._lw=this._tmTime=null,this._doOnResizeStart=function(){window.clearTimeout(this._tmTime);this._tmTime=window.setTimeout(function(){l._doOnResizeEnd()},200)},this._doOnResizeEnd=function(){this.setSizes(!1)},_isIE?window.attachEvent("onresize",l._doOnResizeStart):window.addEventListener("resize",l._doOnResizeStart,!1)}h._doOnAttachToolbar=function(){l!=null&&typeof l.setSizes=="function"&&l.setSizes()}}this.items=[];this.cells=function(b){return this.polyObj[b]!=null?this.polyObj[b]:null};this.getIdByIndex=function(b){return b<0?null:b>=this.items.length?null:this.items[b]._idd};this.getIndexById=function(b){return this.cells(b)!=null?this.cells(b).getIndex():null};this.imagePath=dhtmlx.image_path||"codebase/imgs/";this.setImagePath=function(b){this.imagePath=b};this.polyObj={};this.sepHor=[];this.sepVer=[];this._layoutView=g!=null?String(g).toUpperCase():"3E";this._minHeight=this._minWidth=40;this._CPanelBtnsWidth=32;this.skinParams={dhx_black:{hor_sep_height:5,ver_sep_width:5,cpanel_height:34,cpanel_collapsed_width:18,cpanel_collapsed_height:18},dhx_blue:{hor_sep_height:5,ver_sep_width:5,cpanel_height:34,cpanel_collapsed_width:18,cpanel_collapsed_height:18},dhx_skyblue:{hor_sep_height:5,ver_sep_width:5,cpanel_height:26,cpanel_collapsed_width:18,cpanel_collapsed_height:18},dhx_web:{hor_sep_height:9,ver_sep_width:9,cpanel_height:27,cpanel_collapsed_width:18,cpanel_collapsed_height:18,cell_pading_max:1,cell_pading_min:0},dhx_terrace:{hor_sep_height:14,ver_sep_width:14,cpanel_height:37,cpanel_collapsed_width:18,cpanel_collapsed_height:18,cell_pading_max:1,cell_pading_min:0}};this._CPanelHeight=this.skinParams[this.skin].cpanel_height;this._collapsedW=this.skinParams[this.skin].cpanel_collapsed_width;this._collapsedH=this.skinParams[this.skin].cpanel_collapsed_height;this.tpl=document.createElement("TABLE");this.tpl.dir="ltr";this.tpl.className="dhtmlxLayoutPolyContainer_"+this.skin;this.tpl.cellSpacing=0;this.tpl.cellPadding=0;var j=document.createElement("TBODY");this.tpl.appendChild(j);this.tpl.border=0;this.tplSizes={};this._effects={collapse:!1,resize:!1,highlight:!0};this.sizer=document.createElement("DIV");this.sizer.className="dhxLayout_Sizer_"+this.skin;this.sizer.style.display="none";document.body.appendChild(this.sizer);this._attachSizer=function(b){l.sizer.style.left=getAbsoluteLeft(b)+"px";l.sizer.style.top=getAbsoluteTop(b)+"px";l.sizer.style.width=b.offsetWidth+"px";l.sizer.style.height=b.offsetHeight+"px";if(l._sizerML!=null){l.sizer.style.marginLeft=l._sizerML+"px"}if(l._sizerMT!=null){l.sizer.style.marginTop=l._sizerMT+"px"}l.sizer.style.display="";l.sizer.className="dhxLayout_Sizer_"+l.skin;b._dir!=null&&(l.sizer.className+=" "+(b._dir=="hor"?"dhxCursorNResize":"dhxCursorWResize"))};this.listViews=function(){var d=[],c;for(c in this.tplData){d[d.length]=c}return d};this._init=function(){this.obj=document.createElement("DIV");this.obj.className="dhtmlxLayoutObject";this.base.appendChild(this.obj);this.obj.appendChild(this.tpl);this.w=this.obj.offsetWidth;this.h=this.obj.offsetHeight;this._xmlLoader.loadXMLString(this.tplData[this._layoutView]!=null?this.tplData[this._layoutView]:this.tplData["3E"]);this._initWindows()};this._autoHor=[];this._autoVer=[];this._dimension=[320,200];this._colsRatio=this._rowsRatio=100;this._xmlParser=function(){for(var au=[],at=[],ar={},aq=this.getXMLTopNode("layout"),ap=0;ap<aq.childNodes.length;ap++){if(aq.childNodes[ap].tagName=="row"){var ao=aq.childNodes[ap],an=document.createElement("TR");l.tpl.childNodes[0].appendChild(an);for(var am=0;am<ao.childNodes.length;am++){if(ao.childNodes[am].tagName=="cell"){var al=ao.childNodes[am],ak=document.createElement("TD");ak._dir="null";if(al.getAttribute("obj")!=null){for(var ai=al.getAttribute("obj"),ag=String(al.getAttribute("wh")).split(","),ae=isNaN(ag[0]),Y=isNaN(ag[0])?parseInt(l.polyObj[ag[0]].style.width):0,ac=0;ac<au.length;ac++){for(var aa=0;aa<au[ac].length;aa++){if(au[ac][aa]==ai){if(!ae){for(var ae=!0,U=l.base.offsetWidth-ar[ai][0]*l.skinParams[l.skin].ver_sep_width,Q=0;Q<au[ac].length;Q++){isNaN(au[ac][Q])||(U-=au[ac][Q],ag[0]-=1)}Y=Math.ceil(U/ag[0])}au[ac][aa]=Y}}}ak.style.width=Y+"px";for(var ae=isNaN(ag[1]),O=isNaN(ag[1])?parseInt(l.polyObj[ag[1]].style.height):0,ac=0;ac<at.length;ac++){for(aa=0;aa<at[ac].length;aa++){if(at[ac][aa]==ai){if(!ae){for(var ae=!0,ah=l.base.offsetHeight-ar[ai][1]*l.skinParams[l.skin].hor_sep_height,Q=0;Q<at.length;Q++){isNaN(at[Q][aa])||(ah-=at[Q][aa],ag[1]-=1)}O=Math.ceil(ah/ag[1])}at[ac][aa]=O}}}ak.style.height=O+"px";ak.className="dhtmlxLayoutSinglePoly";ak.innerHTML="";ak._minW=al.getAttribute("minWidth")!=null?Number(al.getAttribute("minWidth")):l._minWidth;ak._minH=al.getAttribute("minHeight")!=null?Number(al.getAttribute("minHeight")):l._minHeight;ak._initCPanel=al.getAttribute("cpanel")!=null?al.getAttribute("cpanel")=="false"?!1:!0:!0;ak._resize=al.getAttribute("resize");for(var af=String(al.getAttribute("neighbors")).split(";"),T=0;T<af.length;T++){var aj=String(af[T]).split(",");aj.length>1&&(af[T]=aj)}ak._rowData=af;l.polyObj[ai]=ak}if(al.getAttribute("sep")!=null){var ab=al.getAttribute("sep");if(ab=="hor"){ak.className="dhtmlxLayoutPolySplitterHor";ak._dir="hor";for(var ad=al.getAttribute("top").split(";"),T=0;T<ad.length;T++){aj=String(ad[T]).split(","),aj.length>1&&(ad[T]=aj)}ak._top=ad;for(var Z=al.getAttribute("bottom").split(";"),T=0;T<Z.length;T++){aj=String(Z[T]).split(","),aj.length>1&&(Z[T]=aj)}ak._bottom=Z;l.sepHor[l.sepHor.length]=ak}else{ak.className="dhtmlxLayoutPolySplitterVer";ak._dir="ver";for(var N=al.getAttribute("left").split(";"),T=0;T<N.length;T++){aj=String(N[T]).split(","),aj.length>1&&(N[T]=aj)}ak._left=N;for(var H=al.getAttribute("right").split(";"),T=0;T<H.length;T++){aj=String(H[T]).split(","),aj.length>1&&(H[T]=aj)}ak._right=H;l.sepVer[l.sepVer.length]=ak}ak._dblClick=al.getAttribute("dblclick");ak._isSep=!0;ak.innerHTML='<div style="height:2px;overflow:hidden;">&nbsp;</div>'}if(al.getAttribute("colspan")!=null){ak.colSpan=al.getAttribute("colspan")}if(al.getAttribute("rowspan")!=null){ak.rowSpan=al.getAttribute("rowspan")}an.appendChild(ak)}}}if(aq.childNodes[ap].tagName=="autosize"){l._autoHor=aq.childNodes[ap].getAttribute("hor").split(";"),l._autoVer=aq.childNodes[ap].getAttribute("ver").split(";"),l._totalCols=aq.childNodes[ap].getAttribute("cols"),l._totalRows=aq.childNodes[ap].getAttribute("rows"),l._dimension[0]=l._totalCols*l._colsRatio,l._dimension[1]=l._totalRows*l._rowsRatio}if(aq.childNodes[ap].tagName=="table"){for(var d=aq.childNodes[ap].getAttribute("data"),Q=String(d).split(";"),ac=0;ac<Q.length;ac++){au[ac]=[];at[ac]=[];for(var S=String(Q[ac]).split(","),aa=0;aa<S.length;aa++){au[ac][aa]=S[aa],at[ac][aa]=S[aa],ar[S[aa]]==null&&(ar[S[aa]]=[0,0])}}for(var P in ar){ae=!1;for(ac=0;ac<au.length;ac++){for(aa=0;aa<au[ac].length;aa++){if(au[ac][aa]==P&&!ae){for(var ae=!0,W=0;W<au[ac].length;W++){au[ac][W]!=P&&ar[P][0]++}for(W=0;W<au.length;W++){au[W][aa]!=P&&ar[P][1]++}}}}}}}at=au=null;l._buildSurface();this.destructor()};this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this.listAutoSizes=function(){var f=this._availAutoSize[this._layoutView+"_hor"],e=this._availAutoSize[this._layoutView+"_ver"],o=this._autoHor.join(";"),n=this._autoVer.join(";");return[o,n,f,e]};this.setAutoSize=function(n,f){if(n!=null){for(var u=!1,s=this._availAutoSize[this._layoutView+"_hor"],o=0;o<s.length;o++){u=u||s[o]==n}if(u==!0){this._autoHor=n.split(";")}}if(f!=null){u=!1;s=this._availAutoSize[this._layoutView+"_ver"];for(o=0;o<s.length;o++){u=u||s[o]==f}if(u==!0){this._autoVer=f.split(";")}}};this._buildSurface=function(){for(var E=0;E<this.tpl.childNodes[0].childNodes.length;E++){for(var D=this.tpl.childNodes[0].childNodes[E],C=0;C<D.childNodes.length;C++){var A=D.childNodes[C],y=this;if(!A._isSep){A._isCell=!0,A.skin=this.skin,A.getId=function(){return this._idd},A.getIndex=function(){return this._ind},A.showHeader=function(){y.showPanel(this._idd)},A.hideHeader=function(){y.hidePanel(this._idd)},A.isHeaderVisible=function(){return y.isPanelVisible(this._idd)},A.setText=function(b){y.setText(this._idd,b)},A.getText=function(){return y.getText(this._idd)},A.expand=function(){y._isCollapsed(this._idd)&&y._expand(this._idd,"hide")},A.collapse=function(){y._isCollapsed(this._idd)||y._collapse(this._idd,"hide")},A.isCollapsed=function(){return y._isCollapsed(this._idd)},A.dock=function(){y._isCollapsed(this._idd)&&(y._expand(this._idd,"dock"),y.dockWindow(this._idd))},A.undock=function(){y._isCollapsed(this._idd)||(y.unDockWindow(this._idd),y._collapse(this._idd,"dock"))},A.setWidth=function(d){if(Number(d)){var c=this._isBlockedWidth||!1;this._isBlockedWidth=!1;y._setWidth(this._idd,d);this._isBlockedWidth=c}},A.getWidth=function(){return parseInt(this.style.width)},A.setHeight=function(d){if(Number(d)){var c=this._isBlockedHeight||!1;this._isBlockedHeight=!1;y._setHeight(this._idd,d);this._isBlockedHeight=c}},A.getHeight=function(){return parseInt(this.style.height)},A.fixSize=function(d,c){y._fixSize(this._idd,d,c)},A.progressOn=function(){y._progressControl(this._idd,!0)},A.progressOff=function(){y._progressControl(this._idd,!1)},A._doOnAttachMenu=function(){this.adjustContent(this.childNodes[0],this._noHeader?0:y.skinParams[y.skin].cpanel_height);this.updateNestedObjects()},A._doOnAttachToolbar=function(){this.adjustContent(this.childNodes[0],this._noHeader?0:y.skinParams[y.skin].cpanel_height);this.updateNestedObjects()},A._doOnAttachStatusBar=function(){this.adjustContent(this.childNodes[0],this._noHeader?0:y.skinParams[y.skin].cpanel_height);this.updateNestedObjects()},A._doOnFrameContentLoaded=function(){y.callEvent("onContentLoaded",[this._idd])},A._doOnResize=function(){this.adjustContent(this.childNodes[0],this._noHeader?0:y.skinParams[y.skin].cpanel_height);this.updateNestedObjects()},A._redraw=function(){},A.showArrow=function(){this.childNodes[0].childNodes[0].childNodes[4].style.display=""},A.hideArrow=function(){this.childNodes[0].childNodes[0].childNodes[4].style.display="none"},A.isArrowVisible=function(){return this.childNodes[0].childNodes[0].childNodes[4].style.display!="none"}}if(A._dir=="ver"){A.onselectstart=function(b){b=b||event;b.returnValue=!1},_isIE&&(A.ondblclick=function(){y._doOnDoubleClick(this)}),A[this._isIPad?"ontouchstart":"onmousedown"]=function(n){n=n||event;if(!_isIE){if(this._lastClick){var e=this._lastClick;this._lastClick=(new Date).getTime();if(e+y._dblClickTM>=this._lastClick&&y._doOnDoubleClick(this)===!0){return}}else{this._lastClick=(new Date).getTime()}}var K=y._findDockCellsVer(this);y._resAreaData=[];if(K[0]!=null&&K[1]!=null){String(document.body.className).search("dhxCursorWResize")==-1&&(document.body.className+=" dhxCursorWResize");y._resObj=this;y._anyExpL=K[0];y._anyExpR=K[1];y._collectResAreaData(K);y._resX=y._isIPad?n.touches[0].clientX:n.clientX;if(y._effects.resize==!1){y._attachSizer(this);y.sizer._leftXStart=parseInt(y.sizer.style.left);var J=y.polyObj[y._anyExpL[0]];y._resXMaxWidthLeft=parseInt(J.style.width)-y._minWidth;var H=y.polyObj[y._anyExpR[0]];y._resXMaxWidthRight=parseInt(H.style.width)-y._minWidth;if(y._alterSizes.length>0){for(var I=0;I<y._alterSizes.length;I++){for(var F=0;F<y._anyExpL.length;F++){if(y._alterSizes[I][0]==y._anyExpL[F]){var o=y._resXMaxWidthLeft=parseInt(J.style.width)-y._alterSizes[I][1];if(o<y._resXMaxWidthLeft){y._resXMaxWidthLeft=o}}}for(F=0;F<y._anyExpR.length;F++){if(y._alterSizes[I][0]==y._anyExpR[F]&&(o=parseInt(H.style.width)-y._alterSizes[I][1],o<y._resXMaxWidthRight)){y._resXMaxWidthRight=o}}}}y._resXStart=y._resX}y._resFunc=y._resizeVer;y._isIPad&&n.preventDefault()}},A.onmouseup=function(){if(y._effects.resize==!0){y._resizeStop(),y._anyExpL=null,y._anyExpR=null}}}if(A._dir=="hor"){A.onselectstart=function(b){b=b||event;b.returnValue=!1},A[this._isIPad?"ontouchstart":"onmousedown"]=function(n){n=n||event;if(this._lastClick){var e=this._lastClick;this._lastClick=(new Date).getTime();if(e+y._dblClickTM>=this._lastClick&&y._doOnDoubleClick(this)===!0){return}}else{this._lastClick=(new Date).getTime()}var K=y._findDockCellsHor(this);y._resAreaData=[];if(K[0]!=null&&K[1]!=null){String(document.body.className).search("dhxCursorNResize")==-1&&(document.body.className+=" dhxCursorNResize");y._resObj=this;y._anyExpT=K[0];y._anyExpB=K[1];y._collectResAreaData(K);y._resY=y._isIPad?n.touches[0].clientY:n.clientY;if(y._effects.resize==!1){y._attachSizer(this);y.sizer._topYStart=parseInt(y.sizer.style.top);var J=y.polyObj[y._anyExpT[0]];y._resYMaxHeightTop=parseInt(J.style.height)-y._minHeight;var H=y.polyObj[y._anyExpB[0]];y._resYMaxHeightBottom=parseInt(H.style.height)-y._minHeight;if(y._alterSizes.length>0){for(var I=0;I<y._alterSizes.length;I++){for(var F=0;F<y._anyExpT.length;F++){if(y._alterSizes[I][0]==y._anyExpT[F]){var o=parseInt(J.style.height)-y._alterSizes[I][2]-(J.childNodes[0].style.display!="none"?y.skinParams[y.skin].cpanel_height:0);if(o<y._resYMaxHeightTop){y._resYMaxHeightTop=o}}}for(F=0;F<y._anyExpB.length;F++){if(y._alterSizes[I][0]==y._anyExpB[F]&&(o=parseInt(H.style.height)-y._alterSizes[I][2]-(H.childNodes[0].style.display!="none"?y.skinParams[y.skin].cpanel_height:0),o<y._resYMaxHeightBottom)){y._resYMaxHeightBottom=o}}}}y._resYStart=y._resY}y._resFunc=y._resizeHor;y._isIPad&&n.preventDefault()}},A.onmouseup=function(){if(y._effects.resize==!0){y._resizeStop(),y._anyExpT=null,y._anyExpB=null}}}}}for(var x in this.polyObj){this.polyObj[x]._collapsed=!1;this.polyObj[x]._idd=x;this.polyObj[x]._ind=this.items.length;this.items[this.items.length]=this.polyObj[x];var w=document.createElement("DIV");w.style.position="relative";w.style.left="0px";w.style.top="0px";w.style.width=this.polyObj[x].style.width;w.style.height=this.polyObj[x].style.height;w.style.overflow="hidden";this.polyObj[x].appendChild(w);var v=document.createElement("DIV");v._dockCell=x;v._resize=this.polyObj[x]._resize;v.className="dhtmlxPolyInfoBar";v.innerHTML="<div class='dhtmlxInfoBarLabel'>"+x+"</div><div class='dhtmlxInfoBarButtonsFake'><div class='dhtmlxInfoBarButtonsFake2'></div></div><div class='dhtmlxInfoButtonDock' title='"+this.i18n.dock+"'></div><div class='dhtmlxInfoButtonUnDock' style='display: none;' title='"+this.i18n.undock+"'></div><div class='dhtmlxInfoButtonShowHide_"+v._resize+"' title='"+this.i18n.collapse+"'></div><div class='dhtmlxLineL'></div><div class='dhtmlxLineR'></div>";this.polyObj[x]._initCPanel==!0?(v._h=this._CPanelHeight,v.style.display=""):(v._h=0,v.style.display="none");this.polyObj[x].childNodes[0].appendChild(v);v.ondblclick=function(){y.callEvent("onDblClick",[this._dockCell])};v.childNodes[4].onclick=function(){var b=this.parentNode._dockCell;y._isCollapsed(b)?y._expand(b,"hide"):y._collapse(b,"hide")};for(E=0;E<v.childNodes.length;E++){v.childNodes[E].onselectstart=function(b){b=b||event;b.returnValue=!1}}var u=document.createElement("DIV");u.className="dhxcont_global_content_area";this.polyObj[x].childNodes[0].appendChild(u);var s=new dhtmlXContainer(this.polyObj[x]);s.setContent(u);this.skin=="dhx_web"&&this.polyObj[x]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_layout_dhx_web");if(this.skin=="dhx_terrace"){this.polyObj[x]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_layout_dhx_terrace"),this.polyObj[x].childNodes[0].style.borderRadius="3px",this.polyObj[x].childNodes[0].childNodes[1].style.borderBottomLeftRadius=this.polyObj[x].childNodes[0].childNodes[1].style.borderBottomRightRadius="3px"}this.polyObj[x].adjustContent(this.polyObj[x].childNodes[0],this.skinParams[this.skin].cpanel_height)}this._fixIcons()};this._anyExpB=this._anyExpT=this._anyExpR=this._anyExpL=this._resFunc=this._resObj=this._resY=this._resX=null;this._expand=function(d,c){this._doExpand(this.polyObj[d]._resize,d,this.polyObj[d]._rowData,c)};this._collapse=function(d,c){if(!this._isCollapsed(d)){this.polyObj[d]._savedW=parseInt(this.polyObj[d].style.width),this.polyObj[d]._savedH=parseInt(this.polyObj[d].style.height),this._doCollapse(this.polyObj[d]._resize,d,this.polyObj[d]._rowData,c)}};this._isCollapsed=function(b){return this.polyObj[b]._collapsed};this._checkAlterMinSize=function(f){this._alterSizes=[];for(var e=0;e<f.length;e++){for(var o=0;o<f[e].length;o++){if(this.polyObj[f[e][o]].vs[this.polyObj[f[e][o]].av].layout!=null){var n=this.polyObj[f[e][o]].vs[this.polyObj[f[e][o]].av].layout._defineWindowMinDimension(this.polyObj[f[e][o]],!0);n[0]=f[e][o];this._alterSizes[this._alterSizes.length]=n}}}};this._findDockCellsVer=function(D){var C=[null,null];if(D==null){return C}for(var A=null,y=D._left.length-1;y>=0;y--){if(A==null){if(typeof D._left[y]=="object"){for(var x=!1,w=0;w<D._left[y].length;w++){x=x||this.polyObj[D._left[y][w]]._isBlockedWidth||!1}x||(A=D._left[y])}else{this.polyObj[D._left[y]]._collapsed==!1&&(this.polyObj[D._left[y]]._isBlockedWidth||(A=D._left[y]))}}}for(var v=null,y=0;y<D._right.length;y++){if(v==null){if(typeof D._right[y]=="object"){x=!1;for(w=0;w<D._right[y].length;w++){x=x||this.polyObj[D._right[y][w]]._isBlockedWidth||!1}x||(v=D._right[y])}else{this.polyObj[D._right[y]]._collapsed==!1&&(this.polyObj[D._right[y]]._isBlockedWidth||(v=D._right[y]))}}}if(A==null||v==null){return C}typeof A=="string"&&(A=Array(A));typeof v=="string"&&(v=Array(v));C[0]=A;C[1]=v;this._checkAlterMinSize(C);this._minWRAlter=this._minWLAlter=0;if(this._alterSizes.length>0&&this._effects.resize==!0){for(var u=[],s=[],y=0;y<A.length;y++){u[y]=this.polyObj[A[y]]}for(y=0;y<v.length;y++){s[y]=this.polyObj[v[y]]}for(y=0;y<u.length;y++){for(w=0;w<this._alterSizes.length;w++){if(this._alterSizes[w][0]==u[y]._idd&&this._minWLAlter<this._alterSizes[w][1]){this._minWLAlter=this._alterSizes[w][1]}}}for(y=0;y<s.length;y++){for(w=0;w<this._alterSizes.length;w++){if(this._alterSizes[w][0]==s[y]._idd&&this._maxWRAlter<this._alterSizes[w][1]){this._minWRAlter=this._alterSizes[w][1]}}}}return C};this._findDockCellsHor=function(D){var C=[null,null];if(D==null){return C}for(var A=null,y=D._top.length-1;y>=0;y--){if(A==null){if(typeof D._top[y]=="object"){for(var x=!1,w=0;w<D._top[y].length;w++){x=x||this.polyObj[D._top[y][w]]._isBlockedHeight||!1}x||(A=D._top[y])}else{this.polyObj[D._top[y]]._collapsed==!1&&(this.polyObj[D._top[y]]._isBlockedHeight||(A=D._top[y]))}}}for(var v=null,y=0;y<D._bottom.length;y++){if(v==null){if(typeof D._bottom[y]=="object"){x=!1;for(w=0;w<D._bottom[y].length;w++){x=x||this.polyObj[D._bottom[y][w]]._isBlockedHeight||!1}x||(v=D._bottom[y])}else{this.polyObj[D._bottom[y]]._collapsed==!1&&(this.polyObj[D._bottom[y]]._isBlockedHeight||(v=D._bottom[y]))}}}if(A==null||v==null){return C}typeof A=="string"&&(A=Array(A));typeof v=="string"&&(v=Array(v));C[0]=A;C[1]=v;this._checkAlterMinSize(C);this._minHBAlter=this._minHTAlter=0;if(this._alterSizes.length>0&&this._effects.resize==!0){for(var u=[],s=[],y=0;y<A.length;y++){u[y]=this.polyObj[A[y]]}for(y=0;y<v.length;y++){s[y]=this.polyObj[v[y]]}for(y=0;y<u.length;y++){for(w=0;w<this._alterSizes.length;w++){if(this._alterSizes[w][0]==u[y]._idd&&this._minHTAlter<this._alterSizes[w][2]){this._minHTAlter=this._alterSizes[w][2]}}}for(y=0;y<s.length;y++){for(w=0;w<this._alterSizes.length;w++){if(this._alterSizes[w][0]==s[y]._idd&&this._minHBAlter<this._alterSizes[w][2]){this._minHBAlter=this._alterSizes[w][2]}}}}return C};this._resizeVer=function(H){this._isIPad&&H.preventDefault();if(!(this._resObj==null||this._anyExpL==null||this._anyExpR==null)){this._showCovers();var F=this._isIPad?H.touches[0].clientX:H.clientX;if(this._effects.resize==!1){this._resX=F;var E=F-this._resXStart;if(-E>this._resXMaxWidthLeft&&E<0){E=-this._resXMaxWidthLeft,this._resX=E+this._resXStart}if(E>this._resXMaxWidthRight&&E>0){E=this._resXMaxWidthRight,this._resX=E+this._resXStart}this.sizer.style.left=this.sizer._leftXStart+E+"px"}else{for(var D=this._anyExpL,C=this._anyExpR,A=F,E=F-l._resX,y=[],x=[],w=0;w<D.length;w++){y[w]=this.polyObj[D[w]]}for(w=0;w<C.length;w++){x[w]=this.polyObj[C[w]]}var v=parseInt(y[0].style.width),u=parseInt(x[0].style.width);if(E<0){var d=v+E;if(d>y[0]._minW&&d>this._minWLAlter){for(var I=u+v-d,w=0;w<y.length;w++){this._setW(y[w],d)}for(w=0;w<x.length;w++){this._setW(x[w],I)}this._resX=A}}else{if(E>0&&(I=u-E,I>x[0]._minW&&I>this._minWRAlter)){d=v+u-I;for(w=0;w<y.length;w++){this._setW(y[w],d)}for(w=0;w<x.length;w++){this._setW(x[w],I)}this._resX=A}}}}};this._resizeHor=function(H){if(!(this._resObj==null||this._anyExpT==null||this._anyExpB==null)){this._showCovers();var F=this._isIPad?H.touches[0].clientY:H.clientY;if(this._effects.resize==!1){this._resY=F;var E=F-this._resYStart;if(-E>this._resYMaxHeightTop&&E<0){E=-this._resYMaxHeightTop,this._resY=E+this._resYStart}if(E>this._resYMaxHeightBottom&&E>0){E=this._resYMaxHeightBottom,this._resY=E+this._resYStart}this.sizer.style.top=this.sizer._topYStart+E+"px"}else{for(var D=this._anyExpT,C=this._anyExpB,A=F,E=F-l._resY,y=[],x=[],w=0;w<D.length;w++){y[w]=this.polyObj[D[w]]}for(w=0;w<C.length;w++){x[w]=this.polyObj[C[w]]}var v=parseInt(y[0].style.height),u=parseInt(x[0].style.height);if(E<0){var d=v+E;if(d>y[0]._minH+this._minHTAlter){for(var I=u+v-d,w=0;w<y.length;w++){this._setH(y[w],d)}for(w=0;w<x.length;w++){this._setH(x[w],I)}this._resY=A}}else{if(E>0&&(I=u-E,I>x[0]._minH+this._minHBAlter)){d=v+u-I;for(w=0;w<y.length;w++){this._setH(y[w],d)}for(w=0;w<x.length;w++){this._setH(x[w],I)}this._resY=A}}}}};this._resizeStop=function(){var J=document.body.className;if(J.search("dhxCursorWResize")!==-1||J.search("dhxCursorNResize")!==-1){document.body.className=String(document.body.className).replace(/dhxCursorWResize/g,"").replace(/dhxCursorNResize/g,"")}if(this._resObj!=null){if(this._effects.resize==!1){this.sizer.style.display="none";if(this._resObj._dir=="hor"){var I=typeof this._anyExpT[0]=="object"?this._anyExpT[0][0]:this._anyExpT[0],H=this._resY-this._resYStart,F=parseInt(this.polyObj[I].style.height)+H;this._setHeight(I,F)}else{var E=typeof this._anyExpL[0]=="object"?this._anyExpL[0][0]:this._anyExpL[0],D=this._resX-this._resXStart,C=parseInt(this.polyObj[E].style.width)+D;this._setWidth(E,C)}var A={},y=function(d){if(d!=null){for(var c=0;c<d.length;c++){typeof d[c]=="object"&&y(d[c]),A[d[c]]=!0}}};y(this._anyExpT);y(this._anyExpB);y(this._anyExpL);y(this._anyExpR);var x=[],w;for(w in A){x[x.length]=w}if(typeof this._anyExpT=="object"&&this._anyExpT!=null){this.updateNestedObjectsArray(this._anyExpT),this._anyExpT=null}if(typeof this._anyExpB=="object"&&this._anyExpB!=null){this.updateNestedObjectsArray(this._anyExpB),this._anyExpB=null}if(typeof this._anyExpL=="object"&&this._anyExpL!=null){this.updateNestedObjectsArray(this._anyExpL),this._anyExpL=null}if(typeof this._anyExpR=="object"&&this._anyExpR!=null){this.updateNestedObjectsArray(this._anyExpR),this._anyExpR=null}this._resFunc=this._resObj=null;this._hideCovers();this._fixToolbars();this._fixCollapsedText();this.callEvent("onPanelResizeFinish",[x])}else{var u=[];if(this._resObj._left!=null){for(var N=0;N<this._resObj._left.length;N++){u[u.length]=this._resObj._left[N]}}if(this._resObj._right!=null){for(N=0;N<this._resObj._right.length;N++){u[u.length]=this._resObj._right[N]}}if(this._resObj._top!=null){for(N=0;N<this._resObj._top.length;N++){u[u.length]=this._resObj._top[N]}}if(this._resObj._bottom!=null){for(N=0;N<this._resObj._bottom.length;N++){u[u.length]=this._resObj._bottom[N]}}this._resObj=this._resFunc=null;this._hideCovers();for(var K=[],N=0;N<u.length;N++){if(typeof u[N]=="object"){for(var L=0;L<u[N].length;L++){K[K.length]=this.polyObj[u[N][L]]}}else{K[K.length]=this.polyObj[u[N]]}}for(N=0;N<K.length;N++){K[N].updateNestedObjects()}this._fixCollapsedText();this.callEvent("onPanelResizeFinish",[])}}};this._showCovers=function(){if(!this._cv){for(var b in this.polyObj){this._effects.highlight&&this._isResizable(b)&&this.polyObj[b].showCoverBlocker()}this._fixToolbars();this._cv=!0}};this._hideCovers=function(){if(this._cv){for(var b in this.polyObj){this.polyObj[b].hideCoverBlocker()}this._fixToolbars();this._cv=!1}};this._isResizable=function(e){for(var d=!1,f=0;f<this._resAreaData.length;f++){d=d||this._resAreaData[f]==e}return d};this._collectResAreaData=function(d){for(var c=0;c<d.length;c++){typeof d[c]=="string"?this._resAreaData[this._resAreaData.length]=d[c]:typeof d[c]=="object"&&this._collectResAreaData(d[c])}};this._doOnDoubleClick=function(d){if(d._dblClick!=null&&this.polyObj[d._dblClick]!=null&&!this.polyObj[d._dblClick]._noHeader){var c=this.polyObj[d._dblClick];if(c.childNodes[0].style.display!="none"){return c._collapsed==!0?this._doExpand(c._resize,d._dblClick,c._rowData,"hide"):(c._savedW=parseInt(c.style.width),c._savedH=parseInt(c.style.height),this._doCollapse(c._resize,d._dblClick,c._rowData,"hide")),!0}}};this._doOnSelectStart=function(b){b=b||event;if(l._resObj!=null){b.returnValue=!1}};this._doOnMouseMove=function(b){b=b||event;l._resObj!=null&&l._resFunc!=null&&l._resFunc(b)};this._doOnMouseUp=function(){l._resizeStop()};this._isIPad?(document.addEventListener("touchmove",l._doOnMouseMove,!1),document.addEventListener("touchend",l._doOnMouseUp,!1)):_isIE?(document.body.attachEvent("onselectstart",l._doOnSelectStart),document.body.attachEvent("onmousemove",l._doOnMouseMove),document.body.attachEvent("onmouseup",l._doOnMouseUp)):(document.body.addEventListener("mousemove",l._doOnMouseMove,!1),document.body.addEventListener("mouseup",l._doOnMouseUp,!1));this._doExpand=function(I,H,F,E){if(!(F.length<=1)){for(var D=-1,C=0;C<F.length;C++){F[C]==H&&(D=C)}if(D!=-1){for(var A=null,C=D+1;C<F.length;C++){A==null&&(typeof F[C]=="string"?this.polyObj[F[C]]._collapsed==!1&&(A=F[C]):A=F[C])}if(A==null){for(C=D-1;C>=0;C--){A==null&&(typeof F[C]=="string"?this.polyObj[F[C]]._collapsed==!1&&(A=F[C]):A=F[C])}}if(A!=null){typeof A!="object"&&(A=Array(A));if(I=="hor"){for(var y=65536,C=0;C<A.length;C++){var x=this.polyObj[A[C]].vs[this.polyObj[A[C]].av].layout!=null?this.polyObj[A[C]].vs[this.polyObj[A[C]].av].layout._defineWindowMinDimension(this.polyObj[A[C]],!0):[0,0],w=parseInt(this.polyObj[A[C]].style.width)-this._minWidth-x[1];w<y&&(y=w)}var v=this.polyObj[H]._savedW;v>y&&(v=y);if(v<this._minWidth){return}var u=Math.round(v/3)}else{y=65536;for(C=0;C<A.length;C++){x=this.polyObj[A[C]].vs[this.polyObj[A[C]].av].layout!=null?this.polyObj[A[C]].vs[this.polyObj[A[C]].av].layout._defineWindowMinDimension(this.polyObj[A[C]],!0):[0,0,0],w=parseInt(this.polyObj[A[C]].style.height)-this._minHeight-x[2],w<y&&(y=w)}v=this.polyObj[H]._savedH;v>y&&(v=y);if(v<this._minHeight){return}u=Math.round(v/3)}this.polyObj[H].childNodes[0].childNodes[1].style.display="";this.polyObj[H].childNodes[0].childNodes[0].className="dhtmlxPolyInfoBar";this.polyObj[H].childNodes[0].childNodes[0].childNodes[1].style.display="";this.polyObj[H].childNodes[0].childNodes[0].childNodes[2].style.display="";this.polyObj[H].childNodes[0].childNodes[0].childNodes[4].style.display="";for(var J=[],C=0;C<A.length;C++){J[C]=this.polyObj[A[C]]}if(this.polyObj[H].className=="dhtmlxLayoutSinglePolyTabbarCollapsed"){this.polyObj[H].className="dhtmlxLayoutSinglePolyTabbar"}this._expandEffect(this.polyObj[H],J,v,E,this._effects.collapse==!0?u:1000000,I)}}}};this._doCollapse=function(D,C,A,y){if(!(A.length<=1)){for(var x=-1,w=0;w<A.length;w++){A[w]==C&&(x=w)}if(x!=-1){for(var v=null,w=x+1;w<A.length;w++){v==null&&(typeof A[w]=="string"?this.polyObj[A[w]]._collapsed==!1&&(v=A[w]):v=A[w])}if(v==null){for(w=x-1;w>=0;w--){v==null&&(typeof A[w]=="string"?this.polyObj[A[w]]._collapsed==!1&&(v=A[w]):v=A[w])}}v==null&&A[x+1]!=null&&(v=A[x+1]);v==null&&x-1>=0&&A[x-1]!=null&&(v=A[x-1]);if(v!=null){if(typeof v!="object"){if(this.polyObj[v]._collapsed==!0){this.polyObj[v].childNodes[0].childNodes[1].style.display="";this.polyObj[v]._collapsed=!1;this.polyObj[v].childNodes[0].childNodes[0].className="dhtmlxPolyInfoBar";this.polyObj[v].childNodes[0].childNodes[0].childNodes[1].style.display="";this.polyObj[v].childNodes[0].childNodes[0].childNodes[4].title=this.i18n.collapse;this.polyObj[v].childNodes[0].childNodes[0].childNodes[2].style.display="";this.polyObj[v].childNodes[0].childNodes[0].childNodes[3].style.display="none";this.polyObj[v].childNodes[0].childNodes[0].childNodes[4].style.display="";this.polyObj[v]._isUnDocked===!0&&this.dockWindow(v);if(this.polyObj[v].className=="dhtmlxLayoutSinglePolyTabbarCollapsed"){this.polyObj[v].className="dhtmlxLayoutSinglePolyTabbar"}this._fixSplitters();this._fixIcons();this.polyObj[v].removeAttribute("title");this._fixToolbars();this._fixCollapsedText();this.callEvent("onExpand",[v])}v=Array(v)}for(var u=[],w=0;w<v.length;w++){u[w]=this.polyObj[v[w]]}var s=D=="hor"?Math.round(Math.max(this.polyObj[C].offsetWidth,this.polyObj[v[0]].offsetWidth)/3):Math.round(Math.max(this.polyObj[C].offsetHeight,this.polyObj[v[0]].offsetHeight)/3);this.polyObj[C].childNodes[0].childNodes[1].style.display="none";this._collapseEffect(this.polyObj[C],u,y,this._effects.collapse==!0?s:1000000,D)}}}};this.setEffect=function(d,c){this._effects[d]!=null&&typeof c=="boolean"&&(this._effects[d]=c)};this.getEffect=function(b){return this._effects[b]!=null?this._effects[b]:null};this._expandEffect=function(D,C,A,y,x,w){if(w=="hor"){var v=parseInt(D.style.width),u=parseInt(C[0].style.width)}else{v=parseInt(D.style.height),u=parseInt(C[0].style.height)}var s=v+x;s>A&&(s=A);w=="hor"?(D.style.width=s+"px",D.childNodes[0].style.width=D.style.width):(D.style.height=s+"px",D.childNodes[0].style.height=D.style.height);D.adjustContent(D.childNodes[0],D._noHeader?0:this.skinParams[this.skin].cpanel_height);for(var d=0;d<C.length;d++){w=="hor"?(C[d].style.width=u+v-s+"px",C[d].childNodes[0].style.width=C[d].style.width):(C[d].style.height=u+v-s+"px",C[d].childNodes[0].style.height=C[d].style.height),C[d].adjustContent(C[d].childNodes[0],C[d]._noHeader?0:this.skinParams[this.skin].cpanel_height)}if(s!=A){window.setTimeout(function(){l._expandEffect(D,C,A,y,x,w)},4)}else{D._collapsed=!1;for(d=0;d<C.length;d++){C[d].updateNestedObjects()}this.polyObj[D._idd].updateNestedObjects();this.polyObj[D._idd].childNodes[0].childNodes[0].childNodes[4].title=this.i18n.collapse;this._fixSplitters();this._fixIcons();D.removeAttribute("title");this._fixToolbars();this._fixCollapsedText();this.callEvent("onExpand",[D._idd])}};this._collapseEffect=function(C,A,y,x,w){if(w=="hor"){var v=parseInt(C.style.width),u=parseInt(A[0].style.width)}else{v=parseInt(C.style.height),u=parseInt(A[0].style.height)}var s=v-x;if(w=="hor"){if(s<this._collapsedW){s=this._collapsedW}C.style.width=s+"px";C.childNodes[0].style.width=C.style.width}else{if(s<this._collapsedH){s=this._collapsedH}C.style.height=s+"px";C.childNodes[0].style.height=C.style.height}for(var d=0;d<A.length;d++){w=="hor"?(A[d].style.width=u+(v-s)+"px",A[d].childNodes[0].style.width=A[d].style.width):(A[d].style.height=u+(v-s)+"px",A[d].childNodes[0].style.height=A[d].style.height),A[d].adjustContent(A[d].childNodes[0],A[d]._noHeader?0:this.skinParams[this.skin].cpanel_height)}if(s>this._collapsedW&&w=="hor"||s>this._collapsedH&&w=="ver"){window.setTimeout(function(){l._collapseEffect(C,A,y,x,w)},4)}else{for(d=0;d<A.length;d++){w=="hor"?(A[d].style.width=u+(v-s)+"px",A[d].childNodes[0].style.width=A[d].style.width):(A[d].style.height=u+(v-s)+"px",A[d].childNodes[0].style.height=A[d].style.height),A[d].adjustContent(A[d].childNodes[0],A[d]._noHeader?0:this.skinParams[this.skin].cpanel_height)}C._collapsed=!0;C.childNodes[0].childNodes[0].className=w=="hor"?"dhtmlxPolyInfoBarCollapsedVer":"dhtmlxPolyInfoBarCollapsedHor";for(d=0;d<A.length;d++){A[d].updateNestedObjects()}y=="hide"?(C.childNodes[0].childNodes[0].childNodes[1].style.display="",C.childNodes[0].childNodes[0].childNodes[2].style.display="none",C.childNodes[0].childNodes[0].childNodes[3].style.display="none",C.childNodes[0].childNodes[0].childNodes[4].style.display=""):(C.childNodes[0].childNodes[0].childNodes[1].style.display="",C.childNodes[0].childNodes[0].childNodes[2].style.display="",C.childNodes[0].childNodes[0].childNodes[3].style.display="none",C.childNodes[0].childNodes[0].childNodes[4].style.display="none");if(C.className=="dhtmlxLayoutSinglePolyTabbar"){C.className="dhtmlxLayoutSinglePolyTabbarCollapsed"}this.polyObj[C._idd].childNodes[0].childNodes[0].childNodes[4].title=this.i18n.expand;this._fixSplitters();this._fixIcons();C.title=this.getTextTooltip(C._idd);this._fixToolbars();this._fixCollapsedText();this.callEvent("onCollapse",[C._idd])}};this._setW=function(d,c){d.style.width=c+"px";d.childNodes[0].style.width=d.style.width;d.adjustContent(d.childNodes[0],d._noHeader?0:this.skinParams[this.skin].cpanel_height)};this._setH=function(d,c){d.style.height=c+"px";d.childNodes[0].style.height=d.style.height;d.adjustContent(d.childNodes[0],d._noHeader?0:this.skinParams[this.skin].cpanel_height)};this._setWidth=function(H,F){if(this.polyObj[H]!=null&&Number(F)){for(var E=null,D=0;D<this.sepVer.length;D++){var C=this.sepVer[D]._left;if(C[C.length-1]==H){E=[this.sepVer[D],"left"]}else{if(typeof C[C.length-1]=="object"){for(var A=C[C.length-1],y=0;y<A.length;y++){A[y]==H&&(E=[this.sepVer[D],"left"])}}}C=this.sepVer[D]._right;if(C[0]==H){E=[this.sepVer[D],"right"]}else{if(typeof C[0]=="object"){A=C[0];for(y=0;y<A.length;y++){A[y]==H&&(E=[this.sepVer[D],"right"])}}}}if(E!=null){var x=this._findDockCellsVer(E[0]),w=x[0],v=x[1];if(!(w==null||v==null)){var u=parseInt(this.polyObj[w[0]].style.width)+parseInt(this.polyObj[v[0]].style.width);F<this._minWidth?F=this._minWidth:F>u-this._minWidth&&(F=u-this._minWidth);for(var s=u-F,D=0;D<w.length;D++){this._setW(this.polyObj[w[D]],E[1]=="left"?F:s),this.polyObj[w[D]].updateNestedObjects()}for(D=0;D<v.length;D++){this._setW(this.polyObj[v[D]],E[1]=="right"?F:s),this.polyObj[v[D]].updateNestedObjects()}}}}};this._setHeight=function(H,F){if(this.polyObj[H]!=null&&Number(F)){for(var E=null,D=0;D<this.sepHor.length;D++){var C=this.sepHor[D]._top;if(C[C.length-1]==H){E=[this.sepHor[D],"top"]}else{if(typeof C[C.length-1]=="object"){for(var A=C[C.length-1],y=0;y<A.length;y++){A[y]==H&&(E=[this.sepHor[D],"top"])}}}C=this.sepHor[D]._bottom;if(C[0]==H){E=[this.sepHor[D],"bottom"]}else{if(typeof C[0]=="object"){A=C[0];for(y=0;y<A.length;y++){A[y]==H&&(E=[this.sepHor[D],"bottom"])}}}}if(E!=null){var x=this._findDockCellsHor(E[0]),w=x[0],v=x[1];if(!(w==null||v==null)){var u=parseInt(this.polyObj[w[0]].style.height)+parseInt(this.polyObj[v[0]].style.height);F<this._minHeight?F=this._minHeight:F>u-this._minHeight&&(F=u-this._minHeight);for(var s=u-F,D=0;D<w.length;D++){this._setH(this.polyObj[w[D]],E[1]=="top"?F:s),this.polyObj[w[D]].updateNestedObjects()}for(D=0;D<v.length;D++){this._setH(this.polyObj[v[D]],E[1]=="bottom"?F:s),this.polyObj[v[D]].updateNestedObjects()}}}}};this.updateNestedObjectsArray=function(d){for(var c=0;c<d.length;c++){typeof d[c]=="object"?this.updateNestedObjectsArray(d[c]):this.polyObj[d[c]].updateNestedObjects()}};this.dockWindow=function(b){if(this.dhxWins&&this.dhxWins.window(this.dhxWinsIdPrefix+b)){this.dhxWins.window(this.dhxWinsIdPrefix+b).close(),this.dhxWins.window(this.dhxWinsIdPrefix+b).moveContentTo(this.polyObj[b]),this.polyObj[b]._isUnDocked=!1,this.callEvent("onDock",[b])}};this.unDockWindow=function(b){this._initWindows(b);this.polyObj[b].moveContentTo(this.dhxWins.window(this.dhxWinsIdPrefix+b));this.polyObj[b]._isUnDocked=!0;this.callEvent("onUnDock",[b])};this._initWindows=function(f){if(window.dhtmlXWindows){if(!this.dhxWins&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.skin),this.dhxWins.setImagePath(this.imagePath),this.dhxWinsIdPrefix="",!f)){return}var e=this.dhxWinsIdPrefix+f;if(this.dhxWins.window(e)){this.dhxWins.window(e).show()}else{var o=this,n=this.dhxWins.createWindow(e,20,20,320,200);n.setText(this.polyObj[f].getText());n.button("close").hide();n.attachEvent("onClose",function(b){b.hide()});n.button("dock").show();n.button("dock").attachEvent("onClick",function(){o.polyObj[f].dock()});n.dockedCell=this.polyObj[f]}}};this.isPanelVisible=function(b){return !this.polyObj[b]._noHeader};this.showPanel=function(d){if(this.polyObj[d]!=null&&this.polyObj[d]._collapsed!=!0){var c=this.polyObj[d].childNodes[0].childNodes[0];c.style.display="";this.polyObj[d]._noHeader=!1;this.skin=="dhx_web"&&this.polyObj[d]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_layout_dhx_web");this.skin=="dhx_terrace"&&this.polyObj[d]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_layout_dhx_terrace");this.polyObj[d].adjustContent(this.polyObj[d].childNodes[0],this.skinParams[this.skin].cpanel_height);this.polyObj[d].updateNestedObjects()}};this.hidePanel=function(d){if(this.polyObj[d]!=null&&this.polyObj[d]._collapsed!=!0){var c=this.polyObj[d].childNodes[0].childNodes[0];c.style.display="none";this.polyObj[d]._noHeader=!0;this.skin=="dhx_web"&&this.polyObj[d]._setPadding(this.skinParams[this.skin].cell_pading_min,"");this.skin=="dhx_terrace"&&this.polyObj[d]._setPadding(this.skinParams[this.skin].cell_pading_min,"");this.polyObj[d].adjustContent(this.polyObj[d].childNodes[0],0);this.polyObj[d].updateNestedObjects()}};this.setText=function(d,c){this._changeCPanelText(d,c)};this.getText=function(b){return this.polyObj[b].childNodes[0].childNodes[0].childNodes[0].innerHTML};this.getTextTooltip=function(d){var c=this.polyObj[d].childNodes[0].childNodes[0].childNodes[0];return c.innerText||c.textContent};this._changeCPanelText=function(e,d){var f=l;if(f.polyObj[e]!=null){f.polyObj[e].childNodes[0].childNodes[0].childNodes[0].innerHTML=d,l.dhxWins!=null&&l.dhxWins.window(l.dhxWinsIdPrefix+e)!=null&&l.dhxWins.window(l.dhxWinsIdPrefix+e).setText(d)}};this.forEachItem=function(d){for(var c=0;c<this.items.length;c++){d(this.items[c])}};this._fixPositionInWin=function(d,c){this.base.style.width=d+"px";this.base.style.height=c+"px"};this.attachMenu=function(){this.base._isWindow?this.menu=this.base._window.attachMenu():(this.cont.obj.skin=this.skin,this.menu=this.cont.obj.attachMenu(),this.cont.obj.adjustContent(this.cont.obj,0),this.setSizes());return this.menu};this.detachMenu=function(){if(this.menu){this.cont.obj.detachMenu(),this.setSizes(),this.menu=null}};this.showMenu=function(){this.menu&&(this.cont.obj.showMenu(),this.setSizes())};this.hideMenu=function(){this.menu&&(this.cont.obj.hideMenu(),this.setSizes())};this.attachToolbar=function(){this.base._isWindow?this.toolbar=this.base._window.attachToolbar():(this.cont.obj.skin=this.skin,this.toolbar=this.cont.obj.attachToolbar(),this.cont.obj.adjustContent(this.cont.obj,0),this.setSizes());return this.toolbar};this.detachToolbar=function(){if(this.toolbar){this.cont.obj.detachToolbar(),this.setSizes(),this.toolbar=null}};this.showToolbar=function(){this.toolbar&&(this.cont.obj.showToolbar(),this.setSizes())};this.hideToolbar=function(){this.toolbar&&(this.cont.obj.hideToolbar(),this.setSizes())};this.attachStatusBar=function(){this.base._isWindow?this.statusbar=this.base._window.attachStatusBar():(this.statusbar=this.cont.obj.attachStatusBar(),this.cont.obj.adjustContent(this.cont.obj,0),this.setSizes());return this.statusbar};this.detachStatusBar=function(){if(this.statusbar){this.cont.obj.detachStatusBar(),this.setSizes(),this.statusbar=null}};this.showStatusBar=function(){this.statusbar&&(this.cont.obj.showStatusBar(),this.setSizes())};this.hideStatusBar=function(){this.statusbar&&(this.cont.obj.hideStatusBar(),this.setSizes())};this.progressOn=function(){this._progressControlGlobal(!0)};this.progressOff=function(){this._progressControlGlobal(!1)};this._progressControl=function(f,e){if(this.polyObj[f]!=null){if(this.polyObj[f]._progressCover==null){var o=document.createElement("DIV");o.className="dhtmlxLayoutPolyProgress";this.polyObj[f].childNodes[0].appendChild(o);var n=document.createElement("DIV");n.className="dhtmlxLayoutPolyProgressBGIMG";this.polyObj[f].childNodes[0].appendChild(n);this.polyObj[f]._progressCover=[o,n]}this.polyObj[f]._progressCover[0].style.display=e==!0?"":"none";this.polyObj[f]._progressCover[1].style.display=this.polyObj[f]._progressCover[0].style.display}};this._progressControlGlobal=function(e){if(this._progressCover==null){var d=document.createElement("DIV");d.className="dhtmlxLayoutPolyProgressGlobal_"+this.skin;this.obj.appendChild(d);var f=document.createElement("DIV");f.className="dhtmlxLayoutPolyProgressBGIMGGlobal_"+this.skin;this.obj.appendChild(f);this._progressCover=[d,f]}this._progressCover[0].style.display=e==!0?"":"none";this._progressCover[1].style.display=this._progressCover[0].style.display};this._fixSize=function(e,d,f){if(this.polyObj[e]!=null){this.polyObj[e]._isBlockedWidth=d,this.polyObj[e]._isBlockedHeight=f,this._fixSplitters()}};this._fixSplitters=function(){for(var d=0;d<this.sepVer.length;d++){var c=this._findDockCellsVer(this.sepVer[d]);if(c[0]==null||c[1]==null){if(this.sepVer[d].className!="dhtmlxLayoutPolySplitterVerInactive"){this.sepVer[d].className="dhtmlxLayoutPolySplitterVerInactive"}}else{if(this.sepVer[d].className!="dhtmlxLayoutPolySplitterVer"){this.sepVer[d].className="dhtmlxLayoutPolySplitterVer"}}}for(d=0;d<this.sepHor.length;d++){if(c=this._findDockCellsHor(this.sepHor[d]),c[0]==null||c[1]==null){if(this.sepHor[d].className!="dhtmlxLayoutPolySplitterHorInactive"){this.sepHor[d].className="dhtmlxLayoutPolySplitterHorInactive"}}else{if(this.sepHor[d].className!="dhtmlxLayoutPolySplitterHor"){this.sepHor[d].className="dhtmlxLayoutPolySplitterHor"}}}};this._fixIcons=function(){for(var s in this.polyObj){for(var o=this.polyObj[s]._rowData,x=this.polyObj[s]._collapsed,w=-1,v=0;v<o.length;v++){typeof o[v]!="object"&&o[v]==s&&(w=v)}var u=null;if(w!=-1){for(v=w+1;v<o.length;v++){typeof o[v]=="object"?u=this.polyObj[s]._resize=="ver"?x?"b":"t":x?"r":"l":this.polyObj[o[v]]._collapsed==!1&&(u=this.polyObj[s]._resize=="ver"?x?"b":"t":x?"r":"l")}if(u==null&&w>=1){for(v=w-1;v>=0;v--){typeof o[v]=="object"?u=this.polyObj[s]._resize=="ver"?x?"t":"b":x?"l":"r":this.polyObj[o[v]]._collapsed==!1&&(u=this.polyObj[s]._resize=="ver"?x?"t":"b":x?"l":"r")}}}if(u!=null){var n=this.polyObj[s]._resize;this.polyObj[s].childNodes[0].childNodes[0].childNodes[4].className="dhtmlxInfoButtonShowHide_"+n+" dhxLayoutButton_"+this.skin+"_"+n+(this.polyObj[s]._collapsed?"2":"1")+u}}};this._defineWindowMinDimension=function(I,H){if(H==!0){var F=[];F[0]=parseInt(I.style.width);F[1]=parseInt(I.style.height)}else{F=I.getDimension();if(F[0]=="100%"){F[0]=I.offsetWidth}if(F[1]=="100%"){F[1]=I.offsetHeight}}var E=l._getNearestParents("hor"),D=l._getNearestParents("ver");if(!H){var C=[],A=[],y;for(y in E){C[C.length]=y}for(y in D){A[A.length]=y}l._checkAlterMinSize([C,A]);for(var x={},w={},u=0;u<l._alterSizes.length;u++){y=l._alterSizes[u][0];var d=l._alterSizes[u][1],L=l._alterSizes[u][2];x[y]==null?x[y]=d:d>x[y]&&(x[y]=d);w[y]==null?w[y]=L:L>w[y]&&(w[y]=L)}for(y in E){x[y]!=null&&(E[y]=E[y]-x[y]+l._minWidth)}for(y in D){w[y]!=null&&(D[y]=D[y]-w[y]+l._minHeight-(l.polyObj[y].childNodes[0].style.display!="none"?l.skinParams[l.skin].cpanel_height:0))}}var J=65536;for(y in E){E[y]<J&&(J=E[y])}J-=l._minWidth;J=F[0]-J;J<l._dimension[0]&&!H&&(J=l._dimension[0]);var K=65536;for(y in D){D[y]<K&&(K=D[y])}K-=l._minHeight;K=F[1]-K;K<l._dimension[1]&&!H&&(K=l._dimension[1]);if(H==!0){return["",J,K]}I.setMinDimension(J,K)};this._getNearestParents=function(D){for(var C=D=="hor"?this._autoHor:this._autoVer,A={},y=0;y<C.length;y++){var x=C[y];if(this.polyObj[x]._collapsed==!0&&this.polyObj[x]._resize==D){for(var w=this.polyObj[x]._rowData,v=-1,u=0;u<w.length;u++){typeof w[u]=="object"?v=u:w[u]==x&&(v=u)}var s=v,x=null;if(v>0){for(u=v-1;u>=0;u--){typeof w[u]=="object"?x=w[u]:this.polyObj[w[u]]._collapsed==!1&&x==null&&(x=w[u])}}if(x==null){for(u=s;u<w.length;u++){typeof w[u]=="object"?x=w[u]:this.polyObj[w[u]]._collapsed==!1&&x==null&&(x=w[u])}}}if(x!=null){typeof x=="string"&&(x=Array(x));for(u=0;u<x.length;u++){A[x[u]]=parseInt(D=="hor"?this.polyObj[x[u]].style.width:this.polyObj[x[u]].style.height)}}}return A};this.setSizes=function(o){var n=this._defineWindowMinDimension(this.base,!0);this.cont.obj.setMinContentSize(n[1],n[2]);this.cont.obj.adjustContent(this.cont.obj,0);if(this.base.offsetParent){this.cont&&o!==!1&&this.cont.obj.adjustContent(this.cont.obj,this._mTop,null,null,this._mBottom);var w=this.base.offsetParent.offsetWidth-this.base.offsetWidth+(this._baseWFix!=null?this._baseWFix:0),v=this.base.offsetParent.offsetHeight-this.base.offsetHeight+(this._baseHFix!=null?this._baseHFix:0);this.base.style.width=parseInt(this.base.style.width)+w+"px";this.base.style.height=parseInt(this.base.style.height)+v+"px";var u={},s;for(s in this._getNearestParents("hor")){this.polyObj[s].style.width=Math.max(0,parseInt(this.polyObj[s].style.width)+w)+"px",this.polyObj[s].childNodes[0].style.width=this.polyObj[s].style.width,u[s]=1}for(s in this._getNearestParents("ver")){this.polyObj[s].style.height=Math.max(0,parseInt(this.polyObj[s].style.height)+v)+"px",this.polyObj[s].childNodes[0].style.height=this.polyObj[s].style.height,u[s]=1}for(s in u){this.polyObj[s].adjustContent(this.polyObj[s].childNodes[0],this.polyObj[s]._noHeader?0:this.skinParams[this.skin].cpanel_height),this.polyObj[s].updateNestedObjects()}this._fixCollapsedText();this.callEvent("onResizeFinish",[])}};dhtmlxEventable(this);this._init()}else{alert(this.i18n.dhxcontalert)}}dhtmlXLayoutObject.prototype.unload=function(){this._isIPad?(document.removeEventListener("touchmove",this._doOnMouseMove,!1),document.removeEventListener("touchend",this._doOnMouseUp,!1)):_isIE?(document.body.detachEvent("onselectstart",this._doOnSelectStart),document.body.detachEvent("onmousemove",this._doOnMouseMove),document.body.detachEvent("onmouseup",this._doOnMouseUp)):(document.body.removeEventListener("mousemove",this._doOnMouseMove,!1),document.body.removeEventListener("mouseup",this._doOnMouseUp,!1));this._doOnMouseUp=this._doOnMouseMove=this._doOnSelectStart=null;for(var h in this.polyObj){var g=this.polyObj[h];g._isCell=null;g.skin=null;g.getId=null;g.getIndex=null;g.showHeader=null;g.hideHeader=null;g.isHeaderVisible=null;g.setText=null;g.getText=null;g.expand=null;g.collapse=null;g.isCollapsed=null;g.dock=null;g.undock=null;g.setWidth=null;g.getWidth=null;g.setHeight=null;g.getHeight=null;g.fixSize=null;g.progressOn=null;g.progressOff=null;g._doOnAttachMenu=null;g._doOnAttachToolbar=null;g._doOnAttachStatusBar=null;g._collapsed=null;g._idd=null;g._ind=null;g._rowData=null;g._dir=null;g._initCPanel=null;g._minW=null;g._minH=null;g._resize=null;g._savedH=null;g._savedW=null;g.ondblclick=null;var m=g.childNodes[0].childNodes[0];m.className="";m._dockCell=null;m._resize=null;m._h=null;m.ondblclick=null;m.childNodes[4].onclick=null;for(var l=0;l<m.childNodes.length;l++){m.childNodes[l].onselectstart=null}for(;m.childNodes.length>0;){m.removeChild(m.childNodes[0])}m.parentNode.removeChild(m);m=null;g._dhxContDestruct();g._dhxContDestruct=null;g.removeChild(g.childNodes[0]);g.parentNode.removeChild(g);g=null}for(h in this.polyObj){this.polyObj[h]=null}for(var k=0;k<this.items.length;k++){this.items[k]=null}this.items=this.polyObj=null;for(var j=this.tpl.childNodes[0];j.childNodes.length>0;){for(;j.childNodes[0].childNodes.length>0;){l=j.childNodes[0].childNodes[0];l._top=null;l._bottom=null;l._left=null;l._right=null;l._dblClick=null;l._isSep=null;l._dir=null;l._lastClick=null;l.ondblclick=null;l.onmousedown=null;l.onmouseup=null;for(l.onselectstart=null;l.childNodes.length>0;){l.removeChild(l.childNodes[0])}l.parentNode.removeChild(l);l=null}j.removeChild(j.childNodes[0])}j.parentNode.removeChild(j);j=null;this.tpl.parentNode.removeChild(this.tpl);this.tpl=null;for(h in this.sepHor){this.sepHor[h]=null}for(h in this.sepVer){this.sepVer[h]=null}this.sepVer=this.sepHor=null;if(this._ha){this.detachEvent(this._haEv);for(this._haEv=null;this._ha.childNodes.length>0;){this._ha.removeChild(this._ha.childNodes[0])}this._ha.parentNode.removeChild(this._ha);this._ha=null}if(this._fa){this.detachEvent(this._faEv);for(this._faEv=null;this._fa.childNodes.length>0;){this._fa.removeChild(this._fa.childNodes[0])}this._fa.parentNode.removeChild(this._fa);this._fa=null}this.attachFooter=this.attachHeader=null;this.detachAllEvents();this._CPanelHeight=this._CPanelBtnsWidth=this.tplSizes=this.tplData=this.skinParams=this.skin=this.imagePath=this.h=this.w=this._xmlLoader=this._totalRows=this._totalCols=this._rowsRatio=this._colsRatio=this._resY=this._resX=this._resObj=this._resFunc=this._minHeight=this._minWidth=this._mTop=this._mBottom=this._layoutView=this._effects=this._dimension=this._availAutoSize=this._autoVer=this._autoHor=null;this.sizer.parentNode&&this.sizer.parentNode.removeChild(this.sizer);this._resYMaxHeightBottom=this._resYMaxHeightTop=this._resXMaxWidthRight=this._resXMaxWidthLeft=this._resYStart=this._resXStart=this._minHTAlter=this._minHBAlter=this._minWRAlter=this._minWLAlter=this._collapsedW=this._collapsedH=this._dblClickTM=this._doOnDoubleClick=this._autodetectSkin=this.dhx_SeverCatcherPath=this.i18n=this._isIPad=this._effect=this._autosize=this._cells=this.hideStatusBar=this.hideToolbar=this.hideMenu=this.showStatusBar=this.showToolbar=this.showMenu=this.detachStatusBar=this.detachToolbar=this.detachMenu=this.attachStatusBar=this.attachToolbar=this.attachMenu=this.setCollapsedText=this.updateNestedObjectsArray=this.unload=this.unDockWindow=this.showPanel=this.setText=this.setSkin=this.setSizes=this.setImagePath=this.setEffect=this.setAutoSize=this.progressOn=this.progressOff=this.listViews=this.listAutoSizes=this.isPanelVisible=this.hidePanel=this.getTextTooltip=this.getText=this.getIndexById=this.getIdByIndex=this.getEffect=this.forEachItem=this.eventCatcher=this.dockWindow=this.detachEvent=this.detachAllEvents=this.checkEvent=this.cells=this.callEvent=this.attachToolbar=this.attachStatusBar=this.attachMenu=this.attachEvent=this._xmlParser=this._showCovers=this._setWidth=this._setW=this._setHeight=this._setH=this._resAreaData=this._resizeVer=this._resizeStop=this._resizeHor=this._progressControlGlobal=this._progressControl=this._isResizable=this._isCollapsed=this._initWindows=this._init=this._hideCovers=this._getNearestParents=this._fixSplitters=this._fixSize=this._fixPositionInWin=this._fixIcons=this._findDockCellsVer=this._findDockCellsHor=this._expandEffect=this._expand=this._doExpand=this._doCollapse=this._defineWindowMinDimension=this._collectResAreaData=this._collapseEffect=this._collapse=this._checkAlterMinSize=this._changeCPanelText=this._buildSurface=this._attachSizer=this._alterSizes=this.sizer=null;if(this.obj){this.obj.parentNode.removeChild(this.obj),this.obj=null}if(this.base&&this.base!=document.body){this.base.parentNode.removeChild(this.base),this.base=null}if(this.cont){this.cont.obj._dhxContDestruct(),this.cont=null}if(this.dhxWins){this.dhxWins.unload(),this.dhxWinsIdPrefix=this.dhxWins=null}if(this._doOnResizeStart){_isIE?window.detachEvent("onresize",this._doOnResizeStart):window.removeEventListener("resize",this._doOnResizeStart,!1),this._tmTime=this._doOnResizeEnd=this._doOnResizeStart=null}that=null};dhtmlXLayoutObject.prototype.tplData={"1C":'<layout><autosize hor="a" ver="a" rows="1" cols="1"/><table data="a"/><row><cell obj="a" wh="1,1" resize="ver" neighbors="a"/></row></layout>',"2E":'<layout><autosize hor="a;b" ver="b" rows="2" cols="1"/><table data="a;b"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b"/></row><row sep="true"><cell sep="hor" top="a" bottom="b" dblclick="a"/></row><row><cell obj="b" wh="1,2" resize="ver" neighbors="a;b"/></row></layout>',"2U":'<layout><autosize hor="b" ver="a;b" rows="1" cols="2"/><table data="a,b"/><row><cell obj="a" wh="2,1" resize="hor" neighbors="a;b"/><cell sep="ver" left="a" right="b" dblclick="a"/><cell obj="b" wh="2,1" resize="hor" neighbors="a;b"/></row></layout>',"3E":'<layout><autosize hor="a;b;c" ver="c" rows="3" cols="1"/><table data="a;b;c"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b;c"/></row><row sep="yes"><cell sep="hor" top="a" bottom="b;c" dblclick="a"/></row><row><cell obj="b" wh="1,3" resize="ver" neighbors="a;b;c"/></row><row sep="yes"><cell sep="hor" top="a;b" bottom="c" dblclick="b"/></row><row><cell obj="c" wh="1,3" resize="ver" neighbors="a;b;c"/></row></layout>',"3W":'<layout><autosize hor="c" ver="a;b;c" rows="1" cols="3"/><table data="a,b,c"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a" right="b;c" dblclick="a"/><cell obj="b" wh="3,1" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a;b" right="c" dblclick="b"/><cell obj="c" wh="3,1" resize="hor" neighbors="a;b;c"/></row></layout>',"3J":'<layout><autosize hor="b" ver="b;c" rows="2" cols="2"/><table data="a,b;c,b"/><row><cell obj="a" wh="2,2" resize="ver" neighbors="a;c"/><cell sep="ver" left="a,c" right="b" dblclick="b" rowspan="3"/><cell obj="b" wh="2,1" resize="hor" neighbors="a,c;b" rowspan="3"/></row><row sep="yes"><cell sep="hor" top="a" bottom="c" dblclick="a"/></row><row><cell obj="c" wh="2,2" resize="ver" neighbors="a;c"/></row></layout>',"3T":'<layout><autosize hor="a;c" ver="b;c" rows="2" cols="2"/><table data="a,a;b,c"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b,c" colspan="3"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c" dblclick="a" colspan="3"/></row><row><cell obj="b" wh="2,2" resize="hor" neighbors="b;c"/><cell sep="ver" left="b" right="c" dblclick="b"/><cell obj="c" wh="2,2" resize="hor" neighbors="b;c"/></row></layout>',"3L":'<layout><autosize hor="b;c" ver="a;c" rows="2" cols="2"/><table data="a,b;a,c"/><row><cell obj="a" wh="2,1" resize="hor" neighbors="a;b,c" rowspan="3"/><cell sep="ver" left="a" right="b,c" dblclick="a" rowspan="3"/><cell obj="b" wh="2,2" resize="ver" neighbors="b;c"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c"/></row><row><cell obj="c" wh="b,2" resize="ver" neighbors="b;c"/></row></layout>',"3U":'<layout><autosize hor="b;c" ver="c" rows="2" cols="2"/><table data="a,b;c,c"/><row><cell obj="a" wh="2,2" resize="hor" neighbors="a;b"/><cell sep="ver" left="a" right="b" dblclick="a"/><cell obj="b" wh="2,2" resize="hor" neighbors="a;b"/></row><row sep="true"><cell sep="hor" top="a,b" bottom="c" dblclick="c" colspan="3"/></row><row><cell obj="c" wh="1,2" resize="ver" neighbors="a,b;c" colspan="3"/></row></layout>',"4H":'<layout><autosize hor="d" ver="a;c;d" rows="2" cols="3"/><table data="a,b,d;a,c,d"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b,c;d" rowspan="3"/><cell sep="ver" left="a" right="b,c;d" dblclick="a" rowspan="3"/><cell obj="b" wh="3,2" resize="ver" neighbors="b;c"/><cell sep="ver" left="a;b,c" right="d" dblclick="d" rowspan="3"/><cell obj="d" wh="3,1" resize="hor" neighbors="a;b,c;d" rowspan="3"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c"/></row><row><cell obj="c" wh="3,2" resize="ver" neighbors="b;c"/></row></layout>',"4I":'<layout><autosize hor="a;c;d" ver="d" rows="3" cols="2"/><table data="a,a;b,c;d,d"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c;d" colspan="3"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c;d" dblclick="a" colspan="3"/></row><row><cell obj="b" wh="2,3" resize="hor" neighbors="b;c"/><cell sep="ver" left="b" dblclick="b" right="c"/><cell obj="c" wh="2,3" resize="hor" neighbors="b;c"/></row><row sep="true"><cell sep="hor" top="a;b,c" bottom="d" dblclick="d" colspan="3"/></row><row><cell obj="d" wh="1,3" resize="ver" neighbors="a;b,c;d" colspan="3"/></row></layout>',"4T":'<layout><autosize hor="a;d" ver="b;c;d" rows="2" cols="3"/><table data="a,a,a;b,c,d"/><row><cell obj="a" wh="1,2" resize="ver" neighbors="a;b,c,d" colspan="5"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c,d" dblclick="a" colspan="5"/></row><row><cell obj="b" wh="3,2" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b" right="c;d" dblclick="b"/><cell obj="c" wh="3,2" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b;c" right="d" dblclick="c"/><cell obj="d" wh="3,2" resize="hor" neighbors="b;c;d"/></row></layout>',"4U":'<layout><autosize hor="c;d" ver="d" rows="2" cols="3"/><table data="a,b,c;d,d,d"/><row><cell obj="a" wh="3,2" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a" right="b;c" dblclick="a"/><cell obj="b" wh="3,2" resize="hor" neighbors="a;b;c"/><cell sep="ver" left="a;b" right="c" dblclick="b"/><cell obj="c" wh="3,2" resize="hor" neighbors="a;b;c"/></row><row sep="true"><cell sep="hor" top="a,b,c" bottom="d" dblclick="d" colspan="5"/></row><row><cell obj="d" wh="1,2" resize="ver" neighbors="a,b,c;d" colspan="5"/></row></layout>',"5H":'<layout><autosize hor="b;c;d" ver="a;c;e" rows="3" cols="3"/><table data="a,b,e;a,c,e;a,d,e"/><row><cell obj="a" wh="3,1" resize="hor" neighbors="a;b,c,d" rowspan="5"/><cell sep="ver" left="a" right="b,c,d;e" dblclick="a" rowspan="5"/><cell obj="b" wh="3,3" resize="ver" neighbors="b;c;d"/><cell sep="ver" left="a;b,c,d" right="e" dblclick="e" rowspan="5"/><cell obj="e" wh="3,1" resize="hor" neighbors="b,c,d;e" rowspan="5"/></row><row sep="true"><cell sep="hor" top="b" dblclick="b" bottom="c;d"/></row><row><cell obj="c" wh="3,3" resize="ver" neighbors="b;c;d"/></row><row sep="true"><cell sep="hor" top="b;c" dblclick="c" bottom="d"/></row><row><cell obj="d" wh="3,3" resize="ver" neighbors="b;c;d"/></row></layout>',"5I":'<layout><autosize hor="a;d;e" ver="e" rows="3" cols="3"/><table data="a,a,a;b,c,d;e,e,e"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c,d;e" colspan="5"/></row><row sep="match"><cell sep="hor" top="a" bottom="b,c,d;e" dblclick="a" colspan="5"/></row><row><cell obj="b" wh="3,3" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b" right="c;d" dblclick="b"/><cell obj="c" wh="3,3" resize="hor" neighbors="b;c;d"/><cell sep="ver" left="b;c" right="d" dblclick="c"/><cell obj="d" wh="3,3" resize="hor" neighbors="b;c;d"/></row><row sep="match"><cell sep="hor" top="a;b,c,d" bottom="e" dblclick="e" colspan="5"/></row><row><cell obj="e" wh="1,3" resize="ver" neighbors="a;b,c,d;e" colspan="5"/></row></layout>',"6I":'<layout><autosize hor="a;e;f" ver="f" rows="3" cols="4"/><table data="a,a,a,a;b,c,d,e;f,f,f,f"/><row><cell obj="a" wh="1,3" resize="ver" neighbors="a;b,c,d,e;f" colspan="7"/></row><row sep="true"><cell sep="hor" top="a" bottom="b,c,d,e;f" dblclick="a" colspan="7"/></row><row><cell obj="b" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b" right="c;d;e" dblclick="b"/><cell obj="c" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b;c" right="d;e" dblclick="c"/><cell obj="d" wh="4,3" resize="hor" neighbors="b;c;d;e"/><cell sep="ver" left="b;c;d" right="e" dblclick="d"/><cell obj="e" wh="4,3" resize="hor" neighbors="b;c;d;e"/></row><row sep="true"><cell sep="hor" top="a;b,c,d,e" bottom="f" dblclick="f" colspan="7"/></row><row><cell obj="f" wh="1,3" resize="ver" neighbors="a;b,c,d,e;f" colspan="7"/></row></layout>'};dhtmlXLayoutObject.prototype._availAutoSize={"1C_hor":["a"],"1C_ver":["a"],"2E_hor":["a;b"],"2E_ver":["a","b"],"2U_hor":["a","b"],"2U_ver":["a;b"],"3E_hor":["a;b;c"],"3E_ver":["a","b","c"],"3W_hor":["a","b","c"],"3W_ver":["a;b;c"],"3J_hor":["a;c","b"],"3J_ver":["a;b","c;b"],"3T_hor":["a;b","a;c"],"3T_ver":["a","b;c"],"3L_hor":["a","b;c"],"3L_ver":["a;b","a;c"],"3U_hor":["a;c","b;c"],"3U_ver":["a;b","c"],"4H_hor":["a","b;c","d"],"4H_ver":["a;b;d","a;c;d"],"4I_hor":["a;b;d","a;c;d"],"4I_ver":["a","b;c","d"],"4T_hor":["a;b","a;c","a;d"],"4T_ver":["a","b;c;d"],"4U_hor":["a;d","b;d","c;d"],"4U_ver":["a;b;c","d"],"5H_hor":["a","b;c;d","e"],"5H_ver":["a;b;e","a;c;e","a;d;e"],"5I_hor":["a;b;e","a;c;e","a;d;e"],"5I_ver":["a","b;c;d","e"],"6I_hor":["a;b;f","a;c;f","a;d;f","a;e;f"],"6I_ver":["a","b;c;d;e","f"]};dhtmlXLayoutObject.prototype.setCollapsedText=function(f,e){if(this.polyObj[f]){var h=this.polyObj[f].childNodes[0].childNodes[0];if(h.childNodes[h.childNodes.length-1]._ct===!0){var g=h.childNodes[h.childNodes.length-1]}else{g=document.createElement("DIV"),g._ct=!0,g.className="dhtmlxInfoBarLabel_collapsed_"+this.polyObj[f]._resize,h.appendChild(g)}g.innerHTML=e;this._fixCollapsedText();h=null}};dhtmlXLayoutObject.prototype._fixCollapsedText=function(){for(var d in this.polyObj){if(this.polyObj[d]._resize=="hor"){var c=this.polyObj[d].childNodes[0].childNodes[0];if(c.childNodes[c.childNodes.length-1]._ct===!0&&(c.childNodes[c.childNodes.length-1].style.width=Math.max(0,c.offsetHeight-c.childNodes[4].offsetTop-c.childNodes[4].offsetHeight-12)+"px",_isFF||_isOpera||_isChrome||navigator.userAgent.indexOf("MSIE 10.0")>=0)){c.childNodes[c.childNodes.length-1].style.bottom="-12px"}}}};dhtmlXLayoutObject.prototype.i18n={dhxcontalert:"dhtmlxcontainer.js is missed on the page",collapse:"Collapse",expand:"Expand",dock:"Dock",undock:"UnDock"};(function(){dhtmlx.extend_api("dhtmlXLayoutObject",{_init:function(b){return[b.parent,b.pattern,b.skin]},image_path:"setImagePath",effect:"_effect",cells:"_cells",autosize:"_autosize"},{_cells:function(f){for(var e=0;e<f.length;e++){var h=f[e],g=this.cells(h.id);g&&(h.height&&g.setHeight(h.height),h.width&&g.setWidth(h.width),h.text&&g.setText(h.text),h.collapse&&g.collapse(),h.fix_size&&g.fixSize(h.fix_size[0],h.fix_size[1]),h.header===!1&&g.hideHeader())}},_autosize:function(b){this.setAutoSize(b[0],b[1])},_effect:function(b){b.collapse&&this.setEffect("collapse",b.collapse);b.resize&&this.setEffect("resize",b.resize);b.highlight&&this.setEffect("highlight",b.highlight)}})})();dhtmlXLayoutObject.prototype.attachHeader=function(f){if(!(this._ha||this.cont.obj!=document.body)){typeof f!="object"&&(f=document.getElementById(f));var e=2,h=-4,g=2;this.skin=="dhx_web"?(e=g=9,h=-18):this.skin=="dhx_terrace"&&(e=g=14,h=-28);if(this._fa!=null){h=this.cont.obj._offsetHeight}this.cont.obj._offsetTop=f.offsetHeight+e*2;this.cont.obj._offsetHeight=-f.offsetHeight+h-e;this.setSizes();this._ha=document.createElement("DIV");this._ha.style.position="absolute";this._ha.style.top=g+"px";this._ha.style.left=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.left;this._ha.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width;this._ha.style.height=f.offsetHeight+"px";document.body.appendChild(this._ha);this._ha.appendChild(f);this._haEv=this.attachEvent("onResizeFinish",function(){this._ha.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width})}};dhtmlXLayoutObject.prototype.detachHeader=function(){if(this._ha&&this.cont.obj==document.body){document.body.appendChild(this._ha.firstChild);this.detachEvent(this._haEv);this._ha.parentNode.removeChild(this._ha);this._ha=this._haEv=null;var d=2,c=-4;this.skin=="dhx_web"?(d=9,c=-18):this.skin=="dhx_terrace"&&(d=14,c=-28);this._fa!=null&&(c=this.cont.obj._offsetHeight+this.cont.obj._offsetTop-d);this.cont.obj._offsetTop=d;this.cont.obj._offsetHeight=c;this.setSizes()}};dhtmlXLayoutObject.prototype.attachFooter=function(f){if(!(this._fa||this.cont.obj!=document.body)){typeof f!="object"&&(f=document.getElementById(f));var e=2,h=-4,g=2;this.skin=="dhx_web"?(e=g=9,h=-18):this.skin=="dhx_terrace"&&(e=g=14,h=-28);if(this._ha!=null){e=this.cont.obj._offsetTop}this.cont.obj._offsetHeight=-f.offsetHeight+h-e;this.setSizes();this._fa=document.createElement("DIV");this._fa.style.position="absolute";this._fa.style.bottom=g+"px";this._fa.style.left=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.left;this._fa.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width;this._fa.style.height=f.offsetHeight+"px";document.body.appendChild(this._fa);this._fa.appendChild(f);this._faEv=this.attachEvent("onResizeFinish",function(){this._fa.style.width=this.cont.obj.vs[this.cont.obj.av].dhxcont.style.width})}};dhtmlXLayoutObject.prototype.detachFooter=function(){if(this._fa&&this.cont.obj==document.body){document.body.appendChild(this._fa.firstChild);this.detachEvent(this._faEv);this._fa.parentNode.removeChild(this._fa);this._fa=this._faEv=null;var d=2,c=-4;this.skin=="dhx_web"?(d=9,c=-18):this.skin=="dhx_terrace"&&(d=14,c=-28);if(this._ha!=null){c=-this.cont.obj._offsetTop-d,d=this.cont.obj._offsetTop}this.cont.obj._offsetTop=d;this.cont.obj._offsetHeight=c;this.setSizes()}};dhtmlXLayoutObject.prototype._fixToolbars=function(){if(_isIE){for(var b in this.polyObj){this.polyObj[b].vs[this.polyObj[b].av].toolbar!=null&&this.polyObj[b].vs[this.polyObj[b].av].toolbar._fixSpacer()}}};dhtmlXLayoutObject.prototype._hideBorders=function(){if(this.skin=="dhx_terrace"){this._cpm_old=this.skinParams[this.skin].cell_pading_max;this.skinParams[this.skin].cell_pading_max=[1,0,0,0];for(var b in this.polyObj){this.polyObj[b]._setPadding(this.skinParams[this.skin].cell_pading_max,"dhxcont_layout_"+this.skin),this.polyObj[b].adjustContent(this.polyObj[b].childNodes[0],this.skinParams[this.skin].cpanel_height)}}};function dhtmlXMenuObject(j,h){var o=this;this.addBaseIdAsContextZone=null;this.isDhtmlxMenuObject=!0;this.skin=h!=null?h:typeof dhtmlx!="undefined"&&typeof dhtmlx.skin=="string"?dhtmlx.skin:"dhx_skyblue";this.imagePath="";this._isIE6=!1;if(_isIE){this._isIE6=window.XMLHttpRequest==null?!0:!1}if(j==null){this.base=document.body}else{var n=typeof j=="string"?document.getElementById(j):j;if(n!=null){this.base=n;if(!this.base.id){this.base.id=(new Date).valueOf()}for(;this.base.childNodes.length>0;){this.base.removeChild(this.base.childNodes[0])}this.base.className+=" dhtmlxMenu_"+this.skin+"_Middle dir_left";this.base._autoSkinUpdate=!0;if(this.base.oncontextmenu){this.base._oldContextMenuHandler=this.base.oncontextmenu}this.addBaseIdAsContextZone=this.base.id;this.base.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.base.oncontextmenu=function(b){b=b||event;return b.returnValue=!1}}else{this.base=document.body}}this.topId="dhxWebMenuTopId";if(!this.extendedModule){for(var m=function(){alert(this.i18n.dhxmenuextalert)},l="setItemEnabled,setItemDisabled,isItemEnabled,_changeItemState,getItemText,setItemText,loadFromHTML,hideItem,showItem,isItemHidden,_changeItemVisible,setUserData,getUserData,setOpenMode,setWebModeTimeout,enableDynamicLoading,_updateLoaderIcon,getItemImage,setItemImage,clearItemImage,setAutoShowMode,setAutoHideMode,setContextMenuHideAllMode,getContextMenuHideAllMode,setVisibleArea,setTooltip,getTooltip,setHotKey,getHotKey,setItemSelected,setTopText,setRTL,setAlign,setHref,clearHref,getCircuit,_clearAllSelectedSubItemsInPolygon,_checkArrowsState,_addUpArrow,_addDownArrow,_removeUpArrow,_removeDownArrow,_isArrowExists,_doScrollUp,_doScrollDown,_countPolygonItems,setOverflowHeight,_getRadioImgObj,_setRadioState,_radioOnClickHandler,getRadioChecked,setRadioChecked,addRadioButton,_getCheckboxState,_setCheckboxState,_readLevel,_updateCheckboxImage,_checkboxOnClickHandler,setCheckboxState,getCheckboxState,addCheckbox,serialize".split(","),k=0;k<l.length;k++){this[l[k]]||(this[l[k]]=m)}l=null}this.fixedPosition=!1;this.menuLastClicked=this.menuSelected=-1;this.idPrefix="";this.itemTagName="item";this.itemTextTagName="itemtext";this.userDataTagName="userdata";this.itemTipTagName="tooltip";this.itemHotKeyTagName="hotkey";this.itemHrefTagName="href";this.dirTopLevel="bottom";this.dirSubLevel="right";this.menuY2=this.menuY1=this.menuX2=this.menuX1=null;this.menuMode="web";this.menuTimeoutMsec=400;this.menuTimeoutHandler=null;this.autoOverflow=!1;this.idPull={};this.itemPull={};this.userData={};this.radio={};this._rtl=!1;this._align="left";this.menuTouched=!1;this.zInd=this.zIndInit=1200;this.zIndStep=50;this.menuModeTopLevelTimeout=!0;this.menuModeTopLevelTimeoutTime=200;this._topLevelBottomMargin=1;this._topLevelRightMargin=0;this._topLevelOffsetLeft=1;this._arrowFFFix=_isIE?document.compatMode=="BackCompat"?0:-4:-4;this.setSkin=function(e){var d=this.skin;this.skin=e;switch(this.skin){case"dhx_black":case"dhx_blue":case"dhx_skyblue":case"dhx_web":this._topLevelBottomMargin=2;this._topLevelOffsetLeft=this._topLevelRightMargin=1;this._arrowFFFix=_isIE?document.compatMode=="BackCompat"?0:-4:-4;break;case"dhx_web":this._arrowFFFix=0;break;case"dhx_terrace":this._topLevelOffsetLeft=this._topLevelRightMargin=this._topLevelBottomMargin=0,this._arrowFFFix=_isIE?document.compatMode=="BackCompat"?0:-4:-4}if(this.base._autoSkinUpdate){this.base.className=this.base.className.replace("dhtmlxMenu_"+d+"_Middle","")+" dhtmlxMenu_"+this.skin+"_Middle"}for(var f in this.idPull){this.idPull[f].className=String(this.idPull[f].className).replace(d,this.skin)}};this.setSkin(this.skin);this.dLoad=!1;this.dLoadUrl="";this.dLoadSign="?";this.loaderIcon=!1;this.limit=0;this._scrollUpTM=null;this._scrollUpTMTime=20;this._scrollUpTMStep=3;this._scrollDownTM=null;this._scrollDownTMTime=20;this._scrollDownTMStep=3;this.context=!1;this.contextZones={};this.contextMenuZoneId=!1;this.contextHideAllMode=this.contextAutoHide=this.contextAutoShow=!0;this._selectedSubItems=[];this._openedPolygons=[];this._addSubItemToSelected=function(f,e){for(var s=!0,g=0;g<this._selectedSubItems.length;g++){this._selectedSubItems[g][0]==f&&this._selectedSubItems[g][1]==e&&(s=!1)}s==!0&&this._selectedSubItems.push([f,e]);return s};this._removeSubItemFromSelected=function(g,f){for(var v=[],u=!1,s=0;s<this._selectedSubItems.length;s++){this._selectedSubItems[s][0]==g&&this._selectedSubItems[s][1]==f?u=!0:v[v.length]=this._selectedSubItems[s]}if(u==!0){this._selectedSubItems=v}return u};this._getSubItemToDeselectByPolygon=function(g){for(var f=[],v=0;v<this._selectedSubItems.length;v++){if(this._selectedSubItems[v][1]==g){f[f.length]=this._selectedSubItems[v][0];for(var f=f.concat(this._getSubItemToDeselectByPolygon(this._selectedSubItems[v][0])),u=!0,s=0;s<this._openedPolygons.length;s++){this._openedPolygons[s]==this._selectedSubItems[v][0]&&(u=!1)}u==!0&&(this._openedPolygons[this._openedPolygons.length]=this._selectedSubItems[v][0]);this._selectedSubItems[v][0]=-1;this._selectedSubItems[v][1]=-1}}return f};this._hidePolygon=function(b){if(this.idPull["polygon_"+b]!=null){if(typeof this._menuEffect!="undefined"&&this._menuEffect!==!1){this._hidePolygonEffect("polygon_"+b)}else{if(this.idPull["polygon_"+b].style.display=="none"){return}this.idPull["polygon_"+b].style.display="none";if(this.idPull["arrowup_"+b]!=null){this.idPull["arrowup_"+b].style.display="none"}if(this.idPull["arrowdown_"+b]!=null){this.idPull["arrowdown_"+b].style.display="none"}this._updateItemComplexState(b,!0,!1);if(this._isIE6&&this.idPull["polygon_"+b+"_ie6cover"]!=null){this.idPull["polygon_"+b+"_ie6cover"].style.display="none"}}b=String(b).replace(this.idPrefix,"");b==this.topId&&(b=null);this.callEvent("onHide",[b]);b!=null&&this.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+b].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+b,!0)}};this._showPolygon=function(ac,ab){var aa=this._countVisiblePolygonItems(ac);if(aa!=0){var Z="polygon_"+ac;if(this.idPull[Z]!=null&&this.idPull[ac]!=null&&(!this.menuModeTopLevelTimeout||this.menuMode!="web"||this.context||this.idPull[ac]._mouseOver||ab!=this.dirTopLevel)){this.fixedPosition||this._autoDetectVisibleArea();var Y=0,W=0,V=null,U=null;this.idPull[Z].style.visibility="hidden";this.idPull[Z].style.left="0px";this.idPull[Z].style.top="0px";this.idPull[Z].style.display="";this.idPull[Z].style.zIndex=this.zInd;if(this.autoOverflow){if(this.idPull[Z].firstChild.offsetHeight>this.menuY1+this.menuY2){var T=Math.floor((this.menuY2-this.menuY1-35)/24);this.limit=T}else{this.limit=0,this.idPull["arrowup_"+ac]!=null&&this._removeUpArrow(String(ac).replace(this.idPrefix,"")),this.idPull["arrowdown_"+ac]!=null&&this._removeDownArrow(String(ac).replace(this.idPrefix,""))}}if(this.limit>0&&this.limit<aa){this.idPull["arrowup_"+ac]==null&&this._addUpArrow(String(ac).replace(this.idPrefix,"")),this.idPull["arrowdown_"+ac]==null&&this._addDownArrow(String(ac).replace(this.idPrefix,"")),V=this.idPull["arrowup_"+ac],V.style.visibility="hidden",V.style.display="",V.style.zIndex=this.zInd,Y=V.offsetHeight,U=this.idPull["arrowdown_"+ac],U.style.visibility="hidden",U.style.display="",U.style.zIndex=this.zInd,W=U.offsetHeight}if(this.limit>0){this.limit<aa?(this.idPull[Z].style.height=24*this.limit+"px",this.idPull[Z].scrollTop=0):this.idPull[Z].style.height=""}this.zInd+=this.zIndStep;if(this.itemPull[ac]!=null){var Q="polygon_"+this.itemPull[ac].parent}else{this.context&&(Q=this.idPull[this.idPrefix+this.topId])}var O=this.idPull[ac].tagName!=null?getAbsoluteLeft(this.idPull[ac]):this.idPull[ac][0],L=this.idPull[ac].tagName!=null?getAbsoluteTop(this.idPull[ac]):this.idPull[ac][1],I=this.idPull[ac].tagName!=null?this.idPull[ac].offsetWidth:0,K=this.idPull[ac].tagName!=null?this.idPull[ac].offsetHeight:0,J=0,H=0,E=this.idPull[Z].offsetWidth,D=this.idPull[Z].offsetHeight+Y+W;ab=="bottom"&&(J=this._rtl?O+(I!=null?I:0)-E:this._align=="right"?O+I-E:O-1+(ab==this.dirTopLevel?this._topLevelRightMargin:0),H=L-1+K+this._topLevelBottomMargin);ab=="right"&&(J=O+I-1,H=L+2);ab=="left"&&(J=O-this.idPull[Z].offsetWidth+2,H=L+2);ab=="top"&&(J=O-1,H=L-D+2);if(this.fixedPosition){var P=65536,N=65536}else{if(P=this.menuX2!=null?this.menuX2:0,N=this.menuY2!=null?this.menuY2:0,P==0){window.innerWidth?(P=window.innerWidth,N=window.innerHeight):(P=document.body.offsetWidth,N=document.body.scrollHeight)}}J+E>P&&!this._rtl&&(J=O-E+2);J<this.menuX1&&this._rtl&&(J=O+I-2);J<0&&(J=0);H+D>N&&this.menuY2!=null&&(H=Math.max(L+K-D+2,this._isVisibleArea?this.menuY1+2:2),this.context&&this.idPrefix+this.topId==ac&&U!=null&&(H-=2),this.itemPull[ac]!=null&&!this.context&&this.itemPull[ac].parent==this.idPrefix+this.topId&&(H-=this.base.offsetHeight));this.idPull[Z].style.left=J+"px";this.idPull[Z].style.top=H+Y+"px";if(typeof this._menuEffect!="undefined"&&this._menuEffect!==!1){this._showPolygonEffect(Z)}else{this.idPull[Z].style.visibility="";if(this.limit>0&&this.limit<aa){V.style.left=J+"px",V.style.top=H+"px",V.style.width=E+this._arrowFFFix+"px",V.style.visibility="",U.style.left=J+"px",U.style.top=H+D-W+"px",U.style.width=E+this._arrowFFFix+"px",U.style.visibility="",this._checkArrowsState(ac)}if(this._isIE6){var F=Z+"_ie6cover";if(this.idPull[F]==null){var S=document.createElement("IFRAME");S.className="dhtmlxMenu_IE6CoverFix_"+this.skin;S.frameBorder=0;S.setAttribute("src","javascript:false;");document.body.insertBefore(S,document.body.firstChild);this.idPull[F]=S}this.idPull[F].style.left=J+"px";this.idPull[F].style.top=H+"px";this.idPull[F].style.width=E+"px";this.idPull[F].style.height=D+"px";this.idPull[F].style.zIndex=this.idPull[Z].style.zIndex-1;this.idPull[F].style.display=""}}ac=String(ac).replace(this.idPrefix,"");ac==this.topId&&(ac=null);this.callEvent("onShow",[ac]);ac!=null&&this.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+ac].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+ac,!1)}}};this._redistribSubLevelSelection=function(g,f){for(;this._openedPolygons.length>0;){this._openedPolygons.pop()}var v=this._getSubItemToDeselectByPolygon(f);this._removeSubItemFromSelected(-1,-1);for(var u=0;u<v.length;u++){if(this.idPull[v[u]]!=null&&v[u]!=g&&this.itemPull[v[u]].state=="enabled"){this.idPull[v[u]].className="sub_item"}}for(u=0;u<this._openedPolygons.length;u++){this._openedPolygons[u]!=f&&this._hidePolygon(this._openedPolygons[u])}if(this.itemPull[g].state=="enabled"){this.idPull[g].className="sub_item_selected";if(this.itemPull[g].complex&&this.dLoad&&this.itemPull[g].loaded=="no"){this.loaderIcon==!0&&this._updateLoaderIcon(g,!0);var s=new dtmlXMLLoaderObject(this._xmlParser,window);this.itemPull[g].loaded="get";this.callEvent("onXLS",[]);s.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&parentId="+g.replace(this.idPrefix,"")+"&etc="+(new Date).getTime())}if((this.itemPull[g].complex||this.dLoad&&this.itemPull[g].loaded=="yes")&&this.itemPull[g].complex&&this.idPull["polygon_"+g]!=null){this._updateItemComplexState(g,!0,!0),this._showPolygon(g,this.dirSubLevel)}this._addSubItemToSelected(g,f);this.menuSelected=g}};this._doOnClick=function(D,C,A){this.menuLastClicked=D;if(this.itemPull[this.idPrefix+D].href_link!=null&&this.itemPull[this.idPrefix+D].state=="enabled"){var y=document.createElement("FORM"),x=String(this.itemPull[this.idPrefix+D].href_link).split("?");y.action=x[0];if(x[1]!=null){for(var w=String(x[1]).split("&"),v=0;v<w.length;v++){var u=String(w[v]).split("="),s=document.createElement("INPUT");s.type="hidden";s.name=u[0]||"";s.value=u[1]||"";y.appendChild(s)}}if(this.itemPull[this.idPrefix+D].href_target!=null){y.target=this.itemPull[this.idPrefix+D].href_target}y.style.display="none";document.body.appendChild(y);y.submit();y!=null&&(document.body.removeChild(y),y=null)}else{if(C.charAt(0)!="c"&&C.charAt(1)!="d"&&C.charAt(2)!="s"){if(this.checkEvent("onClick")){this.callEvent("onClick",[D,this.contextMenuZoneId,A])}else{if(C.charAt(1)=="d"||this.menuMode=="win"&&C.charAt(2)=="t"){return}}this.context&&this._isContextMenuVisible()&&this.contextAutoHide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}}};this._doOnTouchMenu=function(b){if(this.menuTouched==!1){this.menuTouched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[b])}};this._searchMenuNode=function(g,f){for(var v=[],u=0;u<f.length;u++){if(typeof f[u]=="object"){f[u].length==5&&typeof f[u][0]!="object"&&f[u][0].replace(this.idPrefix,"")==g&&u==0&&(v=f);var s=this._searchMenuNode(g,f[u]);s.length>0&&(v=s)}}return v};this._getMenuNodes=function(e){var d=[],f;for(f in this.itemPull){this.itemPull[f].parent==e&&(d[d.length]=f)}return d};this._genStr=function(f){for(var e="",s="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",g=0;g<f;g++){e+=s.charAt(Math.round(Math.random()*(s.length-1)))}return e};this.getItemType=function(b){b=this.idPrefix+b;return this.itemPull[b]==null?null:this.itemPull[b].type};this.forEachItem=function(d){for(var c in this.itemPull){d(String(c).replace(this.idPrefix,""))}};this._clearAndHide=function(){o.menuSelected=-1;for(o.menuLastClicked=-1;o._openedPolygons.length>0;){o._openedPolygons.pop()}for(var d=0;d<o._selectedSubItems.length;d++){var c=o._selectedSubItems[d][0];if(o.idPull[c]!=null&&o.itemPull[c].state=="enabled"){if(o.idPull[c].className=="sub_item_selected"){o.idPull[c].className="sub_item"}if(o.idPull[c].className=="dhtmlxMenu_"+o.skin+"_TopLevel_Item_Selected"){o.idPull[c].className=o.itemPull[c].cssNormal!=null?o.itemPull[c].cssNormal:"dhtmlxMenu_"+o.skin+"_TopLevel_Item_Normal"}}o._hidePolygon(c)}o.menuTouched=!1;if(o.context){o.contextHideAllMode?(o._hidePolygon(o.idPrefix+o.topId),o.zInd=o.zIndInit):o.zInd=o.zIndInit+o.zIndStep}};this._doOnLoad=function(){};this.loadXML=function(d,c){if(c){this._doOnLoad=function(){c()}}this.callEvent("onXLS",[]);this._xmlLoader.loadXML(d)};this.loadXMLString=function(d,c){if(c){this._doOnLoad=function(){c()}}this._xmlLoader.loadXMLString(d)};this._buildMenu=function(D,C){for(var A=0,y=0;y<D.childNodes.length;y++){if(D.childNodes[y].tagName==this.itemTagName){var x=D.childNodes[y],w={};w.id=this.idPrefix+(x.getAttribute("id")||this._genStr(24));w.title=x.getAttribute("text")||"";w.imgen=x.getAttribute("img")||"";w.imgdis=x.getAttribute("imgdis")||"";w.tip="";w.hotkey="";x.getAttribute("cssNormal")!=null&&(w.cssNormal=x.getAttribute("cssNormal"));w.type=x.getAttribute("type")||"item";if(w.type=="checkbox"){w.checked=x.getAttribute("checked")!=null,w.imgen="chbx_"+(w.checked?"1":"0"),w.imgdis=w.imgen}if(w.type=="radio"){w.checked=x.getAttribute("checked")!=null,w.imgen="rdbt_"+(w.checked?"1":"0"),w.imgdis=w.imgen,w.group=x.getAttribute("group")||this._genStr(24),this.radio[w.group]==null&&(this.radio[w.group]=[]),this.radio[w.group][this.radio[w.group].length]=w.id}w.state=x.getAttribute("enabled")!=null||x.getAttribute("disabled")!=null?x.getAttribute("enabled")=="false"||x.getAttribute("disabled")=="true"?"disabled":"enabled":"enabled";w.parent=C!=null?C:this.idPrefix+this.topId;w.complex=this.dLoad?x.getAttribute("complex")!=null?!0:!1:this._buildMenu(x,w.id)>0;this.dLoad&&w.complex&&(w.loaded="no");this.itemPull[w.id]=w;for(var v=0;v<x.childNodes.length;v++){var u=x.childNodes[v].tagName;u!=null&&(u=u.toLowerCase());if(u==this.userDataTagName){var s=x.childNodes[v];s.getAttribute("name")!=null&&(this.userData[w.id+"_"+s.getAttribute("name")]=s.firstChild!=null&&s.firstChild.nodeValue!=null?s.firstChild.nodeValue:"")}if(u==this.itemTextTagName){w.title=x.childNodes[v].firstChild.nodeValue}if(u==this.itemTipTagName){w.tip=x.childNodes[v].firstChild.nodeValue}if(u==this.itemHotKeyTagName){w.hotkey=x.childNodes[v].firstChild.nodeValue}if(u==this.itemHrefTagName&&w.type=="item"){w.href_link=x.childNodes[v].firstChild.nodeValue,x.childNodes[v].getAttribute("target")!=null&&(w.href_target=x.childNodes[v].getAttribute("target"))}}A++}}return A};this._xmlParser=function(){if(o.dLoad){var s=this.getXMLTopNode("menu");parentId=s.getAttribute("parentId")!=null?s.getAttribute("parentId"):null;if(parentId==null){o._buildMenu(s,null),o._initTopLevelMenu()}else{o._buildMenu(s,o.idPrefix+parentId);o._addSubMenuPolygon(o.idPrefix+parentId,o.idPrefix+parentId);if(o.menuSelected==o.idPrefix+parentId){var c=o.idPrefix+parentId,x=o.itemPull[o.idPrefix+parentId].parent==o.idPrefix+o.topId,w=x&&!o.context?o.dirTopLevel:o.dirSubLevel,v=!1;if(x&&o.menuModeTopLevelTimeout&&o.menuMode=="web"&&!o.context){var u=o.idPull[o.idPrefix+parentId];if(u._mouseOver==!0){var y=o.menuModeTopLevelTimeoutTime-((new Date).getTime()-u._dynLoadTM);if(y>1){u._menuOpenTM=window.setTimeout(function(){o._showPolygon(c,w)},y),v=!0}}}v||o._showPolygon(c,w)}o.itemPull[o.idPrefix+parentId].loaded="yes";o.loaderIcon==!0&&o._updateLoaderIcon(o.idPrefix+parentId,!1)}this.destructor();o.callEvent("onXLE",[])}else{s=this.getXMLTopNode("menu"),o._buildMenu(s,null),o.init(),o.callEvent("onXLE",[]),o._doOnLoad()}};this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._showSubLevelItem=function(d,c){if(document.getElementById("arrow_"+this.idPrefix+d)!=null){document.getElementById("arrow_"+this.idPrefix+d).style.display=c?"none":""}if(document.getElementById("image_"+this.idPrefix+d)!=null){document.getElementById("image_"+this.idPrefix+d).style.display=c?"none":""}if(document.getElementById(this.idPrefix+d)!=null){document.getElementById(this.idPrefix+d).style.display=c?"":"none"}};this._hideSubLevelItem=function(b){this._showSubLevelItem(b,!0)};this.idPrefix=this._genStr(12);this._bodyClick=function(b){b=b||event;b.button==2||_isOpera&&b.ctrlKey==!0||(o.context?o.contextAutoHide&&(!_isOpera||o._isContextMenuVisible()&&_isOpera)&&o._hideContextMenu():o._clearAndHide&&o._clearAndHide())};this._bodyContext=function(f){var f=f||event,c=String((f.srcElement||f.target).className);if(!(c.search("dhtmlxMenu")!=-1&&c.search("SubLevelArea")!=-1)){for(var s=!0,g=f.target||f.srcElement;g!=null;){g.id!=null&&o.isContextZone(g.id)&&(s=!1),g==document.body&&(s=!1),g=g.parentNode}s&&o.hideContextMenu()}};_isIE?(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)):(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1));this._UID=this._genStr(32);dhtmlxMenuObjectLiveInstances[this._UID]=this;dhtmlxEventable(this);return this}dhtmlXMenuObject.prototype.init=function(){if(this._isInited!=!0){this.dLoad?(this.callEvent("onXLS",[]),this._xmlLoader.loadXML(this.dLoadUrl+this.dLoadSign+"action=loadMenu&etc="+(new Date).getTime())):(this._initTopLevelMenu(),this._isInited=!0)}};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(g){var f=0,k;for(k in this.itemPull){var j=this.itemPull[k].parent,h=this.itemPull[k].type;this.idPull[k]!=null&&j==g&&(h=="item"||h=="radio"||h=="checkbox")&&this.idPull[k].style.display!="none"&&f++}return f};dhtmlXMenuObject.prototype._redefineComplexState=function(d){if(this.idPrefix+this.topId!=d&&this.idPull["polygon_"+d]!=null&&this.idPull[d]!=null){var c=this._countVisiblePolygonItems(d);c>0&&!this.itemPull[d].complex&&this._updateItemComplexState(d,!0,!1);c==0&&this.itemPull[d].complex&&this._updateItemComplexState(d,!1,!1)}};dhtmlXMenuObject.prototype._updateItemComplexState=function(f,e){if(!this.context&&this._getItemLevelType(f.replace(this.idPrefix,""))=="TopLevel"){this.itemPull[f].complex=e}else{if(!(this.idPull[f]==null||this.itemPull[f]==null)){if(this.itemPull[f].complex=e,f!=this.idPrefix+this.topId){var h=null,g=this.idPull[f].childNodes[this._rtl?0:2];g.childNodes[0]&&String(g.childNodes[0].className).search("complex_arrow")===0&&(h=g.childNodes[0]);if(this.itemPull[f].complex){if(h==null){h=document.createElement("DIV");h.className="complex_arrow";for(h.id="arrow_"+f;g.childNodes.length>0;){g.removeChild(g.childNodes[0])}g.appendChild(h)}if(this.dLoad&&this.itemPull[f].loaded=="get"&&this.loaderIcon){if(h.className!="complex_arrow_loading"){h.className="complex_arrow_loading"}}else{h.className="complex_arrow"}}else{!this.itemPull[f].complex&&h!=null&&(g.removeChild(h),this.itemPull[f].hotkey_backup!=null&&this.setHotKey&&this.setHotKey(f.replace(this.idPrefix,""),this.itemPull[f].hotkey_backup))}}}}};dhtmlXMenuObject.prototype._getItemLevelType=function(b){return this.itemPull[this.idPrefix+b].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"};dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(e){var d=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var f=0;f<d.length;f++){if(d[f]!=e&&this._hidePolygon(d[f]),this.idPull[d[f]]!=null&&d[f]!=e){this.idPull[d[f]].className=this.idPull[d[f]].className.replace(/Selected/g,"Normal")}}if(this.itemPull[this.idPrefix+e].state=="enabled"){this.idPull[this.idPrefix+e].className="dhtmlxMenu_"+this.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+e,"parent"),this.menuSelected=this.menuMode=="win"?this.menuSelected!=-1?e:this.menuSelected:e,this.itemPull[this.idPrefix+e].complex&&this.menuSelected!=-1&&this._showPolygon(this.idPrefix+e,this.dirTopLevel)}};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){this.dirTopLevel="bottom";this.dirSubLevel=this._rtl?"left":"right";if(this.context){this.idPull[this.idPrefix+this.topId]=[0,0],this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId)}else{for(var d=this._getMenuNodes(this.idPrefix+this.topId),c=0;c<d.length;c++){this.itemPull[d[c]].type=="item"&&this._renderToplevelItem(d[c],null),this.itemPull[d[c]].type=="separator"&&this._renderSeparator(d[c],null)}}};dhtmlXMenuObject.prototype._renderToplevelItem=function(j,h){var o=this,n=document.createElement("DIV");n.id=j;n.className=this.itemPull[j].state=="enabled"&&this.itemPull[j].cssNormal!=null?this.itemPull[j].cssNormal:"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[j].state=="enabled"?"Normal":"Disabled");if(this.itemPull[j].title!=""){var m=document.createElement("DIV");m.className="top_level_text";m.innerHTML=this.itemPull[j].title;n.appendChild(m)}if(this.itemPull[j].tip.length>0){n.title=this.itemPull[j].tip}if(this.itemPull[j].imgen!=""||this.itemPull[j].imgdis!=""){var l=this.itemPull[j][this.itemPull[j].state=="enabled"?"imgen":"imgdis"];if(l){var k=document.createElement("IMG");k.border="0";k.id="image_"+j;k.src=this.imagePath+l;k.className="dhtmlxMenu_TopLevel_Item_Icon";n.childNodes.length>0&&!this._rtl?n.insertBefore(k,n.childNodes[0]):n.appendChild(k)}}n.onselectstart=function(b){b=b||event;return b.returnValue=!1};n.oncontextmenu=function(b){b=b||event;return b.returnValue=!1};if(!this.cont){this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className=this._align=="right"?"align_right":"align_left",this.base.appendChild(this.cont)}h!=null&&(h++,h<0&&(h=0),h>this.cont.childNodes.length-1&&(h=null));h!=null?this.cont.insertBefore(n,this.cont.childNodes[h]):this.cont.appendChild(n);this.idPull[n.id]=n;this.itemPull[j].complex&&!this.dLoad&&this._addSubMenuPolygon(this.itemPull[j].id,this.itemPull[j].id);n.onmouseover=function(){o.menuMode=="web"&&window.clearTimeout(o.menuTimeoutHandler);var f=o._getSubItemToDeselectByPolygon("parent");o._removeSubItemFromSelected(-1,-1);for(var c=0;c<f.length;c++){if(f[c]!=this.id&&o._hidePolygon(f[c]),o.idPull[f[c]]!=null&&f[c]!=this.id){if(o.itemPull[f[c]].cssNormal!=null){o.idPull[f[c]].className=o.itemPull[f[c]].cssNormal}else{if(o.idPull[f[c]].className=="sub_item_selected"){o.idPull[f[c]].className="sub_item"}o.idPull[f[c]].className=o.idPull[f[c]].className.replace(/Selected/g,"Normal")}}}if(o.itemPull[this.id].state=="enabled"){this.className="dhtmlxMenu_"+o.skin+"_TopLevel_Item_Selected";o._addSubItemToSelected(this.id,"parent");o.menuSelected=o.menuMode=="win"?o.menuSelected!=-1?this.id:o.menuSelected:this.id;if(o.dLoad&&o.itemPull[this.id].loaded=="no"){if(o.menuModeTopLevelTimeout&&o.menuMode=="web"&&!o.context){this._mouseOver=!0,this._dynLoadTM=(new Date).getTime()}var s=new dtmlXMLLoaderObject(o._xmlParser,window);o.itemPull[this.id].loaded="get";o.callEvent("onXLS",[]);s.loadXML(o.dLoadUrl+o.dLoadSign+"action=loadMenu&parentId="+this.id.replace(o.idPrefix,"")+"&etc="+(new Date).getTime())}if((!o.dLoad||o.dLoad&&(!o.itemPull[this.id].loaded||o.itemPull[this.id].loaded=="yes"))&&o.itemPull[this.id].complex&&o.menuSelected!=-1){if(o.menuModeTopLevelTimeout&&o.menuMode=="web"&&!o.context){this._mouseOver=!0;var g=this.id;this._menuOpenTM=window.setTimeout(function(){o._showPolygon(g,o.dirTopLevel)},o.menuModeTopLevelTimeoutTime)}else{o._showPolygon(this.id,o.dirTopLevel)}}}o._doOnTouchMenu(this.id.replace(o.idPrefix,""))};n.onmouseout=function(){if(!(o.itemPull[this.id].complex&&o.menuSelected!=-1)&&o.itemPull[this.id].state=="enabled"){n.className=o.itemPull[this.id].cssNormal!=null?o.itemPull[this.id].cssNormal:"dhtmlxMenu_"+o.skin+"_TopLevel_Item_Normal"}if(o.menuMode=="web"){window.clearTimeout(o.menuTimeoutHandler),o.menuTimeoutHandler=window.setTimeout(function(){o._clearAndHide()},o.menuTimeoutMsec,"JavaScript")}if(o.menuModeTopLevelTimeout&&o.menuMode=="web"&&!o.context){this._mouseOver=!1,window.clearTimeout(this._menuOpenTM)}};n.onclick=function(g){o.menuMode=="web"&&window.clearTimeout(o.menuTimeoutHandler);if(!(o.menuMode!="web"&&o.itemPull[this.id].state=="disabled")){g=g||event;g.cancelBubble=!0;g.returnValue=!1;if(o.menuMode=="win"&&o.itemPull[this.id].complex){if(o.menuSelected==this.id){o.menuSelected=-1;var c=!1}else{o.menuSelected=this.id,c=!0}c?o._showPolygon(this.id,o.dirTopLevel):o._hidePolygon(this.id)}var v=o.itemPull[this.id].complex?"c":"-",u=o.itemPull[this.id].state!="enabled"?"d":"-",s={ctrl:g.ctrlKey,alt:g.altKey,shift:g.shiftKey};o._doOnClick(this.id.replace(o.idPrefix,""),v+u+"t",s);return !1}};this.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXMenuObject.prototype.setImagePath=function(){};dhtmlXMenuObject.prototype.setIconsPath=function(b){this.imagePath=b};dhtmlXMenuObject.prototype.setIconPath=dhtmlXMenuObject.prototype.setIconsPath;dhtmlXMenuObject.prototype._updateItemImage=function(k){var k=this.idPrefix+k,j=this.itemPull[k].parent==this.idPrefix+this.topId&&!this.context,u=null;if(j){for(var s=0;s<this.idPull[k].childNodes.length;s++){try{this.idPull[k].childNodes[s].className=="dhtmlxMenu_TopLevel_Item_Icon"&&(u=this.idPull[k].childNodes[s])}catch(o){}}}else{try{u=this.idPull[k].childNodes[this._rtl?2:0].childNodes[0]}catch(n){}}var m=this.itemPull[k].type=="radio"?this.itemPull[k][this.itemPull[k].state=="enabled"?"imgen":"imgdis"]:this.itemPull[k][this.itemPull[k].state=="enabled"?"imgen":"imgdis"];if(m.length>0){if(u!=null){u.src=this.imagePath+m}else{if(j){u=document.createElement("IMG"),u.className="dhtmlxMenu_TopLevel_Item_Icon",u.src=this.imagePath+m,u.border="0",u.id="image_"+k,!this._rtl&&this.idPull[k].childNodes.length>0?this.idPull[k].insertBefore(u,this.idPull[k].childNodes[0]):this.idPull[k].appendChild(u)}else{u=document.createElement("IMG");u.className="sub_icon";u.src=this.imagePath+m;u.border="0";u.id="image_"+k;for(var l=this.idPull[k].childNodes[this._rtl?2:0];l.childNodes.length>0;){l.removeChild(l.childNodes[0])}l.appendChild(u)}}}else{u!=null&&u.parentNode.removeChild(u)}};dhtmlXMenuObject.prototype.removeItem=function(A,y,x){y||(A=this.idPrefix+A);var w=null;if(A!=this.idPrefix+this.topId){if(this.itemPull[A]==null){return}this.idPull["polygon_"+A]&&this.idPull["polygon_"+A]._tmShow&&window.clearTimeout(this.idPull["polygon_"+A]._tmShow);var v=this.itemPull[A].type;if(v=="separator"){var u=this.idPull["separator_"+A];this.itemPull[A].parent==this.idPrefix+this.topId?(u.onclick=null,u.onselectstart=null,u.id=null):(u.childNodes[0].childNodes[0].onclick=null,u.childNodes[0].childNodes[0].onselectstart=null,u.childNodes[0].childNodes[0].id=null,u.childNodes[0].removeChild(u.childNodes[0].childNodes[0]),u.removeChild(u.childNodes[0]));u.parentNode.removeChild(u);this.idPull["separator_"+A]=null;this.itemPull[A]=null;delete this.idPull["separator_"+A]}else{w=this.itemPull[A].parent;u=this.idPull[A];u.onclick=null;u.oncontextmenu=null;u.onmouseover=null;u.onmouseout=null;u.onselectstart=null;for(u.id=null;u.childNodes.length>0;){u.removeChild(u.childNodes[0])}u.parentNode.removeChild(u);this.idPull[A]=null;this.itemPull[A]=null;delete this.idPull[A]}delete this.itemPull[A];v=u=null}for(var s in this.itemPull){this.itemPull[s].parent==A&&this.removeItem(s,!0,!0)}var o=Array(A);w!=null&&!x&&this.idPull["polygon_"+w]!=null&&this.idPull["polygon_"+w].tbd.childNodes.length==0&&(o.push(w),this._updateItemComplexState(w,!1,!1));for(var n=0;n<o.length;n++){if(this.idPull["polygon_"+o[n]]){var m=this.idPull["polygon_"+o[n]];m.onclick=null;m.oncontextmenu=null;m.tbl.removeChild(m.tbd);m.tbd=null;m.removeChild(m.tbl);m.tbl=null;m.id=null;m.parentNode.removeChild(m);m=null;if(this._isIE6){var l="polygon_"+o[n]+"_ie6cover";this.idPull[l]!=null&&(document.body.removeChild(this.idPull[l]),delete this.idPull[l])}this.idPull["arrowup_"+A]!=null&&this._removeArrow&&this._removeArrow("arrowup_"+A);this.idPull["arrowdown_"+A]!=null&&this._removeArrow&&this._removeArrow("arrowdown_"+A);this.idPull["polygon_"+o[n]]=null;delete this.idPull["polygon_"+o[n]]}}o=null;this.skin=="dhx_terrace"&&arguments.length==1&&this._improveTerraceSkin()};dhtmlXMenuObject.prototype._getAllParents=function(g){var f=[],k;for(k in this.itemPull){if(this.itemPull[k].parent==g&&(f[f.length]=this.itemPull[k].id,this.itemPull[k].complex)){for(var j=this._getAllParents(this.itemPull[k].id),h=0;h<j.length;h++){f[f.length]=j[h]}}}return f};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.context=!0;if(this.base._autoSkinUpdate==!0){this.base.className=this.base.className.replace("dhtmlxMenu_"+this.skin+"_Middle",""),this.base._autoSkinUpdate=!1}this.addBaseIdAsContextZone!=null&&this.addContextZone(this.addBaseIdAsContextZone)};dhtmlXMenuObject.prototype.addContextZone=function(g){if(g==document.body){var g="document.body."+this.idPrefix,f=document.body}else{f=document.getElementById(g)}var k=!1,j;for(j in this.contextZones){k=k||j==g||this.contextZones[j]==f}if(k==!0){return !1}this.contextZones[g]=f;var h=this;if(_isOpera){this.operaContext=function(b){h._doOnContextMenuOpera(b,h)},f.addEventListener("mouseup",this.operaContext,!1)}else{if(f.oncontextmenu!=null&&!f._oldContextMenuHandler){f._oldContextMenuHandler=f.oncontextmenu}f.oncontextmenu=function(d){for(var c in dhtmlxMenuObjectLiveInstances){c!=h._UID&&dhtmlxMenuObjectLiveInstances[c].context&&dhtmlxMenuObjectLiveInstances[c]._hideContextMenu()}d=d||event;d.cancelBubble=!0;d.returnValue=!1;h._doOnContextBeforeCall(d,this);return !1}}};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(e,d){for(var f in dhtmlxMenuObjectLiveInstances){f!=d._UID&&dhtmlxMenuObjectLiveInstances[f].context&&dhtmlxMenuObjectLiveInstances[f]._hideContextMenu()}e.cancelBubble=!0;e.returnValue=!1;e.button==0&&e.ctrlKey==!0&&d._doOnContextBeforeCall(e,this);return !1};dhtmlXMenuObject.prototype.removeContextZone=function(e){if(!this.isContextZone(e)){return !1}e==document.body&&(e="document.body."+this.idPrefix);var d=this.contextZones[e];_isOpera?d.removeEventListener("mouseup",this.operaContext,!1):(d.oncontextmenu=d._oldContextMenuHandler!=null?d._oldContextMenuHandler:null,d._oldContextMenuHandler=null);try{this.contextZones[e]=null,delete this.contextZones[e]}catch(f){}return !0};dhtmlXMenuObject.prototype.isContextZone=function(d){if(d==document.body&&this.contextZones["document.body."+this.idPrefix]!=null){return !0}var c=!1;this.contextZones[d]!=null&&this.contextZones[d]==document.getElementById(d)&&(c=!0);return c};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return this.idPull["polygon_"+this.idPrefix+this.topId]==null?!1:this.idPull["polygon_"+this.idPrefix+this.topId].style.display==""};dhtmlXMenuObject.prototype._showContextMenu=function(e,d,f){this._clearAndHide();if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return !1}window.clearTimeout(this.menuTimeoutHandler);this.idPull[this.idPrefix+this.topId]=[e,d];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[f])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null){return !1}this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId);this.zInd=this.zIndInit};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(j,h){this.contextMenuZoneId=h.id;this._clearAndHide();this._hideContextMenu();var o=j.srcElement||j.target,n=_isIE||_isOpera||_KHTMLrv?j.offsetX:j.layerX,m=_isIE||_isOpera||_KHTMLrv?j.offsetY:j.layerY,l=getAbsoluteLeft(o)+n,k=getAbsoluteTop(o)+m;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[h.id,j])&&this.contextAutoShow&&(this._showContextMenu(l,k,h.id),this.callEvent("onAfterContextMenu",[h.id,j])):this.contextAutoShow&&(this._showContextMenu(l,k,h.id),this.callEvent("onAfterContextMenu",[h.id]))};dhtmlXMenuObject.prototype.showContextMenu=function(d,c){this._showContextMenu(d,c,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this._isVisibleArea){this.menuX1=document.body.scrollLeft,this.menuX2=this.menuX1+(window.innerWidth||document.body.clientWidth),this.menuY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),this.menuY2=this.menuY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight)}};dhtmlXMenuObject.prototype.getItemPosition=function(g){var g=this.idPrefix+g,f=-1;if(this.itemPull[g]==null){return f}for(var k=this.itemPull[g].parent,j=this.idPull["polygon_"+k]!=null?this.idPull["polygon_"+k].tbd:this.cont,h=0;h<j.childNodes.length;h++){if(j.childNodes[h]==this.idPull["separator_"+g]||j.childNodes[h]==this.idPull[g]){f=h}}return f};dhtmlXMenuObject.prototype.setItemPosition=function(j,h){j=this.idPrefix+j;if(this.idPull[j]!=null){var o=this.itemPull[j].parent==this.idPrefix+this.topId,n=this.idPull[j],m=this.getItemPosition(j.replace(this.idPrefix,"")),l=this.itemPull[j].parent,k=this.idPull["polygon_"+l]!=null?this.idPull["polygon_"+l].tbd:this.cont;k.removeChild(k.childNodes[m]);h<0&&(h=0);o&&h<1&&(h=1);h<k.childNodes.length?k.insertBefore(n,k.childNodes[h]):k.appendChild(n)}};dhtmlXMenuObject.prototype.getParentId=function(b){b=this.idPrefix+b;return this.itemPull[b]==null?null:(this.itemPull[b].parent!=null?this.itemPull[b].parent:this.topId).replace(this.idPrefix,"")};dhtmlXMenuObject.prototype.addNewSibling=function(k,j,u,s,o,n){var m=this.idPrefix+(j!=null?j:this._genStr(24)),l=this.idPrefix+(k!=null?this.getParentId(k):this.topId);this._addItemIntoGlobalStrorage(m,l,u,"item",s,o,n);l==this.idPrefix+this.topId&&!this.context?this._renderToplevelItem(m,this.getItemPosition(k)):this._renderSublevelItem(m,this.getItemPosition(k))};dhtmlXMenuObject.prototype.addNewChild=function(j,h,o,n,m,l,k){if(j==null){if(this.context){j=this.topId}else{this.addNewSibling(j,o,n,m,l,k);h!=null&&this.setItemPosition(o,h);return}}o=this.idPrefix+(o!=null?o:this._genStr(24));this.setHotKey&&this.setHotKey(j,"");j=this.idPrefix+j;this._addItemIntoGlobalStrorage(o,j,n,"item",m,l,k);this.idPull["polygon_"+j]==null&&this._renderSublevelPolygon(j,j);this._renderSublevelItem(o,h-1);this._redefineComplexState(j)};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(k,j,u,s,o,n,m){var l={id:k,title:u,imgen:n!=null?n:"",imgdis:m!=null?m:"",type:s,state:o==!0?"disabled":"enabled",parent:j,complex:!1,hotkey:"",tip:""};this.itemPull[l.id]=l};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(h,g){for(var m=this._renderSublevelPolygon(h,g),l=this._getMenuNodes(g),k=0;k<l.length;k++){this.itemPull[l[k]].type=="separator"?this._renderSeparator(l[k],null):this._renderSublevelItem(l[k],null)}for(var j=h==g?"topLevel":"subLevel",k=0;k<l.length;k++){this.itemPull[l[k]].complex&&this._addSubMenuPolygon(h,this.itemPull[l[k]].id)}};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(g,f){var k=document.createElement("DIV");k.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Polygon "+(this._rtl?"dir_right":"");k.dir="ltr";k.oncontextmenu=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return !1};k.id="polygon_"+f;k.onclick=function(b){b=b||event;b.cancelBubble=!0};k.style.display="none";document.body.insertBefore(k,document.body.firstChild);var j=document.createElement("TABLE");j.className="dhtmlxMebu_SubLevelArea_Tbl";j.cellSpacing=0;j.cellPadding=0;j.border=0;var h=document.createElement("TBODY");j.appendChild(h);k.appendChild(j);k.tbl=j;k.tbd=h;this.idPull[k.id]=k;this.sxDacProc!=null&&(this.idPull["sxDac_"+f]=new this.sxDacProc(k,k.className),_isIE?(this.idPull["sxDac_"+f]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+f]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+f]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+f]._setCustomCycle(this.dacCycles)));return k};dhtmlXMenuObject.prototype._renderSublevelItem=function(I,H){var F=this,E=document.createElement("TR");E.className=this.itemPull[I].state=="enabled"?"sub_item":"sub_item_dis";var D=document.createElement("TD");D.className="sub_item_icon";var C=this.itemPull[I][this.itemPull[I].state=="enabled"?"imgen":"imgdis"];if(C!=""){var A=this.itemPull[I].type;if(A=="checkbox"||A=="radio"){var y=document.createElement("DIV");y.id="image_"+this.itemPull[I].id;y.className="sub_icon "+C;D.appendChild(y)}if(!(A=="checkbox"||A=="radio")){y=document.createElement("IMG"),y.id="image_"+this.itemPull[I].id,y.className="sub_icon",y.src=this.imagePath+C,D.appendChild(y)}}var x=document.createElement("TD");x.className="sub_item_text";if(this.itemPull[I].title!=""){var w=document.createElement("DIV");w.className="sub_item_text";w.innerHTML=this.itemPull[I].title;x.appendChild(w)}else{x.innerHTML="&nbsp;"}var v=document.createElement("TD");v.className="sub_item_hk";if(this.itemPull[I].complex){var u=document.createElement("DIV");u.className="complex_arrow";u.id="arrow_"+this.itemPull[I].id;v.appendChild(u)}else{if(this.itemPull[I].hotkey.length>0&&!this.itemPull[I].complex){var s=document.createElement("DIV");s.className="sub_item_hk";s.innerHTML=this.itemPull[I].hotkey;v.appendChild(s)}else{v.innerHTML="&nbsp;"}}E.appendChild(this._rtl?v:D);E.appendChild(x);E.appendChild(this._rtl?D:v);E.id=this.itemPull[I].id;E.parent=this.itemPull[I].parent;if(this.itemPull[I].tip.length>0){E.title=this.itemPull[I].tip}if(!this._hideTMData){this._hideTMData={}}E.onselectstart=function(b){b=b||event;return b.returnValue=!1};E.onmouseover=function(){F._hideTMData[this.id]&&window.clearTimeout(F._hideTMData[this.id]);F.menuMode=="web"&&window.clearTimeout(F.menuTimeoutHandler);this._visible||F._redistribSubLevelSelection(this.id,this.parent);this._visible=!0};E.onmouseout=function(){if(F.menuMode=="web"){F.menuTimeoutHandler&&window.clearTimeout(F.menuTimeoutHandler),F.menuTimeoutHandler=window.setTimeout(function(){F&&F._clearAndHide&&F._clearAndHide()},F.menuTimeoutMsec,"JavaScript")}var b=this;F._hideTMData[this.id]&&window.clearTimeout(F._hideTMData[this.id]);F._hideTMData[this.id]=window.setTimeout(function(){b._visible=!1},50)};E.onclick=function(d){if(F.checkEvent("onClick")||!F.itemPull[this.id].complex){d=d||event;d.cancelBubble=!0;d.returnValue=!1;tc=F.itemPull[this.id].complex?"c":"-";td=F.itemPull[this.id].state=="enabled"?"-":"d";var c={ctrl:d.ctrlKey,alt:d.altKey,shift:d.shiftKey};switch(F.itemPull[this.id].type){case"checkbox":F._checkboxOnClickHandler(this.id.replace(F.idPrefix,""),tc+td+"n",c);break;case"radio":F._radioOnClickHandler(this.id.replace(F.idPrefix,""),tc+td+"n",c);break;case"item":F._doOnClick(this.id.replace(F.idPrefix,""),tc+td+"n",c)}return !1}};var o=this.idPull["polygon_"+this.itemPull[I].parent];H!=null&&(H++,H<0&&(H=0),H>o.tbd.childNodes.length-1&&(H=null));H!=null&&o.tbd.childNodes[H]!=null?o.tbd.insertBefore(E,o.tbd.childNodes[H]):o.tbd.appendChild(E);this.idPull[E.id]=E};dhtmlXMenuObject.prototype._renderSeparator=function(v,u){var s=this.context?"SubLevelArea":this.itemPull[v].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if(!(s=="TopLevel"&&this.context)){var o=this;if(s!="TopLevel"){var n=document.createElement("TR");n.className="sub_sep";var m=document.createElement("TD");m.colSpan="3";n.appendChild(m)}var l=document.createElement("DIV");l.id="separator_"+v;l.className=s=="TopLevel"?"top_sep":"sub_sep";l.onselectstart=function(b){b=b||event;b.returnValue=!1};l.onclick=function(d){d=d||event;d.cancelBubble=!0;var c={ctrl:d.ctrlKey,alt:d.altKey,shift:d.shiftKey};o._doOnClick(this.id.replace("separator_"+o.idPrefix,""),"--s",c)};if(s=="TopLevel"){if(u!=null){u++,u<0&&(u=0),this.cont.childNodes[u]!=null?this.cont.insertBefore(l,this.cont.childNodes[u]):this.cont.appendChild(l)}else{var k=this.cont.childNodes[this.cont.childNodes.length-1];String(k).search("TopLevel_Text")==-1?this.cont.appendChild(l):this.cont.insertBefore(l,k)}this.idPull[l.id]=l}else{var j=this.idPull["polygon_"+this.itemPull[v].parent];u!=null&&(u++,u<0&&(u=0),u>j.tbd.childNodes.length-1&&(u=null));u!=null&&j.tbd.childNodes[u]!=null?j.tbd.insertBefore(n,j.tbd.childNodes[u]):j.tbd.appendChild(n);m.appendChild(l);this.idPull[l.id]=n}}};dhtmlXMenuObject.prototype.addNewSeparator=function(e,d){var d=this.idPrefix+(d!=null?d:this._genStr(24)),f=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(d,f,"","separator",!1,"","");this._renderSeparator(d,this.getItemPosition(e))};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0);this._isInited=!1;this.idPrefix=this._genStr(12);this.itemPull={}};dhtmlXMenuObject.prototype.unload=function(){_isIE?(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)):(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1));this._bodyContext=this._bodyClick=null;this.removeItem(this.idPrefix+this.topId,!0);this.idPull=this.itemPull=null;if(this.context){for(var d in this.contextZones){this.removeContextZone(d)}}if(this.cont!=null){this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null}if(this.base!=null){this.base.className="";if(!this.context){this.base.oncontextmenu=this.base._oldContextMenuHandler||null}this.base=this.base.onselectstart=null}this.setSkin=null;this.detachAllEvents();if(this._xmlLoader){this._xmlLoader.destructor(),this._xmlLoader=null}this.extendedModule=this.serialize=this.addCheckbox=this.getCheckboxState=this.setCheckboxState=this.addRadioButton=this.setRadioChecked=this.getRadioChecked=this.userData=this.setOverflowHeight=this.contextZones=this.getCircuit=this.clearHref=this.setHref=this.setAlign=this.setRTL=this.setTopText=this.setItemSelected=this.getHotKey=this.setHotKey=this.getTooltip=this.setTooltip=this.setVisibleArea=this.getContextMenuHideAllMode=this.setContextMenuHideAllMode=this.setAutoHideMode=this.setAutoShowMode=this.clearItemImage=this.setItemImage=this.getItemImage=this.enableDynamicLoading=this.setWebModeTimeout=this.setOpenMode=this.getUserData=this.setUserData=this.isItemHidden=this.showItem=this.hideItem=this.loadFromHTML=this.setItemText=this.getItemText=this.isItemEnabled=this.setItemDisabled=this.setItemEnabled=this._removeArrow=this._checkboxOnClickHandler=this._updateCheckboxImage=this._readLevel=this._setCheckboxState=this._getCheckboxState=this._radioOnClickHandler=this._setRadioState=this._getRadioImgObj=this._countPolygonItems=this._doScrollDown=this._doScrollUp=this._isArrowExists=this._removeDownArrow=this._removeUpArrow=this._addDownArrow=this._addUpArrow=this._checkArrowsState=this._clearAllSelectedSubItemsInPolygon=this._updateLoaderIcon=this._changeItemVisible=this._changeItemState=this.hideContextMenu=this.showContextMenu=this.hide=this.detachAllEvents=this.radio=this.items=this.unload=this.dhx_Event=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=this.addNewSeparator=this.addNewChild=this.addNewSibling=this.getParentId=this.setItemPosition=this.getItemPosition=this.clearAll=this._hideContextMenu=this._renderSeparator=this._renderSublevelItem=this._renderSublevelPolygon=this._addSubMenuPolygon=this._addItemIntoGlobalStrorage=this._autoDetectVisibleArea=this._doOnContextBeforeCall=this._showContextMenu=this._isContextMenuVisible=this.isContextZone=this.removeContextZone=this.addContextZone=this.renderAsContextMenu=this._getAllParents=this.removeItem=this._updateItemImage=this.setIconPath=this.setIconsPath=this.setImagePath=this._renderToplevelItem=this._initTopLevelMenu=this._redistribTopLevelSelection=this._getItemLevelType=this._updateItemComplexState=this._redefineComplexState=this._countVisiblePolygonItems=this._hideSubLevelItem=this._showSubLevelItem=this._xmlParser=this._buildMenu=this.loadXMLString=this.loadXML=this.init=this.forEachItem=this.getItemType=this._doOnLoad=this._clearAndHide=this._genStr=this._getMenuNodes=this._searchMenuNode=this._doOnTouchMenu=this._doOnClick=this._redistribSubLevelSelection=this._showPolygon=this._hidePolygon=this._getSubItemToDeselectByPolygon=this._removeSubItemFromSelected=this._addSubItemToSelected=this._openedPolygons=this._selectedSubItems=this._enableDacSupport=this.zIndStep=this.zIndInit=this.zInd=this.dacSpeedIE=this.dacSpeed=this.dacCyclesIE=this.dacCycles=this.topId=this.skin=this.userDataTagName=this.itemTipTagName=this.itemTextTagName=this.itemTagName=this.itemHrefTagName=this.itemHotKeyTagName=this.isDhtmlxMenuObject=this.menuTouched=this.menuTimeoutMsec=this.menuTimeoutHandler=this.menuModeTopLevelTimeoutTime=this.menuModeTopLevelTimeout=this.menuMode=this.imagePath=this.idPrefix=this.menuLastClicked=this.menuSelected=this.limit=this.dirTopLevel=this.dirSubLevel=this.fixedPosition=this.loaderIcon=this.dLoadUrl=this.dLoadSign=this.dLoad=this.contextMenuZoneId=this.contextHideAllMode=this.contextAutoShow=this.contextAutoHide=this.context=this.addBaseIdAsContextZone=this._topLevelRightMargin=this._topLevelBottomMargin=this._topLevelOffsetLeft=this._topLevelBottomMargin=this._scrollUpTMTime=this._scrollUpTMStep=this._scrollDownTMTime=this._scrollDownTMStep=this._rtl=this._isInited=this._isIE6=this._arrowFFFix=this._align=null;dhtmlxMenuObjectLiveInstances[this._UID]=null;try{delete dhtmlxMenuObjectLiveInstances[this._UID]}catch(c){}this._UID=null};var dhtmlxMenuObjectLiveInstances={};dhtmlXMenuObject.prototype.i18n={dhxmenuextalert:"dhtmlxmenu_ext.js required"};(function(){dhtmlx.extend_api("dhtmlXMenuObject",{_init:function(b){return[b.parent,b.skin]},align:"setAlign",top_text:"setTopText",context:"renderAsContextMenu",icon_path:"setIconsPath",open_mode:"setOpenMode",rtl:"setRTL",skin:"setSkin",dynamic:"enableDynamicLoading",xml:"loadXML",items:"items",overflow:"setOverflowHeight"},{items:function(h,g){for(var m=100000,l=null,k=0;k<h.length;k++){var j=h[k];j.type=="separator"?(this.addNewSeparator(l,m,j.id),l=j.id):(this.addNewChild(g,m,j.id,j.text,j.disabled,j.img,j.img_disabled),l=j.id,j.items&&this.items(j.items,j.id))}}})})();dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var f in this.itemPull){if(this.itemPull[f].parent==this.idPrefix+this.topId&&this.idPull[f]!=null){var e=!1,h=!1;this.idPull[f].parentNode.firstChild==this.idPull[f]&&(e=!0);this.idPull[f].parentNode.lastChild==this.idPull[f]&&(h=!0);for(var g in this.itemPull){this.itemPull[g].type=="separator"&&this.itemPull[g].parent==this.idPrefix+this.topId&&(this.idPull[f].nextSibling==this.idPull["separator_"+g]&&(h=!0),this.idPull[f].previousSibling==this.idPull["separator_"+g]&&(e=!0))}this.idPull[f].style.borderLeft=e?"1px solid #cecece":"0px solid white";this.idPull[f].style.borderTopLeftRadius=this.idPull[f].style.borderBottomLeftRadius=e?"5px":"0px";this.idPull[f].style.borderTopRightRadius=this.idPull[f].style.borderBottomRightRadius=h?"5px":"0px";this.idPull[f]._bl=e;this.idPull[f]._br=h}}};dhtmlXMenuObject.prototype._improveTerraceButton=function(d,c){c?(this.idPull[d].style.borderBottomLeftRadius=this.idPull[d]._bl?"5px":"0px",this.idPull[d].style.borderBottomRightRadius=this.idPull[d]._br?"5px":"0px"):(this.idPull[d].style.borderBottomLeftRadius="0px",this.idPull[d].style.borderBottomRightRadius="0px")};dhtmlXMenuObject.prototype.extendedModule="DHXMENUEXT";dhtmlXMenuObject.prototype.setItemEnabled=function(b){this._changeItemState(b,"enabled",this._getItemLevelType(b))};dhtmlXMenuObject.prototype.setItemDisabled=function(b){this._changeItemState(b,"disabled",this._getItemLevelType(b))};dhtmlXMenuObject.prototype.isItemEnabled=function(b){return this.itemPull[this.idPrefix+b]!=null?this.itemPull[this.idPrefix+b].state=="enabled":!1};dhtmlXMenuObject.prototype._changeItemState=function(g,f,k){var j=!1,h=this.idPrefix+g;if(this.itemPull[h]!=null&&this.idPull[h]!=null&&this.itemPull[h].state!=f){this.itemPull[h].state=f,this.idPull[h].className=this.itemPull[h].parent==this.idPrefix+this.topId&&!this.context?"dhtmlxMenu_"+this.skin+"_TopLevel_Item_"+(this.itemPull[h].state=="enabled"?"Normal":"Disabled"):"sub_item"+(this.itemPull[h].state=="enabled"?"":"_dis"),this._updateItemComplexState(this.idPrefix+g,this.itemPull[this.idPrefix+g].complex,!1),this._updateItemImage(g,k),this.idPrefix+this.menuLastClicked==h&&k!="TopLevel"&&this._redistribSubLevelSelection(h,this.itemPull[h].parent)}return j};dhtmlXMenuObject.prototype.getItemText=function(b){return this.itemPull[this.idPrefix+b]!=null?this.itemPull[this.idPrefix+b].title:""};dhtmlXMenuObject.prototype.setItemText=function(g,f){g=this.idPrefix+g;if(this.itemPull[g]!=null&&this.idPull[g]!=null){if(this._clearAndHide(),this.itemPull[g].title=f,this.itemPull[g].parent==this.idPrefix+this.topId&&!this.context){for(var k=null,j=0;j<this.idPull[g].childNodes.length;j++){try{this.idPull[g].childNodes[j].className=="top_level_text"&&(k=this.idPull[g].childNodes[j])}catch(h){}}if(String(this.itemPull[g].title).length==""||this.itemPull[g].title==null){k!=null&&k.parentNode.removeChild(k)}else{if(!k){k=document.createElement("DIV"),k.className="top_level_text",this._rtl&&this.idPull[g].childNodes.length>0?this.idPull[g].insertBefore(k,this.idPull[g].childNodes[0]):this.idPull[g].appendChild(k)}k.innerHTML=this.itemPull[g].title}}else{k=null;for(j=0;j<this.idPull[g].childNodes[1].childNodes.length;j++){if(String(this.idPull[g].childNodes[1].childNodes[j].className||"")=="sub_item_text"){k=this.idPull[g].childNodes[1].childNodes[j]}}if(String(this.itemPull[g].title).length==""||this.itemPull[g].title==null){if(k){k.parentNode.removeChild(k),k=null,this.idPull[g].childNodes[1].innerHTML="&nbsp;"}}else{if(!k){k=document.createElement("DIV"),k.className="sub_item_text",this.idPull[g].childNodes[1].innerHTML="",this.idPull[g].childNodes[1].appendChild(k)}k.innerHTML=this.itemPull[g].title}}}};dhtmlXMenuObject.prototype.loadFromHTML=function(e,d,f){this.itemTagName="DIV";typeof e=="string"&&(e=document.getElementById(e));this._buildMenu(e,null);this.init();d&&e.parentNode.removeChild(e);f!=null&&f()};dhtmlXMenuObject.prototype.hideItem=function(b){this._changeItemVisible(b,!1)};dhtmlXMenuObject.prototype.showItem=function(b){this._changeItemVisible(b,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(d){var c=null;this.idPull[this.idPrefix+d]!=null&&(c=this.idPull[this.idPrefix+d].style.display=="none");return c};dhtmlXMenuObject.prototype._changeItemVisible=function(e,d){var f=this.idPrefix+e;if(this.itemPull[f]!=null&&(this.itemPull[f].type=="separator"&&(f="separator_"+f),this.idPull[f]!=null)){this.idPull[f].style.display=d?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+e].parent)}};dhtmlXMenuObject.prototype.setUserData=function(e,d,f){this.userData[this.idPrefix+e+"_"+d]=f};dhtmlXMenuObject.prototype.getUserData=function(d,c){return this.userData[this.idPrefix+d+"_"+c]!=null?this.userData[this.idPrefix+d+"_"+c]:null};dhtmlXMenuObject.prototype.setOpenMode=function(b){if(b=="win"||b=="web"){this.menuMode=b}};dhtmlXMenuObject.prototype.setWebModeTimeout=function(b){this.menuTimeoutMsec=!isNaN(b)?b:400};dhtmlXMenuObject.prototype.enableDynamicLoading=function(d,c){this.dLoad=!0;this.dLoadUrl=d;this.dLoadSign=String(this.dLoadUrl).search(/\?/)==-1?"?":"&";this.loaderIcon=c;this.init()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(f,e){if(this.idPull[f]!=null&&!(String(this.idPull[f].className).search("TopLevel_Item")>=0)){var h=this._rtl?0:2;if(this.idPull[f].childNodes[h]&&this.idPull[f].childNodes[h].childNodes[0]){var g=this.idPull[f].childNodes[h].childNodes[0];if(String(g.className).search("complex_arrow")===0){g.className="complex_arrow"+(e?"_loading":"")}}}};dhtmlXMenuObject.prototype.getItemImage=function(d){var c=[null,null],d=this.idPrefix+d;if(this.itemPull[d].type=="item"){c[0]=this.itemPull[d].imgen,c[1]=this.itemPull[d].imgdis}return c};dhtmlXMenuObject.prototype.setItemImage=function(e,d,f){if(this.itemPull[this.idPrefix+e].type=="item"){this.itemPull[this.idPrefix+e].imgen=d,this.itemPull[this.idPrefix+e].imgdis=f,this._updateItemImage(e,this._getItemLevelType(e))}};dhtmlXMenuObject.prototype.clearItemImage=function(b){this.setItemImage(b,"","")};dhtmlXMenuObject.prototype.setAutoShowMode=function(b){this.contextAutoShow=b==!0?!0:!1};dhtmlXMenuObject.prototype.setAutoHideMode=function(b){this.contextAutoHide=b==!0?!0:!1};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(b){this.contextHideAllMode=b==!0?!0:!1};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.contextHideAllMode};dhtmlXMenuObject.prototype.setVisibleArea=function(f,e,h,g){this._isVisibleArea=!0;this.menuX1=f;this.menuX2=e;this.menuY1=h;this.menuY2=g};dhtmlXMenuObject.prototype.setTooltip=function(d,c){d=this.idPrefix+d;if(this.itemPull[d]!=null&&this.idPull[d]!=null){this.idPull[d].title=c.length>0?c:null,this.itemPull[d].tip=c}};dhtmlXMenuObject.prototype.getTooltip=function(b){return this.itemPull[this.idPrefix+b]==null?null:this.itemPull[this.idPrefix+b].tip};dhtmlXMenuObject.prototype.setHotKey=function(h,g){h=this.idPrefix+h;if(this.itemPull[h]!=null&&this.idPull[h]!=null&&(this.itemPull[h].parent!=this.idPrefix+this.topId||this.context)&&!this.itemPull[h].complex){var m=this.itemPull[h].type;if(m=="item"||m=="checkbox"||m=="radio"){var l=null;try{if(this.idPull[h].childNodes[this._rtl?0:2].childNodes[0].className=="sub_item_hk"){l=this.idPull[h].childNodes[this._rtl?0:2].childNodes[0]}}catch(k){}if(g.length==0){this.itemPull[h].hotkey_backup=this.itemPull[h].hotkey,this.itemPull[h].hotkey="",l!=null&&l.parentNode.removeChild(l)}else{this.itemPull[h].hotkey=g;this.itemPull[h].hotkey_backup=null;if(l==null){l=document.createElement("DIV");l.className="sub_item_hk";for(var j=this.idPull[h].childNodes[this._rtl?0:2];j.childNodes.length>0;){j.removeChild(j.childNodes[0])}j.appendChild(l)}l.innerHTML=g}}}};dhtmlXMenuObject.prototype.getHotKey=function(b){return this.itemPull[this.idPrefix+b]==null?null:this.itemPull[this.idPrefix+b].hotkey};dhtmlXMenuObject.prototype.setItemSelected=function(b){if(this.itemPull[this.idPrefix+b]==null){return null}};dhtmlXMenuObject.prototype.setTopText=function(b){if(!this.context){if(this._topText==null){this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._rtl?"left":this._align=="left"?"right":"left"),this.base.appendChild(this._topText)}this._topText.innerHTML=b}};dhtmlXMenuObject.prototype.setAlign=function(b){if(this._align!=b&&(b=="left"||b=="right")){this._align=b;if(this.cont){this.cont.className=this._align=="right"?"align_right":"align_left"}if(this._topText!=null){this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this._align=="left"?"right":"left")}}};dhtmlXMenuObject.prototype.setHref=function(e,d,f){if(this.itemPull[this.idPrefix+e]!=null){this.itemPull[this.idPrefix+e].href_link=d,f!=null&&(this.itemPull[this.idPrefix+e].href_target=f)}};dhtmlXMenuObject.prototype.clearHref=function(b){this.itemPull[this.idPrefix+b]!=null&&(delete this.itemPull[this.idPrefix+b].href_link,delete this.itemPull[this.idPrefix+b].href_target)};dhtmlXMenuObject.prototype.getCircuit=function(d){for(var c=Array(d);this.getParentId(d)!=this.topId;){d=this.getParentId(d),c[c.length]=d}return c.reverse()};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(e){for(var d=this._getSubItemToDeselectByPolygon(e),f=0;f<this._openedPolygons.length;f++){this._openedPolygons[f]!=e&&this._hidePolygon(this._openedPolygons[f])}for(f=0;f<d.length;f++){if(this.idPull[d[f]]!=null&&this.itemPull[d[f]].state=="enabled"){this.idPull[d[f]].className="dhtmlxMenu_"+this.skin+"_SubLevelArea_Item_Normal"}}};dhtmlXMenuObject.prototype._checkArrowsState=function(f){var e=this.idPull["polygon_"+f],h=this.idPull["arrowup_"+f],g=this.idPull["arrowdown_"+f];h.className=e.scrollTop==0?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp"+(h.over?"_Over":"");g.className=e.scrollTop+e.offsetHeight<e.scrollHeight?"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown"+(g.over?"_Over":""):"dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown_Disabled"};dhtmlXMenuObject.prototype._addUpArrow=function(e){var d=this,f=document.createElement("DIV");f.pId=this.idPrefix+e;f.id="arrowup_"+this.idPrefix+e;f.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowUp";f.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";f.style.display="none";f.over=!1;f.onselectstart=function(b){b=b||event;return b.returnValue=!1};f.oncontextmenu=function(b){b=b||event;return b.returnValue=!1};f.onmouseover=function(){d.menuMode=="web"&&window.clearTimeout(d.menuTimeoutHandler);d._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp_Disabled"){this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,d._canScrollUp=!0,d._doScrollUp(this.pId,!0)}};f.onmouseout=function(){if(d.menuMode=="web"){window.clearTimeout(d.menuTimeoutHandler),d.menuTimeoutHandler=window.setTimeout(function(){d._clearAndHide()},d.menuTimeoutMsec,"JavaScript")}this.over=!1;d._canScrollUp=!1;if(this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp_Disabled"){this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(d._scrollUpTM)}};f.onclick=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return !1};document.body.insertBefore(f,document.body.firstChild);this.idPull[f.id]=f};dhtmlXMenuObject.prototype._addDownArrow=function(e){var d=this,f=document.createElement("DIV");f.pId=this.idPrefix+e;f.id="arrowdown_"+this.idPrefix+e;f.className="dhtmlxMenu_"+this.skin+"_SubLevelArea_ArrowDown";f.innerHTML="<div class='dhtmlxMenu_"+this.skin+"_SubLevelArea_Arrow'><div class='dhtmlxMenu_SubLevelArea_Arrow_Icon'></div></div>";f.style.display="none";f.over=!1;f.onselectstart=function(b){b=b||event;return b.returnValue=!1};f.oncontextmenu=function(b){b=b||event;return b.returnValue=!1};f.onmouseover=function(){d.menuMode=="web"&&window.clearTimeout(d.menuTimeoutHandler);d._clearAllSelectedSubItemsInPolygon(this.pId);if(this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown_Disabled"){this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,d._canScrollDown=!0,d._doScrollDown(this.pId,!0)}};f.onmouseout=function(){if(d.menuMode=="web"){window.clearTimeout(d.menuTimeoutHandler),d.menuTimeoutHandler=window.setTimeout(function(){d._clearAndHide()},d.menuTimeoutMsec,"JavaScript")}this.over=!1;d._canScrollDown=!1;if(this.className!="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown_Disabled"){this.className="dhtmlxMenu_"+d.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(d._scrollDownTM)}};f.onclick=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return !1};document.body.insertBefore(f,document.body.firstChild);this.idPull[f.id]=f};dhtmlXMenuObject.prototype._removeUpArrow=function(d){var c="arrowup_"+this.idPrefix+d;this._removeArrow(c)};dhtmlXMenuObject.prototype._removeDownArrow=function(d){var c="arrowdown_"+this.idPrefix+d;this._removeArrow(c)};dhtmlXMenuObject.prototype._removeArrow=function(e){var d=this.idPull[e];d.onselectstart=null;d.oncontextmenu=null;d.onmouseover=null;d.onmouseout=null;d.onclick=null;d.parentNode&&d.parentNode.removeChild(d);d=null;this.idPull[e]=null;try{delete this.idPull[e]}catch(f){}};dhtmlXMenuObject.prototype._isArrowExists=function(b){return this.idPull["arrowup_"+b]!=null&&this.idPull["arrowdown_"+b]!=null?!0:!1};dhtmlXMenuObject.prototype._doScrollUp=function(h,g){var m=this.idPull["polygon_"+h];if(this._canScrollUp&&m.scrollTop>0){var l=!1,k=m.scrollTop-this._scrollUpTMStep;k<0&&(l=!0,k=0);m.scrollTop=k;if(!l){var j=this;this._scrollUpTM=window.setTimeout(function(){j._doScrollUp(h,!1)},this._scrollUpTMTime)}}else{this._canScrollUp=!1,this._checkArrowsState(h)}g&&this._checkArrowsState(h)};dhtmlXMenuObject.prototype._doScrollDown=function(h,g){var m=this.idPull["polygon_"+h];if(this._canScrollDown&&m.scrollTop+m.offsetHeight<=m.scrollHeight){var l=!1,k=m.scrollTop+this._scrollDownTMStep;k+m.offsetHeight>m.scollHeight&&(l=!0,k=m.scollHeight-m.offsetHeight);m.scrollTop=k;if(!l){var j=this;this._scrollDownTM=window.setTimeout(function(){j._doScrollDown(h,!1)},this._scrollDownTMTime)}}else{this._checkArrowsState(h)}g&&this._checkArrowsState(h)};dhtmlXMenuObject.prototype._countPolygonItems=function(g){var f=0,k;for(k in this.itemPull){var j=this.itemPull[k].parent,h=this.itemPull[k].type;j==this.idPrefix+g&&(h=="item"||h=="radio"||h=="checkbox")&&f++}return f};dhtmlXMenuObject.prototype.setOverflowHeight=function(e){if(e==="auto"){this.limit=0,this.autoOverflow=!0}else{if(!(this.limit==0&&e<=0)){if(this._clearAndHide(),this.limit>=0&&e>0){this.limit=e}else{if(this.limit>0&&e<=0){for(var d in this.itemPull){if(this._isArrowExists(d)){var f=String(d).replace(this.idPrefix,"");this._removeUpArrow(f);this._removeDownArrow(f);this.idPull["polygon_"+d].style.height=""}}this.limit=0}}}}};dhtmlXMenuObject.prototype._getRadioImgObj=function(e){try{var d=this.idPull[this.idPrefix+e].childNodes[this._rtl?2:0].childNodes[0]}catch(f){d=null}return d};dhtmlXMenuObject.prototype._setRadioState=function(f,e){var h=this._getRadioImgObj(f);if(h!=null){var g=this.itemPull[this.idPrefix+f];g.checked=e;g.imgen="rdbt_"+(g.checked?"1":"0");g.imgdis=g.imgen;h.className="sub_icon "+g.imgen}};dhtmlXMenuObject.prototype._radioOnClickHandler=function(f,e,h){if(!(e.charAt(1)=="d"||this.itemPull[this.idPrefix+f].group==null)){var g=this.itemPull[this.idPrefix+f].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[g,this.getRadioChecked(g),f,this.contextMenuZoneId,h])&&this.setRadioChecked(g,f):this.setRadioChecked(g,f);this.checkEvent("onClick")&&this.callEvent("onClick",[f])}};dhtmlXMenuObject.prototype.getRadioChecked=function(h){for(var g=null,m=0;m<this.radio[h].length;m++){var l=this.radio[h][m].replace(this.idPrefix,""),k=this._getRadioImgObj(l);if(k!=null){var j=k.className.match(/rdbt_1$/gi);j!=null&&(g=l)}}return g};dhtmlXMenuObject.prototype.setRadioChecked=function(f,e){if(this.radio[f]!=null){for(var h=0;h<this.radio[f].length;h++){var g=this.radio[f][h].replace(this.idPrefix,"");this._setRadioState(g,g==e)}}};dhtmlXMenuObject.prototype.addRadioButton=function(F,E,D,C,A,y,x,w){if(!(this.context&&E==this.topId)){if(this.itemPull[this.idPrefix+E]==null){return}if(F=="child"&&this.itemPull[this.idPrefix+E].type!="item"){return}}var v=this.idPrefix+(C!=null?C:this._genStr(24)),u="rdbt_"+(x?"1":"0"),s=u;if(F=="sibling"){var o=this.idPrefix+this.getParentId(E);this._addItemIntoGlobalStrorage(v,o,A,"radio",w,u,s);this._renderSublevelItem(v,this.getItemPosition(E))}else{o=this.idPrefix+E,this._addItemIntoGlobalStrorage(v,o,A,"radio",w,u,s),this.idPull["polygon_"+o]==null&&this._renderSublevelPolygon(o,o),this._renderSublevelItem(v,D-1),this._redefineComplexState(o)}var n=y!=null?y:this._genStr(24);this.itemPull[v].group=n;this.radio[n]==null&&(this.radio[n]=[]);this.radio[n][this.radio[n].length]=v;x==!0&&this.setRadioChecked(n,String(v).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype._getCheckboxState=function(b){return this.itemPull[this.idPrefix+b]==null?null:this.itemPull[this.idPrefix+b].checked};dhtmlXMenuObject.prototype._setCheckboxState=function(d,c){this.itemPull[this.idPrefix+d]!=null&&(this.itemPull[this.idPrefix+d].checked=c)};dhtmlXMenuObject.prototype._updateCheckboxImage=function(d){if(this.idPull[this.idPrefix+d]!=null){this.itemPull[this.idPrefix+d].imgen="chbx_"+(this._getCheckboxState(d)?"1":"0");this.itemPull[this.idPrefix+d].imgdis=this.itemPull[this.idPrefix+d].imgen;try{this.idPull[this.idPrefix+d].childNodes[this._rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+d].imgen}catch(c){}}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(f,e,h){if(e.charAt(1)!="d"&&this.itemPull[this.idPrefix+f]!=null){var g=this._getCheckboxState(f);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[f,g,this.contextMenuZoneId,h])&&this.setCheckboxState(f,!g):this.setCheckboxState(f,!g);this.checkEvent("onClick")&&this.callEvent("onClick",[f])}};dhtmlXMenuObject.prototype.setCheckboxState=function(d,c){this._setCheckboxState(d,c);this._updateCheckboxImage(d)};dhtmlXMenuObject.prototype.getCheckboxState=function(b){return this._getCheckboxState(b)};dhtmlXMenuObject.prototype.addCheckbox=function(A,y,x,w,v,u,s){if(!(this.context&&y==this.topId)){if(this.itemPull[this.idPrefix+y]==null){return}if(A=="child"&&this.itemPull[this.idPrefix+y].type!="item"){return}}var o="chbx_"+(u?"1":"0"),n=o;if(A=="sibling"){var m=this.idPrefix+(w!=null?w:this._genStr(24)),l=this.idPrefix+this.getParentId(y);this._addItemIntoGlobalStrorage(m,l,v,"checkbox",s,o,n);this.itemPull[m].checked=u;this._renderSublevelItem(m,this.getItemPosition(y))}else{m=this.idPrefix+(w!=null?w:this._genStr(24)),l=this.idPrefix+y,this._addItemIntoGlobalStrorage(m,l,v,"checkbox",s,o,n),this.itemPull[m].checked=u,this.idPull["polygon_"+l]==null&&this._renderSublevelPolygon(l,l),this._renderSublevelItem(m,x-1),this._redefineComplexState(l)}};dhtmlXMenuObject.prototype._readLevel=function(x){var w="",v;for(v in this.itemPull){if(this.itemPull[v].parent==x){var u="",s="",o="",n=String(this.itemPull[v].id).replace(this.idPrefix,""),m="",l=this.itemPull[v].title!=""?' text="'+this.itemPull[v].title+'"':"",k="";this.itemPull[v].type=="item"&&(this.itemPull[v].imgen!=""&&(u=' img="'+this.itemPull[v].imgen+'"'),this.itemPull[v].imgdis!=""&&(s=' imgdis="'+this.itemPull[v].imgdis+'"'),this.itemPull[v].hotkey!=""&&(o="<hotkey>"+this.itemPull[v].hotkey+"</hotkey>"));this.itemPull[v].type=="separator"?m=' type="separator"':this.itemPull[v].state=="disabled"&&(k=' enabled="false"');this.itemPull[v].type=="checkbox"&&(m=' type="checkbox"'+(this.itemPull[v].checked?' checked="true"':""));this.itemPull[v].type=="radio"&&(m=' type="radio" group="'+this.itemPull[v].group+'" '+(this.itemPull[v].checked?' checked="true"':""));w+="<item id='"+n+"'"+l+m+u+s+k+">";w+=o;this.itemPull[v].complex&&(w+=this._readLevel(v));w+="</item>"}}return w};dhtmlXMenuObject.prototype.serialize=function(){var b="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return b};function dhtmlXPopup(e){var d=this;this.conf=e||{};e=null;this.mode=this.conf.mode||"bottom";this.p=document.createElement("DIV");this.p.style.display="none";this.p.innerHTML="<div class='dhx_popup_area"+(_isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>";document.body.appendChild(this.p);this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}};this.p.onclick=function(b){b=b||event;b.cancelBubble=!0;if(d._nodeObj!=null){return d.callEvent("onContentClick",[]),!0}for(var h=b.target||b.srcElement,g=null;h!=d.p;){if(typeof h._idd!="undefined"&&!h._isSeparator){g=h._idd}h=h.parentNode}h=null;g&&(d.callEvent("onClick",[g]),d!=null&&d.isVisible!=null&&d.isVisible()&&d.callEvent("onBeforeHide",["select",b,g])===!0&&d.hide())};this.separator="DHXSEP"+(new Date).getTime();this.tpl=[];this.setTemplate=function(b){this.tpl=b.split(",")};this.uid=function(){this.idd?this.idd++:this.idd=(new Date).getTime();return this.idd};this.show=function(g){var c=null;if(arguments.length==1){if(g){if(!this._idExists(g)){return}}else{g=this.conf.id[0]}this.conf.toolbar&&(c=this.conf.toolbar.getItemDim(g));this.conf.form&&(c=this.conf.form.getItemDim(g))}else{if(arguments.length==4){this._clearClick=!0,c={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]},g=null}}if(c){this.p.style.visibility="hidden",this.p.style.display="",this._setPos(c),this.p.style.visibility="visible",this._lastId=g,this.callEvent("onShow",[g])}};this._setPos=function(am,al){var ak=am.left,aj=am.top,ai=am.width,ah=am.height;this._posData={left:ak,top:aj,width:ai,height:ah};var ag=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollLeft,document.body.scrollLeft),af=ag+(_isIE?Math.max(document.documentElement.clientWidth||0,document.documentElement.offsetWidth||0,document.body.clientWidth||0):window.innerWidth),ae=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),ad=ae+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight),ac=al||this.mode;typeof al=="undefined"&&(al=!1);var ab={top:aj-this.p.offsetHeight-ae,bottom:ad-(aj+ah+this.p.offsetHeight),left:ak-this.p.offsetWidth-ag,right:af-(ak+ai+this.p.offsetWidth)};if(!al&&ab[ac]<0){var aa=this._getAvailPos(ac,ab);if(aa!==!1){this._setPos(am,aa);return}}if(ac=="top"||ac=="bottom"){var Y=this.skinParams[this.skin].t2,V=this.skinParams[this.skin].t3,T=Math.round(this.p.offsetWidth/2),L=Math.round(this.p.lastChild.offsetWidth/2);if(ak<ag){var Q=Math.min(ak+ai,ag),ai=ak+ai-Q,ak=Q}ak+ai>af&&(ai=af-ak);var O=Math.round(ak+ai/2),K=O-T,I=O-Y-L,H=O+L+Y-this.p.offsetWidth;K<ag-V?K=Math.min(ag-V,I):K+this.p.offsetWidth>af+V&&(K=Math.max(H,af+V-this.p.offsetWidth));this.p.style.left=K+"px";this.p.style.top=(ac=="top"?aj-this.p.offsetHeight:aj+ah)+"px";O=O-K-L;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+ac;this.p.lastChild.style.top=(ac=="top"?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=O+"px"}if(ac=="left"||ac=="right"){var Y=this.skinParams[this.skin].t0,V=this.skinParams[this.skin].t1,W=Math.round(this.p.offsetHeight/2),U=Math.round(this.p.lastChild.offsetHeight/2);if(aj<ae){var J=Math.min(aj+ah,ae),ah=aj+ah-J,aj=J}aj+ah>ad&&(ah=ad-aj);var O=Math.round(aj+ah/2),Z=O-W,P=O-Y-U,S=O+U+Y-this.p.offsetHeight;Z<ae-V?Z=Math.min(ae-V,P):Z+this.p.offsetHeight>ad+V&&(Z=Math.max(S,ad+V-this.p.offsetHeight));this.p.style.left=(ac=="left"?ak-this.p.offsetWidth:ak+ai)+"px";this.p.style.top=Z+"px";O=O-Z-U;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+ac;this.p.lastChild.style.left=(ac=="left"?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px";this.p.lastChild.style.top=O+"px"}if(this._IEDisp&&this._nodeId!=null){var N=document.getElementById(this._nodeId);window.setTimeout(function(){N.style.visibility="visible";N=null},1)}};this._getAvailPos=function(k,j){for(var o={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]},n=null,m=0;m<o[k].length;m++){n==null&&j[o[k][m]]>0&&(n=o[k][m])}if(n==null){var n="bottom",l;for(l in j){j[l]>j[n]&&(n=l)}}return n==k?!1:n};this._repaint=function(){this.isVisible()&&this._setPos(this._posData)};this.clear=function(){if(this._nodeObj){if(_isIE&&typeof dhtmlXLayoutObject!="undefined"&&this._nodeObj instanceof dhtmlXLayoutObject){this.p.onmousedown=null}this._nodeObj.unload?this._nodeObj.unload():this._nodeObj.destruct&&this._nodeObj.destruct();this._nodeObj=this._nodeId=null}this._IEHoverInited&&this._IEHoverClear();for(var b=this.p.firstChild.firstChild.firstChild;b.childNodes.length>0;){b.removeChild(b.lastChild)}b=null;this.itemData={}};this.hide=function(){if(this.p.style.display!="none"){this.p.style.display="none";var b=this._lastId;this._lastId=null;this.callEvent("onHide",[b])}};this.isVisible=function(){return this.p.style.display==""};this.itemData={};this.getItemData=function(b){return !b?this.itemData:this.itemData[b]?this.itemData[b]:{}};this.setSkin=function(b){this.skin=b;this.p.className="dhx_popup_"+this.skin;this._nodeObj!=null&&typeof this._nodeObj.setSkin=="function"&&this._nodeObj.setSkin(this.skin);this._repaint()};this.skinDetect=function(){var g=document.createElement("DIV");g.className="dhx_popup_skin_detect";document.body.firstChild?document.body.insertBefore(g,document.body.firstChild):document.body.appendChild(g);var c=g.offsetWidth;g.parentNode.removeChild(g);g=null;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[c]||null};this.attachList=function(m,l){this.setTemplate(m);this.clear();for(var w=this.p.firstChild.firstChild.firstChild,v=0;v<l.length;v++){var u=document.createElement("TR");u._idd=l[v].id||this.uid();w.appendChild(u);this.itemData[u._idd]=l[v];if(l[v]==this.separator){u.className="dhx_popup_sep";u._isSeparator=!0;var s=document.createElement("TD");s.className="dhx_popup_sep";s.colSpan=this.tpl.length;s.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>";u.appendChild(s);s=null}else{for(var o=0;o<this.tpl.length;o++){var n="dhx_popup_td";if(this._IEFirstLast&&(this.tpl.length==1||o==0||o==this.tpl.length-1)){n+=this.tpl.length==1?" dhx_popup_td_single":o==0?" dhx_popup_td_first":" dhx_popup_td_last"}s=document.createElement("TD");s.className=n;s.innerHTML=l[v][this.tpl[o]]||"&nbsp;";u.appendChild(s);s=null}if(this._IEHover){u._IEHover=!0,this._IEHoverInited||this._IEHoverInit()}}u=null}w=null;this._repaint()};this.attachObject=function(b){return this._attachNode("object",{obj:b})};this.attachHTML=function(b){return this._attachNode("html",{html:b})};this.attachForm=function(b){return this._attachNode("form",{struct:b})};this.attachCalendar=function(){return this._attachNode("calendar",{})};this.attachGrid=function(g,c){return this._attachNode("grid",{width:g||400,height:c||200})};this.attachTree=function(h,g,j){return this._attachNode("tree",{width:h||400,height:g||200,rootId:j||0})};this.attachLayout=function(h,g,j){return this._attachNode("layout",{width:h||400,height:g||200,pattern:j||"3L"})};this.attachAccordion=function(g,c){return this._attachNode("accordion",{width:g||400,height:c||200})};this.attachTabbar=function(h,g,j){return this._attachNode("tabbar",{width:h||400,height:g||200,mode:j||"top"})};this._attachNode=function(b,m){this.clear();this._nodeId="cn_"+(new Date).getTime();var l=this.p.firstChild.firstChild.firstChild,k=document.createElement("TR");k.className="dhxnode";l.appendChild(k);var j=document.createElement("TD");j.className="dhx_popup_td";j.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>";if(m.width){j.firstChild.style.width=m.width+"px"}if(m.height){j.firstChild.style.height=m.height+"px"}k.appendChild(j);j=k=l=null;if(b=="object"){this._nodeObj=typeof m.obj=="string"?document.getElementById(m.obj):m.obj,m.obj=null,document.getElementById(this._nodeId).appendChild(this._nodeObj),this._nodeObj.style.display="",this._nodeObj.style.visibility="visible"}if(b=="html"){document.getElementById(this._nodeId).innerHTML=m.html,this._nodeObj={text:m.html}}if(b=="form"){this._nodeObj=new dhtmlXForm(this._nodeId,m.struct),this._nodeObj.setSkin(this.skin)}if(b=="calendar"){this._nodeObj=new dhtmlXCalendarObject(this._nodeId),this._nodeObj.setSkin(this.skin),this._nodeObj.show()}if(b=="grid"){this._nodeObj=new dhtmlXGridObject(this._nodeId),this._nodeObj.setSkin(this.skin)}if(b=="tree"){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",m.rootId)}if(b=="layout"&&(this._nodeObj=new dhtmlXLayoutObject(this._nodeId,m.pattern,this.skin),_isIE)){this.p.onmousedown=function(){d._clearClick=!0}}if(b=="accordion"){this._nodeObj=new dhtmlXAccordion(this._nodeId,this.skin)}if(b=="tabbar"){this._nodeObj=new dhtmlXTabBar(this._nodeId,m.mode),this._nodeObj.setSkin(this.skin)}this._repaint();return this._nodeObj};this.unload=function(){window.addEventListener?(window.removeEventListener("click",this._doOnClick,!1),window.removeEventListener("unload",this._doOnUnload,!1)):(document.body.detachEvent("onclick",this._doOnClick,!1),document.body.detachEvent("onunload",this._doOnUnload,!1));this.clear();this._doOnKeyUp=this._doOnUnload=this._doOnClick=null;if(this.conf.toolbarEvent!=null&&this.conf.toolbar!=null){this.conf.toolbar.detachEvent!=null?this.conf.toolbar.detachEvent(this.conf.toolbarEvent):this.conf.toolbar.getItemDim=null}this.detachAllEvents();this._clearClick=this._lastId=this._posData=this.skinParams=this.skinParent=this.tpl=this.idd=this.uid=this.itemData=this.separator=this.skin=this.mode=this.show=this.hide=this.isVisible=this.setTemplate=this._repaint=this._setPos=this.getItemData=this.clear=this._idExists=this._doOnToolbarClick=this.setSkin=this.skinDetect=this.attachList=this.attachAccordion=this.attachCalendar=this.attachForm=this.attachGrid=this.attachLayout=this.attachTabbar=this.attachTree=this.attachHTML=this.attachObject=this._attachNode=this.attachEvent=this.detachEvent=this.callEvent=this.checkEvent=this.detachAllEvents=this.eventCatcher=null;this.p.onclick=null;this.p.parentNode.removeChild(this.p);this.p=null;d=this.unload=this._IEDisp=this._IEHover=this._IEHoverTM=this._IEHoverInit=this._IEHoverClear=this._IEHoverRender=this._IEHoverInited=this.conf=this.conf.toolbar=this.conf.toolbarEvent=this.conf.form=this.conf.id=null};dhtmlxEventable(this);this._doOnClick=function(b){b=b||event;if(d._clearClick){d._clearClick=!1}else{if(d.conf.form!=null){var m,l=b.target||b.srcElement;if((l.tagName||"").toLowerCase()=="option"){l=l.parentNode}if(l.className!=null&&l.className.search("dhxform")>=0){if(l.parentNode!=null&&l.parentNode.parentNode!=null&&l.parentNode.parentNode._idd!=null){m=l.parentNode.parentNode._idd,l.parentNode.parentNode._type=="ra"&&(m=[l.parentNode.parentNode._group,l.parentNode.parentNode._value])}}else{for(var k=!0,j=!1;k&&!j;){j=(l.className||"").toLowerCase()=="dhxform_btn"||(l.className||"").search(/dhxeditor_inside/gi)>=0,l=l.parentNode,k=l!=null}if(j){return}}l=null;if(m!=null&&d._idExists(m)){return}}d.isVisible()&&d.callEvent("onBeforeHide",["click",b])===!0&&d.hide()}};this._doOnKeyUp=function(b){b=b||event;b.keyCode==27&&d.isVisible()&&d.callEvent("onBeforeHide",["esc",b])===!0&&d.hide()};this._doOnUnload=function(){d.unload()};window.addEventListener?(window.addEventListener("click",this._doOnClick,!1),window.addEventListener("keyup",this._doOnKeyUp,!1),window.addEventListener("unload",this._doOnUnload,!1)):(document.body.attachEvent("onclick",this._doOnClick,!1),document.body.attachEvent("onkeyup",this._doOnKeyUp,!1),document.body.attachEvent("onunload",this._doOnUnload,!1));this._idExists=function(h){for(var g=!1,j=0;j<this.conf.id.length;j++){g=this.conf.id[j] instanceof Array?g||this.conf.id[j][0]==h[0]&&this.conf.id[j][1]==h[1]:g||this.conf.id[j]==h}return g};this._IEDisp=_isIE&&(navigator.userAgent.search("MSIE 6.0")>=0||document.compatMode!="CSS1Compat");if(this._IEHover=_isIE&&navigator.userAgent.search("MSIE 6.0")>=0){this._IEHoverInit=function(){this.p.onmouseover=function(){for(var b=event.srcElement;b!=this&&b._IEHover!=!0;){b=b.parentNode}b._IEHover&&(d._IEHoverTM&&window.clearTimeout(d._IEHoverTM),d._lastIEHover!=b&&(d._IEHoverRender(b),b=null))};this.p.onmouseout=function(){d._IEHoverTM&&window.clearTimeout(d._IEHoverTM);d._IEHoverTM=window.setTimeout(function(){d._IEHoverRender(null)},1)};this._IEHoverRender=function(b){if(this._lastIEHover!=null&&this._lastIEHover.className.search(/tr_hover/gi)>=0){this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,""),this._lastIEHover=null}if(b!=null&&b.className.search(/tr_hover/gi)<0){b.className+=" tr_hover",d._lastIEHover=b}};this._IEHoverInited=!0},this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=!1}}this._IEFirstLast=_isIE&&navigator.userAgent.search(/MSIE [6,7,8]\.0/i)>=0;if(typeof dhtmlXToolbarObject!="undefined"&&this.conf.toolbar!=null&&this.conf.toolbar instanceof dhtmlXToolbarObject&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}this.skinParent=this.conf.toolbar.skin;this._doOnToolbarClick=function(b){for(var g=0;g<d.conf.id.length;g++){if(b==d.conf.id[g]&&b!=d._lastId){d.show(b),d._clearClick=!0}}};if(typeof dhtmlXToolbarObject.prototype.getItemDim=="undefined"){dhtmlXToolbarObject.prototype.getItemDim=function(h){var g=this.objPull[this.idPrefix+h],j={left:getAbsoluteLeft(g.obj),top:getAbsoluteTop(g.obj),width:g.obj.offsetWidth+(g.arw?g.arw.offsetWidth:0),height:g.obj.offsetHeight},g=null;return j}}this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",d._doOnToolbarClick)}if(typeof dhtmlXForm!="undefined"&&this.conf.form!=null&&this.conf.form instanceof dhtmlXForm&&this.conf.id!=null){if(!(this.conf.id instanceof Array)){this.conf.id=[this.conf.id]}if(!this.conf.mode){this.mode="right"}this.skinParent=this.conf.form.skin;if(typeof dhtmlXForm.prototype.getItemDim=="undefined"){dhtmlXForm.prototype.getItemDim=function(b){return this.doWithItem(b,"_getDim")};for(var f in {input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1}){if(dhtmlXForm.prototype.items[f]!=null){dhtmlXForm.prototype.items[f]._getDim=function(h){var g=h;({ta:!0,pw:!0,se:!0,calendar:!0,colorpicker:1,editor:!0})[h._type]&&(g=h.childNodes[h._ll?1:0].childNodes[0]);({ch:!0,ra:!0,btn2state:!0})[h._type]&&(g=h.childNodes[h._ll?1:0].childNodes[1]);if({bt:!0}[h._type]){g=h.firstChild}if({combo:!0}[h._type]){g=h._combo.DOMParent.firstChild}var j={left:getAbsoluteLeft(g),top:getAbsoluteTop(g),width:g.offsetWidth,height:g.offsetHeight},g=null;return j}}}}}this.setSkin(this.conf.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||this.skinParent||this.skinDetect()||"dhx_skyblue");return this}function dhtmlxSlider(D,C,A,y,x,w,v,u){if(_isIE){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(s){}}var o;if(D&&typeof D=="object"&&!D.nodeName){o=D.parent,A=D.skin,x=D.min,w=D.max,u=D.step,y=D.vertical,v=D.value,C=D.size}if(D){o=typeof D!="object"?document.getElementById(D):D}else{var n="slider_div_"+(new Date).valueOf()+Math.random(1000);o=document.createElement("div");o.setAttribute("id",n);for(var m=document.body.lastChild;m.lastChild&&m.lastChild.nodeType==1;){m=m.lastChild}m.parentNode.insertBefore(o,m)}if(typeof C=="object"){A=C.skin,x=C.min,w=C.max,u=C.step,y=C.vertical,v=C.value,C=C.size}this.size=C;this.vMode=y||!1;this.skin=dhtmlx.skin||A||"default";this.parent=o;this.disabled=this.isInit=!1;this.value=v=="undefined"?x||0:v;this.inputPriority=!0;this.stepping=!1;this.imgURL=window.dhx_globalImgPath||dhtmlx.image_path||"";this._skinsImgs={"default":{ls:1,lz:1,rz:1,rs:1},ball:{ls:1,lz:1,rz:1,rs:1},zipper:{bg:1,lz:1,rz:1},arrow:{bg:1,ls:1,rs:1},arrowgreen:{bg:1,ls:1,rs:1},simplesilver:{lz:1,ls:1,rs:1,rz:1},simplegray:{lz:1,ls:1,rs:1,rz:1},bar:{bg:1,ls:1,rs:1},dhx_skyblue:{bg:1}};this._def=[x-0||0,w-0||100,u-0||1,v-0||0,C-0];dhtmlxEventable(this);return this}dhtmlxSlider.prototype.createStructure=function(){if(this.con){this.con.parentNode.removeChild(this.con),this.con=null}if(this.vMode){this._sW="height";this._sH="width";this._sL="top";this._sT="left";var g=this.imgURL+"skins/"+this.skin+"/vertical/"}else{this._sW="width",this._sH="height",this._sL="left",this._sT="top",g=this.imgURL+"skins/"+this.skin+"/"}this.con=document.createElement("DIV");this.con.onselectstart=function(){return !1};this.con._etype="slider";this.con.className="dhtmlxSlider"+(this.skin!="default"?"_"+this.skin:"");if(this._skinsImgs[this.skin].bg){this.con.style.backgroundImage="url("+g+"bg.gif)"}this.drag=document.createElement("DIV");this.drag._etype="drag";this.drag.className="selector";this.drag.style.backgroundImage="url("+g+"selector.gif)";var f=document.createElement("DIV");f.className="leftSide";if(this._skinsImgs[this.skin].ls){f.style.background="url("+g+"leftside_bg.gif)"}this.leftZone=document.createElement("DIV");this.leftZone.className="leftZone";if(this._skinsImgs[this.skin].lz){this.leftZone.style.background="url("+g+"leftzone_bg.gif)"}var k=document.createElement("DIV");k.className="rightSide";if(this._skinsImgs[this.skin].rs){k.style.background="url("+g+"rightside_bg.gif)"}this.rightZone=document.createElement("DIV");this.rightZone.className="rightZone";if(this._skinsImgs[this.skin].rz){this.rightZone.style.background="url("+g+"rightzone_bg.gif)"}this.con.appendChild(f);this.con.appendChild(this.leftZone);this.con.appendChild(this.rightZone);this.con.appendChild(k);this.con.appendChild(this.drag);this.parent.appendChild(this.con);(!this.parent.parentNode||!this.parent.parentNode.tagName)&&document.body.appendChild(this.parent);if(this.vMode){this._sW="height";this._sH="width";this._sL="top";this._sT="left";this.con.style.width=this.con.offsetHeight+"px";for(var j=0;j<this.con.childNodes.length;j++){this.con.childNodes[j].style.fontSize="0";var h=this.con.childNodes[j].offsetWidth;this.con.childNodes[j].style.width=this.con.childNodes[j].offsetHeight+"px";this.con.childNodes[j].style.height=h+"px";h=this.con.childNodes[j].offsetLeft;this.con.childNodes[j].style.left=this.con.childNodes[j].offsetTop+"px";this.con.childNodes[j].style.top=h+"px"}k.style.top=this.size-k.offsetHeight+"px";this.zoneSize=this.size-k.offsetHeight;this.dragLeft=this.drag.offsetTop;this.dragWidth=this.drag.offsetHeight;this.rightZone.style.height=this.zoneSize+"px"}else{this.zoneSize=this.size-k.offsetWidth,this.dragLeft=this.drag.offsetLeft,this.dragWidth=this.drag.offsetWidth,this.rightZone.style.width=this.zoneSize+"px"}this.con.style[this._sW]=this.size+"px";this.con.onmousedown=this._onMouseDown;this.con.onmouseup=this.con.onmouseout=function(){clearInterval(this.that._int)};this.con.that=this;this._aCalc(this._def)};dhtmlxSlider.prototype._aCalc=function(b){if(this.isInit){this.shift=b[0];this.limit=b[1]-this.shift;this._mod=(b[4]-this.dragLeft*2-this.dragWidth)/this.limit;this._step=b[2];this.step=this._step*this._mod;this._xlimit=b[4]-this.dragLeft*2-this.dragWidth;if(!this.posX){this.posX=this._xlimit*(b[3]-this.shift)/this.limit}this._applyPos(!0);return this}};dhtmlxSlider.prototype.setMin=function(b){this._def[0]=b-0;this._aCalc(this._def)};dhtmlxSlider.prototype.setMax=function(b){this._def[1]=b-0;this._aCalc(this._def)};dhtmlxSlider.prototype.setStep=function(b){this._def[2]=b-0;this._aCalc(this._def)};dhtmlxSlider.prototype._applyPos=function(e){if(this.isInit){if(this.step!=1&&this.step){this.posX=Math.round(this.posX/this.step)*this.step}if(this.posX<0){this.posX=0}if(this.value<(this._def[0]||0)){this.value=this._def[0]||0}if(this.value>this._def[1]){this.value=this._def[1]}if(this.posX>this._xlimit){this.posX=this._xlimit}var d=this.drag.style[this._sL];this.drag.style[this._sL]=this.posX+this.dragLeft*1+"px";this.leftZone.style[this._sW]=this.posX+this.dragLeft*1+"px";this.rightZone.style[this._sL]=this.posX+this.dragLeft*1+1+"px";this.rightZone.style[this._sW]=this.zoneSize-(this.posX+this.dragLeft*1)+"px";var f=this.getValue();if(this._link){this._linkBoth?this._link.value=f:this._link.innerHTML=f}!e&&d!=this.drag.style[this._sL]&&this.callEvent("onChange",[f,this]);this.value=this.getValue();this._dttp||this._setTooltip(f)}};dhtmlxSlider.prototype._setTooltip=function(b){this.con.title=b};dhtmlxSlider.prototype.setSkin=function(b){this.skin=b||"default";this.isInit&&this.createStructure()};dhtmlxSlider.prototype.startDrag=function(d){if(!this._busy&&(d.button===0||d.button===1)){this.drag_mx=d.clientX;this.drag_my=d.clientY;this.drag_cx=this.posX;this.d_b_move=document.body.onmousemove;this.d_b_up=document.body.onmouseup;var c=this;document.body.onmouseup=function(b){c.stopDrag(b||event);c=null};document.body.onmousemove=function(b){c.onDrag(b||event)};this._busy=!0}};dhtmlxSlider.prototype.onDrag=function(b){if(this._busy){this.posX=this.vMode?this.drag_cx+b.clientY-this.drag_my:this.drag_cx+b.clientX-this.drag_mx,this._applyPos()}};dhtmlxSlider.prototype.stopDrag=function(){document.body.onmousemove=this.d_b_move?this.d_b_move:null;document.body.onmouseup=this.d_b_up?this.d_b_up:null;this.d_b_move=this.d_b_up=null;this._busy=!1;this.callEvent("onSlideEnd",[this.getValue()])};dhtmlxSlider.prototype.getValue=function(){return !this._busy&&this.inputPriority?(Math.round(this.value/this._step)*this._step).toFixed(6)-0:Math.round((Math.round(this.posX/this._mod/this._step)*this._step+this.shift*1)*10000)/10000};dhtmlxSlider.prototype.setValue=function(d,c){if(!isNaN(d)){this._def[3]=this.value=d-0,this.posX=Math.round(((d||0)-this.shift)*this._mod),this._applyPos(c==null?!0:c)}};dhtmlxSlider.prototype._getActionElement=function(b){return b._etype?b:b.parentNode?this._getActionElement(b.parentNode):null};dhtmlxSlider.prototype._onMouseDown=function(g){if(!this.that.disabled){var g=g||event,f=this.that,k=f._getActionElement(_isIE?g.srcElement:g.target);switch(k._etype){case"slider":var j=f.vMode?g.clientY-(getAbsoluteTop(f.con)-document.body.scrollTop):g.clientX-(getAbsoluteLeft(f.con)-document.body.scrollLeft),h=f.posX;f.posX=j-f.dragLeft-f.dragWidth/2;f.direction=f.posX>h?1:-1;f.stepping?(clearInterval(f._int),f.setValue(f.value+f._step*f.direction,!1),f._int=setInterval(function(){f.setValue(f.value+f._step*f.direction,!1)},600)):(f._busy=!0,f._applyPos(),f._busy=!1);break;case"drag":f.startDrag(g||event)}return !1}};dhtmlxSlider.prototype.setOnChangeHandler=function(b){this.attachEvent("onChange",b)};dhtmlxSlider.prototype._linkFrom=function(){this.disabled||this.setValue(parseFloat(this._link.value),!1)};dhtmlxSlider.prototype.linkTo=function(f){this._link=f=typeof f!="object"?document.getElementById(f):f;var e=f.tagName.toString().toLowerCase();if(this._linkBoth=e=="input"||e=="select"||e=="textarea"?1:0){var h=this,g=function(){this._nextSlider&&window.clearTimeout(this._nextSlider);this._nextSlider=window.setTimeout(function(){h._linkFrom()},500)};f.onblur=f.onkeypress=f.onchange=g}this._applyPos()};dhtmlxSlider.prototype.enableTooltip=function(b){this._dttp=!convertStringToBoolean(b);this._setTooltip(this._dttp?"":this.getValue())};dhtmlxSlider.prototype.setImagePath=function(b){this.imgURL=b};dhtmlxSlider.prototype.init=function(){this.isInit=!0;this.createStructure()};dhtmlxSlider.prototype.setInputPriority=function(b){this.inputPriority=b};dhtmlxSlider.prototype.setSteppingMode=function(b){this.stepping=b};dhtmlxSlider.prototype.disable=function(b){this.disabled=b};(function(){dhtmlx.extend_api("dhtmlxSlider",{_init:function(b){return[b.parent,b.size,b.skin,b.vertical,b.min,b.max,b.value,b.step]},link:"linkTo"},{})})();function dhtmlXTabBar(e,d,f){d=d||"top";dhtmlxEventable(this);this._hrefs={};this._s={};this._c={};this._s.mode=d;this._s.scrolls=!0;this._custom_height=f;this._s.line_height=(parseInt(f)||20)+3;this._s.skin_line=1;this._s.tab_margin=0;this._s.expand=0;this._s.ext_border=2;this._s._bMode=d=="right"||d=="bottom"?1:0;this._s._vMode=d=="right"||d=="left"?1:0;this._dx=this._s._vMode?"height":"width";this._dy=this._s._vMode?"width":"height";switch(d){case"top":this._py="top";this._px="left";this._pxc="right";break;case"bottom":this._py="bottom";this._px="left";this._pxc="right";break;case"right":this._py="right";this._px="top";this._pxc="bottom";break;case"left":this._py="left",this._px="top",this._pxc="bottom"}this._active=null;this._tabs={};this._content={};this._href={};this._rows=[];this._s._tabSize=150;this._styles={"default":{left:3,right:3,select_shift:3,select_top:2,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},winbiscarf:{left:18,right:18,select_shift:3,select_top:2,margin:1,offset:5},winscarf:{left:18,right:4,select_shift:3,select_top:2,margin:5,offset:5},modern:{left:5,right:5,select_shift:3,select_top:2,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},silver:{left:7,right:7,select_shift:3,select_top:2,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},dark_blue:{left:2,right:2,select_shift:3,select_top:2,margin:1,offset:5},glassy_blue:{left:2,right:3,select_shift:3,select_top:2,margin:1,offset:5},dhx_terrace:{left:7,right:7,select_shift:0,select_top:0,margin:-1,offset:0,tab_color:"",data_color:"#ffffff"},dhx_black:{left:2,right:2,select_shift:3,select_top:0,margin:1,offset:5},dhx_blue:{left:2,right:2,select_shift:3,select_top:0,margin:1,offset:5,tab_color:"#F4F3EE",data_color:"#F0F8FF"},dhx_skyblue:{left:3,right:3,select_shift:0,select_top:0,margin:-1,offset:5,data_color:"white",hover:!0},dhx_web:{left:3,right:3,select_shift:1,select_top:0,margin:5,offset:15,data_color:"white"}};typeof e!="object"&&(e=document.getElementById(e));this.entBox=e;this.entBox.className+=" dhx_tabbar_zone_"+this._s.mode;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);this.setStyle("default");this.__skin=!1;this._createSelf();_isIE&&this.preventIECashing(!0);return this}dhtmlXTabBar.prototype={_get_size:function(e,d){var f=this.entBox.getAttribute(e)||this.entBox.style[e]||(window.getComputedStyle?window.getComputedStyle(this.entBox,null)[e]:this.entBox.currentStyle?this.entBox.currentStyle[e]:0);(f||"").indexOf("%")!=-1&&this.enableAutoReSize(!0,!0);if(!f||f.indexOf("%")!=-1||f=="auto"){f=d+"px"}return f},setStyle:function(b){this.setSkin(b)},_getSkin:function(){return this._a},setSkin:function(F){F=F.toLowerCase();this._styles[F]||(F="default");this._a=this._styles[F];this.skin=F;if(this._tabAll){this._tabAll.className="dhx_tabbar_zone dhx_tabbar_zone_"+this.skin}var E=F.indexOf("dhx_sky")==0,D=F.indexOf("dhx_web")==0,C=F.indexOf("dhx_terrace")==0;if(C&&!this._custom_height){this._s.line_height=37,this._setRowSizes()}if(E){this._s.skin_line=0}if(D){this._s.line_height=29,this._s.ext_border=-1,this._s.expand=!0}if(E){this._s.line_height=26;this._setRowSizes();if(this._s.expand){this._s.tab_margin=-1}this._s.skin_line_x=!0;this._s.skin_line=-3;var A=this._s._rendered;if(A){for(var y=0;y<A.length;y++){A[y].parentNode.removeChild(A[y])}}var x=document.createElement("DIV");x.className="dhx_tabbar_lineA";this._tabAll.appendChild(x);var w=document.createElement("DIV");w.className="dhx_tabbar_lineB";this._tabAll.appendChild(w);var v=document.createElement("DIV");v.className="dhx_tabbar_lineC";this._tabAll.appendChild(v);var u=document.createElement("DIV");u.className="dhx_tabbar_lineD";this._tabAll.appendChild(u);this._getCoverLine();this._s._rendered=[x,w,v,u];if(this._s.expand){this._conZone.style.borderWidth="0px 0px 0px 0px";this._tabZone.firstChild.style.borderWidth="0px 0px 0px 0px";v.style.borderWidth="0px 0px 0px 0px";u.style.left="0px";v.style.right="0px";x.style.borderWidth="0px 0px 0px 0px";if(this._s.mode=="top"){this._lineA.style.borderWidth="1px 0px 0px 0px"}w.style.left="1px";this._s.ext_border=0}var s=function(){this._lineA.style[this._dx]="1px";var d=_isIE&&document.compatMode=="BackCompat",c=this._tabAll[this._s._vMode?"offsetHeight":"offsetWidth"]+(d?2:0);this._lastActive&&(c=Math.max(c,this._lastActive.parentNode[this._s._vMode?"scrollHeight":"scrollWidth"]));c<6||(x.style[this._py]=parseInt(this._conZone.style[this._py])-3+"px",x.style[this._dx]=c-2+"px",w.style[this._py]=parseInt(this._conZone.style[this._py])-3+"px",w.style[this._dx]=c-(d?6:4)+(this._s.expand?2:0)+"px",v.style[this._dy]=parseInt(this._tabZone.style[this._dy])-3+"px",this._lineA.style[this._dx]=c-2+"px")};s.call(this);var o=this._checkScroll;this._checkScroll=function(){s.apply(this,arguments);o.apply(this,arguments)};var n=this._scrollTo;this._scrollTo=function(){n.apply(this,arguments);s.apply(this,arguments)}}if(this._a.data_color&&this._conZone){this._conZone.style.backgroundColor=this._a.data_color}this.__skin=!0},enableAutoReSize:function(){var b=this;dhtmlxEvent(window,"resize",function(){window.setTimeout(function(){b&&b._setSizes&&b._setSizes()},1)})},_createSelf:function(){this._tabAll=document.createElement("DIV");this._tabZone=document.createElement("DIV");this._conZone=document.createElement("DIV");this.entBox.appendChild(this._tabAll);this._tabAll.appendChild(this._tabZone);this._tabAll.appendChild(this._conZone);this._tabAll.className="dhx_tabbar_zone dhx_tabbar_zone_"+this.skin;this._s._vMode&&(this._tabAll.className+="V");this._s._bMode&&(this._tabAll.className+="B");this._tabZone.className="dhx_tablist_zone";this._conZone.className="dhx_tabcontent_zone";if(this.entBox._hideBorders){this._conZone.style.borderLeft=this._conZone.style.borderRight=this._conZone.style.borderBottom="0px solid white"}if(this._a.data_color){this._conZone.style.backgroundColor=this._a.data_color}this._tabZone.onselectstart=function(){return !1};this._tabZone.onclick=this._onClickHandler;this._tabZone.onmouseover=this._onMouseOverHandler;this._tabZone[_isFF?"onmouseout":"onmouseleave"]=this._onMouseOutHandler;this._tabZone.tabbar=this;this._createRow()},_createRow:function(){var b=document.createElement("DIV");b.className="dhx_tabbar_row";b.tabCount=0;this._tabZone.appendChild(b);this._rows[this._rows.length]=b;this._setRowSizes()},_removeRow:function(e){e.parentNode.removeChild(e);for(var d=[],f=0;f<this._rows.length;f++){this._rows[f]!=e&&(d[d.length]=this._rows[f])}this._rows=d},_setSizes:function(k,j){var u=["clientHeight","clientWidth"];this._dx!="width"&&u.reverse();var s=_isIE&&document.compatMode=="BackCompat",o=this._conZone.offsetWidth-this._conZone.clientWidth,n=j||this.entBox[u[0]]+(s?o:0),s=k||this.entBox[u[1]]+(s?o:0),m=this._rows.length*(this._s.line_height-(this._s.skin_line_x?4:2))+(this._s.skin_line_x?2:0);this._tabZone.style[this._dy]=m+"px";this._conZone.style[this._dy]=Math.max(0,n-this._s.ext_border-m-(this._s.skin_line_x?3:0)-this._s.tab_margin)+"px";this._conZone.style[this._dx]=Math.max(0,s-(this._s.expand?0:2))+"px";this._tabZone.style[this._py]=this._s.tab_margin+"px";this._conZone.style[this._py]=m+this._s.tab_margin-this._s.skin_line+"px";this._checkScroll();var l=this.getActiveTab();l&&this.cells(l).activate()},_checkScroll:function(){if(this._lineA){this._lineA.style[this._dx]="1px";var e=_isIE&&document.compatMode=="BackCompat",d=this._tabAll[this._s._vMode?"offsetHeight":"offsetWidth"]+(e?2:0);this._lastActive&&(d=Math.max(d,this._lastActive.parentNode[this._s._vMode?"scrollHeight":"scrollWidth"]));d>2&&(this._lineA.style[this._dx]=d-2+"px")}if(!this._s._vMode&&this._s.scrolls){for(var f=0;f<this._rows.length;f++){this._rows[f].scrollWidth-this._rows[f].offsetWidth>2?this._showScroll(f):this._hideScroll(f)}}},_showScroll:function(e){if(!this._rows[e]._scroll){this.callEvent("onBeforeShowScroll",[e]);var d=this._rows[e]._scroll=[],f=Math.max(0,this._s.line_height-23);d[0]=document.createElement("DIV");d[0].style.cssText="background-image:url("+this.imgUrl+this.skin+"/"+this.skin+"_scroll_left.gif); width:20px; height:21px;position:absolute;left:0px;z-index:990;top:"+f+"px;";d[0].className="dhx_tab_scroll_left";this._rows[e].appendChild(d[0]);d[1]=document.createElement("DIV");d[1].style.cssText="background-image:url("+this.imgUrl+this.skin+"/"+this.skin+"_scroll_right.gif); width:20px; height:21px;position:absolute;right:0px;z-index:990;top:"+f+"px;";d[1].className="dhx_tab_scroll_right";this._rows[e].appendChild(d[1])}},_hideScroll:function(b){this._rows[b]._scroll&&this.callEvent("onBeforeHideScroll",[b]);if(this._rows[b]._scroll){this._rows[b].removeChild(this._rows[b]._scroll[0]),this._rows[b].removeChild(this._rows[b]._scroll[1]),this._rows[b]._scroll=null}},_setRowSizes:function(){for(var b=0;b<this._rows.length;b++){this._rows[b].style[this._dy]=this._s.line_height+"px",this._rows[b].style[this._py]=b*(this._s.line_height-(this._s.skin_line_x?4:2))-(_isIE&&!window.postMessage&&this._s._bMode?0:0)+"px",this._rows[b].style.zIndex=10+b}this._setSizes()},_setTabSizes:function(g){for(var f=this._a.offset,k=this._s.align?this._pxc:this._px,j=0;j<g.tabCount;j++){var h=g.childNodes[j];h.style.display!="none"&&(h.style[k]=f-(this._lastActive==h?this._a.select_shift:0)+"px",f+=h._size+this._a.margin)}},addTab:function(k,j,u,s,o){!this.__skin&&dhtmlx.skin&&this.setSkin(dhtmlx.skin);for(var o=o||0,n=this._rows.length;n<=o;n++){this._createRow()}var m=this._rows[o].tabCount;!s&&s!==0&&(s=m);var l=this._createTab(k,j,u=="*"?10:u||this._s._tabSize);this._addTab(this._rows[o],l,u,s);this._tabs[k]=l;this.cells(k).hide();this._checkScroll()},getIndex:function(f){var e=this._tabs[f];if(e){for(var h=e.parentNode,g=0;g<h.childNodes.length;g++){if(h.childNodes[g]==e){return g}}}return -1},moveTab:function(g,f){var k=this._tabs[g];if(k){var j=this.getIndex(g),h=k.parentNode,f=Math.min(f,h.tabCount-1);j!=f&&(j<f&&f++,k.parentNode.childNodes[f]?k.parentNode.insertBefore(k,k.parentNode.childNodes[f]):k.parentNode.appendChild(k),this._setTabSizes(k.parentNode))}},removeTab:function(f,e){var h=this._tabs[f];if(h){this.cells(f)._dhxContDestruct();this._content[f]&&this._content[f].parentNode&&this._content[f].parentNode.removeChild(this._content[f]);this._content[f]=null;this._goToAny(h,e);var g=h.parentNode;h.innerHTML="";g.removeChild(h);g.tabCount--;g.tabCount==0&&this._rows.length>1?this._removeRow(g):this._setTabSizes(g);delete this._tabs[f];if(this._lastActive==h){this._lastActive=null}this._setRowSizes()}},_goToAny:function(d,c){if(this._lastActive==d&&(c&&this.goToNextTab()==d&&this.goToPrevTab(),this._lastActive==d)){this._lastActive=null}},_createTab:function(h,g,m){var l=document.createElement("DIV");l.className="dhx_tab_element dhx_tab_element_inactive";var k="<span>"+g+"</span><div></div><div></div><div></div>";this._close&&(k+="<IMG style='"+this._pxc+":4px; "+this._py+(this.skin=="dhx_web"?":7":":4")+"px; position:absolute;z-index:11;' src='"+this.imgUrl+this.skin+"/close.png' >");l.innerHTML=k;l.setAttribute("tab_id",h);l._size=parseInt(m);l.style[this._dx]=parseInt(m)+"px";l.style[this._dy]=this._s.line_height+"px";l.style[this._py]=this._a.select_top+"px";l.skin=this.skin;if(this._a.tab_color){l.style.backgroundColor=this._a.tab_color}if(this._c[h]){l.childNodes[0].style.cssText=this._c[h].color}this._img_all(l);if(this._close){var j=this;l.childNodes[4].onclick=function(d){var c=this.parentNode.getAttribute("tab_id");j.callEvent("onTabClose",[c])&&j.removeTab(c,!0);(d||event).cancelBubble=!0}}return l},_img_all:function(e){var d=this._getSkin(e),f=e._active?1:4;this._img(e.childNodes[1],f,this._px,d.left);this._img(e.childNodes[2],f+2,this._pxc,d.right);this._img(e.childNodes[3],f+1,this._px,parseInt(e.style[this._dx])-(d.left+d.right),d.left)},_get_img_pos:function(b){this._s._bMode&&b<7&&(b=Math.abs(b-6));b=-5-b*(this._s._vMode==1&&this.skin=="dhx_terrace"?245:45);return this._s._vMode?b+"px 0px":"0px "+b+"px"},_img:function(g,f,k,j,h){if(typeof g!="undefined"){g.style.backgroundImage="url("+this.imgUrl+this.skin+"/"+this.skin+"_"+this._s.mode+".gif)";g.style.backgroundPosition=this._get_img_pos(f);if(this._s._vMode==1&&this.skin=="dhx_terrace"){g.style.width="240px"}g.style[this._py]="0px";k&&(g.style[this._dx]=Math.max(j,0)+"px",g.style[k]=(h||0)+"px")}},_addTab:function(j,h,o,n){var m=this._a.offset;if(j.tabCount){var l=j.childNodes[j.tabCount-1],m=parseInt(l.style[this._s.align?this._pxc:this._px])+parseInt(l._size)+this._a.margin}var k=j.childNodes[n];k?j.insertBefore(h,k):j.appendChild(h);j.tabCount++;if(o=="*"){h.style.whiteSpace="nowrap",this.adjustTabSize(h)}h.style[this._s.align?this._pxc:this._px]=m+"px";n!=j.tabCount-1&&this._setTabSizes(j)},adjustTabSize:function(e,d){var f=this._getSkin(f);if(!d){e.style.fontWeight="bold",e.childNodes[3].style[this._dx]=e.style[this._dx]="10px",d=e[this._s._vMode?"scrollHeight":"scrollWidth"]+10+(this._close?20:0),e.style.fontWeight=""}e.style[this._dx]=d+"px";e._size=d;this._img_all(e)},_onMouseOverHandler:function(d){var c=this.tabbar._getTabTarget(d?d.target:event.srcElement);this.tabbar._showHover(c)},_onMouseOutHandler:function(){this.tabbar._showHover()},_showHover:function(d){if(d!=this._lastHower){if(this._lastHower&&this._lastHower!=this._lastActive){var c=this._getSkin(this._lastHower);this._lastHower.className=this._lastHower.className.replace(/[ ]*dhx_tab_hover/gi,"");c.hover?this._img_all(this._lastHower):this._img(this._lastHower.childNodes[3],5,this._px,parseInt(this._lastHower.style[this._dx])-(c.left+c.right),c.left);this._lastHower=null}if(!d||!(d==this._lastActive||d._disabled)){if(this._lastHower=d){c=this._getSkin(d),d.className+=" dhx_tab_hover",c.hover&&(this._img(d.childNodes[1],7,this._px,c.left),this._img(d.childNodes[2],8,this._pxc,c.right)),this._img(d.childNodes[3],0,this._px,parseInt(d.style[this._dx])-(c.left+c.right),c.left)}}}},_getTabTarget:function(b){if(!b){return null}for(;!b.className||b.className.indexOf("dhx_tab_element")==-1;){if(b.className&&b.className.indexOf("dhx_tabbar_zone")!=-1){return null}b=b.parentNode;if(!b){return null}}return b},_onClickHandler:function(f){var e=f?f.target:event.srcElement,h=this.tabbar._getTabTarget(e);if(h&&!h._disabled){this.tabbar._setTabActive(h)}else{var g=null;if(e.className=="dhx_tab_scroll_left"){e.parentNode.scrollLeft=Math.max(0,e.parentNode.scrollLeft-e.parentNode.offsetWidth/2),g=e,this.tabbar._setTabTop(this.tabbar._lastActive)}else{if(e.className=="dhx_tab_scroll_right"){e.parentNode.scrollLeft+=e.parentNode.offsetWidth/2,g=e.previousSibling,this.tabbar._setTabTop(this.tabbar._lastActive)}}if(g&&g.parentNode&&g.parentNode.tagName){g.style.left=g.parentNode.scrollLeft+"px";if(!_isIE||window.XMLHttpRequest){g.nextSibling.style.right=g.parentNode.scrollLeft*-1+"px"}return !1}}},_deactivateTab:function(){this._setTabInActive(this._lastActive);this._lastActive=null},_setTabInActive:function(f){if(!f||f!=this._lastActive){return !0}var e=this._getSkin(f),h=f.getAttribute("tab_id"),g=this._s.align?this._pxc:this._px;f.className=f.className.replace("_active","_inactive");f.style[this._py]=e.select_top+"px";f.style[g]=parseInt(f.style[g])+e.select_shift+"px";f.style[this._dx]=f._size+"px";f._active=!1;if(e.tab_color){f.style.backgroundColor=e.tab_color}if(this._c[h]){f.childNodes[0].style.cssText=this._c[h].color}this._img_all(f);this.cells(h).hide()},_setTabActive:function(h,g){if(!h){return !0}var m=h.getAttribute("tab_id"),l=this._lastActive?this._lastActive.getAttribute("tab_id"):null,k=this._getSkin(h);g||this.callEvent("onTabClick",[m,l]);if(h==this._lastActive){return !0}if(g||this.callEvent("onSelect",[m,l])){var j=this._s.align?this._pxc:this._px;this._setTabInActive(this._lastActive);h.className=h.className.replace("_inactive","_active");h.style[this._py]="0px";h.style[j]=parseInt(h.style[j])-k.select_shift+"px";h.style[this._dx]=h._size+k.select_shift*2+"px";h._active=!0;if(k.data_color){h.style.backgroundColor=k.data_color}if(this._c[m]){h.childNodes[0].style.cssText=this._c[m].scolor}this._img_all(h);this._setTabTop(h);this._lastActive=h;this.cells(m).show();this._scrollTo(h);return !0}},_scrollTo:function(d){if(this._s.scrolls&&(d.offsetLeft<d.parentNode.scrollLeft||d.offsetLeft+d.offsetWidth>d.parentNode.scrollLeft+d.parentNode.offsetWidth)){d.parentNode.scrollLeft=d.offsetLeft;var c=d.parentNode._scroll;if(c&&c[0]&&(c[0].style.left=c[0].parentNode.scrollLeft+"px",!_isIE||window.XMLHttpRequest)){c[1].style.right=c[1].parentNode.scrollLeft*-1+"px"}}},_setTabTop:function(h){if(!h){return !1}for(var g=this._rows.length-1,m=0;m<this._rows.length;m++){if(this._rows[m]==h.parentNode){var l=this._rows[m];m!=g&&(this._rows[m]=this._rows[g],this._rows[g]=l);var k=this._getCoverLine();l.appendChild(k);k.style[this._dx]="1px";var j=this._s._vMode?Math.max(this._tabZone.offsetHeight,l.scrollHeight):Math.max(this._tabZone.offsetWidth,l.scrollWidth);j>0&&(k.style[this._dx]=j+"px");h.style.zIndex=k._index++;break}}this._setRowSizes()},_getCoverLine:function(){if(!this._lineA){this._lineA=document.createElement("div"),this._lineA.className="dhx_tablist_line",this._lineA.style[this._py]=this._s.line_height-3-(this._s.skin_line_x?1:0)+"px",this._lineA.style[this._dx]="100%",this._lineA._index=1}this._lineA.style.zIndex=this._lineA._index++;return this._lineA},cells:function(e){if(!this._tabs[e]){return null}if(!this._content[e]){var d=document.createElement("DIV");d.style.cssText="width:100%;height:100%;visibility:hidden;overflow:hidden;position:absolute;top:0px; left:0px;";d.setAttribute("tab_id",e);d.skin=this.skin;this._conZone.appendChild(d);(new dhtmlXContainer(d)).setContent(d);this.skin=="dhx_web"&&d._setPadding&&d._setPadding(1,"dhxcont_tabbar_dhx_web");d._isTabbarCell=!0;this._content[e]=d;var f=this;d.show=function(){if(f._s.hide){this.style.display=""}this.style.visibility="";this.style.zIndex="1";this.autoSize();this._activate()};d.hide=function(){f._s.hide?(this.style.visibility="",this.style.display="none"):this.style.visibility="hidden";this.style.zIndex=-1;f._hrfmode=="iframe"&&this.attachURL("javascript:false")};d.autoSize=function(){if(f._awdj||f._ahdj){var g=this.vs?this.vs[this.av].dhxcont.mainCont[this.av]:this.mainCont;if(!g.offsetWidth){g.style.width=Math.max(0,f.entBox.offsetWidth-2)+"px"}if(f._ahdj){g.style.height="1px"}var c=this._getContentDim();if(f._awdj){f.entBox.style.width=c[0]+2+"px",g.style.width=c[0]+"px"}if(f._ahdj){f._tabAll.style.height=f.entBox.style.height=c[1]+f._rows.length*(f._s.line_height-2)+(f._s.expand?0:2)+2+"px",g.style.height=c[1]+"px"}f._setSizes();f._setTabTop(f._lastActive)}};d._activate=function(){this._delay&&this._attachContent.apply(this,this._delay);this.activate();if(f._hrfmode!="iframe"){this._delay=null}};d._doOnResize=function(){this.activate()};d.activate=function(){this.adjustContent(this.parentNode,0,0,!1,0);d.updateNestedObjects()};d._doOnAttachStatusBar=d.activate;d._doOnAttachMenu=d.activate;d._doOnAttachToolbar=d.activate;d._getContentDim=function(){var b=this.vs?this.vs[this.av].dhxcont.mainCont[this.av]:this.mainCont;return[b.scrollWidth,b.scrollHeight]};d._doOnFrameContentLoaded=function(){(f._awdj||f._ahdj)&&f.cells(e).autoSize();f.callEvent("onXLE",[]);f.callEvent("onTabContentLoaded",[this.getAttribute("tab_id")])};d._doOnBeforeAttachURL=function(){f.callEvent("onXLS",[])};d.adjustContent(d.parentNode,0,0,!1,0)}return this._content[e]},forceLoad:function(d,c){this.setContentHref(d,c||this._hrefs[d]);this.cells(d)._activate()},enableAutoSize:function(d,c){this._ahdj=convertStringToBoolean(c);this._awdj=convertStringToBoolean(d)},clearAll:function(){for(var d in this._tabs){this.removeTab(d,!1)}if(this._lineA){var c=this._getCoverLine();c.parentNode&&c.parentNode.removeChild(c)}},enableTabCloseButton:function(b){this._close=convertStringToBoolean(b)},preventIECashing:function(b){this.no_cashe=convertStringToBoolean(b);if(this.XMLLoader){this.XMLLoader.rSeed=this.no_cashe}},setTabActive:function(d,c){this._setTabActive(this._tabs[d],c===!1)},setTabInActive:function(){var b=this._lastActive;b&&(this._deactivateTab(),this._setTabTop(b),this._getCoverLine())},loadXMLString:function(d,c){this.XMLLoader=new dtmlXMLLoaderObject(this._parseXML,this,!0,this.no_cashe);this.XMLLoader.waitCall=c||0;this.XMLLoader.loadXMLString(d)},loadXML:function(d,c){this.callEvent("onXLS",[]);this.XMLLoader=new dtmlXMLLoaderObject(this._parseXML,this,!0,this.no_cashe);this.XMLLoader.waitCall=c||0;this.XMLLoader.loadXML(d)},_parseXML:function(N,L,K,J,I){N.clearAll();var H="";if(!I){I=N.XMLLoader}var F=I.getXMLTopNode("tabbar"),E=I.doXPath("//row",F),D=F.getAttribute("tabstyle");D&&N.setStyle(D);N._hrfmode=F.getAttribute("hrefmode")||N._hrfmode;N._a.margin=parseInt(F.getAttribute("margin")||N._a.margin,10);if(D=F.getAttribute("align")){N._s.align=D=="right"||D=="bottom"}N._a.offset=parseInt(F.getAttribute("offset")||N._a.offset,10);(D=F.getAttribute("skinColors"))&&N.setSkinColors(D.split(",")[0],D.split(",")[1]);for(var C=0;C<E.length;C++){for(var A=I.doXPath("./tab",E[C]),y=0;y<A.length;y++){var x=A[y].getAttribute("width"),w=N._getXMLContent(A[y]),v=A[y].getAttribute("id");N.addTab(v,w,x,"",C);A[y].getAttribute("selected")&&(H=v);if(N._hrfmode){N.setContentHref(v,A[y].getAttribute("href"))}else{for(var u=0;u<A[y].childNodes.length;u++){var s=A[y].childNodes[u];s.tagName=="content"&&(s.getAttribute("id")?N.setContent(v,s.getAttribute("id")):N.setContentHTML(v,N._getXMLContent(s)))}}}}H&&N.setTabActive(H);N.callEvent("onXLE",[])},adjustOuterSize:function(){this._setSizes()},_getXMLContent:function(f){for(var e="",h=0;h<f.childNodes.length;h++){var g=f.childNodes[h];e+=g.nodeValue===null?"":g.nodeValue}return e},enableContentZone:function(b){this._conZone.style.display=convertStringToBoolean(b)?"":"none";this._setSizes()},enableForceHiding:function(b){this._s.hide=convertStringToBoolean(b)},setSize:function(d,c){this.entBox.style.width=d+"px";this.entBox.style.height=c+"px";this._setSizes()},setSkinColors:function(g,f,k){if(g){this._a.data_color=g}if(f){this._a.tab_color=f}var j=document.createElement("style");j.setAttribute("type","text/css");j.setAttribute("media","screen");document.getElementsByTagName("head")[0].appendChild(j);var h=document.styleSheets[document.styleSheets.length-1];h.addRule?h.addRule("#"+this.entBox.id+" .dhx_tabcontent_zone > div","background-color: "+(k||g)+";",0):h.insertRule("#"+this.entBox.id+" .dhx_tabcontent_zone > div{ background-color: "+(k||g)+";}",0);this._conZone.style.backgroundColor=k||g},setCustomStyle:function(g,f,k,j){var h="";this._c[g]={color:";"+(f?"color:"+f+";":"")+(j||""),scolor:";"+(k?"color:"+k+";":"")+(j||"")};if(this._tabs[g]){this._tabs[g].childNodes[0].style.cssText=this._tabs[g]==this._lastActive?this._c[g].scolor:this._c[g].color}},setImagePath:function(b){this.imgUrl=b},getNext:function(e,d){var d=d||"nextSibling",f=e[d];f&&f.className.indexOf("dhx_tab_element")==-1&&(f=null);!f&&e.parentNode[d]&&(f=e.parentNode[d].childNodes[0]);return f||e},getAllTabs:function(){var d=[],c;for(c in this._tabs){d.push(c)}return d},goToNextTab:function(b){do{b=this.getNext(b||this._lastActive)}while(!this._setTabActive(b));return b},goToPrevTab:function(b){do{b=this.getNext(b||this._lastActive,"previousSibling")}while(!this._setTabActive(b));return b},disableTab:function(b){this._tabs[b]._disabled=!0;this._tabs[b].className+=" dhx_tab_element_disabled";this._tabs[b].style.color="silver"},enableTab:function(b){this._tabs[b]._disabled=!1;if(this._tabs[b].className){this._tabs[b].className=this._tabs[b].className.replace(/dhx_tab_element_disabled/g,"")}this._tabs[b].style.color=""},showTab:function(d){var c=this._tabs[d];c.style.display="";this._setTabSizes(c.parentNode)},hideTab:function(e,d){var f=this._tabs[e];f.style.display="none";f==this._lastActive&&d!==!1&&this.goToNextTab();this._setTabSizes(f.parentNode)},getActiveTab:function(){return !this._lastActive?null:this._lastActive.getAttribute("tab_id")},setLabel:function(f,e,h){var g=this.getActiveTab();this._tabs[f].firstChild.innerHTML=e;this.adjustTabSize(this._tabs[f],h);this._setTabSizes(this._tabs[f].parentNode);this._checkScroll()},getLabel:function(b){return this._tabs[b].firstChild.innerHTML},setOffset:function(b){this._a.offset=b*1},enableScroll:function(b){this._s.scrolls=convertStringToBoolean(b)},setMargin:function(b){this._a.margin=b*1},setAlign:function(b){this._s.align=b=="bottom"||b=="right"},tabWindow:function(e){var d=null;if(this._content[e]){var f=this.cells(e),d=(f.vs?f.vs[f.av]:this._content[e])._frame.contentWindow}return d},setContentHTML:function(d,c){this.cells(d).attachHTMLString(c)},setContent:function(d,c){this.cells(d).attachObject(c);this.cells(d).activate()},setHrefMode:function(b){this._hrfmode=b},setContentHref:function(f,e){this._hrefs[f]=e;switch(this._hrfmode){case"iframes":this.cells(f).attachURL(e);break;case"iframe":case"iframes-on-demand":this.cells(f)._delay=["url",e,!1];break;case"ajax":var h=this.cells(f),g=this;h._delay=["urlajax",e,!0];if(!h.attachHTMLStringA){h.attachHTMLStringA=h.attachHTMLString,h.attachHTMLString=function(d,c){c&&(d=g._getXMLContent(c.doXPath("//content")[0]));return this.attachHTMLStringA(d)}}break;case"ajax-html":this.cells(f)._delay=["urlajax",e,!0]}this._tabs[f]==this._lastActive&&this.cells(f).show(!0)},normalize:function(A,y){function x(d,c){w[c]._size+=m!=Infinity?m-n:0;d.adjustTabSize(w[c],w[c]._size)}for(var A=A||this._tabZone.offsetWidth,w=[],v=0;v<this._rows.length;v++){for(var u=0;u<this._rows[v].tabCount;u++){w.push(this._rows[v].removeChild(this._rows[v].childNodes[0]))}}this._tabZone.innerHTML="";this._rows=[];var s=this._lastActive;this._lastActive=null;this._createRow();for(var o=0,n=this._a.offset,m=Infinity,l=null,u=0;u<w.length;u++){n+w[u]._size+this._a.margin<A?(this._rows[o].appendChild(w[u]),this._rows[o].tabCount++,n+=w[u]._size+this._a.margin):(y&&n<m&&x(this,u-1),this._createRow(),u--,o++,m=n,n=this._a.offset)}y&&n<m&&m!=Infinity&&x(this,u-1);for(v=0;v<this._rows.length;v++){this._setTabSizes(this._rows[v])}this._setSizes();(this._lastActive=s)&&this._setTabTop(this._lastActive)},showInnerScroll:function(){for(var e in this._tabs){var d=dhtmlx.$customScroll;if(this.cells(e).vs){var f=this.cells(e).av;d?dhtmlx.CustomScroll.enable(this.cells(e).vs[f].dhxcont.mainCont[f]):this.cells(e).vs[f].dhxcont.mainCont[f].style.overflow="auto"}else{d?dhtmlx.CustomScroll.enable(this.cells(e).dhxcont.mainCont):this.cells(e).dhxcont.mainCont.style.overflow="auto"}}},getNumberOfTabs:function(){for(var d=0,c=0;c<this._rows.length;c++){d+=this._rows[c].tabCount}return d},destructor:function(){}};if(!window.dhtmlXContainer){window.dhtmlXContainer=function(a){var b=this;this.obj=a;this.dhxcont=null;this.setContent=function(a){this.dhxcont=a;this.dhxcont.innerHTML="<div id='dhxMainCont' class='dhxcont_main_content'></div><div id='dhxContBlocker' class='dhxcont_content_blocker' style='display: none;'></div>";this.dhxcont.mainCont=this.dhxcont.childNodes[0];this.obj.dhxcont=this.dhxcont};this.obj._genStr=function(a){for(var b="",e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",f=0;f<a;f++){b+=e.charAt(Math.round(Math.random()*e.length))}return b};this.obj.setMinContentSize=function(a,b){this._minDataSizeW=a;this._minDataSizeH=b};this.obj.moveContentTo=function(a){a.updateNestedObjects()};this.obj.adjustContent=function(a,b,e,f,g){this.dhxcont.style.top=b+"px";this.dhxcont.style.left="0px";if(f!=!0){this.dhxcont.style.width=a.clientWidth+"px"}var h=a.clientHeight-b;h<0&&(h=0);this.dhxcont.style.height=h+(e!=null?e:0)+"px";if(f!=!0&&this.dhxcont.offsetWidth>a.clientWidth){this.dhxcont.style.width=Math.max(0,a.clientWidth*2-this.dhxcont.offsetWidth)+"px"}if(this.dhxcont.offsetHeight>a.clientHeight-b){h=(a.clientHeight-b)*2-this.dhxcont.offsetHeight,h<0&&(h=0),this.dhxcont.style.height=h+"px"}if(g&&!isNaN(g)){this.dhxcont.style.height=parseInt(this.dhxcont.style.height)-g+"px"}if(this._minDataSizeH!=null&&parseInt(this.dhxcont.style.height)<this._minDataSizeH){this.dhxcont.style.height=this._minDataSizeH+"px"}if(this._minDataSizeW!=null&&parseInt(this.dhxcont.style.width)<this._minDataSizeW){this.dhxcont.style.width=this._minDataSizeW+"px"}if(f!=!0){this.dhxcont.mainCont.style.width=this.dhxcont.clientWidth+"px"}var i=this.menu!=null?!this.menuHidden?this.menuHeight:0:0,j=this.toolbar!=null?!this.toolbarHidden?this.toolbarHeight:0:0,k=this.sb!=null?!this.sbHidden?this.sbHeight:0:0;this.dhxcont.mainCont.style.height=this.dhxcont.clientHeight-i-j-k+"px"};this.obj.updateNestedObjects=function(){};this.obj.attachObject=function(a,b){typeof a=="string"&&(a=document.getElementById(a));if(b){a.style.visibility="hidden";a.style.display="";var e=a.offsetWidth,f=a.offsetHeight}this._attachContent("obj",a);if(b&&this._isWindow){a.style.visibility="",this._adjustToContent(e,f)}};this.obj.appendObject=function(a){typeof a=="string"&&(a=document.getElementById(a));this._attachContent("obj",a,!0)};this.obj.attachHTMLString=function(a){this._attachContent("str",a);for(var b=a.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],e=0;e<b.length;e++){var f=b[e].replace(/<([\/]{0,1})script[^>]*>/g,"");if(window.execScript){var g=b[e].match(/<script[^>]*src\s*=\s*("|')([^"']+)("|')/);if(g){f=dhtmlxAjax.getSync(g[2]).xmlDoc.responseText}f&&window.execScript(f)}else{window.eval(f)}}};this.obj.attachURL=function(a,b){this._attachContent(b==!0?"urlajax":"url",a,!1)};this.obj._attachContent=function(a,d,e){if(e!==!0){for(;b.dhxcont.mainCont.childNodes.length>0;){b.dhxcont.mainCont.removeChild(b.dhxcont.mainCont.childNodes[0])}}if(a=="url"){var f=document.createElement("IFRAME");f.frameBorder=0;f.border=0;f.style.width="100%";f.style.height="100%";b.dhxcont.mainCont.appendChild(f);f.src=d;this._frame=f;this._doOnFrameContentLoaded&&this._doOnFrameContentLoaded(!0)}else{if(a=="urlajax"){var g=this,h=function(){g.attachHTMLString(this.xmlDoc.responseText,this);g._doOnFrameContentLoaded&&g._doOnFrameContentLoaded(!1);this.destructor()},i=new dtmlXMLLoaderObject(h,window);i.loadXML(d);g._doOnBeforeAttachURL&&g._doOnBeforeAttachURL(!1)}else{if(a=="obj"){b.dhxcont._frame=null,b.dhxcont.mainCont.appendChild(d),b.dhxcont.mainCont.style.overflow=e===!0?"auto":"hidden",d.style.display=""}else{if(a=="str"){b.dhxcont._frame=null,b.dhxcont.mainCont.innerHTML=d}}}}};this.obj._dhxContDestruct=function(){}}}(function(){dhtmlx.extend_api("dhtmlXTabBar",{_init:function(b){return[b.parent,b.mode,b.height]},tabs:"tabs",skin:"setSkin",offset:"setOffset",margin:"setMargin",image_path:"setImagePath",href_mode:"setHrefMode",align:"setAlign",xml:"loadXML",close_button:"enableTabCloseButton",scroll:"enableScroll",forced:"enableForceHiding",content_zone:"enableContentZone",size_by_content:"enableAutoSize",auto_size:"enableAutoReSize"},{tabs:function(e){for(var d=0;d<e.length;d++){var f=e[d];this.addTab(f.id,f.label,f.width,f.index,f.row);f.active&&this.setTabActive(f.id)}}})})();function dhx_init_tabbars(){for(var a=document.getElementsByTagName("div"),b=0;b<a.length;b++){if(a[b].className.indexOf("dhtmlxTabBar")!=-1){var c=a[b],d=c.id;c.className="";for(var e=[],f=0;f<c.childNodes.length;f++){c.childNodes[f].tagName&&c.childNodes[f].tagName!="!"&&(e[e.length]=c.childNodes[f])}var g=new dhtmlXTabBar(d,c.getAttribute("mode")||"top",c.getAttribute("tabheight")||20);window[d]=g;(h=c.getAttribute("onbeforeinit"))&&eval(h);c.getAttribute("enableForceHiding")&&g.enableForceHiding(!0);g.setImagePath(c.getAttribute("imgpath"));var h=c.getAttribute("margin");if(h!=null){g._margin=h}if(h=c.getAttribute("align")){g._align=h}(h=c.getAttribute("hrefmode"))&&g.setHrefMode(h);h=c.getAttribute("offset");if(h!=null){g._offset=h}h=c.getAttribute("tabstyle");h!=null&&g.setStyle(h);var h=c.getAttribute("select"),i=c.getAttribute("skinColors");i&&g.setSkinColors(i.split(",")[0],i.split(",")[1]);for(f=0;f<e.length;f++){var j=e[f];j.parentNode.removeChild(j);g.addTab(j.id,j.getAttribute("name"),j.getAttribute("width"),null,j.getAttribute("row"));var k=j.getAttribute("href");k?g.setContentHref(j.id,k):g.setContent(j.id,j);if(!g._dspN&&j.style.display=="none"){j.style.display=""}}e.length&&g.setTabActive(h||e[0].id);(h=c.getAttribute("oninit"))&&eval(h)}}}dhtmlxEvent(window,"load",dhx_init_tabbars);function dhtmlXToolbarObject(e,d){var f=this;for(this.cont=typeof e!="object"?document.getElementById(e):e;this.cont.childNodes.length>0;){this.cont.removeChild(this.cont.childNodes[0])}this.cont.dir="ltr";this.cont.innerHTML+="<div class='dhxtoolbar_hdrline_ll'></div><div class='dhxtoolbar_hdrline_rr'></div><div class='dhxtoolbar_hdrline_l'></div><div class='dhxtoolbar_hdrline_r'></div>";this.base=document.createElement("DIV");this.base.className="float_left";this.cont.appendChild(this.base);this.align="left";this.setAlign=function(b){this.align=b=="right"?"right":"left";this.base.className=b=="right"?"float_right":"float_left";if(this._spacer){this._spacer.className="dhxtoolbar_spacer "+(b=="right"?" float_left":" float_right")}};this._isIE6=!1;if(_isIE){this._isIE6=window.XMLHttpRequest==null?!0:!1}if(this._isIPad=navigator.userAgent.search(/iPad/gi)>=0){this.cont.ontouchstart=function(b){b=b||event;if(String(b.target.tagName||"").toLowerCase()=="input"){return !0}b.returnValue=!1;b.cancelBubble=!0;return !1}}this.iconSize=18;this.setIconSize=function(b){this.iconSize={18:!0,24:!0,32:!0,48:!0}[b]?b:18;this.setSkin(this.skin,!0);this.callEvent("_onIconSizeChange",[this.iconSize])};this.selectPolygonOffsetLeft=this.selectPolygonOffsetTop=0;this._improveTerraceSkin=function(){var y=[],x={buttonInput:!0,separator:!0,text:!0},w=[this.base];this._spacer!=null&&w.push(this._spacer);for(var v=0;v<w.length;v++){y[v]=[];for(var u=0;u<w[v].childNodes.length;u++){if(w[v].childNodes[u].idd!=null&&w[v].childNodes[u].style.display!="none"){var s=this.idPrefix+w[v].childNodes[u].idd;this.objPull[s]!=null&&this.objPull[s].obj==w[v].childNodes[u]&&y[v].push({a:s,type:this.objPull[s].type,node:this.objPull[s][this.objPull[s].type=="buttonSelect"?"arw":"obj"]})}}w[v]=null}for(v=0;v<y.length;v++){for(u=0;u<y[v].length;u++){var o=y[v][u];if(o.type=="buttonInput"){o.node.className=o.node.className.replace(/dhx_toolbar_btn/,"dhx_toolbar_inp")}var n=!1,m=!1;if(!x[o.type]){if(u==y[v].length-1||y[v][u+1]!=null&&x[y[v][u+1].type]){n=!0}if(u==0||u-1>=0&&y[v][u-1]!=null&&x[y[v][u-1].type]){m=!0}}o.node.style.borderRight=n?"1px solid #cecece":"0px solid white";o.node.style.borderTopRightRadius=o.node.style.borderBottomRightRadius=n?"5px":"0px";o.type=="buttonSelect"?(o.node.previousSibling.style.borderTopLeftRadius=o.node.previousSibling.style.borderBottomLeftRadius=m?"5px":"0px",o.node.previousSibling._br=n,o.node.previousSibling._bl=m):o.node.style.borderTopLeftRadius=o.node.style.borderBottomLeftRadius=m?"5px":"0px";o.node._br=n;o.node._bl=m}}for(v=0;v<y.length;v++){for(u=0;u<y[v].length;u++){for(s in y[v][u]){y[v][u][s]=null}y[v][u]=null}y[v]=null}y=w=null};this._improveTerraceButtonSelect=function(h,g){var j=this.objPull[h];g==!0?(j.obj.style.borderBottomLeftRadius=j.obj._bl?"5px":"0px",j.arw.style.borderBottomRightRadius=j.obj._br?"5px":"0px"):(j.obj.style.borderBottomLeftRadius="0px",j.arw.style.borderBottomRightRadius="0px");j=null};this.setSkin=function(j,h){if(h===!0){this.cont.className=this.cont.className.replace(/dhx_toolbar_base_\d{1,}_/,"dhx_toolbar_base_"+this.iconSize+"_")}else{this.skin=j;if(this.skin=="dhx_skyblue"){this.selectPolygonOffsetTop=1}if(this.skin=="dhx_web"){this.selectPolygonOffsetLeft=this.selectPolygonOffsetTop=1}if(this.skin=="dhx_terrace"){this.selectPolygonOffsetTop=-1,this.selectPolygonOffsetLeft=0}this.cont.className="dhx_toolbar_base_"+this.iconSize+"_"+this.skin+(this.rtl?" rtl":"")}for(var l in this.objPull){var k=this.objPull[l];if(k.type=="slider"){k.pen._detectLimits(),k.pen._definePos(),k.label.className="dhx_toolbar_slider_label_"+this.skin+(this.rtl?" rtl":"")}if(k.type=="buttonSelect"){k.polygon.className="dhx_toolbar_poly_"+this.iconSize+"_"+this.skin+(this.rtl?" rtl":"")}}j=="dhx_terrace"&&this._improveTerraceSkin()};this.setSkin(d!=null?d:typeof dhtmlx!="undefined"&&typeof dhtmlx.skin=="string"?dhtmlx.skin:"dhx_skyblue");this.objPull={};this.anyUsed="none";this.imagePath="";this.setIconPath=this.setIconsPath=function(b){this.imagePath=b};this._doOnLoad=function(){};this.loadXML=function(g,c){if(c!=null){this._doOnLoad=function(){c()}}this.callEvent("onXLS",[]);this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._xmlLoader.loadXML(g)};this.loadXMLString=function(g,c){if(c!=null){this._doOnLoad=function(){c()}}this._xmlLoader=new dtmlXMLLoaderObject(this._xmlParser,window);this._xmlLoader.loadXMLString(g)};this._xmlParser=function(){for(var J=this.getXMLTopNode("toolbar"),I="id,type,hidden,title,text,enabled,img,imgdis,action,openAll,renderSelect,mode,maxOpen,width,value,selected,length,textMin,textMax,toolTip,valueMin,valueMax,valueNow".split(","),H="id,type,enabled,disabled,action,selected,img,text".split(","),F=0;F<J.childNodes.length;F++){if(J.childNodes[F].tagName=="item"){for(var E={},D=0;D<I.length;D++){E[I[D]]=J.childNodes[F].getAttribute(I[D])}E.items=[];E.userdata=[];for(var C=0;C<J.childNodes[F].childNodes.length;C++){if(J.childNodes[F].childNodes[C].tagName=="item"&&E.type=="buttonSelect"){for(var A={},D=0;D<H.length;D++){A[H[D]]=J.childNodes[F].childNodes[C].getAttribute(H[D])}var y=J.childNodes[F].childNodes[C].getElementsByTagName("itemText");if(y!=null&&y[0]!=null){A.itemText=y[0].firstChild.nodeValue}for(var x=J.childNodes[F].childNodes[C].getElementsByTagName("userdata"),D=0;D<x.length;D++){if(!A.userdata){A.userdata={}}var w={};try{w.name=x[D].getAttribute("name")}catch(v){w.name=""}try{w.value=x[D].firstChild.nodeValue}catch(u){w.value=""}if(w.name!=""){A.userdata[w.name]=w.value}}E.items[E.items.length]=A}if(J.childNodes[F].childNodes[C].tagName=="userdata"){A={};try{A.name=J.childNodes[F].childNodes[C].getAttribute("name")}catch(s){A.name=""}try{A.value=J.childNodes[F].childNodes[C].firstChild.nodeValue}catch(c){A.value=""}E.userdata[E.userdata.length]=A}}f._addItemToStorage(E)}}f.skin=="dhx_terrace"&&f._improveTerraceSkin();f.callEvent("onXLE",[]);f._doOnLoad();this.destructor()};this._addItemToStorage=function(k,j){var n=k.id||this._genStr(24),m=k.type||"";if(m!=""&&this["_"+m+"Object"]!=null){if((typeof k.openAll=="undefined"||k.openAll==null)&&this.skin=="dhx_terrace"){k.openAll=!0}this.objPull[this.idPrefix+n]=new this["_"+m+"Object"](this,n,k);this.objPull[this.idPrefix+n].type=m;this.setPosition(n,j)}if(k.userdata){for(var l=0;l<k.userdata.length;l++){this.setUserData(n,k.userdata[l].name,k.userdata[l].value)}}};this._genStr=function(j){for(var h="",l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",k=0;k<j;k++){h+=l.charAt(Math.round(Math.random()*(l.length-1)))}return h};this.rootTypes="button,buttonSelect,buttonTwoState,separator,label,slider,text,buttonInput".split(",");this.idPrefix=this._genStr(12);dhtmlxEventable(this);this._getObj=function(j,h){for(var l=null,k=0;k<j.childNodes.length;k++){j.childNodes[k].tagName!=null&&String(j.childNodes[k].tagName).toLowerCase()==String(h).toLowerCase()&&(l=j.childNodes[k])}return l};this._addImgObj=function(g){var c=document.createElement("IMG");g.childNodes.length>0?g.insertBefore(c,g.childNodes[0]):g.appendChild(c);return c};this._setItemImage=function(j,h,l){l==!0?j.imgEn=h:j.imgDis=h;if(!(!j.state&&l==!0||j.state&&l==!1)){var k=this._getObj(j.obj,"img");k==null&&(k=this._addImgObj(j.obj));k.src=this.imagePath+h}};this._clearItemImage=function(h,g){g==!0?h.imgEn="":h.imgDis="";if(!(!h.state&&g==!0||h.state&&g==!1)){var j=this._getObj(h.obj,"img");j!=null&&j.parentNode.removeChild(j)}};this._setItemText=function(h,g){var j=this._getObj(h.obj,"div");g==null||g.length==0?j!=null&&j.parentNode.removeChild(j):(j==null&&(j=document.createElement("DIV"),h.obj.appendChild(j)),j.innerHTML=g)};this._getItemText=function(g){var c=this._getObj(g.obj,"div");return c!=null?c.innerHTML:""};this._enableItem=function(g){if(!g.state){g.state=!0;this.objPull[g.id].type=="buttonTwoState"&&this.objPull[g.id].obj.pressed==!0?(g.obj.className="dhx_toolbar_btn pres",g.obj.renderAs="dhx_toolbar_btn over"):(g.obj.className="dhx_toolbar_btn def",g.obj.renderAs=g.obj.className);if(g.arw){g.arw.className=String(g.obj.className).replace("btn","arw")}var c=this._getObj(g.obj,"img");g.imgEn!=""?(c==null&&(c=this._addImgObj(g.obj)),c.src=this.imagePath+g.imgEn):c!=null&&c.parentNode.removeChild(c)}};this._disableItem=function(g){if(g.state){g.state=!1;g.obj.className="dhx_toolbar_btn "+(this.objPull[g.id].type=="buttonTwoState"&&g.obj.pressed?"pres_":"")+"dis";g.obj.renderAs="dhx_toolbar_btn def";if(g.arw){g.arw.className=String(g.obj.className).replace("btn","arw")}var c=this._getObj(g.obj,"img");g.imgDis!=""?(c==null&&(c=this._addImgObj(g.obj)),c.src=this.imagePath+g.imgDis):c!=null&&c.parentNode.removeChild(c);if(g.polygon!=null&&g.polygon.style.display!="none"){g.polygon.style.display="none";if(g.polygon._ie6cover){g.polygon._ie6cover.style.display="none"}this.skin=="dhx_terrace"&&this._improveTerraceButtonSelect(g.id,!0)}this.anyUsed="none"}};this.clearAll=function(){for(var b in this.objPull){this._removeItem(String(b).replace(this.idPrefix,""))}};this._isWebToolbar=!0;this._doOnClick=function(){f&&f.forEachItem&&f.forEachItem(function(g){if(f.objPull[f.idPrefix+g].type=="buttonSelect"){var c=f.objPull[f.idPrefix+g];if(c.arw._skip===!0){c.arw._skip=!1}else{if(c.polygon.style.display!="none"){c.obj.renderAs="dhx_toolbar_btn def";c.obj.className=c.obj.renderAs;c.arw.className=String(c.obj.renderAs).replace("btn","arw");f.anyUsed="none";c.polygon.style.display="none";if(c.polygon._ie6cover){c.polygon._ie6cover.style.display="none"}f.skin=="dhx_terrace"&&f._improveTerraceButtonSelect(c.id,!0)}}}})};this._isIPad?document.addEventListener("touchstart",this._doOnClick,!1):_isIE?document.body.attachEvent("onmousedown",this._doOnClick):window.addEventListener("mousedown",this._doOnClick,!1);return this}dhtmlXToolbarObject.prototype.addSpacer=function(j){var h=this.idPrefix+j;if(this._spacer!=null){if(this._spacer.idd==j){return}if(this._spacer==this.objPull[h].obj.parentNode){for(var o=!0;o;){var n=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]);if(n==j||this._spacer.childNodes.length==0){this.objPull[h].arw!=null&&this.base.appendChild(this.objPull[h].arw),o=!1}}this._spacer.idd=j;this._fixSpacer();return}if(this.base==this.objPull[h].obj.parentNode){for(var o=!0,m=this.objPull[h].arw!=null;o;){var l=this.base.childNodes.length-1;m==!0&&this.base.childNodes[l]==this.objPull[h].arw&&(o=!1);this.base.childNodes[l].idd==j&&(o=!1);o&&(this._spacer.childNodes.length>0?this._spacer.insertBefore(this.base.childNodes[l],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[l]))}this._spacer.idd=j;this._fixSpacer();return}}else{for(var k=null,l=0;l<this.base.childNodes.length;l++){this.base.childNodes[l]==this.objPull[this.idPrefix+j].obj&&(k=l,this.objPull[this.idPrefix+j].arw!=null&&(k=l+1))}if(k!=null){this._spacer=document.createElement("DIV");this._spacer.className="dhxtoolbar_spacer "+(this.align=="right"?" float_left":" float_right");this._spacer.dir="ltr";for(this._spacer.idd=j;this.base.childNodes.length>k+1;){this._spacer.appendChild(this.base.childNodes[k+1])}this.cont.appendChild(this._spacer);this._fixSpacer()}}this.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;this._spacer.childNodes.length>0;){this.base.appendChild(this._spacer.childNodes[0])}this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;this.skin=="dhx_terrace"&&this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(_isIE&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var b=this._spacer;window.setTimeout(function(){b.style.borderLeft="0px solid #a4bed4";b=null},1)}};dhtmlXToolbarObject.prototype.getType=function(f){var e=this.getParentId(f);if(e!=null){var h=null,g=this.objPull[this.idPrefix+e]._listOptions[f];g!=null&&(h=g.sep!=null?"buttonSelectSeparator":"buttonSelectButton");return h}else{return this.objPull[this.idPrefix+f]==null?null:this.objPull[this.idPrefix+f].type}};dhtmlXToolbarObject.prototype.getTypeExt=function(d){var c=this.getType(d);return c=="buttonSelectButton"||c=="buttonSelectSeparator"?c=c=="buttonSelectButton"?"button":"separator":null};dhtmlXToolbarObject.prototype.inArray=function(e,d){for(var f=0;f<e.length;f++){if(e[f]==d){return !0}}return !1};dhtmlXToolbarObject.prototype.getParentId=function(f){var e=null,h;for(h in this.objPull){if(this.objPull[h]._listOptions){for(var g in this.objPull[h]._listOptions){g==f&&(e=String(h).replace(this.idPrefix,""))}}}return e};dhtmlXToolbarObject.prototype._addItem=function(d,c){this._addItemToStorage(d,c);this.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.addButton=function(g,f,k,j,h){this._addItem({id:g,type:"button",text:k,img:j,imgdis:h},f)};dhtmlXToolbarObject.prototype.addText=function(e,d,f){this._addItem({id:e,type:"text",text:f},d)};dhtmlXToolbarObject.prototype.addButtonSelect=function(F,E,D,C,A,y,x,w,v,u){for(var s=[],o=0;o<C.length;o++){var n={};if(C[o] instanceof Array){n.id=C[o][0],n.type=C[o][1]=="obj"?"button":"separator",n.text=C[o][2]||null,n.img=C[o][3]||null}else{if(C[o] instanceof Object&&C[o]!=null&&typeof C[o].id!="undefined"&&typeof C[o].type!="undefined"){n.id=C[o].id,n.type=C[o].type=="obj"?"button":"separator",n.text=C[o].text,n.img=C[o].img}}s[s.length]=n}this._addItem({id:F,type:"buttonSelect",text:D,img:A,imgdis:y,renderSelect:x,openAll:w,items:s,maxOpen:v,mode:u},E)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(g,f,k,j,h){this._addItem({id:g,type:"buttonTwoState",img:j,imgdis:h,text:k},f)};dhtmlXToolbarObject.prototype.addSeparator=function(d,c){this._addItem({id:d,type:"separator"},c)};dhtmlXToolbarObject.prototype.addSlider=function(v,u,s,o,n,m,l,k,j){this._addItem({id:v,type:"slider",length:s,valueMin:o,valueMax:n,valueNow:m,textMin:l,textMax:k,toolTip:j},u)};dhtmlXToolbarObject.prototype.addInput=function(f,e,h,g){this._addItem({id:f,type:"buttonInput",value:h,width:g},e)};dhtmlXToolbarObject.prototype.forEachItem=function(d){for(var c in this.objPull){this.inArray(this.rootTypes,this.objPull[c].type)&&d(this.objPull[c].id.replace(this.idPrefix,""))}};(function(){for(var h="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","),g=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],m=function(d,c){return function(f,b,a){f=this.idPrefix+f;return this.objPull[f][d]!=null?this.objPull[f][d].call(this.objPull[f],b,a):c}},l=0;l<h.length;l++){var k=h[l],j=g[l];dhtmlXToolbarObject.prototype[k]=m(k,j)}})();dhtmlXToolbarObject.prototype.showItem=function(b){b=this.idPrefix+b;this.objPull[b]!=null&&this.objPull[b].showItem!=null&&(this.objPull[b].showItem(),this.skin=="dhx_terrace"&&this._improveTerraceSkin())};dhtmlXToolbarObject.prototype.hideItem=function(b){b=this.idPrefix+b;this.objPull[b]!=null&&this.objPull[b].hideItem!=null&&(this.objPull[b].hideItem(),this.skin=="dhx_terrace"&&this._improveTerraceSkin())};dhtmlXToolbarObject.prototype.getPosition=function(b){return this._getPosition(b)};dhtmlXToolbarObject.prototype._getPosition=function(f){if(this.objPull[this.idPrefix+f]==null){return null}for(var e=null,h=0,g=0;g<this.base.childNodes.length;g++){this.base.childNodes[g].idd!=null&&(this.base.childNodes[g].idd==f&&(e=h),h++)}if(!e&&this._spacer!=null){for(g=0;g<this._spacer.childNodes.length;g++){this._spacer.childNodes[g].idd!=null&&(this._spacer.childNodes[g].idd==f&&(e=h),h++)}}return e};dhtmlXToolbarObject.prototype.setPosition=function(d,c){this._setPosition(d,c)};dhtmlXToolbarObject.prototype._setPosition=function(g,f){if(this.objPull[this.idPrefix+g]!=null){if(isNaN(f)){f=this.base.childNodes.length}f<0&&(f=0);var k=null;if(this._spacer){k=this._spacer.idd,this.removeSpacer()}var j=this.objPull[this.idPrefix+g];this.base.removeChild(j.obj);j.arw&&this.base.removeChild(j.arw);var h=this._getIdByPosition(f,!0);h[0]==null?(this.base.appendChild(j.obj),j.arw&&this.base.appendChild(j.arw)):(this.base.insertBefore(j.obj,this.base.childNodes[h[1]]),j.arw&&this.base.insertBefore(j.arw,this.base.childNodes[h[1]+1]));k!=null&&this.addSpacer(k)}};dhtmlXToolbarObject.prototype._getIdByPosition=function(h,g){for(var m=null,l=0,k=0,j=0;j<this.base.childNodes.length;j++){this.base.childNodes[j].idd!=null&&m==null&&l++==h&&(m=this.base.childNodes[j].idd),m==null&&k++}k=m==null?null:k;return g==!0?[m,k]:m};dhtmlXToolbarObject.prototype.removeItem=function(b){this._removeItem(b);this.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype._removeItem=function(f){var e=this.getType(f),f=this.idPrefix+f,h=this.objPull[f];if(e=="button"){h.obj._doOnMouseOver=null,h.obj._doOnMouseOut=null,h.obj._doOnMouseUp=null,h.obj._doOnMouseUpOnceAnywhere=null,h.obj.onclick=null,h.obj.onmouseover=null,h.obj.onmouseout=null,h.obj.onmouseup=null,h.obj.onmousedown=null,h.obj.onselectstart=null,h.obj.renderAs=null,h.obj.idd=null,h.obj.parentNode.removeChild(h.obj),h.obj=null,h.id=null,h.state=null,h.img=null,h.imgEn=null,h.imgDis=null,h.type=null,h.enableItem=null,h.disableItem=null,h.isEnabled=null,h.showItem=null,h.hideItem=null,h.isVisible=null,h.setItemText=null,h.getItemText=null,h.setItemImage=null,h.clearItemImage=null,h.setItemImageDis=null,h.clearItemImageDis=null,h.setItemToolTip=null,h.getItemToolTip=null}if(e=="buttonTwoState"){h.obj._doOnMouseOver=null,h.obj._doOnMouseOut=null,h.obj.onmouseover=null,h.obj.onmouseout=null,h.obj.onmousedown=null,h.obj.onselectstart=null,h.obj.renderAs=null,h.obj.idd=null,h.obj.parentNode.removeChild(h.obj),h.obj=null,h.id=null,h.state=null,h.img=null,h.imgEn=null,h.imgDis=null,h.type=null,h.enableItem=null,h.disableItem=null,h.isEnabled=null,h.showItem=null,h.hideItem=null,h.isVisible=null,h.setItemText=null,h.getItemText=null,h.setItemImage=null,h.clearItemImage=null,h.setItemImageDis=null,h.clearItemImageDis=null,h.setItemToolTip=null,h.getItemToolTip=null,h.setItemState=null,h.getItemState=null}if(e=="buttonSelect"){for(var g in h._listOptions){this.removeListOption(f,g)}h._listOptions=null;if(h.polygon._ie6cover){document.body.removeChild(h.polygon._ie6cover),h.polygon._ie6cover=null}h.p_tbl.removeChild(h.p_tbody);h.polygon.removeChild(h.p_tbl);h.polygon.onselectstart=null;document.body.removeChild(h.polygon);h.p_tbody=null;h.p_tbl=null;h.polygon=null;h.obj.onclick=null;h.obj.onmouseover=null;h.obj.onmouseout=null;h.obj.onmouseup=null;h.obj.onmousedown=null;h.obj.onselectstart=null;h.obj.idd=null;h.obj.iddPrefix=null;h.obj.parentNode.removeChild(h.obj);h.obj=null;h.arw.onclick=null;h.arw.onmouseover=null;h.arw.onmouseout=null;h.arw.onmouseup=null;h.arw.onmousedown=null;h.arw.onselectstart=null;h.arw.parentNode.removeChild(h.arw);h.arw=null;h.renderSelect=null;h.state=null;h.type=null;h.id=null;h.img=null;h.imgEn=null;h.imgDis=null;h.openAll=null;h._isListButton=null;h._separatorButtonSelectObject=null;h._buttonButtonSelectObject=null;h.setWidth=null;h.enableItem=null;h.disableItem=null;h.isEnabled=null;h.showItem=null;h.hideItem=null;h.isVisible=null;h.setItemText=null;h.getItemText=null;h.setItemImage=null;h.clearItemImage=null;h.setItemImageDis=null;h.clearItemImageDis=null;h.setItemToolTip=null;h.getItemToolTip=null;h.addListOption=null;h.removeListOption=null;h.showListOption=null;h.hideListOption=null;h.isListOptionVisible=null;h.enableListOption=null;h.disableListOption=null;h.isListOptionEnabled=null;h.setListOptionPosition=null;h.getListOptionPosition=null;h.setListOptionImage=null;h.getListOptionImage=null;h.clearListOptionImage=null;h.setListOptionText=null;h.getListOptionText=null;h.setListOptionToolTip=null;h.getListOptionToolTip=null;h.forEachListOption=null;h.getAllListOptions=null;h.setListOptionSelected=null;h.getListOptionSelected=null}if(e=="buttonInput"){h.obj.childNodes[0].onkeydown=null,h.obj.removeChild(h.obj.childNodes[0]),h.obj.w=null,h.obj.idd=null,h.obj.parentNode.removeChild(h.obj),h.obj=null,h.id=null,h.type=null,h.enableItem=null,h.disableItem=null,h.isEnabled=null,h.showItem=null,h.hideItem=null,h.isVisible=null,h.setItemToolTip=null,h.getItemToolTip=null,h.setWidth=null,h.getWidth=null,h.setValue=null,h.getValue=null,h.setItemText=null,h.getItemText=null}if(e=="slider"){this._isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):_isIE?(document.body.detachEvent("onmousemove",h.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",h.pen._doOnMouseMoveEnd)):(window.removeEventListener("mousemove",h.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",h.pen._doOnMouseMoveEnd,!1));h.pen.allowMove=null;h.pen.initXY=null;h.pen.maxX=null;h.pen.minX=null;h.pen.nowX=null;h.pen.newNowX=null;h.pen.valueMax=null;h.pen.valueMin=null;h.pen.valueNow=null;h.pen._definePos=null;h.pen._detectLimits=null;h.pen._doOnMouseMoveStart=null;h.pen._doOnMouseMoveEnd=null;h.pen.onmousedown=null;h.obj.removeChild(h.pen);h.pen=null;h.label.tip=null;document.body.removeChild(h.label);h.label=null;h.obj.onselectstart=null;for(h.obj.idd=null;h.obj.childNodes.length>0;){h.obj.removeChild(h.obj.childNodes[0])}h.obj.parentNode.removeChild(h.obj);h.obj=null;h.id=null;h.type=null;h.state=null;h.enableItem=null;h.disableItem=null;h.isEnabled=null;h.setItemToolTipTemplate=null;h.getItemToolTipTemplate=null;h.setMaxValue=null;h.setMinValue=null;h.getMaxValue=null;h.getMinValue=null;h.setValue=null;h.getValue=null;h.showItem=null;h.hideItem=null;h.isVisible=null}if(e=="separator"){h.obj.onselectstart=null,h.obj.idd=null,h.obj.parentNode.removeChild(h.obj),h.obj=null,h.id=null,h.type=null,h.showItem=null,h.hideItem=null,h.isVisible=null}if(e=="text"){h.obj.onselectstart=null,h.obj.idd=null,h.obj.parentNode.removeChild(h.obj),h.obj=null,h.id=null,h.type=null,h.showItem=null,h.hideItem=null,h.isVisible=null,h.setWidth=null,h.setItemText=null,h.getItemText=null}h=e=null;this.objPull[this.idPrefix+f]=null;delete this.objPull[this.idPrefix+f]};(function(){for(var f="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","),e=function(b){return function(a,s,o,n,m,l){a=this.idPrefix+a;if(this.objPull[a]!=null){return this.objPull[a].type!="buttonSelect"?void 0:this.objPull[a][b].call(this.objPull[a],s,o,n,m,l)}}},h=0;h<f.length;h++){var g=f[h];dhtmlXToolbarObject.prototype[g]=e(g)}})();dhtmlXToolbarObject.prototype._rtlParseBtn=function(d,c){return d+c};dhtmlXToolbarObject.prototype._separatorObject=function(e,d,f){this.id=e.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_sep";this.obj.style.display=f.hidden!=null?"none":"";this.obj.idd=String(d);this.obj.title=f.title||"";this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};if(e._isIPad){this.obj.ontouchstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return !1}}e.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return this.obj.style.display==""};return this};dhtmlXToolbarObject.prototype._textObject=function(e,d,f){this.id=e.idPrefix+d;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_text";this.obj.style.display=f.hidden!=null?"none":"";this.obj.idd=String(d);this.obj.title=f.title||"";this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};if(e._isIPad){this.obj.ontouchstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return !1}}this.obj.innerHTML=f.text||"";e.base.appendChild(this.obj);this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return this.obj.style.display==""};this.setItemText=function(b){this.obj.innerHTML=b};this.getItemText=function(){return this.obj.innerHTML};this.setWidth=function(b){this.obj.style.width=b+"px"};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonObject=function(f,e,h){this.id=f.idPrefix+e;this.state=h.enabled!=null?!1:!0;this.imgEn=h.img||"";this.imgDis=h.imgdis||"";this.img=this.state?this.imgEn!=""?this.imgEn:"":this.imgDis!=""?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=h.hidden!=null?"none":"";this.obj.allowClick=!1;this.obj.extAction=h.action||null;this.obj.renderAs=this.obj.className;this.obj.idd=String(e);this.obj.title=h.title||"";this.obj.pressed=!1;this.obj.innerHTML=f._rtlParseBtn(this.img!=""?"<img src='"+f.imagePath+this.img+"'>":"",h.text!=null?"<div>"+h.text+"</div>":"");var g=this;this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){this.allowClick=!0;if(g.state!=!1&&f.anyUsed=="none"){this.renderAs=this.className="dhx_toolbar_btn over"}};this.obj._doOnMouseOut=function(){this.allowClick=!1;if(g.state!=!1&&f.anyUsed=="none"){this.className="dhx_toolbar_btn def",this.renderAs=this.renderAs}};this.obj.onclick=function(a){if(g.state!=!1&&this.allowClick!=!1){var a=a||event,j=this.idd.replace(f.idPrefix,"");if(this.extAction){try{window[this.extAction](j)}catch(d){}}f&&f.callEvent&&f.callEvent("onClick",[j])}};this.obj[f._isIPad?"ontouchstart":"onmousedown"]=function(a){if(g.state==!1){return a=a||event,a.returnValue=!1,a.cancelBubble=!0,!1}if(f.anyUsed=="none"){return f.anyUsed=this.idd,this.className="dhx_toolbar_btn pres",this.pressed=!0,this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){f.anyUsed="none";this._doOnMouseOut()},!1}};this.obj[f._isIPad?"ontouchend":"onmouseup"]=function(){if(g.state!=!1&&!(f.anyUsed!="none"&&f.anyUsed!=this.idd)){var a=f.anyUsed;this._doOnMouseUp();f._isIPad&&a!="none"&&f.callEvent("onClick",[this.idd.replace(f.idPrefix,"")])}};if(f._isIPad){this.obj.ontouchmove=function(){this._doOnMouseUp()}}this.obj._doOnMouseUp=function(){f.anyUsed="none";this.className=this.renderAs;this.pressed=!1};this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp();this.onmouseover=function(){this._doOnMouseOver()};this.onmouseout=function(){this._doOnMouseOut()}};f.base.appendChild(this.obj);this.enableItem=function(){f._enableItem(this)};this.disableItem=function(){f._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return this.obj.style.display==""};this.setItemText=function(a){f._setItemText(this,a)};this.getItemText=function(){return f._getItemText(this)};this.setItemImage=function(a){f._setItemImage(this,a,!0)};this.clearItemImage=function(){f._clearItemImage(this,!0)};this.setItemImageDis=function(a){f._setItemImage(this,a,!1)};this.clearItemImageDis=function(){f._clearItemImage(this,!1)};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(h,g,m){this.id=h.idPrefix+g;this.state=m.enabled!=null?m.enabled=="true"?!0:!1:!0;this.imgEn=m.img||"";this.imgDis=m.imgdis||"";this.img=this.state?this.imgEn!=""?this.imgEn:"":this.imgDis!=""?this.imgDis:"";this.mode=m.mode||"button";if(this.mode=="select"){if(this.openAll=!0,this.renderSelect=!1,!m.text||m.text.length==0){m.text="&nbsp;"}}else{this.openAll=m.openAll=="true"||m.openAll==!0||m.openAll==1||m.openAll=="1"||m.openAll=="yes"||m.openAll=="on",this.renderSelect=m.renderSelect!=null?m.renderSelect=="false"||m.renderSelect=="disabled"?!1:!0:!0}this.maxOpen=!isNaN(m.maxOpen?m.maxOpen:"")?m.maxOpen:null;this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!h._sbw){var a=document.createElement("DIV");a.className="dhxtoolbar_maxopen_test";document.body.appendChild(a);var d=document.createElement("DIV");d.className="dhxtoolbar_maxopen_test2";a.appendChild(d);h._sbw=a.offsetWidth-d.offsetWidth;a.removeChild(d);d=null;document.body.removeChild(a);a=null}};this._maxOpenTest();this.obj=document.createElement("DIV");this.obj.allowClick=!1;this.obj.extAction=m.action||null;this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=m.hidden!=null?"none":"";this.obj.renderAs=this.obj.className;this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.idd=String(g);this.obj.title=m.title||"";this.callEvent=this.obj.pressed=!1;this.obj.innerHTML=h._rtlParseBtn(this.img!=""?"<img src='"+h.imagePath+this.img+"'>":"",m.text!=null?"<div>"+m.text+"</div>":"");h.base.appendChild(this.obj);this.arw=document.createElement("DIV");this.arw.className="dhx_toolbar_arw "+(this.state?"def":"dis");this.arw.style.display=this.obj.style.display;this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>";this.arw.title=this.obj.title;this.arw.onselectstart=function(b){b=b||event;b.returnValue=!1};h.base.appendChild(this.arw);var l=this;this.obj.onmouseover=function(a){a=a||event;if(h.anyUsed=="none"&&l.state){l.obj.renderAs="dhx_toolbar_btn over",l.obj.className=l.obj.renderAs,l.arw.className=String(l.obj.renderAs).replace("btn","arw")}};this.obj.onmouseout=function(){l.obj.allowClick=!1;if(h.anyUsed=="none"&&l.state){l.obj.renderAs="dhx_toolbar_btn def",l.obj.className=l.obj.renderAs,l.arw.className=String(l.obj.renderAs).replace("btn","arw"),l.callEvent=!1}};this.arw.onmouseover=this.obj.onmouseover;this.arw.onmouseout=this.obj.onmouseout;if(this.openAll!=!0){this.obj.onclick=function(a){a=a||event;if(l.obj.allowClick&&l.state&&h.anyUsed=="none"){var f=l.obj.idd.replace(h.idPrefix,"");if(l.obj.extAction){try{window[l.obj.extAction](f)}catch(d){}}h.callEvent("onClick",[f])}},this.obj[h._isIPad?"ontouchstart":"onmousedown"]=function(a){a=a||event;if(h.anyUsed=="none"&&l.state){l.obj.allowClick=!0,l.obj.className="dhx_toolbar_btn pres",l.arw.className="dhx_toolbar_arw pres",l.callEvent=!0}},this.obj[h._isIPad?"ontouchend":"onmouseup"]=function(a){a=a||event;a.cancelBubble=!0;if(h.anyUsed=="none"&&l.state&&(l.obj.className=l.obj.renderAs,l.arw.className=String(l.obj.renderAs).replace("btn","arw"),h._isIPad&&l.callEvent)){var d=l.obj.idd.replace(h.idPrefix,"");h.callEvent("onClick",[d])}}}if(h._isIPad){this.obj.ontouchmove=this.obj.onmouseout}this.arw[h._isIPad?"ontouchstart":"onmousedown"]=function(A){var A=A||event,y=this.className.indexOf("dhx_toolbar_arw")===0?this:this.nextSibling;y._skip?(A=A||event,A.cancelBubble=!0):y._skip=!0;y=null;if(l.state){if(h.anyUsed==l.obj.idd){l.obj.className=l.obj.renderAs;l.arw.className=String(l.obj.renderAs).replace("btn","arw");h.anyUsed="none";l.polygon.style.display="none";if(l.polygon._ie6cover){l.polygon._ie6cover.style.display="none"}h.skin=="dhx_terrace"&&h._improveTerraceButtonSelect(l.id,!0)}else{if(h.anyUsed!="none"&&h.objPull[h.idPrefix+h.anyUsed].type=="buttonSelect"){var x=h.objPull[h.idPrefix+h.anyUsed];if(x.polygon.style.display!="none"){x.obj.renderAs="dhx_toolbar_btn def";x.obj.className=x.obj.renderAs;x.arw.className=String(l.obj.renderAs).replace("btn","arw");x.polygon.style.display="none";if(x.polygon._ie6cover){x.polygon._ie6cover.style.display="none"}h.skin=="dhx_terrace"&&h._improveTerraceButtonSelect(x.id,!0)}}l.obj.className="dhx_toolbar_btn over";l.arw.className="dhx_toolbar_arw pres";h.anyUsed=l.obj.idd;l.polygon.style.top="0px";l.polygon.style.visibility="hidden";l.polygon.style.display="";h.skin=="dhx_terrace"&&h._improveTerraceButtonSelect(l.id,!1);l._fixMaxOpenHeight(l.maxOpen||null);h._autoDetectVisibleArea();var w=getAbsoluteTop(l.obj)+l.obj.offsetHeight+h.selectPolygonOffsetTop,v=l.polygon.offsetHeight;if(w+v>h.tY2){var u=l.maxOpen!=null?Math.floor((h.tY2-w)/22):0;u>=1?l._fixMaxOpenHeight(u):(w=getAbsoluteTop(l.obj)-v-h.selectPolygonOffsetTop,w<0&&(w=0))}l.polygon.style.top=w+"px";if(h.rtl){l.polygon.style.left=getAbsoluteLeft(l.obj)+l.obj.offsetWidth-l.polygon.offsetWidth+h.selectPolygonOffsetLeft+"px"}else{var s=document.body.scrollLeft,d=s+(window.innerWidth||document.body.clientWidth),a=getAbsoluteLeft(l.obj)+h.selectPolygonOffsetLeft;a+l.polygon.offsetWidth>d&&(a=getAbsoluteLeft(l.arw)+l.arw.offsetWidth-l.polygon.offsetWidth);l.polygon.style.left=a+"px"}l.polygon.style.visibility="visible";if(l.polygon._ie6cover){l.polygon._ie6cover.style.left=l.polygon.style.left,l.polygon._ie6cover.style.top=l.polygon.style.top,l.polygon._ie6cover.style.width=l.polygon.offsetWidth+"px",l.polygon._ie6cover.style.height=l.polygon.offsetHeight+"px",l.polygon._ie6cover.style.display=""}}return !1}};this.arw.onclick=function(b){b=b||event;b.cancelBubble=!0};this.arw[h._isIPad?"ontouchend":"onmouseup"]=function(b){b=b||event;b.cancelBubble=!0};if(this.openAll===!0&&(this.obj.onclick=this.arw.onclick,this.obj.onmousedown=this.arw.onmousedown,this.obj.onmouseup=this.arw.onmouseup,h._isIPad)){this.obj.ontouchstart=this.arw.ontouchstart,this.obj.ontouchend=this.arw.ontouchend}this.obj.iddPrefix=h.idPrefix;this._listOptions={};this._fixMaxOpenHeight=function(a){var s="auto",o=!1;if(a!==null){var n=0,d;for(d in this._listOptions){n++}n>a?(this._ph=22*a,s=this._ph+"px"):o=!0}this.polygon.style.width="auto";this.polygon.style.height="auto";if(!o&&l.maxOpen!=null){this.polygon.style.width=this.p_tbl.offsetWidth+h._sbw+"px",this.polygon.style.height=s}};this._separatorButtonSelectObject=function(e,d,f){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.className="tr_sep";this.obj.tr.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.obj.td=document.createElement("TD");this.obj.td.colSpan="2";this.obj.td.className="td_btn_sep";this.obj.td.onselectstart=function(b){b=b||event;return b.returnValue=!1};isNaN(f)?f=l.p_tbody.childNodes.length+1:f<1&&(f=1);f>l.p_tbody.childNodes.length?l.p_tbody.appendChild(this.obj.tr):l.p_tbody.insertBefore(this.obj.tr,l.p_tbody.childNodes[f-1]);this.obj.tr.appendChild(this.obj.td);this.obj.sep=document.createElement("DIV");this.obj.sep.className="btn_sep";this.obj.sep.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.obj.td.appendChild(this.obj.sep);l._listOptions[e]=this.obj;return this};this._buttonButtonSelectObject=function(a,o,n){this.obj={};this.obj.tr=document.createElement("TR");this.obj.tr.en=o.enabled=="false"?!1:o.disabled=="true"?!1:!0;this.obj.tr.extAction=o.action||null;this.obj.tr._selected=o.selected!=null;this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&l.renderSelect?" tr_btn_selected":"":" tr_btn_disabled");this.obj.tr.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.obj.tr.idd=String(a);if(o.userdata){this.obj.userData=o.userdata}isNaN(n)?n=l.p_tbody.childNodes.length+1:n<1&&(n=1);n>l.p_tbody.childNodes.length?l.p_tbody.appendChild(this.obj.tr):l.p_tbody.insertBefore(this.obj.tr,l.p_tbody.childNodes[n-1]);this.obj.td_a=document.createElement("TD");this.obj.td_a.className="td_btn_img";this.obj.td_a.onselectstart=function(b){b=b||event;return b.returnValue=!1};this.obj.td_b=document.createElement("TD");this.obj.td_b.className="td_btn_txt";this.obj.td_b.onselectstart=function(b){b=b||event;return b.returnValue=!1};h.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b));if(o.img!=null){this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+h.imagePath+o.img+"' border='0'>",this.obj.tr._img=o.img}var d=o.text!=null?o.text:o.itemText||"";this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+d+"</div>";this.obj.tr[h._isIPad?"ontouchstart":"onmouseover"]=function(){if(this.en&&(!this._selected||!l.renderSelect)){this.className="tr_btn tr_btn_over"}};this.obj.tr.onmouseout=function(){if(this.en){if(this._selected&&l.renderSelect){if(String(this.className).search("tr_btn_selected")==-1){this.className="tr_btn tr_btn_selected"}}else{this.className="tr_btn"}}};this.obj.tr[h._isIPad?"ontouchend":"onclick"]=function(f){f=f||event;f.cancelBubble=!0;if(this.en){l.setListOptionSelected(this.idd.replace(h.idPrefix,""));l.obj.renderAs="dhx_toolbar_btn def";l.obj.className=l.obj.renderAs;l.arw.className=String(l.obj.renderAs).replace("btn","arw");l.polygon.style.display="none";if(l.polygon._ie6cover){l.polygon._ie6cover.style.display="none"}h.skin=="dhx_terrace"&&h._improveTerraceButtonSelect(l.id,!0);h.anyUsed="none";var u=this.idd.replace(h.idPrefix,"");if(this.extAction){try{window[this.extAction](u)}catch(s){}}h.callEvent("onClick",[u])}};l._listOptions[a]=this.obj;return this};this.polygon=document.createElement("DIV");this.polygon.dir="ltr";this.polygon.style.display="none";this.polygon.style.zIndex=101;this.polygon.className="dhx_toolbar_poly_"+h.iconSize+"_"+h.skin+(h.rtl?" rtl":"");this.polygon.onselectstart=function(b){b=b||event;b.returnValue=!1};this.polygon.onmousedown=function(b){b=b||event;b.cancelBubble=!0};this.polygon.style.overflowY="auto";if(h._isIPad){this.polygon.ontouchstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0;return !1}}this.p_tbl=document.createElement("TABLE");this.p_tbl.className="buttons_cont";this.p_tbl.cellSpacing="0";this.p_tbl.cellPadding="0";this.p_tbl.border="0";this.polygon.appendChild(this.p_tbl);this.p_tbody=document.createElement("TBODY");this.p_tbl.appendChild(this.p_tbody);if(m.items){for(var k=0;k<m.items.length;k++){var j="_"+(m.items[k].type||"")+"ButtonSelectObject";typeof this[j]=="function"&&new this[j](m.items[k].id||h._genStr(24),m.items[k])}}document.body.appendChild(this.polygon);if(h._isIE6){this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover)}this.setWidth=function(b){this.obj.style.width=b-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width};this.enableItem=function(){h._enableItem(this)};this.disableItem=function(){h._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display="";this.arw.style.display=""};this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"};this.isVisible=function(){return this.obj.style.display==""};this.setItemText=function(a){h._setItemText(this,a)};this.getItemText=function(){return h._getItemText(this)};this.setItemImage=function(a){h._setItemImage(this,a,!0)};this.clearItemImage=function(){h._clearItemImage(this,!0)};this.setItemImageDis=function(a){h._setItemImage(this,a,!1)};this.clearItemImageDis=function(){h._clearItemImage(this,!1)};this.setItemToolTip=function(b){this.obj.title=b;this.arw.title=b};this.getItemToolTip=function(){return this.obj.title};this.addListOption=function(o,n,w,v,u){if(w=="button"||w=="separator"){var s={id:o,type:w,text:v,img:u};new this["_"+w+"ButtonSelectObject"](o,s,n)}};this.removeListOption=function(e){if(this._isListButton(e,!0)){var d=this._listOptions[e];if(d.td_a!=null&&d.td_b!=null){d.td_a.onselectstart=null;for(d.td_b.onselectstart=null;d.td_a.childNodes.length>0;){d.td_a.removeChild(d.td_a.childNodes[0])}for(;d.td_b.childNodes.length>0;){d.td_b.removeChild(d.td_b.childNodes[0])}d.tr.onselectstart=null;d.tr.onmouseover=null;d.tr.onmouseout=null;for(d.tr.onclick=null;d.tr.childNodes.length>0;){d.tr.removeChild(d.tr.childNodes[0])}d.tr.parentNode.removeChild(d.tr);d.td_a=null;d.td_b=null}else{d.sep.onselectstart=null;d.td.onselectstart=null;for(d.tr.onselectstart=null;d.td.childNodes.length>0;){d.td.removeChild(d.td.childNodes[0])}for(;d.tr.childNodes.length>0;){d.tr.removeChild(d.tr.childNodes[0])}d.tr.parentNode.removeChild(d.tr);d.sep=null;d.td=null}d=d.tr=null;this._listOptions[e]=null;try{delete this._listOptions[e]}catch(f){}}};this.showListOption=function(b){if(this._isListButton(b,!0)){this._listOptions[b].tr.style.display=""}};this.hideListOption=function(b){if(this._isListButton(b,!0)){this._listOptions[b].tr.style.display="none"}};this.isListOptionVisible=function(b){return !this._isListButton(b,!0)?void 0:this._listOptions[b].tr.style.display!="none"};this.enableListOption=function(a){if(this._isListButton(a)){this._listOptions[a].tr.en=!0,this._listOptions[a].tr.className="tr_btn"+(this._listOptions[a].tr._selected&&h.renderSelect?" tr_btn_selected":"")}};this.disableListOption=function(b){if(this._isListButton(b)){this._listOptions[b].tr.en=!1,this._listOptions[b].tr.className="tr_btn tr_btn_disabled"}};this.isListOptionEnabled=function(b){return !this._isListButton(b)?void 0:this._listOptions[b].tr.en};this.setListOptionPosition=function(e,d){if(this._listOptions[e]&&!(this.getListOptionPosition(e)==d||isNaN(d))){d<1&&(d=1);var f=this._listOptions[e].tr;this.p_tbody.removeChild(f);d>this.p_tbody.childNodes.length?this.p_tbody.appendChild(f):this.p_tbody.insertBefore(f,this.p_tbody.childNodes[d-1]);f=null}};this.getListOptionPosition=function(e){var d=-1;if(!this._listOptions[e]){return d}for(var f=0;f<this.p_tbody.childNodes.length;f++){this.p_tbody.childNodes[f]==this._listOptions[e].tr&&(d=f+1)}return d};this.setListOptionImage=function(a,o){if(this._isListButton(a)){var n=this._listOptions[a].tr.childNodes[h.rtl?1:0];if(n.childNodes.length>0){n.childNodes[0].src=h.imagePath+o}else{var f=document.createElement("IMG");f.className="btn_sel_img";f.src=h.imagePath+o;n.appendChild(f)}n=null}};this.getListOptionImage=function(a){if(this._isListButton(a)){var f=this._listOptions[a].tr.childNodes[h.rtl?1:0],e=null;if(f.childNodes.length>0){e=f.childNodes[0].src}f=null;return e}};this.clearListOptionImage=function(a){if(this._isListButton(a)){for(var d=this._listOptions[a].tr.childNodes[h.rtl?1:0];d.childNodes.length>0;){d.removeChild(d.childNodes[0])}d=null}};this.setListOptionText=function(a,d){if(this._isListButton(a)){this._listOptions[a].tr.childNodes[h.rtl?0:1].childNodes[0].innerHTML=d}};this.getListOptionText=function(a){return !this._isListButton(a)?void 0:this._listOptions[a].tr.childNodes[h.rtl?0:1].childNodes[0].innerHTML};this.setListOptionToolTip=function(d,c){if(this._isListButton(d)){this._listOptions[d].tr.title=c}};this.getListOptionToolTip=function(b){return !this._isListButton(b)?void 0:this._listOptions[b].tr.title};this.forEachListOption=function(d){for(var c in this._listOptions){d(c)}};this.getAllListOptions=function(){var d=[],c;for(c in this._listOptions){d[d.length]=c}return d};this.setListOptionSelected=function(e){for(var d in this._listOptions){var f=this._listOptions[d];if(f.td_a!=null&&f.td_b!=null&&f.tr.en){d==e?(f.tr._selected=!0,f.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),this.mode=="select"&&(f.tr._img?this.setItemImage(f.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(e)))):(f.tr._selected=!1,f.tr.className="tr_btn")}f=null}};this.getListOptionSelected=function(){var d=null,c;for(c in this._listOptions){this._listOptions[c].tr._selected==!0&&(d=c)}return d};this._isListButton=function(d,c){return this._listOptions[d]==null?!1:!c&&this._listOptions[d].tr.className=="tr_sep"?!1:!0};this.setMaxOpen=function(b){this._ph=null;typeof b=="number"?(this.maxOpen=b,this._maxOpenTest()):this.maxOpen=null};m.width&&this.setWidth(m.width);this.mode=="select"&&typeof m.selected!="undefined"&&this.setListOptionSelected(m.selected);return this};dhtmlXToolbarObject.prototype._buttonInputObject=function(g,f,k){this.id=g.idPrefix+f;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn def";this.obj.style.display=k.hidden!=null?"none":"";this.obj.idd=String(f);this.obj.w=k.width!=null?k.width:100;this.obj.title=k.title!=null?k.title:"";this.obj.innerHTML="<input class='inp' type='text' style='-moz-user-select:text;width:"+this.obj.w+"px;'"+(k.value!=null?" value='"+k.value+"'":"")+">";var j=g,h=this;this.obj.childNodes[0].onkeydown=function(b){b=b||event;b.keyCode==13&&j.callEvent("onEnter",[h.obj.idd,this.value])};g.base.appendChild(this.obj);this.enableItem=function(){this.obj.childNodes[0].disabled=!1};this.disableItem=function(){this.obj.childNodes[0].disabled=!0};this.isEnabled=function(){return !this.obj.childNodes[0].disabled};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return this.obj.style.display!="none"};this.setValue=function(b){this.obj.childNodes[0].value=b};this.getValue=function(){return this.obj.childNodes[0].value};this.setWidth=function(b){this.obj.w=b;this.obj.childNodes[0].style.width=this.obj.w+"px"};this.getWidth=function(){return this.obj.w};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};this.getInput=function(){return this.obj.firstChild};return this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(f,e,h){this.id=f.idPrefix+e;this.state=h.enabled!=null?!1:!0;this.imgEn=h.img!=null?h.img:"";this.imgDis=h.imgdis!=null?h.imgdis:"";this.img=this.state?this.imgEn!=""?this.imgEn:"":this.imgDis!=""?this.imgDis:"";this.obj=document.createElement("DIV");this.obj.pressed=h.selected!=null;this.obj.extAction=h.action||null;this.obj.className="dhx_toolbar_btn "+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis");this.obj.style.display=h.hidden!=null?"none":"";this.obj.renderAs=this.obj.className;this.obj.idd=String(e);this.obj.title=h.title||"";if(this.obj.pressed){this.obj.renderAs="dhx_toolbar_btn over"}this.obj.innerHTML=f._rtlParseBtn(this.img!=""?"<img src='"+f.imagePath+this.img+"'>":"",h.text!=null?"<div>"+h.text+"</div>":"");f.base.appendChild(this.obj);var g=this;this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.onmouseover=function(){this._doOnMouseOver()};this.obj.onmouseout=function(){this._doOnMouseOut()};this.obj._doOnMouseOver=function(){if(g.state!=!1&&f.anyUsed=="none"){this.renderAs=this.pressed?"dhx_toolbar_btn over":this.className="dhx_toolbar_btn over"}};this.obj._doOnMouseOut=function(){if(g.state!=!1&&f.anyUsed=="none"){this.renderAs=this.pressed?"dhx_toolbar_btn def":this.className="dhx_toolbar_btn def"}};this.obj[f._isIPad?"ontouchstart":"onmousedown"]=function(){if((!f.checkEvent("onBeforeStateChange")||f.callEvent("onBeforeStateChange",[this.idd.replace(f.idPrefix,""),this.pressed]))&&g.state!=!1&&f.anyUsed=="none"){this.className=(this.pressed=!this.pressed)?"dhx_toolbar_btn pres":this.renderAs;var a=this.idd.replace(f.idPrefix,"");if(this.extAction){try{window[this.extAction](a,this.pressed)}catch(d){}}f.callEvent("onStateChange",[a,this.pressed]);return !1}};this.setItemState=function(a,l){if(this.obj.pressed!=a&&(a==!0?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn pres"+(this.state?"":"_dis"),this.obj.renderAs="dhx_toolbar_btn over"):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis"),this.obj.renderAs=this.obj.className),l==!0)){var k=this.obj.idd.replace(f.idPrefix,"");if(this.obj.extAction){try{window[this.obj.extAction](k,this.obj.pressed)}catch(j){}}f.callEvent("onStateChange",[k,this.obj.pressed])}};this.getItemState=function(){return this.obj.pressed};this.enableItem=function(){f._enableItem(this)};this.disableItem=function(){f._disableItem(this)};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return this.obj.style.display==""};this.setItemText=function(a){f._setItemText(this,a)};this.getItemText=function(){return f._getItemText(this)};this.setItemImage=function(a){f._setItemImage(this,a,!0)};this.clearItemImage=function(){f._clearItemImage(this,!0)};this.setItemImageDis=function(a){f._setItemImage(this,a,!1)};this.clearItemImageDis=function(){f._clearItemImage(this,!1)};this.setItemToolTip=function(b){this.obj.title=b};this.getItemToolTip=function(){return this.obj.title};return this};dhtmlXToolbarObject.prototype._sliderObject=function(h,g,m){this.id=h.idPrefix+g;this.state=m.enabled!=null?m.enabled=="true"?!0:!1:!0;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn "+(this.state?"def":"dis");this.obj.style.display=m.hidden!=null?"none":"";this.obj.onselectstart=function(b){b=b||event;b.returnValue=!1};this.obj.idd=String(g);this.obj.len=m.length!=null?Number(m.length):50;this.obj.innerHTML="<div>"+(m.textMin||"")+"</div><div class='sl_bg_l'></div><div class='sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='sl_bg_r'></div><div>"+(m.textMax||"")+"</div>";h.base.appendChild(this.obj);var l=this;this.pen=document.createElement("DIV");this.pen.className="sl_pen";this.obj.appendChild(this.pen);var k=this.pen;this.label=document.createElement("DIV");this.label.dir="ltr";this.label.className="dhx_toolbar_slider_label_"+h.skin+(h.rtl?"_rtl":"");this.label.style.display="none";this.label.tip=m.toolTip||"%v";document.body.appendChild(this.label);var j=this.label;this.pen.valueMin=m.valueMin!=null?Number(m.valueMin):0;this.pen.valueMax=m.valueMax!=null?Number(m.valueMax):100;if(this.pen.valueMin>this.pen.valueMax){this.pen.valueMin=this.pen.valueMax}this.pen.valueNow=m.valueNow!=null?Number(m.valueNow):this.pen.valueMax;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits=function(){this.minX=l.obj.childNodes[1].offsetLeft-4;this.maxX=l.obj.childNodes[3].offsetLeft-this.offsetWidth+1};this.pen._detectLimits();this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX};this.pen._definePos();this.pen.initXY=0;this.pen.allowMove=!1;this.pen[h._isIPad?"ontouchstart":"onmousedown"]=function(a){if(l.state!=!1&&(a=a||event,this.initXY=h._isIPad?a.touches[0].clientX:a.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="sl_pen over",j.tip!="")){j.style.visibility="hidden",j.style.display="",j.innerHTML=j.tip.replace("%v",this.valueNow),j.style.left=Math.round(getAbsoluteLeft(this)+this.offsetWidth/2-j.offsetWidth/2)+"px",j.style.top=getAbsoluteTop(this)-j.offsetHeight-3+"px",j.style.visibility=""}};this.pen._doOnMouseMoveStart=function(a){a=a||event;if(k.allowMove){var f=h._isIPad?a.touches[0].clientX:a.clientX,e=f-k.initXY;if(!(f<getAbsoluteLeft(k)+Math.round(k.offsetWidth/2)&&k.nowX==k.minX)&&!(f>getAbsoluteLeft(k)+Math.round(k.offsetWidth/2)&&k.nowX==k.maxX)){k.newNowX=k.nowX+e;if(k.newNowX<k.minX){k.newNowX=k.minX}if(k.newNowX>k.maxX){k.newNowX=k.maxX}k.nowX=k.newNowX;k.style.left=k.nowX+"px";k.initXY=f;k.newValueNow=Math.round((k.valueMax-k.valueMin)*(k.newNowX-k.minX)/(k.maxX-k.minX)+k.valueMin);if(j.tip!=""){j.innerHTML=j.tip.replace(/%v/gi,k.newValueNow),j.style.left=Math.round(getAbsoluteLeft(k)+k.offsetWidth/2-j.offsetWidth/2)+"px",j.style.top=getAbsoluteTop(k)-j.offsetHeight-3+"px"}a.cancelBubble=!0;return a.returnValue=!1}}};this.pen._doOnMouseMoveEnd=function(){if(k.allowMove){k.className="sl_pen";k.allowMove=!1;k.nowX=k.newNowX;k.valueNow=k.newValueNow;if(j.tip!=""){j.style.display="none"}h.callEvent("onValueChange",[l.obj.idd.replace(h.idPrefix,""),k.valueNow])}};h._isIPad?(document.addEventListener("touchmove",k._doOnMouseMoveStart,!1),document.addEventListener("touchend",k._doOnMouseMoveEnd,!1)):_isIE?(document.body.attachEvent("onmousemove",k._doOnMouseMoveStart),document.body.attachEvent("onmouseup",k._doOnMouseMoveEnd)):(window.addEventListener("mousemove",k._doOnMouseMoveStart,!1),window.addEventListener("mouseup",k._doOnMouseMoveEnd,!1));this.enableItem=function(){if(!this.state){this.state=!0,this.obj.className="dhx_toolbar_btn def"}};this.disableItem=function(){if(this.state){this.state=!1,this.obj.className="dhx_toolbar_btn dis"}};this.isEnabled=function(){return this.state};this.showItem=function(){this.obj.style.display=""};this.hideItem=function(){this.obj.style.display="none"};this.isVisible=function(){return this.obj.style.display==""};this.setValue=function(a,d){a=Number(a);if(a<this.pen.valueMin){a=this.pen.valueMin}if(a>this.pen.valueMax){a=this.pen.valueMax}this.pen.valueNow=a;this.pen._definePos();d==!0&&h.callEvent("onValueChange",[this.obj.idd.replace(h.idPrefix,""),this.pen.valueNow])};this.getValue=function(){return this.pen.valueNow};this.setMinValue=function(d,c){d=Number(d);if(!(d>this.pen.valueMax)){this.obj.childNodes[0].innerHTML=c;this.obj.childNodes[0].style.display=c.length>0?"":"none";this.pen.valueMin=d;if(this.pen.valueNow<this.pen.valueMin){this.pen.valueNow=this.pen.valueMin}this.pen._detectLimits();this.pen._definePos()}};this.setMaxValue=function(d,c){d=Number(d);if(!(d<this.pen.valueMin)){this.obj.childNodes[4].innerHTML=c;this.obj.childNodes[4].style.display=c.length>0?"":"none";this.pen.valueMax=d;if(this.pen.valueNow>this.pen.valueMax){this.pen.valueNow=this.pen.valueMax}this.pen._detectLimits();this.pen._definePos()}};this.getMinValue=function(){var d=this.obj.childNodes[0].innerHTML,c=this.pen.valueMin;return[c,d]};this.getMaxValue=function(){var d=this.obj.childNodes[4].innerHTML,c=this.pen.valueMax;return[c,d]};this.setItemToolTipTemplate=function(b){this.label.tip=b};this.getItemToolTipTemplate=function(){return this.label.tip};return this};dhtmlXToolbarObject.prototype.unload=function(){this._isIPad?document.removeEventListener("touchstart",this._doOnClick,!1):_isIE?document.body.detachEvent("onmousedown",this._doOnClick):window.removeEventListener("mousedown",this._doOnClick,!1);this._doOnClick=null;this.clearAll();this.objPull=null;if(this._xmlLoader){this._xmlLoader.destructor(),this._xmlLoader=null}for(;this.base.childNodes.length>0;){this.base.removeChild(this.base.childNodes[0])}this.cont.removeChild(this.base);for(this.base=null;this.cont.childNodes.length>0;){this.cont.removeChild(this.cont.childNodes[0])}this.cont.className="";this.cont=null;this.detachAllEvents();this.items=this.setMaxOpen=this.getUserData=this.setUserData=this.unload=this.getListOptionSelected=this.setListOptionSelected=this.getAllListOptions=this.forEachListOption=this.clearListOptionImage=this.getListOptionImage=this.setListOptionImage=this.getListOptionToolTip=this.setListOptionToolTip=this.getListOptionText=this.setListOptionText=this.getListOptionPosition=this.setListOptionPosition=this.isListOptionEnabled=this.disableListOption=this.enableListOption=this.isListOptionVisible=this.hideListOption=this.showListOption=this.removeListOption=this.addListOption=this.removeItem=this.setPosition=this.getPosition=this.getWidth=this.setWidth=this.getMaxValue=this.setMaxValue=this.getMinValue=this.setMinValue=this.getValue=this.setValue=this.getItemToolTipTemplate=this.setItemToolTipTemplate=this.getItemState=this.setItemState=this.clearItemImageDis=this.clearItemImage=this.setItemImageDis=this.setItemImage=this.getItemToolTip=this.setItemToolTip=this.getItemText=this.setItemText=this.isEnabled=this.disableItem=this.enableItem=this.isVisible=this.hideItem=this.showItem=this.forEachItem=this.addInput=this.addSlider=this.addSeparator=this.addButtonTwoState=this.addButtonSelect=this.addText=this.addButton=this.getParentId=this.inArray=this.getTypeExt=this.getType=this.removeSpacer=this.addSpacer=this.clearAll=this.detachAllEvents=this.detachEvent=this.eventCatcher=this.checkEvent=this.callEvent=this.attachEvent=this.loadXMLString=this.loadXML=this.setIconPath=this.setIconsPath=this.setSkin=this.setAlign=this._removeItem=this._autoDetectVisibleArea=this._sliderObject=this._buttonTwoStateObject=this._buttonInputObject=this._buttonSelectObject=this._buttonObject=this._textObject=this._separatorObject=this._getIdByPosition=this._setPosition=this._getPosition=this._addItem=this._genStr=this._addItemToStorage=this._doOnLoad=this._xmlParser=this._disableItem=this._enableItem=this._getItemText=this._setItemText=this._clearItemImage=this._setItemImage=this._addImgObj=this._getObj=this._sbw=this.setRTL=this._rtlParseBtn=this._rtl=this.skin=this.selectPolygonOffsetTop=this.selectPolygonOffsetLeft=this.rootTypes=this.imagePath=this.idPrefix=this.anyUsed=this.align=this._isWebToolbar=this._isIE6=this.tY2=this.tY1=this.tX2=this.tX1=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){this.tX1=document.body.scrollLeft;this.tX2=this.tX1+(window.innerWidth||document.body.clientWidth);this.tY1=Math.max((_isIE?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);this.tY2=this.tY1+(_isIE?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight)};dhtmlXToolbarObject.prototype.setUserData=function(f,e,h){if(this.objPull[this.idPrefix+f]!=null){var g=this.objPull[this.idPrefix+f];if(g.userData==null){g.userData={}}g.userData[e]=h}};dhtmlXToolbarObject.prototype.getUserData=function(d,c){return this.objPull[this.idPrefix+d]==null?null:this.objPull[this.idPrefix+d].userData==null?null:this.objPull[this.idPrefix+d].userData[c]==null?null:this.objPull[this.idPrefix+d].userData[c]};dhtmlXToolbarObject.prototype._isListOptionExists=function(e,d){if(this.objPull[this.idPrefix+e]==null){return !1}var f=this.objPull[this.idPrefix+e];return f.type!="buttonSelect"?!1:f._listOptions[d]==null?!1:!0};dhtmlXToolbarObject.prototype.setListOptionUserData=function(g,f,k,j){if(this._isListOptionExists(g,f)){var h=this.objPull[this.idPrefix+g]._listOptions[f];if(h.userData==null){h.userData={}}h.userData[k]=j}};dhtmlXToolbarObject.prototype.getListOptionUserData=function(f,e,h){if(!this._isListOptionExists(f,e)){return null}var g=this.objPull[this.idPrefix+f]._listOptions[e];return !g.userData?null:g.userData[h]?g.userData[h]:null};(function(){dhtmlx.extend_api("dhtmlXToolbarObject",{_init:function(b){return[b.parent,b.skin]},icon_path:"setIconsPath",xml:"loadXML",items:"items",align:"setAlign",rtl:"setRTL",skin:"setSkin"},{items:function(e){for(var d=0;d<e.length;d++){var f=e[d];f.type=="button"&&this.addButton(f.id,null,f.text,f.img,f.img_disabled);f.type=="separator"&&this.addSeparator(f.id,null);f.type=="text"&&this.addText(f.id,null,f.text);f.type=="buttonSelect"&&this.addButtonSelect(f.id,null,f.text,f.options,f.img,f.img_disabled,f.renderSelect,f.openAll,f.maxOpen);f.type=="buttonTwoState"&&this.addButtonTwoState(f.id,null,f.text,f.img,f.img_disabled);f.type=="buttonInput"&&this.addInput(f.id,null,f.text);f.type=="slider"&&this.addSlider(f.id,null,f.length,f.value_min,f.value_max,f.value_now,f.text_min,f.text_max,f.tip_template);f.width&&this.setWidth(f.id,f.width);f.disabled&&this.disableItem(f.id);f.tooltip&&this.setItemToolTip(f.id,f.tooltip);f.pressed===!0&&this.setItemState(f.id,!0)}}})})();function xmlPointer(b){this.d=b}xmlPointer.prototype={text:function(){if(!_isFF){return this.d.xml}var b=new XMLSerializer;return b.serializeToString(this.d)},get:function(b){return this.d.getAttribute(b)},exists:function(){return !!this.d},content:function(){return this.d.firstChild?this.d.firstChild.data:""},each:function(h,g,m,l){var k=this.d.childNodes,j=new xmlPointer;if(k.length){for(l=l||0;l<k.length;l++){if(k[l].tagName==h&&(j.d=k[l],g.apply(m,[j,l])==-1)){break}}}},get_all:function(){for(var e={},d=this.d.attributes,f=0;f<d.length;f++){e[d[f].name]=d[f].value}return e},sub:function(f){var e=this.d.childNodes,h=new xmlPointer;if(e.length){for(var g=0;g<e.length;g++){if(e[g].tagName==f){return h.d=e[g],h}}}},up:function(){return new xmlPointer(this.d.parentNode)},set:function(d,c){this.d.setAttribute(d,c)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(e){var d=this.d.childNodes;if(d.length){for(var f=0;f<d.length;f++){if(d[f].tagName==e){return !0}}}return !1},through:function(v,u,s,o,n){var m=this.d.childNodes;if(m.length){for(var l=0;l<m.length;l++){if(m[l].tagName==v&&m[l].getAttribute(u)!=null&&m[l].getAttribute(u)!=""&&(!s||m[l].getAttribute(u)==s)){var k=new xmlPointer(m[l]);o.apply(n,[k,l])}var j=this.d;this.d=m[l];this.through(v,u,s,o,n);this.d=j}}}};function dhtmlXTreeObject(h,g,m,l){if(_isIE){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(k){}}this.parentObject=typeof h!="object"?document.getElementById(h):h;this.parentObject.style.overflow="hidden";this._itim_dg=!0;this.dlmtr=",";this.dropLower=!1;this.enableIEImageFix();this.xmlstate=0;this.mytype="tree";this.smcheck=!0;this.width=g;this.height=m;this.rootId=l;this.childCalc=null;this.def_line_img_y=this.def_line_img_x=this.def_img_y=this.def_img_x="18px";this._dragged=[];this._selected=[];this.style_pointer="pointer";this._aimgs=!0;this.htmlcA=" [";this.htmlcB="]";this.lWin=window;this.mlitems=this.cMenu=0;this.iconURL="";this.dadmode=0;this.slowParse=!1;this.autoScroll=!0;this.hfMode=0;this.nodeCut=[];this.XMLloadingWarning=this.XMLsource=0;this._idpull={};this._pullSize=0;this.treeLinesOn=!0;this.tscheck=!1;this.timgen=!0;this.dpcpy=!1;this._ld_id=null;this._oie_onXLE=[];this.imPath=window.dhx_globalImgPath||"";this.checkArray="iconUncheckAll.gif,iconCheckAll.gif,iconCheckGray.gif,iconUncheckDis.gif,iconCheckDis.gif,iconCheckDis.gif".split(",");this.radioArray="radio_off.gif,radio_on.gif,radio_on.gif,radio_off.gif,radio_on.gif,radio_on.gif".split(",");this.lineArray="line2.gif,line3.gif,line4.gif,blank.gif,blank.gif,line1.gif".split(",");this.minusArray=["minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"];this.plusArray=["plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"];this.imageArray=["leaf.gif","folderOpen.gif","folderClosed.gif"];this.cutImg=[0,0,0];this.cutImage="but_cut.gif";dhtmlxEventable(this);this.dragger=new dhtmlDragAndDropObject;this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this);this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none";this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow";this.allTree=this._createSelf();this.allTree.appendChild(this.htmlNode.htmlNode);dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this);if(_isFF){this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden"}var j=this;this.allTree.onselectstart=new Function("return false;");if(_isMacOS){this.allTree.oncontextmenu=function(b){return j._doContClick(b||window.event,!0)}}this.allTree.onmousedown=function(b){return j._doContClick(b||window.event)};this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);_isIE&&this.preventIECashing(!0);window.addEventListener&&window.addEventListener("unload",function(){try{j.destructor()}catch(b){}},!1);window.attachEvent&&window.attachEvent("onunload",function(){try{j.destructor()}catch(b){}});this.setImagesPath=this.setImagePath;this.setIconsPath=this.setIconPath;dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path);dhtmlx.skin&&this.setSkin(dhtmlx.skin);return this}dhtmlXTreeObject.prototype.setDataMode=function(b){this._datamode=b};dhtmlXTreeObject.prototype._doContClick=function(v,u){if(!u&&v.button!=2){return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0}for(var s=_isIE?v.srcElement:v.target;s&&s.tagName!="BODY";){if(s.parentObject){break}s=s.parentNode}if(!s||!s.parentObject){return !0}var o=s.parentObject;if(!this.callEvent("onRightClick",[o.id,v])){(v.srcElement||v.target).oncontextmenu=function(b){(b||event).cancelBubble=!0;return !1}}if(this._acMenu=o.cMenu||this.cMenu){if(!this.callEvent("onBeforeContextMenu",[o.id])){return !0}if(!_isMacOS){(v.srcElement||v.target).oncontextmenu=function(b){(b||event).cancelBubble=!0;return !1}}if(this._acMenu.showContextMenu){var n=window.document.documentElement,m=window.document.body,l=[n.scrollLeft||m.scrollLeft,n.scrollTop||m.scrollTop];if(_isIE){var k=v.clientX+l[0],j=v.clientY+l[1]}else{k=v.pageX,j=v.pageY}this._acMenu.showContextMenu(k-1,j-1);this.contextID=o.id;v.cancelBubble=!0;this._acMenu._skip_hide=!0}else{s.contextMenuId=o.id,s.contextMenu=this._acMenu,s.a=this._acMenu._contextStart,s.a(s,v),s.a=null}return !1}return !0};dhtmlXTreeObject.prototype.enableIEImageFix=function(b){b?(this._getImg=function(){var c=document.createElement("DIV");c.innerHTML="&nbsp;";c.className="dhx_bg_img_fix";return c},this._setSrc=function(d,e){d.style.backgroundImage="url("+e+")"},this._getSrc=function(d){var e=d.style.backgroundImage;return e.substr(4,e.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(c){return document.createElement(c==this.rootId?"div":"img")},this._setSrc=function(d,e){d.src=e},this._getSrc=function(c){return c.src})};dhtmlXTreeObject.prototype.destructor=function(){for(var d in this._idpull){var c=this._idpull[d];if(c){c.parentObject=null,c.treeNod=null,c.childNodes=null,c.span=null,c.tr.nodem=null,c.tr=null,c.htmlNode.objBelong=null,c.htmlNode=null,this._idpull[d]=null}}this.parentObject.innerHTML="";this.XMLLoader&&this.XMLLoader.destructor();this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(d in this){this[d]=null}};function cObject(){return this}cObject.prototype={};cObject.prototype.clone=function(){function b(){}b.prototype=this;return new b};function dhtmlXTreeItemObject(h,g,m,l,k,j){this.scolor=this.acolor=this.htmlNode="";this.span=this.dragMove=this.dragSpan=this.tempDOMU=this.tempDOMM=this.childsCount=this.tr=0;this.closeble=1;this.childNodes=[];this.userData=new cObject;this.checkstate=0;this.treeNod=l;this.label=g;this.parentObject=m;this.actionHandler=k;this.images=[l.imageArray[0],l.imageArray[1],l.imageArray[2]];this.id=l._globalIdStorageAdd(h,this);this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,j):this.treeNod._createItem(0,this,j);this.htmlNode.objBelong=this;return this}dhtmlXTreeObject.prototype._globalIdStorageAdd=function(d,c){if(this._globalIdStorageFind(d,1,1)){return d=d+"_"+(new Date).valueOf(),this._globalIdStorageAdd(d,c)}this._idpull[d]=c;this._pullSize++;return d};dhtmlXTreeObject.prototype._globalIdStorageSub=function(b){this._idpull[b]&&(this._unselectItem(this._idpull[b]),this._idpull[b]=null,this._pullSize--);this._locker&&this._locker[b]&&(this._locker[b]=!1)};dhtmlXTreeObject.prototype._globalIdStorageFind=function(d){var c=this._idpull[d];return c?c:null};dhtmlXTreeObject.prototype._escape=function(b){switch(this.utfesc){case"none":return b;case"utf8":return encodeURIComponent(b);default:return escape(b)}};dhtmlXTreeObject.prototype._drawNewTr=function(f){var e=document.createElement("tr"),h=document.createElement("td"),g=document.createElement("td");h.appendChild(document.createTextNode(" "));g.colSpan=3;g.appendChild(f);e.appendChild(h);e.appendChild(g);return e};dhtmlXTreeObject.prototype.loadXMLString=function(e,d){var f=this;this.parsCount||this.callEvent("onXLS",[f,null]);this.xmlstate=1;if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXMLString(e)};dhtmlXTreeObject.prototype.loadXML=function(e,d){if(this._datamode&&this._datamode!="xml"){return this["load"+this._datamode.toUpperCase()](e,d)}var f=this;this.parsCount||this.callEvent("onXLS",[f,this._ld_id]);this._ld_id=null;this.xmlstate=1;this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe);if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXML(e)};dhtmlXTreeObject.prototype._attachChildNode=function(T,S,Q,P,O,N,L,K,J,I,H){if(I&&I.parentObject){T=I.parentObject}if(T.XMLload==0&&this.XMLsource&&!this.XMLloadingWarning){T.XMLload=1,this._loadDynXML(T.id)}var F=T.childsCount,E=T.childNodes;if(H&&H.tr.previousSibling){H.tr.previousSibling.previousSibling?I=H.tr.previousSibling.nodem:K=K.replace("TOP","")+",TOP"}if(I){var D,C;for(D=0;D<F;D++){if(E[D]==I){for(C=F;C!=D;C--){E[1+C]=E[C]}break}}D++;F=D}if(K){for(var A=K.split(","),y=0;y<A.length;y++){switch(A[y]){case"TOP":if(T.childsCount>0){I={},I.tr=T.childNodes[0].tr.previousSibling}T._has_top=!0;for(D=F;D>0;D--){E[D]=E[D-1]}F=0}}}var x;if(!(x=this._idpull[S])||x.span!=-1){x=E[F]=new dhtmlXTreeItemObject(S,Q,T,this,P,1),S=E[F].id,T.childsCount++}if(!x.htmlNode){x.label=Q,x.htmlNode=this._createItem(this.checkBoxOff?1:0,x),x.htmlNode.objBelong=x}O&&(x.images[0]=O);N&&(x.images[1]=N);L&&(x.images[2]=L);var w=this._drawNewTr(x.htmlNode);if(this.XMLloadingWarning||this._hAdI){x.htmlNode.parentNode.parentNode.style.display="none"}I&&I.tr&&I.tr.nextSibling?T.htmlNode.childNodes[0].insertBefore(w,I.tr.nextSibling):this.parsingOn==T.id?this.parsedArray[this.parsedArray.length]=w:T.htmlNode.childNodes[0].appendChild(w);I&&!I.span&&(I=null);if(this.XMLsource){x.XMLload=J&&J!=0?0:1}x.tr=w;w.nodem=x;if(T.itemId==0){w.childNodes[0].className="hiddenRow"}(T._r_logic||this._frbtr)&&this._setSrc(x.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]);if(K){A=K.split(",");for(y=0;y<A.length;y++){switch(A[y]){case"SELECT":this.selectItem(S,!1);break;case"CALL":this.selectItem(S,!0);break;case"CHILD":x.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+S:this.setCheck(S,1);break;case"HCHECKED":this._setCheck(x,"unsure");break;case"OPEN":x.openMe=1}}}if(!this.XMLloadingWarning&&(this._getOpenState(T)<0&&!this._hAdI&&this.openItem(T.id),I&&(this._correctPlus(I),this._correctLine(I)),this._correctPlus(T),this._correctLine(T),this._correctPlus(x),T.childsCount>=2&&(this._correctPlus(E[T.childsCount-2]),this._correctLine(E[T.childsCount-2])),T.childsCount!=2&&this._correctPlus(E[0]),this.tscheck&&this._correctCheckStates(T),this._onradh)){if(this.xmlstate==1){var u=this.onXLE;this.onXLE=function(b){this._onradh(S);u&&u(b)}}else{this._onradh(S)}}return x};dhtmlXTreeObject.prototype.insertNewItem=function(A,y,x,w,v,u,s,o,n){var m=this._globalIdStorageFind(A);if(!m){return -1}var l=this._attachChildNode(m,y,x,w,v,u,s,o,n);if(!this._idpull[this.rootId].XMLload){this._idpull[this.rootId].XMLload=1}return l};dhtmlXTreeObject.prototype.insertNewChild=function(v,u,s,o,n,m,l,k,j){return this.insertNewItem(v,u,s,o,n,m,l,k,j)};dhtmlXTreeObject.prototype._parseXMLTree=function(h,g,m,l,k){var j=new xmlPointer(k.getXMLTopNode("tree"));h._parse(j);h._p=j};dhtmlXTreeObject.prototype._parseItem=function(x,w,v,u){var s;if(this._srnd&&(!this._idpull[s=x.get("id")]||!this._idpull[s].span)){this._addItemSRND(w.id,s,x)}else{var o=x.get_all();if(typeof this.waitUpdateXML=="object"&&!this.waitUpdateXML[o.id]){this._parse(x,o.id,1)}else{var n=[];o.select&&n.push("SELECT");o.top&&n.push("TOP");if(o.call){this.nodeAskingCall=o.id}o.checked==-1?n.push("HCHECKED"):o.checked&&n.push("CHECKED");o.open&&n.push("OPEN");if(this.waitUpdateXML){if(this._globalIdStorageFind(o.id)){var m=this.updateItem(o.id,o.text,o.im0,o.im1,o.im2,o.checked,o.child)}else{this.npl==0?n.push("TOP"):v=w.childNodes[this.npl],m=this._attachChildNode(w,o.id,o.text,0,o.im0,o.im1,o.im2,n.join(","),o.child,0,v),o.id=m.id,v=null}}else{m=this._attachChildNode(w,o.id,o.text,0,o.im0,o.im1,o.im2,n.join(","),o.child,u||0,v)}if(o.tooltip){m.span.parentNode.parentNode.title=o.tooltip}o.style&&(m.span.style.cssText?m.span.style.cssText+=";"+o.style:m.span.setAttribute("style",m.span.getAttribute("style")+"; "+o.style));if(o.radio){m._r_logic=!0}if(o.nocheckbox){var l=m.span.parentNode.previousSibling.previousSibling;l.style.display="none";m.nocheckbox=!0}o.disabled&&(o.checked!=null&&this._setCheck(m,o.checked),this.disableCheckbox(m,1));m._acc=o.child||0;this.parserExtension&&this.parserExtension._parseExtension.call(this,x,o,w?w.id:0);this.setItemColor(m,o.aCol,o.sCol);o.locked=="1"&&this.lockItem(m.id,!0,!0);(o.imwidth||o.imheight)&&this.setIconSize(o.imwidth,o.imheight,m);(o.closeable=="0"||o.closeable=="1")&&this.setItemCloseable(m,o.closeable);var k="";o.topoffset&&this.setItemTopOffset(m,o.topoffset);if(!this.slowParse||typeof this.waitUpdateXML=="object"){x.sub_exists("item")&&(k=this._parse(x,o.id,1))}if(k!=""){this.nodeAskingCall=k}x.each("userdata",function(a){this.setUserData(x.get("id"),a.get("name"),a.content())},this)}}};dhtmlXTreeObject.prototype._parse=function(F,E,D,C){if(this._srnd&&!this.parentObject.offsetHeight){var A=this;return window.setTimeout(function(){A._parse(F,E,D,C)},100)}if(F.exists()){this.skipLock=!0;if(!E){var E=F.get("id"),y=F.get("dhx_security");if(y){dhtmlx.security_key=y}if(F.get("radio")){this.htmlNode._r_logic=!0}this.parsingOn=E;this.parsedArray=[];this.nodeAskingCall=this.setCheckList=""}var x=this._globalIdStorageFind(E);if(!x){return dhtmlxError.throwError("DataStructure","XML refers to not existing parent")}this.parsCount=this.parsCount?this.parsCount+1:1;this.XMLloadingWarning=1;var w=x.childsCount&&!C&&!this._edsbps&&!x._has_top?0:0;this.npl=0;F.each("item",function(b){x.XMLload=1;this._parseItem(b,x,0,w);this.npl++},this,C);if(!D){F.each("userdata",function(a){this.setUserData(F.get("id"),a.get("name"),a.content())},this);x.XMLload=1;if(this.waitUpdateXML){this.waitUpdateXML=!1;for(var v=x.childsCount-1;v>=0;v--){x.childNodes[v]._dmark&&this.deleteItem(x.childNodes[v].id)}}for(var u=this._globalIdStorageFind(this.parsingOn),v=0;v<this.parsedArray.length;v++){x.htmlNode.childNodes[0].appendChild(this.parsedArray[v])}this.parsedArray=[];this.lastLoadedXMLId=E;this.XMLloadingWarning=0;for(var s=this.setCheckList.split(this.dlmtr),o=0;o<s.length;o++){s[o]&&this.setCheck(s[o],1)}this.XMLsource&&this.tscheck&&this.smcheck&&x.id!=this.rootId&&(x.checkstate===0?this._setSubChecked(0,x):x.checkstate===1&&this._setSubChecked(1,x));this._redrawFrom(this,null,C);F.get("order")&&F.get("order")!="none"&&this._reorderBranch(x,F.get("order"),!0);this.nodeAskingCall!=""&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);this._branchUpdate&&this._branchUpdateNext(F)}if(this.parsCount==1){this.parsingOn=null;if(!this._edsbps||!this._edsbpsA.length){var n=this;window.setTimeout(function(){n.callEvent("onXLE",[n,E])},1);this.xmlstate=0}this.skipLock=!1}this.parsCount--;if(!D&&this.onXLE){this.onXLE(this,E)}return this.nodeAskingCall}};dhtmlXTreeObject.prototype._branchUpdateNext=function(b){b.each("item",function(d){var e=d.get("id");if(!this._idpull[e]||this._idpull[e].XMLload){this._branchUpdate++,this.smartRefreshItem(d.get("id"),d)}},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(e,d){if(e.nodeType==1&&e.tagName=="userdata"){var f=e.getAttribute("name");f&&e.childNodes[0]&&this.setUserData(d,f,e.childNodes[0].data)}};dhtmlXTreeObject.prototype._redrawFrom=function(j,h,o,n){if(h){m=h}else{var m=j._globalIdStorageFind(j.lastLoadedXMLId);j.lastLoadedXMLId=-1;if(!m){return 0}}for(var l=0,k=o?o-1:0;k<m.childsCount;k++){if(!this._branchUpdate||this._getOpenState(m)==1){if(!h||n==1){m.childNodes[k].htmlNode.parentNode.parentNode.style.display=""}}if(m.childNodes[k].openMe==1){this._openItem(m.childNodes[k]),m.childNodes[k].openMe=0}j._redrawFrom(j,m.childNodes[k])}if(!m.unParsed&&(m.XMLload||!this.XMLsource)){m._acc=l}j._correctLine(m);j._correctPlus(m)};dhtmlXTreeObject.prototype._createSelf=function(){var b=document.createElement("div");b.className="containerTableStyle";b.style.width=this.width;b.style.height=this.height;this.parentObject.appendChild(b);return b};dhtmlXTreeObject.prototype._xcloseAll=function(f){if(!f.unParsed){if(this.rootId!=f.id){if(!f.htmlNode){return}for(var e=f.htmlNode.childNodes[0].childNodes,h=e.length,g=1;g<h;g++){e[g].style.display="none"}this._correctPlus(f)}for(g=0;g<f.childsCount;g++){f.childNodes[g].childsCount&&this._xcloseAll(f.childNodes[g])}}};dhtmlXTreeObject.prototype._xopenAll=function(d){this._HideShow(d,2);for(var c=0;c<d.childsCount;c++){this._xopenAll(d.childNodes[c])}};dhtmlXTreeObject.prototype._correctPlus=function(g){if(g.htmlNode){var f=g.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,k=g.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],j=this.lineArray;if(this.XMLsource&&!g.XMLload){if(j=this.plusArray,this._setSrc(k,this.iconURL+g.images[2]),this._txtimg){return f.innerHTML="[+]"}}else{if(g.childsCount||g.unParsed){if(g.htmlNode.childNodes[0].childNodes[1]&&g.htmlNode.childNodes[0].childNodes[1].style.display!="none"){if(!g.wsign){j=this.minusArray}this._setSrc(k,this.iconURL+g.images[1]);if(this._txtimg){return f.innerHTML="[-]"}}else{if(!g.wsign){j=this.plusArray}this._setSrc(k,this.iconURL+g.images[2]);if(this._txtimg){return f.innerHTML="[+]"}}}else{this._setSrc(k,this.iconURL+g.images[0])}}var h=2;g.treeNod.treeLinesOn?(g.parentObject&&(h=this._getCountStatus(g.id,g.parentObject)),this._setSrc(f,this.imPath+j[h])):this._setSrc(f,this.imPath+j[3])}};dhtmlXTreeObject.prototype._correctLine=function(e){if(e.htmlNode){var d=e.parentObject;if(d){if(this._getLineStatus(e.id,d)==0||!this.treeLinesOn){for(var f=1;f<=e.childsCount;f++){if(!e.htmlNode.childNodes[0].childNodes[f]){break}e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundImage="";e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundRepeat=""}}else{for(f=1;f<=e.childsCount;f++){if(!e.htmlNode.childNodes[0].childNodes[f]){break}e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";e.htmlNode.childNodes[0].childNodes[f].childNodes[0].style.backgroundRepeat="repeat-y"}}}}};dhtmlXTreeObject.prototype._getCountStatus=function(d,c){return c.childsCount<=1?c.id==this.rootId?4:0:c.childNodes[0].id==d?c.id==this.rootId?2:1:c.childNodes[c.childsCount-1].id==d?0:1};dhtmlXTreeObject.prototype._getLineStatus=function(d,c){return c.childNodes[c.childsCount-1].id==d?0:1};dhtmlXTreeObject.prototype._HideShow=function(g,f){if(this.XMLsource&&!g.XMLload){if(f!=1){g.XMLload=1,this._loadDynXML(g.id)}}else{var k=g.htmlNode.childNodes[0].childNodes,j=k.length;if(j>1){(k[1].style.display!="none"||f==1)&&f!=2?(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none"):nodestyle="";for(var h=1;h<j;h++){k[h].style.display=nodestyle}}this._correctPlus(g)}};dhtmlXTreeObject.prototype._getOpenState=function(d){if(!d.htmlNode){return 0}var c=d.htmlNode.childNodes[0].childNodes;return c.length<=1?0:c[1].style.display!="none"?1:-1};dhtmlXTreeObject.prototype.onRowClick2=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onDblClick",[this.parentObject.id,b])){return !1}this.parentObject.closeble&&this.parentObject.closeble!="0"?b._HideShow(this.parentObject):b._HideShow(this.parentObject,2);if(b.checkEvent("onOpenEnd")){b.xmlstate?(b._oie_onXLE.push(b.onXLE),b.onXLE=b._epnFHe):b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)])}return !1};dhtmlXTreeObject.prototype.onRowClick=function(){var b=this.parentObject.treeNod;if(!b.callEvent("onOpenStart",[this.parentObject.id,b._getOpenState(this.parentObject)])){return 0}this.parentObject.closeble&&this.parentObject.closeble!="0"?b._HideShow(this.parentObject):b._HideShow(this.parentObject,2);if(b.checkEvent("onOpenEnd")){b.xmlstate?(b._oie_onXLE.push(b.onXLE),b.onXLE=b._epnFHe):b.callEvent("onOpenEnd",[this.parentObject.id,b._getOpenState(this.parentObject)])}};dhtmlXTreeObject.prototype._epnFHe=function(e,d,f){d!=this.rootId&&this.callEvent("onOpenEnd",[d,e.getOpenState(d)]);e.onXLE=e._oie_onXLE.pop();if(!f&&!e._oie_onXLE.length&&e.onXLE){e.onXLE(e,d)}};dhtmlXTreeObject.prototype.onRowClickDown=function(d){var d=d||window.event,c=this.parentObject.treeNod;c._selectItem(this.parentObject,d)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var d=[],c=0;c<this._selected.length;c++){d[c]=this._selected[c].id}return d.join(this.dlmtr)};dhtmlXTreeObject.prototype._selectItem=function(d){if(this.checkEvent("onSelect")){this._onSSCFold=this.getSelectedItemId()}this._unselectItems();this._markItem(d);if(this.checkEvent("onSelect")){var c=this.getSelectedItemId();c!=this._onSSCFold&&this.callEvent("onSelect",[c])}};dhtmlXTreeObject.prototype._markItem=function(b){if(b.scolor){b.span.style.color=b.scolor}b.span.className="selectedTreeRow";b.i_sel=!0;this._selected[this._selected.length]=b};dhtmlXTreeObject.prototype.getIndexById=function(d){var c=this._globalIdStorageFind(d);return !c?null:this._getIndex(c)};dhtmlXTreeObject.prototype._getIndex=function(e){for(var d=e.parentObject,f=0;f<d.childsCount;f++){if(d.childNodes[f]==e){return f}}};dhtmlXTreeObject.prototype._unselectItem=function(d){if(d&&d.i_sel){d.span.className="standartTreeRow";if(d.acolor){d.span.style.color=d.acolor}d.i_sel=!1;for(var c=0;c<this._selected.length;c++){if(!this._selected[c].i_sel){this._selected.splice(c,1);break}}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var d=0;d<this._selected.length;d++){var c=this._selected[d];c.span.className="standartTreeRow";if(c.acolor){c.span.style.color=c.acolor}c.i_sel=!1}this._selected=[]};dhtmlXTreeObject.prototype.onRowSelect=function(h,g,m){var h=h||window.event,l=this.parentObject;if(g){l=g.parentObject}var k=l.treeNod,j=k.getSelectedItemId();(!h||!h.skipUnSel)&&k._selectItem(l,h);m||(l.actionHandler?l.actionHandler(l.id,j):k.callEvent("onClick",[l.id,j]))};dhtmlXTreeObject.prototype._correctCheckStates=function(g){if(this.tscheck&&g&&g.id!=this.rootId){var f=g.childNodes,k=0,j=0;if(g.childsCount!=0){for(var h=0;h<g.childsCount;h++){if(!f[h].dscheck){if(f[h].checkstate==0){k=1}else{if(f[h].checkstate==1){j=1}else{j=k=1;break}}}}k&&j?this._setCheck(g,"unsure"):k?this._setCheck(g,!1):this._setCheck(g,!0);this._correctCheckStates(g.parentObject)}}};dhtmlXTreeObject.prototype.onCheckBoxClick=function(){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])){if(this.parentObject.dscheck){return !0}this.treeNod.tscheck?this.parentObject.checkstate==1?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):this.parentObject.checkstate==1?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0);this.treeNod._correctCheckStates(this.parentObject.parentObject);return this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])}};dhtmlXTreeObject.prototype._createItem=function(F,E,D){var C=document.createElement("table");C.cellSpacing=0;C.cellPadding=0;C.border=0;if(this.hfMode){C.style.tableLayout="fixed"}C.style.margin=0;C.style.padding=0;var A=document.createElement("tbody"),y=document.createElement("tr"),x=document.createElement("td");x.className="standartTreeImage";if(this._txtimg){var w=document.createElement("div");x.appendChild(w);w.className="dhx_tree_textSign"}else{w=this._getImg(E.id);w.border="0";if(w.tagName=="IMG"){w.align="absmiddle"}x.appendChild(w);w.style.padding=0;w.style.margin=0;w.style.width=this.def_line_img_x;w.style.height=this.def_line_img_y}var v=document.createElement("td"),u=this._getImg(this.cBROf?this.rootId:E.id);u.checked=0;this._setSrc(u,this.imPath+this.checkArray[0]);u.style.width="16px";u.style.height="16px";if(!F){v.style.display="none"}v.appendChild(u);if(!this.cBROf&&u.tagName=="IMG"){u.align="absmiddle"}u.onclick=this.onCheckBoxClick;u.treeNod=this;u.parentObject=E;v.width=window._KHTMLrv?"16px":"20px";var s=document.createElement("td");s.className="standartTreeImage";var o=this._getImg(this.timgen?E.id:this.rootId);o.onmousedown=this._preventNsDrag;o.ondragstart=this._preventNsDrag;o.border="0";if(this._aimgs){o.parentObject=E;if(o.tagName=="IMG"){o.align="absmiddle"}o.onclick=this.onRowSelect}D||this._setSrc(o,this.iconURL+this.imageArray[0]);s.appendChild(o);o.style.padding=0;o.style.margin=0;this.def_img_x="22px";this.def_img_y="22px";if(this.timgen){s.style.width=o.style.width=this.def_img_x,o.style.height=this.def_img_y}else{if(o.style.width="0px",o.style.height="0px",_isOpera||window._KHTMLrv){s.style.display="none"}}var n=document.createElement("td");n.className="standartTreeRow";E.span=document.createElement("span");E.span.className="standartTreeRow";this.mlitems?(E.span.style.width=this.mlitems,E.span.style.display="block"):n.noWrap=!0;if(_isIE&&_isIE>7){n.style.width="999999px"}else{if(!window._KHTMLrv){n.style.width="100%"}}E.span.innerHTML=E.label;n.appendChild(E.span);n.parentObject=E;x.parentObject=E;n.onclick=this.onRowSelect;x.onclick=this.onRowClick;n.ondblclick=this.onRowClick2;if(this.ettip){y.title=E.label}if(this.dragAndDropOff){if(this._aimgs){this.dragger.addDraggableItem(s,this),s.parentObject=E}this.dragger.addDraggableItem(n,this)}E.span.style.paddingLeft="5px";E.span.style.paddingRight="5px";n.style.verticalAlign="";n.style.fontSize="10pt";n.style.cursor=this.style_pointer;y.appendChild(x);y.appendChild(v);y.appendChild(s);y.appendChild(n);A.appendChild(y);C.appendChild(A);if(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut")){y.onmousemove=this._itemMouseIn,y[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut}return C};dhtmlXTreeObject.prototype.setImagePath=function(b){this.iconURL=this.imPath=b};dhtmlXTreeObject.prototype.setIconPath=function(b){this.iconURL=b};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(b){this.attachEvent("onRightClick",b)};dhtmlXTreeObject.prototype.setOnClickHandler=function(b){this.attachEvent("onClick",b)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(b){this.attachEvent("onSelect",b)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(b){this.XMLsource=b};dhtmlXTreeObject.prototype.setOnCheckHandler=function(b){this.attachEvent("onCheck",b)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(b){this.attachEvent("onOpenStart",b)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(b){this.attachEvent("onOpenEnd",b)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(b){this.attachEvent("onDblClick",b)};dhtmlXTreeObject.prototype.openAllItems=function(d){var c=this._globalIdStorageFind(d);if(!c){return 0}this._xopenAll(c)};dhtmlXTreeObject.prototype.getOpenState=function(d){var c=this._globalIdStorageFind(d);return !c?"":this._getOpenState(c)};dhtmlXTreeObject.prototype.closeAllItems=function(d){if(d===window.undefined){d=this.rootId}var c=this._globalIdStorageFind(d);if(!c){return 0}this._xcloseAll(c);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(f,e,h){var g=this._globalIdStorageFind(f,0,!0);if(g){if(e=="hint"){g.htmlNode.childNodes[0].childNodes[0].title=h}if(typeof g.userData["t_"+e]=="undefined"){g._userdatalist?g._userdatalist+=","+e:g._userdatalist=e}g.userData["t_"+e]=h}};dhtmlXTreeObject.prototype.getUserData=function(e,d){var f=this._globalIdStorageFind(e,0,!0);return !f?void 0:f.userData["t_"+d]};dhtmlXTreeObject.prototype.getItemColor=function(e){var d=this._globalIdStorageFind(e);if(!d){return 0}var f={};if(d.acolor){f.acolor=d.acolor}if(d.scolor){f.scolor=d.scolor}return f};dhtmlXTreeObject.prototype.setItemColor=function(f,e,h){var g=f&&f.span?f:this._globalIdStorageFind(f);if(g){if(g.i_sel){if(h){g.span.style.color=h}}else{if(e){g.span.style.color=e}}if(h){g.scolor=h}if(e){g.acolor=e}}else{return 0}};dhtmlXTreeObject.prototype.getItemText=function(d){var c=this._globalIdStorageFind(d);return !c?0:c.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML};dhtmlXTreeObject.prototype.getParentId=function(d){var c=this._globalIdStorageFind(d);return !c||!c.parentObject?"":c.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(e,d){if(e!=d){var f=this._globalIdStorageFind(e);if(!f){return 0}f.id=d;f.span.contextMenuId=d;this._idpull[d]=this._idpull[e];delete this._idpull[e]}};dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut();this.nodeCut=[].concat(this._selected);for(var d=0;d<this.nodeCut.length;d++){var c=this.nodeCut[d];c._cimgs=[];c._cimgs[0]=c.images[0];c._cimgs[1]=c.images[1];c._cimgs[2]=c.images[2];c.images[0]=c.images[1]=c.images[2]=this.cutImage;this._correctPlus(c)}};dhtmlXTreeObject.prototype.doPaste=function(e){var d=this._globalIdStorageFind(e);if(!d){return 0}for(var f=0;f<this.nodeCut.length;f++){this._checkPNodes(d,this.nodeCut[f])||this._moveNode(this.nodeCut[f],d)}this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var d=0;d<this.nodeCut.length;d++){var c=this.nodeCut[d];c.images[0]=c._cimgs[0];c.images[1]=c._cimgs[1];c.images[2]=c._cimgs[2];this._correctPlus(c)}this.nodeCut=[]};dhtmlXTreeObject.prototype._moveNode=function(d,c){return this._moveNodeTo(d,c)};dhtmlXTreeObject.prototype._fixNodesCollection=function(k,j){var u=0,s=0,o=k.childNodes,n=k.childsCount-1;if(j!=o[n]){for(var m=0;m<n;m++){o[m]==o[n]&&(o[m]=o[m+1],o[m+1]=o[n])}for(m=0;m<n+1;m++){if(u){var l=o[m];o[m]=u;u=l}else{o[m]==j&&(u=o[m],o[m]=o[n])}}}};dhtmlXTreeObject.prototype._recreateBranch=function(k,j,u){var s,o="";if(u){for(s=0;s<j.childsCount;s++){if(j.childNodes[s]==u){break}}s!=0?u=j.childNodes[s-1]:(o="TOP",u="")}var n=this._onradh;this._onradh=null;var m=this._attachChildNode(j,k.id,k.label,0,k.images[0],k.images[1],k.images[2],o,0,u);m._userdatalist=k._userdatalist;m.userData=k.userData.clone();if(k._attrs){m._attrs={};for(var l in k._attrs){m._attrs[l]=k._attrs[l]}}m.XMLload=k.XMLload;if(n){this._onradh=n,this._onradh(m.id)}for(s=0;s<k.childsCount;s++){this._recreateBranch(k.childNodes[s],m,0,1)}return m};dhtmlXTreeObject.prototype._moveNodeTo=function(F,E,D){if(F.treeNod._nonTrivialNode){return F.treeNod._nonTrivialNode(this,E,D,F)}if(this._checkPNodes(E,F)){return !1}var C=E.mytype?F.treeNod.lWin!=E.lWin:F.treeNod.lWin!=E.treeNod.lWin;if(!this.callEvent("onDrag",[F.id,E.id,D?D.id:null,F.treeNod,E.treeNod])){return !1}if(E.XMLload==0&&this.XMLsource){E.XMLload=1,this._loadDynXML(E.id)}this.openItem(E.id);var A=F.treeNod,y=F.parentObject.childsCount,x=F.parentObject;if(C||A.dpcpy){var w=F.id,F=this._recreateBranch(F,E,D);A.dpcpy||A.deleteItem(w)}else{var v=E.childsCount,u=E.childNodes;if(v==0){E._open=!0}A._unselectItem(F);u[v]=F;F.treeNod=E.treeNod;E.childsCount++;var s=this._drawNewTr(u[v].htmlNode);D?(E.htmlNode.childNodes[0].insertBefore(s,D.tr),this._fixNodesCollection(E,D),u=E.childNodes):(E.htmlNode.childNodes[0].appendChild(s),this.dadmode==1&&this._fixNodesCollection(E,D))}if(!A.dpcpy&&!C){var o=F.tr;document.all&&navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1?window.setTimeout(function(){o.parentNode.removeChild(o)},250):F.parentObject.htmlNode.childNodes[0].removeChild(F.tr);if(!D||E!=F.parentObject){for(var n=0;n<x.childsCount;n++){if(x.childNodes[n].id==F.id){x.childNodes[n]=0;break}}}else{x.childNodes[x.childsCount-1]=0}A._compressChildList(x.childsCount,x.childNodes);x.childsCount--}if(!C&&!A.dpcpy){F.tr=s;s.nodem=F;F.parentObject=E;if(A!=E.treeNod){if(F.treeNod._registerBranch(F,A)){return}this._clearStyles(F);this._redrawFrom(this,F.parentObject);this._onradh&&this._onradh(F.id)}this._correctPlus(E);this._correctLine(E);this._correctLine(F);this._correctPlus(F);D?this._correctPlus(D):E.childsCount>=2&&(this._correctPlus(u[E.childsCount-2]),this._correctLine(u[E.childsCount-2]));this._correctPlus(u[E.childsCount-1]);this.tscheck&&this._correctCheckStates(E);A.tscheck&&A._correctCheckStates(x)}y>1&&(A._correctPlus(x.childNodes[y-2]),A._correctLine(x.childNodes[y-2]));A._correctPlus(x);A._correctLine(x);this.callEvent("onDrop",[F.id,E.id,D?D.id:null,A,E.treeNod]);return F.id};dhtmlXTreeObject.prototype._clearStyles=function(f){if(f.htmlNode){var e=f.htmlNode.childNodes[0].childNodes[0].childNodes[1],h=e.nextSibling.nextSibling;f.span.innerHTML=f.label;f.i_sel=!1;f._aimgs&&this.dragger.removeDraggableItem(e.nextSibling);this.checkBoxOff?(e.childNodes[0].style.display="",e.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(e.childNodes[0],this.imPath+this.checkArray[f.checkstate])):e.childNodes[0].style.display="none";e.childNodes[0].treeNod=this;this.dragger.removeDraggableItem(h);this.dragAndDropOff&&this.dragger.addDraggableItem(h,this);this._aimgs&&this.dragger.addDraggableItem(e.nextSibling,this);h.childNodes[0].className="standartTreeRow";h.onclick=this.onRowSelect;h.ondblclick=this.onRowClick2;e.previousSibling.onclick=this.onRowClick;this._correctLine(f);this._correctPlus(f);for(var g=0;g<f.childsCount;g++){this._clearStyles(f.childNodes[g])}}};dhtmlXTreeObject.prototype._registerBranch=function(e,d){d&&d._globalIdStorageSub(e.id);e.id=this._globalIdStorageAdd(e.id,e);e.treeNod=this;for(var f=0;f<e.childsCount;f++){this._registerBranch(e.childNodes[f],d)}return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(b){this.tscheck=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(b){this.ehlt=!0;this.attachEvent("onMouseIn",b)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(b){this.ehlt=!0;this.attachEvent("onMouseOut",b)};dhtmlXTreeObject.prototype.enableTreeImages=function(b){this.timgen=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableFixedMode=function(b){this.hfMode=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(d,c){this.checkBoxOff=convertStringToBoolean(d);this.cBROf=!(this.checkBoxOff||convertStringToBoolean(c))};dhtmlXTreeObject.prototype.setStdImages=function(e,d,f){this.imageArray[0]=e;this.imageArray[1]=d;this.imageArray[2]=f};dhtmlXTreeObject.prototype.enableTreeLines=function(b){this.treeLinesOn=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setImageArrays=function(h,g,m,l,k,j){switch(h){case"plus":this.plusArray[0]=g;this.plusArray[1]=m;this.plusArray[2]=l;this.plusArray[3]=k;this.plusArray[4]=j;break;case"minus":this.minusArray[0]=g,this.minusArray[1]=m,this.minusArray[2]=l,this.minusArray[3]=k,this.minusArray[4]=j}};dhtmlXTreeObject.prototype.openItem=function(d){this.skipLock=!0;var c=this._globalIdStorageFind(d);return c?this._openItem(c):0};dhtmlXTreeObject.prototype._openItem=function(d){var c=this._getOpenState(d);if(c<0||this.XMLsource&&!d.XMLload){if(!this.callEvent("onOpenStart",[d.id,c])){return 0}this._HideShow(d,2);if(this.checkEvent("onOpenEnd")){this.onXLE==this._epnFHe&&this._epnFHe(this,d.id,!0),!this.xmlstate||!this.XMLsource?this.callEvent("onOpenEnd",[d.id,this._getOpenState(d)]):(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe)}}else{this._srnd&&this._HideShow(d,2)}d.parentObject&&!this._skip_open_parent&&this._openItem(d.parentObject)};dhtmlXTreeObject.prototype.closeItem=function(d){if(this.rootId==d){return 0}this.skipLock=!0;var c=this._globalIdStorageFind(d);if(!c){return 0}c.closeble&&this._HideShow(c,1);this.skipLock=!1};dhtmlXTreeObject.prototype.getLevel=function(d){var c=this._globalIdStorageFind(d);return !c?0:this._getNodeLevel(c,0)};dhtmlXTreeObject.prototype.setItemCloseable=function(e,d){var d=convertStringToBoolean(d),f=e&&e.span?e:this._globalIdStorageFind(e);if(!f){return 0}f.closeble=d};dhtmlXTreeObject.prototype._getNodeLevel=function(d,c){return d.parentObject?this._getNodeLevel(d.parentObject,c+1):c};dhtmlXTreeObject.prototype.hasChildren=function(d){var c=this._globalIdStorageFind(d);return c?this.XMLsource&&!c.XMLload?!0:c.childsCount:0};dhtmlXTreeObject.prototype._getLeafCount=function(e){for(var d=0,f=0;f<e.childsCount;f++){e.childNodes[f].childsCount==0&&d++}return d};dhtmlXTreeObject.prototype.setItemText=function(f,e,h){var g=this._globalIdStorageFind(f);if(!g){return 0}g.label=e;g.span.innerHTML=e;g.span.parentNode.parentNode.title=h||""};dhtmlXTreeObject.prototype.getItemTooltip=function(d){var c=this._globalIdStorageFind(d);return !c?"":c.span.parentNode.parentNode._dhx_title||c.span.parentNode.parentNode.title||""};dhtmlXTreeObject.prototype.refreshItem=function(d){if(!d){d=this.rootId}var c=this._globalIdStorageFind(d);this.deleteChildItems(d);this._loadDynXML(d)};dhtmlXTreeObject.prototype.setItemImage2=function(g,f,k,j){var h=this._globalIdStorageFind(g);if(!h){return 0}h.images[1]=k;h.images[2]=j;h.images[0]=f;this._correctPlus(h)};dhtmlXTreeObject.prototype.setItemImage=function(f,e,h){var g=this._globalIdStorageFind(f);if(!g){return 0}h?(g.images[1]=e,g.images[2]=h):g.images[0]=e;this._correctPlus(g)};dhtmlXTreeObject.prototype.getSubItems=function(e){var d=this._globalIdStorageFind(e,0,1);if(!d){return 0}var f="";for(i=0;i<d.childsCount;i++){f?f+=this.dlmtr+d.childNodes[i].id:f=""+d.childNodes[i].id}return f};dhtmlXTreeObject.prototype._getAllScraggyItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){var g=f.childNodes[h].unParsed?this._getAllScraggyItemsXML(f.childNodes[h].unParsed,1):this._getAllScraggyItems(f.childNodes[h]);g&&(e?e+=this.dlmtr+g:e=g)}else{e?e+=this.dlmtr+f.childNodes[h].id:e=""+f.childNodes[h].id}}return e};dhtmlXTreeObject.prototype._getAllFatItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){e?e+=this.dlmtr+f.childNodes[h].id:e=""+f.childNodes[h].id;var g=f.childNodes[h].unParsed?this._getAllFatItemsXML(f.childNodes[h].unParsed,1):this._getAllFatItems(f.childNodes[h]);g&&(e+=this.dlmtr+g)}}return e};dhtmlXTreeObject.prototype._getAllSubItems=function(h,g,m){var l=m?m:this._globalIdStorageFind(h);if(!l){return 0}for(var g="",k=0;k<l.childsCount;k++){g?g+=this.dlmtr+l.childNodes[k].id:g=""+l.childNodes[k].id;var j=this._getAllSubItems(0,g,l.childNodes[k]);j&&(g+=this.dlmtr+j)}return g};dhtmlXTreeObject.prototype.selectItem=function(g,f,k){var f=convertStringToBoolean(f),j=this._globalIdStorageFind(g);if(!j||!j.parentObject){return 0}this.XMLloadingWarning?j.parentObject.openMe=1:this._openItem(j.parentObject);var h=null;if(k&&(h={ctrlKey:!0},j.i_sel)){h.skipUnSel=!0}if(f){this.onRowSelect(h,j.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1)}else{this.onRowSelect(h,j.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)}};dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var d=[],c=0;c<this._selected.length;c++){d[c]=this._selected[c].span.innerHTML}return d.join(this.dlmtr)};dhtmlXTreeObject.prototype._compressChildList=function(e,d){e--;for(var f=0;f<e;f++){d[f]==0&&(d[f]=d[f+1],d[f+1]=0)}};dhtmlXTreeObject.prototype._deleteNode=function(v,u,s){if(!u||!u.parentObject){return 0}var o=0,n=0;if(u.tr.nextSibling){o=u.tr.nextSibling.nodem}if(u.tr.previousSibling){n=u.tr.previousSibling.nodem}for(var m=u.parentObject,l=m.childsCount,k=m.childNodes,j=0;j<l;j++){if(k[j].id==v){s||m.htmlNode.childNodes[0].removeChild(k[j].tr);k[j]=0;break}}this._compressChildList(l,k);s||m.childsCount--;o&&(this._correctPlus(o),this._correctLine(o));n&&(this._correctPlus(n),this._correctLine(n));this.tscheck&&this._correctCheckStates(m);s||this._globalIdStorageRecSub(u)};dhtmlXTreeObject.prototype.setCheck=function(e,d){var f=this._globalIdStorageFind(e,0,1);f&&(d==="unsure"?this._setCheck(f,d):(d=convertStringToBoolean(d),this.tscheck&&this.smcheck?this._setSubChecked(d,f):this._setCheck(f,d)),this.smcheck&&this._correctCheckStates(f.parentObject))};dhtmlXTreeObject.prototype._setCheck=function(f,e){if(f){if((f.parentObject._r_logic||this._frbtr)&&e){if(this._frbtrs){this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=f}else{for(var h=0;h<f.parentObject.childsCount;h++){this._setCheck(f.parentObject.childNodes[h],0)}}}var g=f.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];f.checkstate=e=="unsure"?2:e?1:0;if(f.dscheck){f.checkstate=f.dscheck}this._setSrc(g,this.imPath+(f.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[f.checkstate])}};dhtmlXTreeObject.prototype.setSubChecked=function(e,d){var f=this._globalIdStorageFind(e);this._setSubChecked(d,f);this._correctCheckStates(f.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(f,e){f=convertStringToBoolean(f);if(e){if((e.parentObject._r_logic||this._frbtr)&&f){for(var h=0;h<e.parentObject.childsCount;h++){this._setSubChecked(0,e.parentObject.childNodes[h])}}if(e._r_logic||this._frbtr){this._setSubChecked(f,e.childNodes[0])}else{for(h=0;h<e.childsCount;h++){this._setSubChecked(f,e.childNodes[h])}}var g=e.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];e.checkstate=f?1:0;if(e.dscheck){e.checkstate=e.dscheck}this._setSrc(g,this.imPath+(e.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[e.checkstate])}};dhtmlXTreeObject.prototype.isItemChecked=function(d){var c=this._globalIdStorageFind(d);return !c?void 0:c.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(f){var e=this._globalIdStorageFind(f);if(e){for(var h=e.childsCount,g=0;g<h;g++){this._deleteNode(e.childNodes[0].id,e.childNodes[0])}}};dhtmlXTreeObject.prototype.deleteItem=function(e,d){if(!this._onrdlh||this._onrdlh(e)){var f=this._deleteItem(e,d)}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(h,g,m){var g=convertStringToBoolean(g),l=this._globalIdStorageFind(h);if(l){var k=this.getParentId(h),j=l.parentObject;this._deleteNode(h,l,m);if(this._editCell&&this._editCell.id==h){this._editCell=null}this._correctPlus(j);this._correctLine(j);g&&k!=this.rootId&&this.selectItem(k,1);return j}};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(e){for(var d=0;d<e.childsCount;d++){this._globalIdStorageRecSub(e.childNodes[d]),this._globalIdStorageSub(e.childNodes[d].id)}this._globalIdStorageSub(e.id);var f=e;f.span=null;f.tr.nodem=null;f.tr=null;f.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(A,y,x,w,v,u,s,o,n){var m=this._globalIdStorageFind(A);if(!m||!m.parentObject){return 0}var l=this._attachChildNode(0,y,x,w,v,u,s,o,n,m);return l};dhtmlXTreeObject.prototype.getItemIdByIndex=function(e,d){var f=this._globalIdStorageFind(e);return !f||d>=f.childsCount?null:f.childNodes[d].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(e,d){var f=this._globalIdStorageFind(e);return !f||d>=f.childsCount?null:f.childNodes[d].id};dhtmlXTreeObject.prototype.setDragHandler=function(b){this.attachEvent("onDrag",b)};dhtmlXTreeObject.prototype._clearMove=function(){if(this._lastMark){this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null}this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(d,c){d=="temporary_disabled"?(this.dADTempOff=!1,d=!0):this.dADTempOff=!0;(this.dragAndDropOff=convertStringToBoolean(d))&&this.dragger.addDragLanding(this.allTree,this);if(arguments.length>1){this._ddronr=!convertStringToBoolean(c)}};dhtmlXTreeObject.prototype._setMove=function(f){if(f.parentObject.span){var e=getAbsoluteTop(f),h=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;this.dadmodec=this.dadmode;this.dadmodefix=0;var g=f.parentObject.span;g.className+=" dragAndDropRow";this._lastMark=g;this._autoScroll(null,e,h)}};dhtmlXTreeObject.prototype._autoScroll=function(e,d,f){if(this.autoScroll){e&&(d=getAbsoluteTop(e),f=getAbsoluteTop(this.allTree)-this.allTree.scrollTop);if(d-f-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20}if(d-f<parseInt(this.allTree.scrollTop)+30){this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20}}};dhtmlXTreeObject.prototype._createDragNode=function(h,g){if(!this.dADTempOff){return null}var m=h.parentObject;if(!this.callEvent("onBeforeDrag",[m.id,g])){return null}m.i_sel||this._selectItem(m,g);var l=document.createElement("div"),k=[];if(this._itim_dg){for(var j=0;j<this._selected.length;j++){k[j]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[j].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[j].span.innerHTML+"</td></tr></table>"}}else{k=this.getSelectedItemText().split(this.dlmtr)}l.innerHTML=k.join("");l.style.position="absolute";l.className="dragSpanDiv";this._dragged=[].concat(this._selected);return l};dhtmlXTreeObject.prototype._focusNode=function(d){var c=getAbsoluteTop(d.htmlNode)-getAbsoluteTop(this.allTree);if(c>this.allTree.offsetHeight-30||c<0){this.allTree.scrollTop=c+this.allTree.scrollTop}};dhtmlXTreeObject.prototype._preventNsDrag=function(b){b&&b.preventDefault&&b.preventDefault();return !1};dhtmlXTreeObject.prototype._drag=function(k,j,u){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer);if(!u.parentObject){u=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0}this._clearMove();var s=k.parentObject.treeNod;s&&s._clearMove&&s._clearMove("");if(!this.dragMove||this.dragMove()){for(var o=!s||!s._clearMove||!s._dragged?Array(k.parentObject):s._dragged,n=u.parentObject,m=0;m<o.length;m++){var l=this._moveNode(o[m],n);this.dadmodec&&l!==!1&&(n=this._globalIdStorageFind(l,!0,!0));l&&!this._sADnD&&this.selectItem(l,0,1)}}if(s){s._dragged=[]}};dhtmlXTreeObject.prototype._dragIn=function(k,j,u,s){if(!this.dADTempOff){return 0}var o=j.parentObject,n=k.parentObject;if(n||!this._ddronr){if(!this.callEvent("onDragIn",[o.id,n?n.id:null,o.treeNod,this])){return n&&this._autoScroll(k),0}if(n){if(o.childNodes==null){return this._setMove(k,u,s),k}for(var m=o.treeNod,l=0;l<m._dragged.length;l++){if(this._checkPNodes(n,m._dragged[l])){return this._autoScroll(k),0}}this._setMove(k,u,s);if(this._getOpenState(n)<=0){this._autoOpenId=n.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1000)}}else{this.allTree.className+=" selectionBox"}return k}};dhtmlXTreeObject.prototype._autoOpenItem=function(d,c){c.openItem(c._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove();this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)};dhtmlXTreeObject.prototype.moveItem=function(v,u,s,o){var n=this._globalIdStorageFind(v);if(!n){return 0}var m=null;switch(u){case"right":alert("Not supported yet");break;case"item_child":var l=(o||this)._globalIdStorageFind(s);if(!l){return 0}m=(o||this)._moveNodeTo(n,l,0);break;case"item_sibling":l=(o||this)._globalIdStorageFind(s);if(!l){return 0}m=(o||this)._moveNodeTo(n,l.parentObject,l);break;case"item_sibling_next":l=(o||this)._globalIdStorageFind(s);if(!l){return 0}m=l.tr&&l.tr.nextSibling&&l.tr.nextSibling.nodem?(o||this)._moveNodeTo(n,l.parentObject,l.tr.nextSibling.nodem):(o||this)._moveNodeTo(n,l.parentObject);break;case"left":n.parentObject.parentObject&&(m=this._moveNodeTo(n,n.parentObject.parentObject,n.parentObject));break;case"up":var k=this._getPrevNode(n);if(k==-1||!k.parentObject){return null}m=this._moveNodeTo(n,k.parentObject,k);break;case"up_strict":k=this._getIndex(n);k!=0&&(m=this._moveNodeTo(n,n.parentObject,n.parentObject.childNodes[k-1]));break;case"down_strict":var k=this._getIndex(n),j=n.parentObject.childsCount-2;k==j?m=this._moveNodeTo(n,n.parentObject):k<j&&(m=this._moveNodeTo(n,n.parentObject,n.parentObject.childNodes[k+2]));break;case"down":k=this._getNextNode(this._lastChild(n));if(k==-1||!k.parentObject){return}k.parentObject==n.parentObject&&(k=this._getNextNode(k));if(k==-1){m=this._moveNodeTo(n,n.parentObject)}else{if(k==-1||!k.parentObject){return}m=this._moveNodeTo(n,k.parentObject,k)}}if(_isIE&&_isIE<8){this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"}return m};dhtmlXTreeObject.prototype._loadDynXML=function(e,d){var d=d||this.XMLsource,f=(new Date).valueOf();this._ld_id=e;this.loadXML(d+getUrlSymbol(d)+"uid="+f+"&id="+this._escape(e))};dhtmlXTreeObject.prototype._checkPNodes=function(d,c){return this._dcheckf?!1:c==d?1:d.parentObject?this._checkPNodes(d.parentObject,c):0};dhtmlXTreeObject.prototype.disableDropCheck=function(b){this._dcheckf=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.preventIECaching=function(b){this.no_cashe=convertStringToBoolean(b);this.XMLLoader.rSeed=this.no_cashe};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(e,d){var f=typeof e!="object"?this._globalIdStorageFind(e,0,1):e;if(f&&(f.dscheck=convertStringToBoolean(d)?(f.checkstate||0)%3+3:f.checkstate>2?f.checkstate-3:f.checkstate,this._setCheck(f),f.dscheck<3)){f.dscheck=!1}};dhtmlXTreeObject.prototype.setEscapingMode=function(b){this.utfesc=b};dhtmlXTreeObject.prototype.enableHighlighting=function(b){this.ehlt=!0;this.ehlta=convertStringToBoolean(b)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var d=this.childNodes[3].parentObject,c=d.treeNod;c.callEvent("onMouseOut",[d.id]);if(d.id==c._l_onMSI){c._l_onMSI=null}if(c.ehlta){d.span.className=d.span.className.replace("_lor","")}};dhtmlXTreeObject.prototype._itemMouseIn=function(){var d=this.childNodes[3].parentObject,c=d.treeNod;c._l_onMSI!=d.id&&c.callEvent("onMouseIn",[d.id]);c._l_onMSI=d.id;if(c.ehlta){d.span.className=d.span.className.replace("_lor",""),d.span.className=d.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor")}};dhtmlXTreeObject.prototype.enableActiveImages=function(b){this._aimgs=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.focusItem=function(d){var c=this._globalIdStorageFind(d);if(!c){return 0}this._focusNode(c)};dhtmlXTreeObject.prototype.getAllSubItems=function(b){return this._getAllSubItems(b)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){var g=f.childNodes[h].unParsed?this._getAllScraggyItemsXML(f.childNodes[h].unParsed,1):this._getAllScraggyItems(f.childNodes[h]);g&&(e?e+=this.dlmtr+g:e=g)}else{e?e+=this.dlmtr+f.childNodes[h].id:e=""+f.childNodes[h].id}}return e};dhtmlXTreeObject.prototype._getAllFatItems=function(f){for(var e="",h=0;h<f.childsCount;h++){if(f.childNodes[h].unParsed||f.childNodes[h].childsCount>0){e?e+=this.dlmtr+f.childNodes[h].id:e=""+f.childNodes[h].id;var g=f.childNodes[h].unParsed?this._getAllFatItemsXML(f.childNodes[h].unParsed,1):this._getAllFatItems(f.childNodes[h]);g&&(e+=this.dlmtr+g)}}return e};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(b){b&&(b=this._globalIdStorageFind(b));return this._getAllChecked(b,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var d=[this._getAllChecked("","",1)],c=this._getAllChecked("","",2);c&&d.push(c);return d.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(g,f,k){if(!g){g=this.htmlNode}g.checkstate==k&&(g.nocheckbox||(f?f+=this.dlmtr+g.id:f=""+g.id));for(var j=g.childsCount,h=0;h<j;h++){f=this._getAllChecked(g.childNodes[h],f,k)}return f?f:""};dhtmlXTreeObject.prototype.setItemStyle=function(f,e,h){var h=h||!1,g=this._globalIdStorageFind(f);if(!g){return 0}g.span.style.cssText?g.span.style.cssText=h?e:g.span.style.cssText+";"+e:g.span.setAttribute("style",g.span.getAttribute("style")+"; "+e)};dhtmlXTreeObject.prototype.enableImageDrag=function(b){this._itim_dg=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setOnDragIn=function(b){this.attachEvent("onDragIn",b)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(b){this.autoScroll=convertStringToBoolean(b)};dhtmlXTreeObject.prototype.setSkin=function(d){var c=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=c+" dhxtree_"+d;d=="dhx_terrace"&&this.enableTreeLines(!1)};(function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(b){return[b.parent,b.width||"100%",b.height||"100%",b.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})})();dhtmlXTreeObject.prototype._dp_init=function(b){b.attachEvent("insertCallback",function(g,l,k){var j=this._loader.doXPath(".//item",g),h=j[0].getAttribute("text");this.obj.insertNewItem(k,l,h,0,0,0,0,"CHILD")});b.attachEvent("updateCallback",function(g,l,k){var j=this._loader.doXPath(".//item",g),h=j[0].getAttribute("text");this.obj.setItemText(l,h);this.obj.getParentId(l)!=k&&this.obj.moveItem(l,"item_child",k);this.setUpdated(l,!0,"updated")});b.attachEvent("deleteCallback",function(d,e){this.obj.setUserData(e,this.action_param,"true_deleted");this.obj.deleteItem(e,!1)});b._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(a,d){a==3&&b.setUpdated(d,!0);return !0});this.attachEvent("onDrop",function(a,k,j,h,g){h==g&&b.setUpdated(a,!0)});this._onrdlh=function(a){var d=b.getState(a);if(d=="inserted"){return b.set_invalid(a,!1),b.setUpdated(a,!1),!0}if(d=="true_deleted"){return b.setUpdated(a,!1),!0}b.setUpdated(a,!0,"deleted");return !1};this._onradh=function(a){b.setUpdated(a,!0,"inserted")};b._getRowData=function(g){for(var l={},k=this.obj._globalIdStorageFind(g),j=k.parentObject,h=0,h=0;h<j.childsCount;h++){if(j.childNodes[h]==k){break}}l.tr_id=k.id;l.tr_pid=j.id;l.tr_order=h;l.tr_text=k.span.innerHTML;j=(k._userdatalist||"").split(",");for(h=0;h<j.length;h++){l[j[h]]=k.userData["t_"+j[h]]}return l}};dhtmlXTreeObject.prototype.makeDraggable=function(d,c){typeof d!="object"&&(d=document.getElementById(d));dragger=new dhtmlDragAndDropObject;dropper=new dhx_dragSomethingInTree;dragger.addDraggableItem(d,dropper);d.dragLanding=null;d.ondragstart=dropper._preventNsDrag;d.onselectstart=new Function("return false;");d.parentObject={};d.parentObject.img=d;d.parentObject.treeNod=dropper;dropper._customDrop=c};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(e){for(var d=document.getElementsByTagName("div"),f=0;f<d.length;f++){d[f].getAttribute("dragInDhtmlXTree")&&this.makeDragable(d[f],e)}};function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(d){var c=document.createElement("div");c.style.position="absolute";c.innerHTML=d.innerHTML||d.value;c.className="dragSpanDiv";return c};this._preventNsDrag=function(b){(b||window.event).cancelBubble=!0;b&&b.preventDefault&&b.preventDefault();return !1};this._nonTrivialNode=function(j,h,o,n){if(this._customDrop){return this._customDrop(j,n.img.id,h.id,o?o.id:null)}var m=n.img.getAttribute("image")||"",l=n.img.id||"new",k=n.img.getAttribute("text")||(_isIE?n.img.innerText:n.img.textContent);j[o?"insertNewNext":"insertNewItem"](o?o.id:h.id,l,k,"",m,m,m)}}dhtmlXTreeObject.prototype.enableItemEditor=function(b){this._eItEd=convertStringToBoolean(b);if(!this._eItEdFlag){this._edn_dblclick=this._edn_click_IE=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(d,e){this._edn_dblclick&&this._editItem(d,e);return !0}),this.setOnClickHandler(function(d,e){this._stopEditItem(d,e);this.ed_hist_clcik==d&&this._edn_click_IE&&this._editItem(d,e);this.ed_hist_clcik=d;return !0}),this._eItEdFlag=!0}};dhtmlXTreeObject.prototype.setOnEditHandler=function(b){this.attachEvent("onEdit",b)};dhtmlXTreeObject.prototype.setEditStartAction=function(d,c){this._edn_click_IE=convertStringToBoolean(d);this._edn_dblclick=convertStringToBoolean(c)};dhtmlXTreeObject.prototype._stopEdit=function(h,g){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=h)){var m=!0;g?(m=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):m=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]);if(m===!0){m=this._editCell.span.childNodes[0].value}else{if(m===!1){m=this._editCell._oldValue}}var l=m!=this._editCell._oldValue;this._editCell.span.innerHTML=m;this._editCell.label=this._editCell.span.innerHTML;var k=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=k;this._editCell.span.parentNode.className="standartTreeRow";this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px";this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var j=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell);this._editCell=null;g||this.callEvent("onEdit",[3,j,this,l]);this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}};dhtmlXTreeObject.prototype._stopEditItem=function(b){this._stopEdit(b)};dhtmlXTreeObject.prototype.stopEdit=function(b){this._editCell&&this._stopEdit(this._editCell.id+"_non",b)};dhtmlXTreeObject.prototype.editItem=function(b){this._editItem(b,this)};dhtmlXTreeObject.prototype._editItem=function(f){if(this._eItEd){this._stopEdit();var e=this._globalIdStorageFind(f);if(e){var h=this.callEvent("onEdit",[0,f,this,e.span.innerHTML]);if(h===!0){h=typeof e.span.innerText!="undefined"?e.span.innerText:e.span.textContent}else{if(h===!1){return}}this.dADTempOffEd=this.dADTempOff;this.dADTempOff=!1;this._editCell=e;e._oldValue=h;e.span.innerHTML="<input type='text' class='intreeeditRow' />";e.span.style.paddingRight=e.span.style.paddingLeft="0px";e.span.onclick=e.span.ondblclick=function(b){(b||event).cancelBubble=!0};e.span.childNodes[0].value=h;e.span.childNodes[0].onselectstart=function(b){return(b||event).cancelBubble=!0};e.span.childNodes[0].onmousedown=function(b){return(b||event).cancelBubble=!0};e.span.childNodes[0].focus();e.span.childNodes[0].focus();e.span.onclick=function(b){(b||event).cancelBubble=!0;return !1};e.span.className="";e.span.parentNode.className="";var g=this;e.span.childNodes[0].onkeydown=function(b){if(!b){b=window.event}b.keyCode==13?(b.cancelBubble=!0,g._stopEdit(window.undefined)):b.keyCode==27&&g._stopEdit(window.undefined,!0);(b||event).cancelBubble=!0};this.callEvent("onEdit",[1,f,this])}}};function jsonPointer(d,c){this.d=d;this.dp=c}jsonPointer.prototype={text:function(){var d=function(b){for(var g=[],f=0;f<b.length;f++){g.push("{"+c(b[f])+"}")}return g.join(",")},c=function(f){var b=[],a;for(a in f){typeof f[a]=="object"?a.length?b.push('"'+a+'":['+d(f[a])+"]"):b.push('"'+a+'":{'+c(f[a])+"}"):b.push('"'+a+'":"'+f[a]+'"')}return b.join(",")};return"{"+c(this.d)+"}"},get:function(b){return this.d[b]},exists:function(){return !!this.d},content:function(){return this.d.content},each:function(h,g,m){var l=this.d[h],k=new jsonPointer;if(l){for(var j=0;j<l.length;j++){k.d=l[j],g.apply(m,[k,j])}}},get_all:function(){return this.d},sub:function(b){return new jsonPointer(this.d[b],this.d)},sub_exists:function(b){return !!this.d[b]},each_x:function(j,h,o,n,m){var l=this.d[j],k=new jsonPointer(0,this.d);if(l){for(m=m||0;m<l.length;m++){if(l[m][h]&&(k.d=l[m],o.apply(n,[k,m])==-1)){break}}}},up:function(){return new jsonPointer(this.dp,this.d)},set:function(d,c){this.d[d]=c},clone:function(){return new jsonPointer(this.d,this.dp)},through:function(v,u,s,o,n){var m=this.d[v];if(m.length){for(var l=0;l<m.length;l++){if(m[l][u]!=null&&m[l][u]!=""&&(!s||m[l][u]==s)){var k=new jsonPointer(m[l],this.d);o.apply(n,[k,l])}var j=this.d;this.d=m[l];this.sub_exists(v)&&this.through(v,u,s,o,n);this.d=j}}}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var c=this;this.XMLLoader=new dtmlXMLLoaderObject(function(a,b,f,g,h){eval("var z="+h.xmlDoc.responseText);c.loadJSArray(z)},this,!0,this.no_cashe);if(b){this.XMLLoader.waitCall=b}this.XMLLoader.loadXML(a)};dhtmlXTreeObject.prototype.loadCSV=function(e,d){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var f=this;this.XMLLoader=new dtmlXMLLoaderObject(function(j,c,m,l,k){f.loadCSVString(k.xmlDoc.responseText)},this,!0,this.no_cashe);if(d){this.XMLLoader.waitCall=d}this.XMLLoader.loadXML(e)};dhtmlXTreeObject.prototype.loadJSArray=function(h,g){for(var m=[],l=0;l<h.length;l++){m[h[l][1]]||(m[h[l][1]]=[]),m[h[l][1]].push({id:h[l][0],text:h[l][2]})}var k={id:this.rootId},j=function(e,c){if(m[e.id]){e.item=m[e.id];for(var f=0;f<e.item.length;f++){c(e.item[f],c)}}};j(k,j);this.loadJSONObject(k,g)};dhtmlXTreeObject.prototype.loadCSVString=function(k,j){for(var u=[],s=k.split("\n"),o=0;o<s.length;o++){var n=s[o].split(",");u[n[1]]||(u[n[1]]=[]);u[n[1]].push({id:n[0],text:n[2]})}var m={id:this.rootId},l=function(e,c){if(u[e.id]){e.item=u[e.id];for(var f=0;f<e.item.length;f++){c(e.item[f],c)}}};l(m,l);this.loadJSONObject(m,j)};dhtmlXTreeObject.prototype.loadJSONObject=function(e,d){this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;var f=new jsonPointer(e);this._parse(f);this._p=f;d&&d()};dhtmlXTreeObject.prototype.loadJSON=function(a,b){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var c=this;this.XMLLoader=new dtmlXMLLoaderObject(function(a,b,f,g,h){try{eval("var t="+h.xmlDoc.responseText)}catch(i){dhtmlxError.throwError("LoadXML","Incorrect JSON",[h.xmlDoc,this]);return}var j=new jsonPointer(t);c._parse(j);c._p=j},this,!0,this.no_cashe);if(b){this.XMLLoader.waitCall=b}this.XMLLoader.loadXML(a)};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var e=['{"id":"'+this.rootId+'", "item":['],d=[],f=0;f<this.htmlNode.childsCount;f++){d.push(this._serializeItemJSON(this.htmlNode.childNodes[f]))}e.push(d.join(","));e.push("]}");return e.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(j){var h=[];if(j.unParsed){return j.unParsed.text()}var o=this._selected.length?this._selected[0].id:"",n=j.span.innerHTML,n=n.replace(/\"/g,'\\"',n);this._xfullXML?h.push('{ "id":"'+j.id+'", '+(this._getOpenState(j)==1?' "open":"1", ':"")+(o==j.id?' "select":"1",':"")+' "text":"'+n+'", "im0":"'+j.images[0]+'", "im1":"'+j.images[1]+'", "im2":"'+j.images[2]+'" '+(j.acolor?', "aCol":"'+j.acolor+'" ':"")+(j.scolor?', "sCol":"'+j.scolor+'" ':"")+(j.checkstate==1?', "checked":"1" ':j.checkstate==2?', "checked":"-1"':"")+(j.closeable?', "closeable":"1" ':"")+(this.XMLsource&&j.XMLload==0?', "child":"1" ':"")):h.push('{ "id":"'+j.id+'", '+(this._getOpenState(j)==1?' "open":"1", ':"")+(o==j.id?' "select":"1",':"")+' "text":"'+n+'"'+(this.XMLsource&&j.XMLload==0?', "child":"1" ':""));if(this._xuserData&&j._userdatalist){h.push(', "userdata":[');for(var m=j._userdatalist.split(","),l=[],k=0;k<m.length;k++){l.push('{ "name":"'+m[k]+'" , "content":"'+j.userData["t_"+m[k]]+'" }')}h.push(l.join(","));h.push("]")}if(j.childsCount){h.push(', "item":[');l=[];for(k=0;k<j.childsCount;k++){l.push(this._serializeItemJSON(j.childNodes[k]))}h.push(l.join(","));h.push("]\n")}h.push("}\n");return h.join("")};function dhtmlXTreeFromHTML(a){typeof a!="object"&&(a=document.getElementById(a));for(var b=a,c=b.id,d="",e=0;e<a.childNodes.length;e++){if(a.childNodes[e].nodeType=="1"){if(a.childNodes[e].tagName=="XMP"){for(var f=a.childNodes[e],g=0;g<f.childNodes.length;g++){d+=f.childNodes[g].data}}else{a.childNodes[e].tagName.toLowerCase()=="ul"&&(d=dhx_li2trees(a.childNodes[e],[],0))}break}}a.innerHTML="";var h=new dhtmlXTreeObject(a,"100%","100%",0),i=[];for(b in h){i[b.toLowerCase()]=b}for(var j=a.attributes,k=0;k<j.length;k++){if(j[k].name.indexOf("set")==0||j[k].name.indexOf("enable")==0){var l=j[k].name;h[l]||(l=i[j[k].name]);h[l].apply(h,j[k].value.split(","))}}if(typeof d=="object"){h.XMLloadingWarning=1;for(var m=0;m<d.length;m++){b=h.insertNewItem(d[m][0],d[m][3],d[m][1]),d[m][2]&&h._setCheck(b,d[m][2])}h.XMLloadingWarning=0;h.lastLoadedXMLId=0;h._redrawFrom(h)}else{h.loadXMLString("<tree id='0'>"+d+"</tree>")}window[c]=h;var n=a.getAttribute("oninit");n&&eval(n);return h}function dhx_init_trees(){for(var d=document.getElementsByTagName("div"),c=0;c<d.length;c++){d[c].className=="dhtmlxTree"&&dhtmlXTreeFromHTML(d[c])}}function dhx_li2trees(x,w,v){for(var u=0;u<x.childNodes.length;u++){var s=x.childNodes[u];if(s.nodeType==1&&s.tagName.toLowerCase()=="li"){for(var o="",n=null,m=s.getAttribute("checked"),l=0;l<s.childNodes.length;l++){var k=s.childNodes[l];k.nodeType==3?o+=k.data:k.tagName.toLowerCase()!="ul"?o+=dhx_outer_html(k):n=k}w[w.length]=[v,o,m,s.id||w.length+1];n&&(w=dhx_li2trees(n,w,s.id||w.length))}}return w}function dhx_outer_html(d){if(d.outerHTML){return d.outerHTML}var c=document.createElement("DIV");c.appendChild(d.cloneNode(!0));return c=c.innerHTML}window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees);function dhtmlXWindowsSngl(){}function dhtmlXWindowsBtn(){}function dhtmlXWindows(){if(window.dhtmlXContainer){this.engine="dhx";var e="_"+this.engine+"_Engine";if(this[e]){this[e]();this._isIPad=navigator.userAgent.search(/iPad/gi)>=0;var d=this;this.pathPrefix="dhxwins_";this.imagePath=dhtmlx.image_path||"codebase/imgs/";this.setImagePath=function(b){this.imagePath=b};this.skin=typeof dhtmlx!="undefined"&&typeof dhtmlx.skin=="string"?dhtmlx.skin:"dhx_skyblue";this.skinParams={dhx_black:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2},dhx_blue:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2},dhx_skyblue:{header_height:21,border_left_width:2,border_right_width:2,border_bottom_height:2}};this.setSkin=function(b){this.skin=b;this._engineRedrawSkin()};this.isWindow=function(g){var c=this.wins[g]!=null;return c};this.findByText=function(h){var g=[],j;for(j in this.wins){this.wins[j].getText().search(h,"gi")>=0&&(g[g.length]=this.wins[j])}return g};this.window=function(g){var c=null;this.wins[g]!=null&&(c=this.wins[g]);return c};this.forEachWindow=function(g){for(var c in this.wins){g(this.wins[c])}};this.getBottommostWindow=function(){var g=this.getTopmostWindow(),c;for(c in this.wins){this.wins[c].zi<g.zi&&(g=this.wins[c])}return g.zi!=0?g:null};this.getTopmostWindow=function(h){var g={zi:0},j;for(j in this.wins){this.wins[j].zi>g.zi&&(h==!0&&!this._isWindowHidden(this.wins[j])&&(g=this.wins[j]),h!=!0&&(g=this.wins[j]))}return g.zi!=0?g:null};this.wins={};for(var f in this.wins){delete this.wins[f]}this.autoViewport=!0;this._createViewport=function(){this.vp=document.body;this._clearVPCss();this.vp._css=String(this.vp.className).length>0?this.vp.className:"";this.vp.className+=" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.modalCoverI=document.createElement("IFRAME");this.modalCoverI.frameBorder="0";this.modalCoverI.className="dhx_modal_cover_ifr";this.modalCoverI.setAttribute("src","javascript:false;");this.modalCoverI.style.display="none";this.modalCoverI.style.zIndex=0;this.vp.appendChild(this.modalCoverI);this.modalCoverD=document.createElement("DIV");this.modalCoverD.className="dhx_modal_cover_dv";this.modalCoverD.style.display="none";this.modalCoverD.style.zIndex=0;this.vp.appendChild(this.modalCoverD);this._vpcover=document.createElement("DIV");this._vpcover.className="dhx_content_vp_cover";this._vpcover.style.display="none";this.vp.appendChild(this._vpcover);this._carcass=document.createElement("DIV");this._carcass.className="dhx_carcass_resmove";this._carcass.style.display="none";if(_isIE){this._carcass.innerHTML="<iframe border=0 frameborder=0 style='filter: alpha(opacity=0); width: 100%; height:100%; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index:1;'></iframe><div style='position: absolute; top: 0px; left: 0px; width: 100%; height: 100%;z-index:2;background:white;filter:alpha(opacity=0);opacity:0;'></div>",navigator.userAgent.indexOf("MSIE 10")>=0||this._carcass.childNodes[0].setAttribute("src","javascript:false;")}this._carcass.onselectstart=function(b){b=b||event;b.returnValue=!1};this.vp.appendChild(this._carcass)};this._clearVPCss=function(){this.vp.className=String(this.vp.className).replace(/[a-z_]{1,}/gi,function(b){return{dhtmlx_skin_dhx_skyblue:1,dhtmlx_skin_dhx_blue:1,dhtmlx_skin_dhx_black:1,dhtmlx_skin_dhx_web:1,dhtmlx_skin_dhx_terrace:1}[b]==1?"":b})};this._autoResizeViewport=function(){for(var k in this.wins){this.wins[k]._isFullScreened&&(this.wins[k].adjustContent(document.body,0,0,!1,0),this.wins[k].updateNestedObjects()),this.wins[k]._isMaximized&&this.wins[k].style.display!="none"&&(this._restoreWindow(k),this._maximizeWindow(k))}if(this.vp!=document.body&&this.autoViewport!=!1){for(k in this.vp.style.width=(_isIE?document.body.offsetWidth-4:window.innerWidth)+"px",this.vp.style.height=(_isIE?document.body.offsetHeight-4:window.innerHeight)+"px",this.wins){var j=this.wins[k],n=!1,m=!1;if(j.x>this.vp.offsetWidth-10){j.x=this.vp.offsetWidth-10,n=!0}var l=j._skinParams!=null?j._skinParams:this.skinParams[this.skin];if(j.y+l.header_height>this.vp.offsetHeight){j.y=this.vp.offsetHeight-l.header_height,m=!0}(n||m)&&this._engineRedrawWindowPos(j)}}};this.enableAutoViewport=function(b){if(this.vp==document.body&&(this.autoViewport=b,b==!1)){if(this.vp==document.body){document.body.className=this.vp._css}this.vp.removeChild(this.modalCoverI);this.vp.removeChild(this.modalCoverD);this.vp.removeChild(this._vpcover);this.vp.removeChild(this._carcass);this.vp=null;this.vp=document.createElement("DIV");this.vp.autocreated=!0;this.vp.className="dhtmlx_winviewport dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");this.vp.style.left="0px";this.vp.style.top="0px";document.body.appendChild(this.vp);this.vp.ax=0;this.vp.ay=0;this._autoResizeViewport();this.vp.appendChild(this.modalCoverI);this.vp.appendChild(this.modalCoverD);this.vp.appendChild(this._vpcover);this.vp.appendChild(this._carcass)}};this.attachViewportTo=function(b){if(this.autoViewport==!1){this.vp.removeChild(this.modalCoverI),this.vp.removeChild(this.modalCoverD),this.vp.removeChild(this._vpcover),this.vp.removeChild(this._carcass),this.vp!=document.body&&this.vp.parentNode.removeChild(this.vp),this.vp=null,this.vp=typeof b=="string"?document.getElementById(b):b,this.vp.autocreated=!1,this._clearVPCss(),this.vp.className+=" dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":""),this.vp.style.position="relative",this.vp.style.overflow="hidden",this.vp.ax=0,this.vp.ay=0,this.vp.appendChild(this.modalCoverI),this.vp.appendChild(this.modalCoverD),this.vp.appendChild(this._vpcover),this.vp.appendChild(this._carcass)}};this.setViewport=function(k,j,n,m,l){if(this.autoViewport==!1){this.vp.style.left=k+"px",this.vp.style.top=j+"px",this.vp.style.width=n+"px",this.vp.style.height=m+"px",l!=null&&l.appendChild(this.vp),this.vp.ax=getAbsoluteLeft(this.vp),this.vp.ay=getAbsoluteTop(this.vp)}};this._effects={move:!1,resize:!1};this.setEffect=function(g,c){this._effects[g]!=null&&typeof c=="boolean"&&(this._effects[g]=c)};this.getEffect=function(b){return this._effects[b]};this.createWindow=function(b,v,u,s,o){var n=document.createElement("DIV");n.className="dhtmlx_window_inactive";n.dir="ltr";for(var m in this.wins){if(this.wins[m].zi+=this.zIndexStep,this.wins[m].style.zIndex=this.wins[m].zi,this.iframeMode&&this.wins[m].ifr){this.wins[m].ifr.style.zIndex=this.wins[m].style.zIndex-1}}n.zi=this.zIndexStep;n.style.zIndex=n.zi;n.active=!1;n._isWindow=!0;n.isWindow=!0;n.w=Number(s);n.h=Number(o);n.x=v;n.y=u;this._engineFixWindowPosInViewport(n);n._isModal=!1;n._allowResize=!0;n.maxW="auto";n.maxH="auto";n.minW=200;n.minH=140;n.iconsPresent=!0;n.icons=[this.imagePath+this.pathPrefix+this.skin+"/active/icon_normal.gif",this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_normal.gif"];n._allowMove=!0;n._allowMoveGlobal=!0;n._allowResizeGlobal=!0;n._keepInViewport=!1;var l=this.skinParams[this.skin];n.idd=b;this.vp.appendChild(n);this._engineSetWindowBody(n);this._engineRedrawWindowPos(n);this._engineRedrawWindowSize(n);this._engineUpdateWindowIcon(n,n.icons[0]);this._engineDiableOnSelectInWindow(n,!0);this.wins[b]=n;dhtmlxEventable(n);this._engineGetWindowHeader(n)[this._isIPad?"ontouchstart":"onmousedown"]=function(g){var g=g||event,h=d.wins[this.idd];h.isOnTop()||h.bringToTop();if(!d._engineGetWindowHeaderState(h)&&d._engineCheckHeaderMouseDown(h,g)&&h._allowMove&&h._allowMoveGlobal){d._wasMoved=!1;h.moveOffsetX=h.x-(d._isIPad?g.touches[0].clientX:g.clientX);h.moveOffsetY=h.y-(d._isIPad?g.touches[0].clientY:g.clientY);d.movingWin=h;if(d._effects.move==!1){d._carcass.x=d.movingWin.x,d._carcass.y=d.movingWin.y,d._carcass.w=parseInt(d.movingWin.style.width)+(_isIE?0:-2),d._carcass.h=parseInt(d.movingWin.style.height)+(_isIE?0:-2),d._carcass.style.left=d._carcass.x+"px",d._carcass.style.top=d._carcass.y+"px",d._carcass.style.width=d._carcass.w+"px",d._carcass.style.height=d._carcass.h+"px",d._carcass.style.zIndex=d._getTopZIndex(!0)+1,d._carcass._keepInViewport=n._keepInViewport}d._blockSwitcher(!0);d._vpcover.style.zIndex=d.movingWin.style.zIndex-1;d._vpcover.style.display="";g.returnValue=!1;g.cancelBubble=!0;return !1}};this._engineGetWindowHeader(n).ondblclick=function(g){var h=d.wins[this.idd];if(d._engineCheckHeaderMouseDown(h,g||event)){h._allowResizeGlobal&&!h._isParked&&(h._isMaximized==!0?d._restoreWindow(h.idd):d._maximizeWindow(h.idd)),h=null}};n.setText=function(c){d._engineGetWindowLabel(this).innerHTML=c};n.getText=function(){return d._engineGetWindowLabel(this).innerHTML};n.getId=function(){return this.idd};n.show=function(){d._showWindow(this)};n.hide=function(){d._hideWindow(this)};n.minimize=function(){d._restoreWindow(this.idd)};n.maximize=function(){d._maximizeWindow(this.idd)};n.close=function(){d._closeWindow(this.idd)};n.park=function(){this._isParkedAllowed&&d._parkWindow(this.idd)};n.stick=function(){d._stickWindow(this.idd)};n.unstick=function(){d._unstickWindow(this.idd)};n.isSticked=function(){return this._isSticked};n.setIcon=function(g,h){d._setWindowIcon(n,g,h)};n.getIcon=function(){return d._getWindowIcon(this)};n.clearIcon=function(){d._clearWindowIcons(this)};n.restoreIcon=function(){d._restoreWindowIcons(this)};n.keepInViewport=function(c){this._keepInViewport=c};n.setModal=function(c){c==!0?d.modalWin!=null||d.modalWin==this||d._setWindowModal(this,!0):d.modalWin==this&&d._setWindowModal(this,!1)};n.isModal=function(){return this._isModal};n.isHidden=function(){return d._isWindowHidden(this)};n.isMaximized=function(){return this._isMaximized};n.isParked=function(){return this._isParked};n.allowPark=function(){d._allowParking(this)};n.denyPark=function(){d._denyParking(this)};n.isParkable=function(){return this._isParkedAllowed};n.allowResize=function(){d._allowReszieGlob(this)};n.denyResize=function(){d._denyResize(this)};n.isResizable=function(){return this._allowResizeGlobal};n.allowMove=function(){if(!this._isMaximized){this._allowMove=!0}this._allowMoveGlobal=!0};n.denyMove=function(){this._allowMoveGlobal=!1};n.isMovable=function(){return this._allowMoveGlobal};n.bringToTop=function(){d._bringOnTop(this);d._makeActive(this)};n.bringToBottom=function(){d._bringOnBottom(this)};n.isOnTop=function(){return d._isWindowOnTop(this)};n.isOnBottom=function(){return d._isWindowOnBottom(this)};n.setPosition=function(g,h){this.x=g;this.y=h;d._engineFixWindowPosInViewport(this);d._engineRedrawWindowPos(this)};n.getPosition=function(){return[this.x,this.y]};n.setDimension=function(g,h){if(g!=null){if(this.maxW!="auto"&&g>this.maxW){g=this.maxW}if(g<this.minW){g=this.minW}this.w=g}if(h!=null){if(this.maxH!="auto"&&h>this.maxH){h=this.maxH}if(h<this.minH){h=this.minH}this.h=h}d._fixWindowDimensionInViewport(this);d._engineFixWindowPosInViewport(this);d._engineRedrawWindowSize(this);this.updateNestedObjects()};n.getDimension=function(){return[this.w,this.h]};n.setMaxDimension=function(g,h){this.maxW=isNaN(g)?"auto":g;this.maxH=isNaN(h)?"auto":h;d._engineRedrawWindowSize(this)};n.getMaxDimension=function(){return[this.maxW,this.maxH]};n.setMinDimension=function(g,h){if(g!=null){this.minW=g}if(h!=null){this.minH=h}d._fixWindowDimensionInViewport(this);d._engineRedrawWindowPos(this)};n.getMinDimension=function(){return[this.minW,this.minH]};n._adjustToContent=function(g,h){d._engineAdjustWindowToContent(this,g,h)};n._doOnAttachMenu=function(){d._engineRedrawWindowSize(this);this.updateNestedObjects()};n._doOnAttachToolbar=function(){d._engineRedrawWindowSize(this);this.updateNestedObjects()};n._doOnAttachStatusBar=function(){d._engineRedrawWindowSize(this);this.updateNestedObjects()};n._doOnFrameMouseDown=function(){this.bringToTop()};n._doOnFrameContentLoaded=function(){d.callEvent("onContentLoaded",[this])};n.addUserButton=function(g,w,k,j){var h=d._addUserButton(this,g,w,k,j);return h};n.removeUserButton=function(c){c=String(c).toLowerCase();c=="minmax1"||c=="minmax2"||c=="park"||c=="close"||c=="stick"||c=="unstick"||c=="help"||btn!=null&&d._removeUserButton(this,c)};n.progressOn=function(){d._engineSwitchWindowProgress(this,!0)};n.progressOff=function(){d._engineSwitchWindowProgress(this,!1)};n.setToFullScreen=function(c){d._setWindowToFullScreen(this,c)};n.showHeader=function(){d._engineSwitchWindowHeader(this,!0)};n.hideHeader=function(){d._engineSwitchWindowHeader(this,!1)};n.progressOff();n.canStartResize=!1;n.onmousemove=function(h){if(_isIE&&this._isMaximized){return !0}var h=h||event,y=h.target||h.srcElement;String(y.className).search("dhtmlx_wins_resizer")<0&&(y=null);if(!this._allowResize||this._allowResizeGlobal==!1||!y){if(y&&y.style.cursor!="default"){y.style.cursor="default"}if(this.style.cursor!="default"){this.style.cursor="default"}this.canStartResize=!1;return !0}if(d.resizingWin==null&&d.movingWin==null&&!this._isParked){if(d._isIPad){var x=h.touches[0].clientX,w=h.touches[0].clientY}else{x=_isIE||_isOpera?h.offsetX:h.layerX,w=_isIE||_isOpera?h.offsetY:h.layerY}var k=d._engineAllowWindowResize(n,y,x,w);if(k==null){this.canStartResize=!1;if(y.style.cursor!="default"){y.style.cursor="default"}if(this.style.cursor!="default"){this.style.cursor="default"}}else{d.resizingDirs=k;var j={x:h.clientX,y:h.clientY};switch(d.resizingDirs){case"border_left":y.style.cursor="w-resize";this.resizeOffsetX=this.x-j.x;break;case"border_right":y.style.cursor="e-resize";this.resizeOffsetXW=this.x+this.w-j.x;break;case"border_top":y.style.cursor="n-resize";this.resizeOffsetY=this.y-j.y;break;case"border_bottom":y.style.cursor="n-resize";this.resizeOffsetYH=this.y+this.h-j.y;break;case"corner_left":y.style.cursor="sw-resize";this.resizeOffsetX=this.x-h.clientX;this.resizeOffsetYH=this.y+this.h-j.y;break;case"corner_up_left":y.style.cursor="nw-resize";this.resizeOffsetY=this.y-j.y;this.resizeOffsetX=this.x-j.x;break;case"corner_right":y.style.cursor="nw-resize";this.resizeOffsetXW=this.x+this.w-j.x;this.resizeOffsetYH=this.y+this.h-j.y;break;case"corner_up_right":y.style.cursor="sw-resize",this.resizeOffsetY=this.y-j.y,this.resizeOffsetXW=this.x+this.w-j.x}this.canStartResize=!0;this.style.cursor=y.style.cursor;h.cancelBubble=!0;return h.returnValue=!1}}};n.onmousedown=function(c){d._getActive()!=this&&d._makeActive(this);d._bringOnTop(this);if(this.canStartResize){d._blockSwitcher(!0);d.resizingWin=this;if(!d._effects.resize){d._carcass.x=d.resizingWin.x,d._carcass.y=d.resizingWin.y,d._carcass.w=Number(d.resizingWin.w)+(_isIE?0:-2),d._carcass.h=Number(d.resizingWin.h)+(_isIE?0:-2),d._carcass.style.left=d._carcass.x+"px",d._carcass.style.top=d._carcass.y+"px",d._carcass.style.width=d._carcass.w+"px",d._carcass.style.height=d._carcass.h+"px",d._carcass.style.zIndex=d._getTopZIndex(!0)+1,d._carcass.style.cursor=this.style.cursor,d._carcass._keepInViewport=this._keepInViewport,d._carcass.style.display=""}d._vpcover.style.zIndex=d.resizingWin.style.zIndex-1;d._vpcover.style.display="";this.vs[this.av].layout&&this.callEvent("_onBeforeTryResize",[this]);c=c||event}};this._addDefaultButtons(n.idd);n.button=function(g){var g=String(g).toLowerCase(),c=null;this.btns[g]!=null&&(c=this.btns[g]);return c};n.center=function(){d._centerWindow(this,!1)};n.centerOnScreen=function(){d._centerWindow(this,!0)};n._attachContent("empty",null);n._redraw=function(){d._engineRedrawWindowSize(this)};n.bringToTop();this._engineRedrawWindowSize(n);return this.wins[b]};this.zIndexStep=50;this._getTopZIndex=function(h){var g=0,j;for(j in this.wins){if(h==!0){if(this.wins[j].zi>g){g=this.wins[j].zi}}else{if(this.wins[j].zi>g&&!this.wins[j]._isSticked){g=this.wins[j].zi}}}return g};this.movingWin=null;this._moveWindow=function(j){if(this.movingWin!=null){if(!this.movingWin._allowMove||!this.movingWin._allowMoveGlobal){return}if(this._effects.move==!0){if(this._engineGetWindowHeader(this.movingWin).style.cursor!="move"){this._engineGetWindowHeader(this.movingWin).style.cursor="move"}this._wasMoved=!0;this.movingWin.x=(this._isIPad?j.touches[0].clientX:j.clientX)+this.movingWin.moveOffsetX;this.movingWin.y=(this._isIPad?j.touches[0].clientY:j.clientY)+this.movingWin.moveOffsetY;this._engineFixWindowPosInViewport(this.movingWin);this._engineRedrawWindowPos(this.movingWin)}else{if(this._carcass.style.display!=""){this._carcass.style.display=""}if(this._carcass.style.cursor!="move"){this._carcass.style.cursor="move"}if(this._engineGetWindowHeader(this.movingWin).style.cursor!="move"){this._engineGetWindowHeader(this.movingWin).style.cursor="move"}this._carcass.x=(this._isIPad?j.touches[0].clientX:j.clientX)+this.movingWin.moveOffsetX;this._carcass.y=(this._isIPad?j.touches[0].clientY:j.clientY)+this.movingWin.moveOffsetY;this._wasMoved=!0;this._engineFixWindowPosInViewport(this._carcass);this._carcass.style.left=this._carcass.x+"px";this._carcass.style.top=this._carcass.y+"px"}}if(this.resizingWin!=null&&this.resizingWin._allowResize){var h={x:j.clientX,y:j.clientY};if(this.resizingDirs=="border_left"||this.resizingDirs=="corner_left"||this.resizingDirs=="corner_up_left"){if(this._effects.resize){var l=h.x+this.resizingWin.resizeOffsetX,k=l>this.resizingWin.x?-1:1;newW=this.resizingWin.w+Math.abs(l-this.resizingWin.x)*k;newW<this.resizingWin.minW&&k<0?(this.resizingWin.x=this.resizingWin.x+this.resizingWin.w-this.resizingWin.minW,this.resizingWin.w=this.resizingWin.minW):(this.resizingWin.w=newW,this.resizingWin.x=l);this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin)}else{l=h.x+this.resizingWin.resizeOffsetX;k=l>this._carcass.x?-1:1;newW=this._carcass.w+Math.abs(l-this._carcass.x)*k;if(newW>this.resizingWin.maxW){newW=this.resizingWin.maxW,l=this._carcass.x+this._carcass.w-this.resizingWin.maxW}newW<this.resizingWin.minW&&k<0?(this._carcass.x=this._carcass.x+this._carcass.w-this.resizingWin.minW,this._carcass.w=this.resizingWin.minW):(this._carcass.w=newW,this._carcass.x=l);this._carcass.style.left=this._carcass.x+"px";this._carcass.style.width=this._carcass.w+"px"}}if(this.resizingDirs=="border_right"||this.resizingDirs=="corner_right"||this.resizingDirs=="corner_up_right"){if(this._effects.resize){l=h.x-(this.resizingWin.x+this.resizingWin.w)+this.resizingWin.resizeOffsetXW;newW=this.resizingWin.w+l;if(newW<this.resizingWin.minW){newW=this.resizingWin.minW}this.resizingWin.w=newW;this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin)}else{l=h.x-(this._carcass.x+this._carcass.w)+this.resizingWin.resizeOffsetXW;newW=this._carcass.w+l;if(newW<this.resizingWin.minW){newW=this.resizingWin.minW}if(this.resizingWin.maxW!="auto"&&newW>this.resizingWin.maxW){newW=this.resizingWin.maxW}this._carcass.w=newW;this._carcass.style.width=this._carcass.w+"px"}}if(this.resizingDirs=="border_bottom"||this.resizingDirs=="corner_left"||this.resizingDirs=="corner_right"){if(this._effects.resize){l=h.y-(this.resizingWin.y+this.resizingWin.h)+this.resizingWin.resizeOffsetYH;newH=this.resizingWin.h+l;if(newH<this.resizingWin.minH){newH=this.resizingWin.minH}this.resizingWin.h=newH;this._engineRedrawWindowPos(this.resizingWin);this._engineRedrawWindowSize(this.resizingWin)}else{l=h.y-(this._carcass.y+this._carcass.h)+this.resizingWin.resizeOffsetYH;newH=this._carcass.h+l;if(newH<this.resizingWin.minH){newH=this.resizingWin.minH}if(newH>this.resizingWin.maxH){newH=this.resizingWin.maxH}this._carcass.h=newH;this._carcass.style.height=this._carcass.h+"px"}}if((this.resizingDirs=="border_top"||this.resizingDirs=="corner_up_right"||this.resizingDirs=="corner_up_left")&&!this._effects.resize){l=h.y+this.resizingWin.resizeOffsetY;k=l>this.resizingWin.y?-1:1;newH=this.resizingWin.h+Math.abs(l-this.resizingWin.y)*k;if(newH>this.resizingWin.maxH){newH=this.resizingWin.maxH,l=this.resizingWin.y+this.resizingWin.h-this.resizingWin.maxH}newH<this.resizingWin.minH&&k<0?(this._carcass.y=this._carcass.y+this._carcass.h-this.resizingWin.minH,this._carcass.h=this.resizingWin.minH):(this._carcass.h=newH+(_isIE?0:-2),this._carcass.y=l);this._carcass.style.top=this._carcass.y+"px";this._carcass.style.height=this._carcass.h+"px"}}};this._stopMove=function(){if(this.movingWin!=null){if(this._effects.move){var b=this.movingWin;this.movingWin=null;this._blockSwitcher(!1);this._engineGetWindowHeader(b).style.cursor="";_isFF&&(b.h++,d._engineRedrawWindowPos(b),b.h--,d._engineRedrawWindowPos(b))}else{this._carcass.style.cursor="",this._carcass.style.display="none",b=this.movingWin,this._engineGetWindowHeader(b).style.cursor="",this.movingWin=null,this._blockSwitcher(!1),b.setPosition(parseInt(this._carcass.style.left),parseInt(this._carcass.style.top))}this._vpcover.style.display="none";this._wasMoved&&(b.checkEvent("onMoveFinish")?b.callEvent("onMoveFinish",[b]):this.callEvent("onMoveFinish",[b]));this._wasMoved=!1}if(this.resizingWin!=null){b=this.resizingWin,this.resizingWin=null,this._blockSwitcher(!1),this._effects.resize?b.updateNestedObjects():(this._carcass.style.display="none",b.setDimension(this._carcass.w+(_isIE?0:2),this._carcass.h+(_isIE?0:2)),b.setPosition(this._carcass.x,this._carcass.y)),b.vs[b.av].layout&&b.vs[b.av].layout.callEvent("onResize",[]),this._vpcover.style.display="none",b.checkEvent("onResizeFinish")?b.callEvent("onResizeFinish",[b]):this.callEvent("onResizeFinish",[b])}};this._fixWindowDimensionInViewport=function(b){if(b.w<b.minW){b.w=b.minW}if(!b._isParked&&b.h<b.minH){b.h=b.minH}};this._bringOnTop=function(j){var h=j.zi,l=this._getTopZIndex(j._isSticked),k;for(k in this.wins){if(this.wins[k]!=j&&(j._isSticked||!j._isSticked&&!this.wins[k]._isSticked)&&this.wins[k].zi>h){if(this.wins[k].zi-=this.zIndexStep,this.wins[k].style.zIndex=this.wins[k].zi,this.iframeMode&&this.wins[k].ifr){this.wins[k].ifr.style.zIndex=this.wins[k].style.zIndex-1}}}j.zi=l;j.style.zIndex=j.zi;if(this.iframeMode&&j.ifr){j.ifr.style.zIndex=l-1}};this._makeActive=function(j,h){for(var l in this.wins){if(this.wins[l]==j){var k=!1;this.wins[l].className!="dhtmlx_window_active"&&!h&&(k=!0);this.wins[l].className="dhtmlx_window_active";this._engineUpdateWindowIcon(this.wins[l],this.wins[l].icons[0]);k==!0&&(j.checkEvent("onFocus")?j.callEvent("onFocus",[j]):this.callEvent("onFocus",[j]))}else{this.wins[l].className="dhtmlx_window_inactive",this._engineUpdateWindowIcon(this.wins[l],this.wins[l].icons[1])}}};this._getActive=function(){var g=null,c;for(c in this.wins){this.wins[c].className=="dhtmlx_window_active"&&(g=this.wins[c])}return g};this._centerWindow=function(k,j){if(k._isMaximized!=!0){if(j==!0){var o=_isIE?document.body.offsetWidth:window.innerWidth,n=_isIE?document.body.offsetHeight:window.innerHeight}else{o=this.vp==document.body?document.body.offsetWidth:Number(parseInt(this.vp.style.width))&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.width):this.vp.offsetWidth,n=this.vp==document.body?document.body.offsetHeight:Number(parseInt(this.vp.style.height))&&String(this.vp.style.height).search("%")==-1?parseInt(this.vp.style.height):this.vp.offsetHeight}var m=Math.round(o/2-k.w/2),l=Math.round(n/2-k.h/2);k.x=m;k.y=l;this._engineFixWindowPosInViewport(k);this._engineRedrawWindowPos(k)}};this._addDefaultButtons=function(D){var C=this.wins[D],A=this._engineGetWindowButton(C,"stick");A.title=this.i18n.stick;A.isVisible=!1;A.style.display="none";A._isEnabled=!0;A.isPressed=!1;A.label="stick";A._doOnClick=function(){this.isPressed=!0;d._stickWindow(this.winId)};var y=this._engineGetWindowButton(C,"sticked");y.title=this.i18n.unstick;y.isVisible=!1;y.style.display="none";y._isEnabled=!0;y.isPressed=!1;y.label="sticked";y._doOnClick=function(){this.isPressed=!1;d._unstickWindow(this.winId)};var x=this._engineGetWindowButton(C,"help");x.title=this.i18n.help;x.isVisible=!1;x.style.display="none";x._isEnabled=!0;x.isPressed=!1;x.label="help";x._doOnClick=function(){d._needHelp(this.winId)};var w=this._engineGetWindowButton(C,"park");w.titleIfParked=this.i18n.parkdown;w.titleIfNotParked=this.i18n.parkup;w.title=w.titleIfNotParked;w.isVisible=!0;w._isEnabled=!0;w.isPressed=!1;w.label="park";w._doOnClick=function(){d._parkWindow(this.winId)};var v=this._engineGetWindowButton(C,"minmax1");v.title=this.i18n.maximize;v.isVisible=!0;v._isEnabled=!0;v.isPressed=!1;v.label="minmax1";v._doOnClick=function(){d._maximizeWindow(this.winId)};var u=this._engineGetWindowButton(C,"minmax2");u.title=this.i18n.restore;u.isVisible=!1;u.style.display="none";u._isEnabled=!0;u.isPressed=!1;u.label="minmax2";u._doOnClick=function(){d._restoreWindow(this.winId)};var s=this._engineGetWindowButton(C,"close");s.title=this.i18n.close;s.isVisible=!0;s._isEnabled=!0;s.isPressed=!1;s.label="close";s._doOnClick=function(){d._closeWindow(this.winId)};var o=this._engineGetWindowButton(C,"dock");o.title=this.i18n.dock;o.style.display="none";o.isVisible=!1;o._isEnabled=!0;o.isPressed=!1;o.label="dock";o._doOnClick=function(){};C._isSticked=!1;C._isParked=!1;C._isParkedAllowed=!0;C._isMaximized=!1;C._isDocked=!1;C.btns={};C.btns.stick=A;C.btns.sticked=y;C.btns.help=x;C.btns.park=w;C.btns.minmax1=v;C.btns.minmax2=u;C.btns.close=s;C.btns.dock=o;for(var b in C.btns){C.btns[b].winId=C.idd,this._attachEventsOnButton(C.idd,b)}C=A=y=x=w=v=u=s=o=null};this._attachEventsOnButton=function(b,h){var g=this.wins[b].btns[h];this._isIPad?(g.ontouchstart=function(c){c.cancelBubble=!0;return c.returnValue=!1},g.ontouchend=function(c){c.cancelBubble=!0;c.returnValue=!1;if(!this._isEnabled){return !1}this.checkEvent("onClick")?this.callEvent("onClick",[d.wins[this.winId],this]):this._doOnClick();return !1}):(g.onmouseover=function(){this.className=this._isEnabled?"dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_"+(this.isPressed?"pressed":"default"):"dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"},g.onmouseout=function(){this._isEnabled?(this.isPressed=!1,this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_default"):this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"},g.onmousedown=function(){this._isEnabled?(this.isPressed=!0,this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_pressed"):this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"},g.onmouseup=function(){if(this._isEnabled){var c=this.isPressed;this.isPressed=!1;this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_over_default";c&&(this.checkEvent("onClick")?this.callEvent("onClick",[d.wins[this.winId],this]):this._doOnClick())}else{this.className="dhtmlx_wins_btns_button dhtmlx_button_"+this.label+"_disabled"}});g.show=function(){d._showButton(d.wins[this.winId],this.label,!0)};g.hide=function(){d._hideButton(d.wins[this.winId],this.label,!0)};g.enable=function(){d._enableButton(d.wins[this.winId],this.label)};g.disable=function(){d._disableButton(d.wins[this.winId],this.label)};g.isEnabled=function(){return this._isEnabled};g.isHidden=function(){return !this.isVisible};dhtmlxEventable(g);g=null};this._parkWindow=function(j,h){var l=this.wins[j];if(l._isParkedAllowed||h){if(!this.enableParkEffect||!l.parkBusy){if(l._isParked){this.enableParkEffect&&!h?(l.parkBusy=!0,this._doParkDown(l)):(l.h=l.lastParkH,this._engineRedrawWindowSize(l),this._engineDoOnWindowParkDown(l),l.updateNestedObjects(),l.btns.park.title=l.btns.park.titleIfNotParked,l._allowResizeGlobal==!0&&(this._enableButton(l,"minmax1"),this._enableButton(l,"minmax2")),l._isParked=!1,h||(l.checkEvent("onParkDown")?l.callEvent("onParkDown",[l]):this.callEvent("onParkDown",[l])))}else{if(this.enableParkEffect&&!h){if(l.lastParkH=String(l.h).search(/\%$/)==-1?l.h:l.offsetHeight,l._allowResizeGlobal==!0&&(this._disableButton(l,"minmax1"),this._disableButton(l,"minmax2")),this.enableParkEffect){l.parkBusy=!0,this._doParkUp(l)}else{var k=l._skinParams!=null?l._skinParams:this.skinParams[this.skin];l.h=k.header_height+k.border_bottom_height;l.btns.park.title=l.btns.park.titleIfParked}}else{l.lastParkH=String(l.h).search(/\%$/)==-1?l.h:l.offsetHeight,l.h=this._engineGetWindowParkedHeight(l),this._engineRedrawWindowSize(l),this._engineDoOnWindowParkUp(l),l.btns.park.title=l.btns.park.titleIfParked,l._isParked=!0,h||(l.checkEvent("onParkUp")?l.callEvent("onParkUp",[l]):this.callEvent("onParkUp",[l]))}}l=null}}};this._allowParking=function(b){b._isParkedAllowed=!0;this._enableButton(b,"park")};this._denyParking=function(b){b._isParkedAllowed=!1;this._disableButton(b,"park")};this.enableParkEffect=!1;this.parkSpeed=this.parkStartSpeed=80;this.parkTM=null;this.parkTMTime=5;this._doParkUp=function(b){if(String(b.h).search(/\%$/)!=-1){b.h=b.offsetHeight}b.h-=this.parkSpeed;var g=this._engineGetWindowParkedHeight(b);b.h<=g?(b.h=g,this._engineGetWindowButton(b,"park").title=this._engineGetWindowButton(b,"park").titleIfParked,b._isParked=!0,b.parkBusy=!1,this._engineRedrawWindowSize(b),this._engineDoOnWindowParkUp(b),b.checkEvent("onParkUp")?b.callEvent("onParkUp",[b]):this.callEvent("onParkUp",[b])):(this._engineRedrawWindowSize(b),this.parkTM=window.setTimeout(function(){d._doParkUp(b)},this.parkTMTime))};this._doParkDown=function(b){b.h+=this.parkSpeed;b.h>=b.lastParkH?(b.h=b.lastParkH,this._engineGetWindowButton(b,"park").title=this._engineGetWindowButton(b,"park").titleIfNotParked,b._allowResizeGlobal==!0&&(this._enableButton(b,"minmax1"),this._enableButton(b,"minmax2")),b._isParked=!1,b.parkBusy=!1,this._engineRedrawWindowSize(b),b.updateNestedObjects(),this._engineDoOnWindowParkDown(b),b.checkEvent("onParkDown")?b.callEvent("onParkDown",[b]):this.callEvent("onParkDown",[b])):(this._engineRedrawWindowSize(b),this.parkTM=window.setTimeout(function(){d._doParkDown(b)},this.parkTMTime))};this._enableButton=function(h,g){var j=this._engineGetWindowButton(h,g);if(j){j._isEnabled=!0,j.className="dhtmlx_wins_btns_button dhtmlx_button_"+j.label+"_default",j=null}};this._disableButton=function(h,g){var j=this._engineGetWindowButton(h,g);if(j){j._isEnabled=!1,j.className="dhtmlx_wins_btns_button dhtmlx_button_"+h.btns[g].label+"_disabled",j=null}};this._allowReszieGlob=function(b){b._allowResizeGlobal=!0;this._enableButton(b,"minmax1");this._enableButton(b,"minmax2")};this._denyResize=function(b){b._allowResizeGlobal=!1;this._disableButton(b,"minmax1");this._disableButton(b,"minmax2")};this._maximizeWindow=function(h){var g=this.wins[h];if(g._allowResizeGlobal!=!1){var j=g._isParked;j&&this._parkWindow(g.idd,!0);g.lastMaximizeX=g.x;g.lastMaximizeY=g.y;g.lastMaximizeW=g.w;g.lastMaximizeH=g.h;g.maxW!="auto"&&g.maxW!="auto"?(g.x=Math.round(g.x+(g.w-g.maxW)/2),g.y=Math.round(g.y+(g.h-g.maxH)/2),g._allowMove=!0):(g.x=0,g.y=0,g._allowMove=!1);g._isMaximized=!0;g._allowResize=!1;g.w=g.maxW=="auto"?this.vp==document.body?"100%":this.vp.style.width!=""&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.width):this.vp.offsetWidth:g.maxW;g.h=g.maxH=="auto"?this.vp==document.body?"100%":this.vp.style.height!=""&&String(this.vp.style.width).search("%")==-1?parseInt(this.vp.style.height):this.vp.offsetHeight:g.maxH;this._hideButton(g,"minmax1");this._showButton(g,"minmax2");this._engineRedrawWindowPos(g);j?this._parkWindow(g.idd,!0):(this._engineRedrawWindowSize(g),g.updateNestedObjects());g.checkEvent("onMaximize")?g.callEvent("onMaximize",[g]):this.callEvent("onMaximize",[g]);g=null}};this._restoreWindow=function(h){var g=this.wins[h];if(g._allowResizeGlobal!=!1){g.layout&&g.layout._defineWindowMinDimension(g);var j=g._isParked;j&&this._parkWindow(g.idd,!0);g.maxW!="auto"&&g.maxW!="auto"?(g.x=Math.round(g.x+(g.w-g.lastMaximizeW)/2),g.y=Math.round(g.y+(g.h-g.lastMaximizeH)/2)):(g.x=g.lastMaximizeX,g.y=g.lastMaximizeY);g.w=g.lastMaximizeW;g.h=g.lastMaximizeH;g._isMaximized=!1;g._allowMove=g._allowMoveGlobal;g._allowResize=!0;this._fixWindowDimensionInViewport(g);this._hideButton(g,"minmax2");this._showButton(g,"minmax1");this._engineRedrawWindowPos(g);j?this._parkWindow(g.idd,!0):(this._engineRedrawWindowSize(g),g.updateNestedObjects());g.checkEvent("onMinimize")?g.callEvent("onMinimize",[g]):this.callEvent("onMinimize",[g]);g=null}};this._showButton=function(j,h,l){var k=this._engineGetWindowButton(j,h);if(k&&!(!l&&k._userHide||k.isVisible===!0)){k.isVisible=!0,k.style.display="",k.style.visibility="visible",k._userHide=l!=!0,this._engineRedrawWindowTitle(j),k=null}};this._hideButton=function(j,h,l){var k=this._engineGetWindowButton(j,h);if(k&&(l||k.isVisible!==!1)){k.isVisible=!1,k.style.display="none",k.style.visibility="hidden",k._userHide=l==!0,this._engineRedrawWindowTitle(j),k=null}};this._showWindow=function(g){g.style.display="";g.checkEvent("onShow")?g.callEvent("onShow",[g]):this.callEvent("onShow",[g]);var c=this._getActive();c==null?(this._bringOnTop(g),this._makeActive(g)):this._isWindowHidden(c)&&(this._bringOnTop(g),this._makeActive(g));if(this.iframeMode&&g.ifr){g.ifr.style.display=""}};this._hideWindow=function(g){g.style.display="none";g.checkEvent("onHide")?g.callEvent("onHide",[g]):this.callEvent("onHide",[g]);var c=this.getTopmostWindow(!0);c!=null&&(this._bringOnTop(c),this._makeActive(c));if(this.iframeMode&&g.ifr){g.ifr.style.display="none"}};this._isWindowHidden=function(g){var c=g.style.display=="none";return c};this._closeWindow=function(j){var h=this.wins[j];if(this._focusFixIE){this._focusFixIE.style.top=(this.vp==document.body?0:getAbsoluteTop(this.vp))+Number(h.y)+"px",this._focusFixIE.focus()}if(h.checkEvent("onClose")){if(!h.callEvent("onClose",[h])){return}}else{if(!this.callEvent("onClose",[h])){return}}h=null;this._removeWindowGlobal(j);var l={zi:0},k;for(k in this.wins){this.wins[k].zi>l.zi&&(l=this.wins[k])}l!=null&&this._makeActive(l)};this._needHelp=function(g){var c=this.wins[g];c.checkEvent("onHelp")?c.callEvent("onHelp",[c]):this.callEvent("onHelp",[c]);c=null};this._setWindowIcon=function(h,g,j){h.iconsPresent=!0;h.icons[0]=this.imagePath+g;h.icons[1]=this.imagePath+j;this._engineUpdateWindowIcon(h,h.icons[h.isOnTop()?0:1])};this._getWindowIcon=function(b){return b.iconsPresent?[b.icons[0],b.icons[1]]:[null,null]};this._clearWindowIcons=function(b){b.iconsPresent=!1;b.icons[0]=this.imagePath+this.pathPrefix+this.skin+"/active/icon_blank.gif";b.icons[1]=this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_blank.gif";this._engineUpdateWindowIcon(b,b.icons[b.isOnTop()?0:1])};this._restoreWindowIcons=function(b){b.iconsPresent=!0;b.icons[0]=this.imagePath+this.pathPrefix+this.skin+"/active/icon_normal.gif";b.icons[1]=this.imagePath+this.pathPrefix+this.skin+"/inactive/icon_normal.gif";this._engineUpdateWindowIcon(b,b.icons[b.className=="dhtmlx_window_active"?0:1])};this._attachWindowContentTo=function(k,j,n,m){var l=this._engineGetWindowContent(k).parentNode;l.parentNode.removeChild(l);k.hide();l.style.left="0px";l.style.top="0px";l.style.width=(n!=null?n:j.offsetWidth)+"px";l.style.height=(m!=null?m:j.offsetHeight)+"px";l.style.position="relative";j.appendChild(l);this._engineGetWindowContent(k).style.width=l.style.width;this._engineGetWindowContent(k).style.height=l.style.height};this._setWindowToFullScreen=function(g,c){if(c==!0&&!g._isFullScreened){g._p1=g.vs[g.av].dhxcont.nextSibling,g._p1.parentNode.removeChild(g.vs[g.av].dhxcont),g.hide(),g._isFullScreened=!0,g._FSoffsetHeight=g._offsetHeight,g._FSoffsetHeightSaved=g._offsetHeightSaved,g._FSoffsetLeft=g._offsetLeft,g._FSoffsetWidth=g._offsetWidth,g._offsetHeight=0,g._offsetHeightSaved=0,g._offsetLeft=0,g._offsetWidth=0,g.vs[g.av].dhxcont.style.position="absolute",document.body.appendChild(g.vs[g.av].dhxcont),g.adjustContent(document.body,0,0,!1,0),g.updateNestedObjects()}if(c==!1&&g._isFullScreened){g._p1.parentNode.insertBefore(g.vs[g.av].dhxcont,g._p1),g._p1=null,g._isFullScreened=!1,g._offsetHeight=g._FSoffsetHeight,g._offsetHeightSaved=g._FSoffsetHeightSaved,g._offsetLeft=g._FSoffsetLeft,g._offsetWidth=g._FSoffsetWidth,g._FSoffsetHeight=g._FSoffsetHeightSaved=g._FSoffsetLeft=g._FSoffsetWidth=null,g.show(),g.setDimension(g.w,g.h),g.bringToTop()}};this._isWindowOnTop=function(g){var c=this.getTopmostWindow()==g;return c};this._bringOnBottom=function(g){for(var c in this.wins){if(this.wins[c].zi<g.zi){this.wins[c].zi+=this.zIndexStep,this.wins[c].style.zIndex=this.wins[c].zi}}g.zi=50;g.style.zIndex=g.zi;this._makeActive(this.getTopmostWindow())};this._isWindowOnBottom=function(h){var g=!0,j;for(j in this.wins){this.wins[j]!=h&&(g=g&&this.wins[j].zi>h.zi)}return g};this._stickWindow=function(g){var c=this.wins[g];c._isSticked=!0;this._hideButton(c,"stick");this._showButton(c,"sticked");this._bringOnTop(c);c=null};this._unstickWindow=function(g){var c=this.wins[g];c._isSticked=!1;this._hideButton(c,"sticked");this._showButton(c,"stick");this._bringOnTopAnyStickedWindows();c=null};this._addUserButton=function(k,j,n,m){var j=String(j).toLowerCase(),l=this._engineAddUserButton(k,j,n);l.title=m;l.isVisible=!0;l._isEnabled=!0;l.isPressed=!1;l.label=j;k.btns[j]=l;k.btns[j].winId=k.idd;k.btns[j]._doOnClick=function(){};this._attachEventsOnButton(k.idd,j);l=null};this._removeUserButton=function(g,c){this._removeButtonGlobal(g,c)};this._blockSwitcher=function(g){for(var c in this.wins){g==!0?this.wins[c].showCoverBlocker():this.wins[c].hideCoverBlocker()}};this.modalWin=this.resizingWin=null;this.resizingDirs="none";if(_isIE){this._focusFixIE=document.createElement("INPUT"),this._focusFixIE.className="dhx_windows_ieonclosefocusfix",this._focusFixIE.style.position="absolute",this._focusFixIE.style.width="1px",this._focusFixIE.style.height="1px",this._focusFixIE.style.border="none",this._focusFixIE.style.background="none",this._focusFixIE.style.left="-10px",this._focusFixIE.style.fontSize="1px",document.body.appendChild(this._focusFixIE)}this._createViewport();this._doOnMouseUp=function(){d!=null&&d._stopMove()};this._doOnMoseMove=function(b){b=b||event;d!=null&&d._moveWindow(b)};this._resizeTM=null;this._resizeTMTime=200;this._lw=null;this._doOnResize=function(){if(d._lw!=document.documentElement.clientHeight){window.clearTimeout(d._resizeTM),d._resizeTM=window.setTimeout(function(){d._autoResizeViewport()},d._resizeTMTime)}d._lw=document.documentElement.clientHeight};this._doOnUnload=function(){d.unload()};this._doOnSelectStart=function(b){b=b||event;if(d.movingWin!=null||d.resizingWin!=null){b.returnValue=!1}};_isIE&&document.body.attachEvent("onselectstart",this._doOnSelectStart);dhtmlxEvent(window,"resize",this._doOnResize);dhtmlxEvent(document.body,"unload",this._doOnUnload);this._isIPad?(document.addEventListener("touchmove",this._doOnMoseMove,!1),document.addEventListener("touchend",this._doOnMouseUp,!1)):(dhtmlxEvent(document.body,"mouseup",this._doOnMouseUp),dhtmlxEvent(this.vp,"mousemove",this._doOnMoseMove),dhtmlxEvent(this.vp,"mouseup",this._doOnMouseUp));this._setWindowModal=function(g,c){c==!0?(this._makeActive(g),this._bringOnTop(g),this.modalWin=g,g._isModal=!0,this.modalCoverI.style.zIndex=g.zi-2,this.modalCoverI.style.display="",this.modalCoverD.style.zIndex=g.zi-2,this.modalCoverD.style.display=""):(this.modalWin=null,g._isModal=!1,this.modalCoverI.style.zIndex=0,this.modalCoverI.style.display="none",this.modalCoverD.style.zIndex=0,this.modalCoverD.style.display="none")};this._bringOnTopAnyStickedWindows=function(){var h=[],g;for(g in this.wins){this.wins[g]._isSticked&&(h[h.length]=this.wins[g])}for(var j=0;j<h.length;j++){this._bringOnTop(h[j])}if(h.length==0){for(g in this.wins){this.wins[g].className=="dhtmlx_window_active"&&this._bringOnTop(this.wins[g])}}};this.unload=function(){this._clearAll()};this._removeButtonGlobal=function(h,g){if(this.wins[h]&&this.wins[h].btns[g]){var j=this.wins[h].btns[g];j.title=null;j.isVisible=null;j._isEnabled=null;j.isPressed=null;j.label=null;j._doOnClick=null;j.detachAllEvents();j.attachEvent=null;j.callEvent=null;j.checkEvent=null;j.detachEvent=null;j.detachAllEvents=null;j.disable=null;j.enable=null;j.eventCatcher=null;j.hide=null;j.isEnabled=null;j.isHidden=null;j.show=null;j.onmousedown=null;j.onmouseout=null;j.onmouseover=null;j.onmouseup=null;j.ontouchstart=null;j.ontouchend=null;j.parentNode&&j.parentNode.removeChild(j);j=null;this.wins[h].btns[g]=null;delete this.wins[h].btns[g]}};this._removeWindowGlobal=function(j){var h=this.wins[j];this.modalWin==h&&this._setWindowModal(h,!1);if(this.iframeMode&&h.ifr){h.ifr.parentNode.removeChild(h.ifr),h.ifr=null}var l=h.coverBlocker(),l=l.onselectstart=null;this._engineDiableOnSelectInWindow(h,!1);h._dhxContDestruct();this._engineGetWindowHeader(h).onmousedown=null;this.resizingWin=this.movingWin=this._engineGetWindowHeader(h).ondblclick=null;for(var k in h.btns){this._removeButtonGlobal(h,k)}h.btns=null;h.detachAllEvents();h._adjustToContent=null;h._doOnAttachMenu=null;h._doOnAttachStatusBar=null;h._doOnAttachToolbar=null;h._doOnFrameMouseDown=null;h._doOnFrameContentLoaded=null;h._redraw=null;h.addUserButton=null;h.allowMove=null;h.allowPark=null;h.allowResize=null;h.attachEvent=null;h.bringToBottom=null;h.bringToTop=null;h.callEvent=null;h.center=null;h.centerOnScreen=null;h.checkEvent=null;h.clearIcon=null;h.close=null;h.denyMove=null;h.denyPark=null;h.denyResize=null;h.detachEvent=null;h.detachAllEvents=null;h.eventCatcher=null;h.getDimension=null;h.getIcon=null;h.getId=null;h.getMaxDimension=null;h.getMinDimension=null;h.getPosition=null;h.getText=null;h.hide=null;h.hideHeader=null;h.isHidden=null;h.isMaximized=null;h.isModal=null;h.isMovable=null;h.isOnBottom=null;h.isOnTop=null;h.isParkable=null;h.isParked=null;h.isResizable=null;h.isSticked=null;h.keepInViewport=null;h.maximize=null;h.minimize=null;h.park=null;h.progressOff=null;h.progressOn=null;h.removeUserButton=null;h.restoreIcon=null;h.setDimension=null;h.setIcon=null;h.setMaxDimension=null;h.setMinDimension=null;h.setModal=null;h.setPosition=null;h.setText=null;h.setToFullScreen=null;h.show=null;h.showHeader=null;h.stick=null;h.unstick=null;h.onmousemove=null;h.onmousedown=null;h.icons=null;h.button=null;h._dhxContDestruct=null;h.dhxContGlobal.obj=null;h.dhxContGlobal.setContent=null;h.dhxContGlobal.dhxcont=null;h.dhxContGlobal=null;if(h._frame){for(;h._frame.childNodes.length>0;){h._frame.removeChild(h._frame.childNodes[0])}h._frame=null}this._parseNestedForEvents(h);h._content=null;h.innerHTML="";h.parentNode.removeChild(h);h=null;this.wins[j]=null;delete this.wins[j]};this._removeEvents=function(b){b.onmouseover=null;b.onmouseout=null;b.onmousemove=null;b.onclick=null;b.ondblclick=null;b.onmouseenter=null;b.onmouseleave=null;b.onmouseup=null;b.onmousewheel=null;b.onmousedown=null;b.onselectstart=null;b.onfocus=null;b.style.display="";b=null};this._parseNestedForEvents=function(g){this._removeEvents(g);for(var c=0;c<g.childNodes.length;c++){g.childNodes[c].tagName!=null&&this._parseNestedForEvents(g.childNodes[c])}g=null};this._clearAll=function(){this._clearDocumentEvents();for(var b in this.wins){this._removeWindowGlobal(b)}this.wins=null;for(this._parseNestedForEvents(this._carcass);this._carcass.childNodes.length>0;){this._carcass.removeChild(this._carcass.childNodes[0])}this._carcass.onselectstart=null;this._carcass.parentNode.removeChild(this._carcass);this._carcass=null;this._parseNestedForEvents(this._vpcover);this._vpcover.parentNode.removeChild(this._vpcover);this._vpcover=null;this._parseNestedForEvents(this.modalCoverD);this.modalCoverD.parentNode.removeChild(this.modalCoverD);this.modalCoverD=null;this._parseNestedForEvents(this.modalCoverI);this.modalCoverI.parentNode.removeChild(this.modalCoverI);this.modalCoverI=null;this.vp.autocreated==!0&&this.vp.parentNode.removeChild(this.vp);this.vp=null;for(b in this.skinParams){delete this.skinParams[b]}d=this.window=this.unload=this.setViewport=this.setSkin=this.setImagePath=this.setEffect=this.isWindow=this.getTopmostWindow=this.getEffect=this.getBottommostWindow=this.forEachWindow=this.findByText=this.eventCatcher=this.enableAutoViewport=this.detachEvent=this.createWindow=this.checkEvent=this.callEvent=this.attachViewportTo=this.attachEvent=this._unstickWindow=this._stopMove=this._stickWindow=this._showWindow=this._showButton=this._setWindowToFullScreen=this._setWindowModal=this._setWindowIcon=this._restoreWindowIcons=this._restoreWindow=this._removeWindowGlobal=this._removeUserButton=this._removeEvents=this._removeButtonGlobal=this._parseNestedForEvents=this._parkWindow=this._needHelp=this._moveWindow=this._maximizeWindow=this._makeActive=this._isWindowOnTop=this._isWindowOnBottom=this._isWindowHidden=this._hideWindow=this._hideButton=this._getWindowIcon=this._getTopZIndex=this._getActive=this._genStr=this._fixWindowDimensionInViewport=this._engineUpdateWindowIcon=this._engineSwitchWindowProgress=this._engineSwitchWindowHeader=this._engineSetWindowBody=this._engineRedrawWindowTitle=this._engineRedrawWindowSize=this._engineRedrawWindowPos=this._engineRedrawSkin=this._engineGetWindowParkedHeight=this._engineGetWindowLabel=this._engineGetWindowHeaderState=this._engineGetWindowHeader=this._engineGetWindowContent=this._engineGetWindowButton=this._engineFixWindowPosInViewport=this._engineDoOnWindowParkUp=this._engineDoOnWindowParkDown=this._engineDiableOnSelectInWindow=this._engineCheckHeaderMouseDown=this._engineAllowWindowResize=this._engineAdjustWindowToContent=this._engineAddUserButton=this._enableButton=this._doParkUp=this._doParkDown=this._doOnUnload=this._doOnSelectStart=this._doOnResize=this._doOnMouseUp=this._doOnMoseMove=this._disableButton=this._dhx_Engine=this._denyResize=this._denyParking=this._createViewport=this._closeWindow=this._clearWindowIcons=this._clearDocumentEvents=this._clearAll=this._centerWindow=this._bringOnTopAnyStickedWindows=this._bringOnTop=this._bringOnBottom=this._blockSwitcher=this._autoResizeViewport=this._attachWindowContentTo=this._attachEventsOnButton=this._allowReszieGlob=this._allowParking=this._addUserButton=this._addDefaultButtons=this._engineSkinParams=this._effects=this.skinParams=null};this._clearDocumentEvents=function(){_isIE?(window.detachEvent("onresize",this._doOnResize),document.body.detachEvent("onselectstart",this._doOnSelectStart),document.body.detachEvent("onmouseup",this._doOnMouseUp),document.body.detachEvent("onunload",this._doOnUnload),this.vp.detachEvent("onmousemove",this._doOnMoseMove),this.vp.detachEvent("onmouseup",this._doOnMouseUp)):(window.removeEventListener("resize",this._doOnResize,!1),document.body.removeEventListener("mouseup",this._doOnMouseUp,!1),document.body.removeEventListener("unload",this._doOnUnload,!1),this.vp.removeEventListener("mousemove",this._doOnMoseMove,!1),this.vp.removeEventListener("mouseup",this._doOnMouseUp,!1))};this._genStr=function(j){for(var h="",l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",k=0;k<j;k++){h+=l.charAt(Math.round(Math.random()*(l.length-1)))}return h};dhtmlxEventable(this);return this}else{alert(this.i18n.noenginealert)}}else{alert(this.i18n.dhx)}}dhtmlXWindows.prototype._dhx_Engine=function(){this._engineEnabled=!0;this._engineName="dhx";this._engineSkinParams={dhx_blue:{hh:21,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:null,noh_h:null},dhx_black:{hh:21,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:null,noh_h:null},dhx_skyblue:{hh:29,lbw:2,rbw:2,lch:2,lcw:14,rch:14,rcw:14,bbh:2,mnh:23,tbh:25,sbh:20,noh_t:5,noh_h:-10},dhx_web:{hh:27,lbw:5,rbw:5,lch:5,lcw:14,rch:14,rcw:14,bbh:5,mnh:23,tbh:25,sbh:20,noh_t:5,noh_h:-10},dhx_terrace:{hh:37,lbw:5,rbw:5,lch:5,lcw:14,rch:14,rcw:14,bbh:5,mnh:23,tbh:25,sbh:20,noh_t:5,noh_h:-10}};this._isIE6=!1;if(_isIE){this._isIE6=window.XMLHttpRequest==null?!0:!1}this._engineSetWindowBody=function(d){d.innerHTML="<div iswin='1' class='dhtmlx_wins_body_outer' style='position: relative;'>"+(this._isIE6?"<iframe src='javascript:false;' frameborder='0' class='dhtmlx_wins_ie6_cover_fix' onload='this.contentWindow.document.body.style.overflow=\"hidden\";'></iframe>":"")+"<div class='dhtmlx_wins_icon'></div><div class='dhtmlx_wins_progress'></div><div class='dhtmlx_wins_title'>dhtmlxWindow</div><div class='dhtmlx_wins_btns'><div class='dhtmlx_wins_btns_button dhtmlx_button_sticked_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_stick_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_help_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_park_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax2_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_minmax1_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_close_default'></div><div class='dhtmlx_wins_btns_button dhtmlx_button_dock_default'></div></div><div class='dhtmlx_wins_body_inner'></div><div winResT='yes' class='dhtmlx_wins_resizer_t' style='display:none;'></div><div winResL='yes' class='dhtmlx_wins_resizer_l'></div><div winResR='yes' class='dhtmlx_wins_resizer_r'></div><div winResB='yes' class='dhtmlx_wins_resizer_b'></div><div class='white_line'></div><div class='white_line2'></div></div>";d.dhxContGlobal=new dhtmlXContainer(d);if(this.skin=="dhx_skyblue"){d.dhxContGlobal.obj._offsetWidth=-10,d.dhxContGlobal.obj._offsetHeight=-5,d.dhxContGlobal.obj._offsetLeft=5,d.dhxContGlobal.obj._offsetHeightSaved=d.dhxContGlobal.obj._offsetHeight}if(this.skin=="dhx_web"){d.dhxContGlobal.obj._offsetWidth=-10,d.dhxContGlobal.obj._offsetHeight=-5,d.dhxContGlobal.obj._offsetLeft=5,d.dhxContGlobal.obj._offsetHeightSaved=d.dhxContGlobal.obj._offsetHeight}d.skin=this.skin;d.dhxContGlobal.setContent(d.childNodes[0].childNodes[this._isIE6?5:4]);var c=d.coverBlocker();c.onselectstart=function(b){b=b||event;b.returnValue=!1;b.cancelBubble=!0};c=null;if(this.iframeMode){d.ifr=document.createElement("IFRAME"),d.ifr.style.position="absolute",d.ifr.style.left=d.style.left,d.ifr.style.top=d.style.top,d.ifr.style.width=d.style.width,d.ifr.style.height=d.style.height,d.ifr.style.zIndex=d.style.zIndex-1,d.ifr.style.backgroundColor="white",d.ifr.frameBorder=0,d.ifr.setAttribute("src","javascript:false;"),d.parentNode.appendChild(d.ifr)}};this._engineDiableOnSelectInWindow=function(f,e){var h=[];h[0]=f.childNodes[0].childNodes[this._isIE6?1:0];h[1]=f.childNodes[0].childNodes[this._isIE6?2:1];h[2]=f.childNodes[0].childNodes[this._isIE6?3:2];h[3]=f.childNodes[0].childNodes[this._isIE6?4:3];h[4]=f.childNodes[0].childNodes[this._isIE6?6:5];h[5]=f.childNodes[0].childNodes[this._isIE6?7:6];h[6]=f.childNodes[0].childNodes[this._isIE6?8:7];h[7]=f.childNodes[0].childNodes[this._isIE6?9:8];for(var g=0;g<h.length;g++){h[g].onselectstart=e?function(b){b=b||event;return b.returnValue=!1}:null,h[g]=null}h=null};this._engineGetWindowHeader=function(b){b.childNodes[0].idd=b.idd;return b.childNodes[0]};this._engineRedrawWindowSize=function(f){f.style.width=String(f.w).search("%")==-1?f.w+"px":f.w;f.style.height=String(f.h).search("%")==-1?f.h+"px":f.h;var e=f.childNodes[0];e.style.width=f.clientWidth+"px";e.style.height=f.clientHeight+"px";if(e.offsetWidth>f.clientWidth){e.style.width=f.clientWidth*2-e.offsetWidth+"px"}if(e.offsetHeight>f.clientHeight){var h=f.clientHeight*2-e.offsetHeight;h<0&&(h=0);e.style.height=h+"px"}var g=f._noHeader==!0?f._hdrSize:this._engineSkinParams[this.skin].hh;if(this.iframeMode&&f.ifr){f.ifr.style.width=f.style.width,f.ifr.style.height=f.style.height}this._engineRedrawWindowTitle(f);f.adjustContent(e,g)};this._engineRedrawWindowPos=function(b){if(!b._isFullScreened&&(b.style.left=b.x+"px",b.style.top=b.y+"px",this.iframeMode&&b.ifr)){b.ifr.style.top=b.style.top,b.ifr.style.left=b.style.left}};this._engineFixWindowPosInViewport=function(d){var c=d._noHeader==!0?d._hdrSize:this._engineSkinParams[this.skin].hh;if(d._keepInViewport){if(d.x<0){d.x=0}if(d.x+d.w>this.vp.offsetWidth){d.x=this.vp.offsetWidth-d.w}if(d.y+d.h>this.vp.offsetHeight){d.y=this.vp.offsetHeight-d.h}if(d.y<0){d.y=0}}else{if(d.y+c>this.vp.offsetHeight){d.y=this.vp.offsetHeight-c}if(d.y<0){d.y=0}if(d.x+d.w-10<0){d.x=10-d.w}if(d.x>this.vp.offsetWidth-10){d.x=this.vp.offsetWidth-10}}};this._engineCheckHeaderMouseDown=function(h,g){if(this._isIPad){var m=g.touches[0].clientX,l=g.touches[0].clientY,k=g.target||g.srcElement;return k==h.childNodes[0]||k==h.childNodes[0].childNodes[0]||k==h.childNodes[0].childNodes[2]||k==h.childNodes[0].childNodes[3]?!0:!1}else{m=_isIE||_isOpera?g.offsetX:g.layerX,l=_isIE||_isOpera?g.offsetY:g.layerY,k=g.target||g.srcElement}var j=h._noHeader==!0?h._hdrSize:this._engineSkinParams[this.skin].hh;return l<=j&&(k==h.childNodes[0]||k==h.childNodes[0].childNodes[this._isIE6?1:0]||k==h.childNodes[0].childNodes[this._isIE6?3:2]||k==h.childNodes[0].childNodes[this._isIE6?4:3])?!0:!1};this._engineGetWindowContent=function(){alert("_engineGetWindowContent")};this._engineGetWindowButton=function(h,g){for(var g=String(g).toLowerCase(),m=null,l="dhtmlx_button_"+g+"_",k=0;k<h.childNodes[0].childNodes[this._isIE6?4:3].childNodes.length;k++){var j=h.childNodes[0].childNodes[this._isIE6?4:3].childNodes[k];String(j.className).search(l)!=-1&&(m=j);j=null}return m};this._engineAddUserButton=function(g,f,k){isNaN(k)&&(k=0);var j=document.createElement("DIV");j.className="dhtmlx_wins_btns_button dhtmlx_button_"+f+"_default";var h=g.childNodes[0].childNodes[this._isIE6?4:3],k=h.childNodes.length-k;k<0&&(k=0);k>=h.childNodes.length?h.appendChild(j):h.insertBefore(j,h.childNodes[k]);this._engineRedrawWindowTitle(g);return j};this._engineGetWindowParkedHeight=function(){return this._engineSkinParams[this.skin].hh+1};this._engineDoOnWindowParkDown=function(b){b.childNodes[0].childNodes[this._isIE6?6:5].style.display=b._noHeader==!0?"":"none";b.childNodes[0].childNodes[this._isIE6?7:6].style.display="";b.childNodes[0].childNodes[this._isIE6?8:7].style.display="";b.childNodes[0].childNodes[this._isIE6?9:8].style.display=""};this._engineDoOnWindowParkUp=function(b){b.childNodes[0].childNodes[this._isIE6?6:5].style.display="none";b.childNodes[0].childNodes[this._isIE6?7:6].style.display="none";b.childNodes[0].childNodes[this._isIE6?8:7].style.display="none";b.childNodes[0].childNodes[this._isIE6?9:8].style.display="none"};this._engineUpdateWindowIcon=function(d,c){d.childNodes[0].childNodes[this._isIE6?1:0].style.backgroundImage="url('"+c+"')"};this._engineAllowWindowResize=function(h,g,m,l){if(g.getAttribute){var k=this._engineSkinParams[this.skin],j=h._noHeader==!0?h._hdrSize:this._engineSkinParams[this.skin].hh;return g.getAttribute("winResL")!=null&&g.getAttribute("winResL")=="yes"&&l>=j?l>=h.h-k.lch?"corner_left":l<=k.lch&&h._noHeader==!0?"corner_up_left":"border_left":g.getAttribute("winResR")!=null&&g.getAttribute("winResR")=="yes"&&l>=j?l>=h.h-k.rch?"corner_right":l<=k.rch&&h._noHeader==!0?"corner_up_right":"border_right":g.getAttribute("winResT")!=null&&g.getAttribute("winResT")=="yes"&&h._noHeader==!0?m<=k.lcw?"corner_up_left":m>=h.w-k.rcw?"corner_up_right":"border_top":g.getAttribute("winResB")!=null&&g.getAttribute("winResB")=="yes"?m<=k.lcw?"corner_left":m>=h.w-k.rcw?"corner_right":"border_bottom":null}};this._engineAdjustWindowToContent=function(g,f,k){var j=f+g.w-g.vs[g.av].dhxcont.clientWidth,h=k+g.h-g.vs[g.av].dhxcont.clientHeight;g.setDimension(j,h)};this._engineRedrawSkin=function(){this.vp.className=(this.vp==document.body&&this.vp._css?this.vp._css+" ":"")+"dhtmlx_winviewport dhtmlx_skin_"+this.skin+(this._r?" dhx_wins_rtl":"");var d=this._engineSkinParams[this.skin],c;for(c in this.wins){this.skin=="dhx_skyblue"?(this.wins[c].dhxContGlobal.obj._offsetTop=this.wins[c]._noHeader?d.noh_t:null,this.wins[c].dhxContGlobal.obj._offsetWidth=-10,this.wins[c].dhxContGlobal.obj._offsetHeight=this.wins[c]._noHeader?d.noh_h:-5,this.wins[c].dhxContGlobal.obj._offsetLeft=5,this.wins[c].dhxContGlobal.obj._offsetHeightSaved=-5):(this.wins[c].dhxContGlobal.obj._offsetWidth=null,this.wins[c].dhxContGlobal.obj._offsetHeight=null,this.wins[c].dhxContGlobal.obj._offsetLeft=null,this.wins[c].dhxContGlobal.obj._offsetTop=null,this.wins[c].dhxContGlobal.obj._offsetHeightSaved=null),this.wins[c].skin=this.skin,this._restoreWindowIcons(this.wins[c]),this._engineRedrawWindowSize(this.wins[c])}};this._engineSwitchWindowProgress=function(d,c){c==!0?(d.childNodes[0].childNodes[this._isIE6?1:0].style.display="none",d.childNodes[0].childNodes[this._isIE6?2:1].style.display=""):(d.childNodes[0].childNodes[this._isIE6?2:1].style.display="none",d.childNodes[0].childNodes[this._isIE6?1:0].style.display="")};this._engineSwitchWindowHeader=function(e,d){if(!e._noHeader){e._noHeader=!1}if(d==e._noHeader){e._noHeader=d==!0?!1:!0;e._hdrSize=0;e.childNodes[0].childNodes[this._isIE6?5:4].className="dhtmlx_wins_body_inner"+(e._noHeader?" dhtmlx_wins_no_header":"");e.childNodes[0].childNodes[this._isIE6?6:5].style.display=e._noHeader?"":"none";e.childNodes[0].childNodes[this._isIE6?1:0].style.display=e._noHeader?"none":"";e.childNodes[0].childNodes[this._isIE6?3:2].style.display=e._noHeader?"none":"";e.childNodes[0].childNodes[this._isIE6?4:3].style.display=e._noHeader?"none":"";var f=this._engineSkinParams[this.skin];e._noHeader?(e.dhxContGlobal.obj._offsetHeightSaved=e.dhxContGlobal.obj._offsetHeight,e.dhxContGlobal.obj._offsetHeight=f.noh_h,e.dhxContGlobal.obj._offsetTop=f.noh_t):(e.dhxContGlobal.obj._offsetHeight=e.dhxContGlobal.obj._offsetHeightSaved,e.dhxContGlobal.obj._offsetTop=null);this._engineRedrawWindowSize(e)}};this._engineGetWindowHeaderState=function(b){return b._noHeader?!0:!1};this._engineGetWindowLabel=function(b){return b.childNodes[0].childNodes[this._isIE6?3:2]};this._engineRedrawWindowTitle=function(f){if(f._noHeader!==!0){var e=f.childNodes[0].childNodes[this._isIE6?1:0].offsetWidth,h=f.childNodes[0].childNodes[this._isIE6?4:3].offsetWidth,g=f.offsetWidth-e-h-24;g<0?g="100%":g+="px";f.childNodes[0].childNodes[this._isIE6?3:2].style.width=g}}};dhtmlXWindows.prototype.i18n={dhxcontaler:"dhtmlxcontainer.js is missed on the page",noenginealert:"No dhtmlxWindows engine was found.",stick:"Stick",unstick:"Unstick",help:"Help",parkdown:"Park Down",parkup:"Park Up",maximize:"Maximize",restore:"Restore",close:"Close",dock:"Dock"};(function(){dhtmlx.extend_api("dhtmlXWindows",{_init:function(){return[]},_patch:function(a){a.old_createWindow=a.createWindow;a.createWindow=function(c){if(arguments.length>1){return this.old_createWindow.apply(this,arguments)}var g=this.old_createWindow(c.id,c.x||c.left,c.y||c.top,c.width,c.height);g.allowMoveA=function(d){d?this.allowMove():this.denyMove()};g.allowParkA=function(d){d?this.allowPark():this.denyPark()};g.allowResizeA=function(d){d?this.allowResize():this.denyResize()};for(var f in c){if(b[f]){g[b[f]](c[f])}else{f.indexOf("on")==0&&g.attachEvent(f,c[f])}}return g}},animation:"setEffect",image_path:"setImagePath",skin:"setSkin",viewport:"_viewport",wins:"_wins"},{_viewport:function(c){c.object?(this.enableAutoViewport(!1),this.attachViewportTo(c.object)):(this.enableAutoViewport(!1),this.setViewport(c.left,c.top,c.width,c.height,c.parent))},_wins:function(e){for(var g=0;g<e.length;g++){var f=e[g];this.createWindow(f.id,f.left,f.top,f.width,f.height);f.text&&this.window(f.id).setText(f.text);f.keep_in_viewport&&this.window(f.id).keepInViewport(!0);f.deny_resize&&this.window(f.id).denyResize();f.deny_park&&this.window(f.id).denyPark();f.deny_move&&this.window(f.id).denyMove()}}});var b={move:"allowMoveA",park:"allowParkA",resize:"allowResizeA",center:"center",modal:"setModal",caption:"setText",header:"showHeader"}})();window.dhtmlx||(dhtmlx={});dhtmlx.version="3.0";dhtmlx.codebase="./";dhtmlx.copy=function(d){var c=dhtmlx.copy.hb;c.prototype=d;return new c};dhtmlx.copy.hb=function(){};dhtmlx.extend=function(e,d){for(var f in d){e[f]=d[f]}d.p&&e.p();return e};dhtmlx.proto_extend=function(){for(var h=arguments,g=h[0],m=[],l=h.length-1;l>0;l--){if(typeof h[l]=="function"){h[l]=h[l].prototype}for(var k in h[l]){k=="_init"?m.push(h[l][k]):g[k]||(g[k]=h[l][k])}}h[0].p&&m.push(h[0].p);g.p=function(){for(var b=0;b<m.length;b++){m[b].apply(this,arguments)}};g.base=h[1];var j=function(b){this.p(b);this.J&&this.J(b,this.defaults)};j.prototype=g;g=h=null;return j};dhtmlx.bind=function(d,c){return function(){return d.apply(c,arguments)}};dhtmlx.require=function(b){dhtmlx.A[b]||(dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+b).responseText),dhtmlx.A[b]=!0)};dhtmlx.A={};dhtmlx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};dhtmlx.methodPush=function(d,c){return function(){var a=!1;return a=d[c].apply(d,arguments)}};dhtmlx.isNotDefined=function(b){return typeof b=="undefined"};dhtmlx.delay=function(f,e,h,g){setTimeout(function(){var a=f.apply(e,h);f=e=h=null;return a},g||1)};dhtmlx.uid=function(){if(!this.W){this.W=(new Date).valueOf()}this.W++;return this.W};dhtmlx.toNode=function(b){return typeof b=="string"?document.getElementById(b):b};dhtmlx.toArray=function(b){return dhtmlx.extend(b||[],dhtmlx.PowerArray)};dhtmlx.toFunctor=function(a){return typeof a=="string"?eval(a):a};dhtmlx.q={};dhtmlx.event=function(g,f,k,j){var g=dhtmlx.toNode(g),h=dhtmlx.uid();dhtmlx.q[h]=[g,f,k];j&&(k=dhtmlx.bind(k,j));g.addEventListener?g.addEventListener(f,k,!1):g.attachEvent&&g.attachEvent("on"+f,k);return h};dhtmlx.eventRemove=function(d){if(d){var c=dhtmlx.q[d];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]);delete this.q[d]}};dhtmlx.EventSystem={p:function(){this.q={};this.ba={};this.U={}},block:function(){this.q.ka=!0},unblock:function(){this.q.ka=!1},mapEvent:function(b){dhtmlx.extend(this.U,b)},callEvent:function(g,f){if(this.q.ka){return !0}var g=g.toLowerCase(),k=this.q[g.toLowerCase()],j=!0;if(k){for(var h=0;h<k.length;h++){if(k[h].apply(this,f||[])===!1){j=!1}}}this.U[g]&&!this.U[g].callEvent(g,f)&&(j=!1);return j},attachEvent:function(f,e,h){var f=f.toLowerCase(),h=h||dhtmlx.uid(),e=dhtmlx.toFunctor(e),g=this.q[f]||dhtmlx.toArray();g.push(e);this.q[f]=g;this.ba[h]={f:e,t:f};return h},detachEvent:function(f){if(this.ba[f]){var e=this.ba[f].t,h=this.ba[f].f,g=this.q[e];g.remove(h);delete this.ba[f]}}};dhtmlx.PowerArray={removeAt:function(d,c){d>=0&&this.splice(d,c||1)},remove:function(b){this.removeAt(this.find(b))},insertAt:function(e,d){if(!d&&d!==0){this.push(e)}else{var f=this.splice(d,this.length-d);this[d]=e;this.push.apply(this,f)}},find:function(b){for(i=0;i<this.length;i++){if(b==this[i]){return i}}return -1},each:function(e,d){for(var f=0;f<this.length;f++){e.call(d||this,this[f])}},map:function(e,d){for(var f=0;f<this.length;f++){this[f]=e.call(d||this,this[f])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx.Bd=!0}else{dhtmlx.z=!!document.all;dhtmlx.hc=!document.all;dhtmlx.Cd=navigator.userAgent.indexOf("KHTML")!=-1;if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx.z=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx.z=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=!1;dhtmlx.env.transition=!1;for(var f={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","oTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","oTransition"]},e=document.createElement("DIV"),h,g=0;g<f.names.length;g++){for(;p=f[f.names[g]].pop();){typeof e.style[p]!="undefined"&&(dhtmlx.env[f.names[g]]=!0)}}})();dhtmlx.env.transform_prefix=function(){var b;dhtmlx.Bd?b="-o-":(b="",dhtmlx.hc&&(b="-moz-"),dhtmlx.Cd&&(b="-webkit-"));return b}();dhtmlx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(g,f,k){var f=f||{},j=document.createElement(g),h;for(h in f){j.setAttribute(h,f[h])}if(f.style){j.style.cssText=f.style}if(f["class"]){j.className=f["class"]}if(k){j.innerHTML=k}return j},getValue:function(b){b=dhtmlx.toNode(b);return !b?"":dhtmlx.isNotDefined(b.value)?b.innerHTML:b.value},remove:function(d){if(d instanceof Array){for(var c=0;c<d.length;c++){this.remove(d[c])}}else{d&&d.parentNode&&d.parentNode.removeChild(d)}},insertBefore:function(e,d,f){e&&(d?d.parentNode.insertBefore(e,d):f.appendChild(e))},locate:function(f,e){for(var f=f||event,h=f.target||f.srcElement;h;){if(h.getAttribute){var g=h.getAttribute(e);if(g){return g}}h=h.parentNode}return null},offset:function(x){if(x.getBoundingClientRect){var w=x.getBoundingClientRect(),v=document.body,u=document.documentElement,s=window.pageYOffset||u.scrollTop||v.scrollTop,o=window.pageXOffset||u.scrollLeft||v.scrollLeft,n=u.clientTop||v.clientTop||0,m=u.clientLeft||v.clientLeft||0,l=w.top+s-n,k=w.left+o-m;return{y:Math.round(l),x:Math.round(k)}}else{for(k=l=0;x;){l+=parseInt(x.offsetTop,10),k+=parseInt(x.offsetLeft,10),x=x.offsetParent}return{y:l,x:k}}},pos:function(d){d=d||event;if(d.pageX||d.pageY){return{x:d.pageX,y:d.pageY}}var c=dhtmlx.z&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:d.clientX+c.scrollLeft-c.clientLeft,y:d.clientY+c.scrollTop-c.clientTop}},preventEvent:function(b){b&&b.preventDefault&&b.preventDefault();dhtmlx.html.stopEvent(b)},stopEvent:function(b){(b||event).cancelBubble=!0;return !1},addCss:function(d,c){d.className+=" "+c},removeCss:function(d,c){d.className=d.className.replace(RegExp(c,"g"),"")}};(function(){var b=document.getElementsByTagName("SCRIPT");if(b.length){b=(b[b.length-1].getAttribute("src")||"").split("/"),b.splice(b.length-1,1),dhtmlx.codebase=b.slice(0,b.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Template={Va:{},empty:function(){return""},setter:function(b){return dhtmlx.Template.fromHTML(b)},obj_setter:function(e){var d=dhtmlx.Template.setter(e),f=this;return function(){return d.apply(f,arguments)}},fromHTML:function(b){if(typeof b=="function"){return b}if(this.Va[b]){return this.Va[b]}b=(b||"").toString();b=b.replace(/[\r\n]+/g,"\\n");b=b.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');b=b.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');b=b.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');b=b.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');b=b.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');b=b.replace(/\{obj\}/g,'"+obj+"');b=b.replace(/\{-obj/g,"{obj");b=b.replace(/\{-common/g,"{common");b='return "'+b+'";';return this.Va[b]=Function("obj","common",b)}};dhtmlx.Type={add:function(e,d){if(!e.types&&e.prototype.types){e=e.prototype}var f=d.name||"default";this.Cb(d);this.Cb(d,"edit");this.Cb(d,"loading");e.types[f]=dhtmlx.extend(dhtmlx.extend({},e.types[f]||this.Qc),d);return f},Qc:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},Cb:function(e,d){var d="template"+(d?"_"+d:""),f=e[d];if(f&&typeof f=="string"){if(f.indexOf("->")!=-1){switch(f=f.split("->"),f[0]){case"html":f=dhtmlx.html.getValue(f[1]).replace(/\"/g,'\\"');break;case"http":f=(new dhtmlx.ajax).sync().get(f[1],{uid:(new Date).valueOf()}).responseText}}e[d]=dhtmlx.Template.fromHTML(f)}}};dhtmlx.Settings={p:function(){this.e=this.config={}},define:function(d,c){return typeof d=="object"?this.ea(d):this.na(d,c)},na:function(e,d){var f=this[e+"_setter"];return this.e[e]=f?f.call(this,d):d},ea:function(d){if(d){for(var c in d){this.na(c,d[c])}}},J:function(e,d){var f=dhtmlx.extend({},d);typeof e=="object"&&!e.tagName&&dhtmlx.extend(f,e);this.ea(f)},N:function(e,d){for(var f in d){switch(typeof e[f]){case"object":e[f]=this.N(e[f]||{},d[f]);break;case"undefined":e[f]=d[f]}}return e},sb:function(e,d,f){if(typeof e=="object"&&!e.tagName){e=e.container}this.g=this.$view=dhtmlx.toNode(e);if(!this.g&&f){this.g=f(e)}this.g.className+=" "+d;this.g.onselectstart=function(){return !1};this.j=this.g},Yd:function(b){if(typeof b=="object"){return this.type_setter(b)}this.type=dhtmlx.extend({},this.types[b]);this.customize()},customize:function(b){b&&dhtmlx.extend(this.type,b);this.type.kc=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type.jc=this.template_item_end(this.type);this.render()},type_setter:function(b){this.Yd(typeof b=="object"?dhtmlx.Type.add(this,b):b);return b},template_setter:function(b){return this.type_setter({template:b})},css_setter:function(b){this.g.className+=" "+b;return b}};dhtmlx.Destruction={p:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this.P=this.n=null;this.B&&document.body.appendChild(this.B);this.B=null;if(this.g){this.g.innerHTML="",this.g.n=null}this.data=this.g=this.j=null;this.q=this.ba={}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var e=0;e<dhtmlx.destructors.length;e++){dhtmlx.destructors[e].destructor()}dhtmlx.destructors=[]}for(var d in dhtmlx.q){var f=dhtmlx.q[d];f[0].removeEventListener?f[0].removeEventListener(f[1],f[2],!1):f[0].detachEvent&&f[0].detachEvent("on"+f[1],f[2]);delete dhtmlx.q[d]}});dhtmlx.ui.pager=function(b){this.name="Pager";dhtmlx.extend(this,dhtmlx.Settings);this.sb(b,"dhx_pager");dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.SingleRender);dhtmlx.extend(this,dhtmlx.MouseEvents);this.J(b,{size:10,page:-1,group:5,count:0,type:"default"});this.data=this.e;this.refresh()};dhtmlx.ui.pager.prototype={w:"dhx_p_id",on_click:{dhx_pager_item:function(d,c){this.select(c)}},select:function(b){switch(b){case"next":b=this.e.page+1;break;case"prev":b=this.e.page-1;break;case"first":b=0;break;case"last":b=this.e.limit-1}b<0&&(b=0);b>=this.data.limit&&(b=this.data.limit-1);if(this.callEvent("onBeforePageChange",[this.e.page,b])){this.data.page=b*1,this.refresh(),this.callEvent("onAfterPageChange",[b])}},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(e){var d="";if(e.page==-1){return""}e.min=e.page-Math.round((e.group-1)/2);e.max=e.min+e.group-1;if(e.min<0){e.max+=e.min*-1,e.min=0}if(e.max>=e.limit){e.min-=Math.min(e.min,e.max-e.limit+1),e.max=e.limit-1}for(var f=e.min||0;f<=e.max;f++){d+=this.button({id:f,index:f+1,selected:f==e.page?"_selected":""})}return d},page:function(b){return b.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var d=this.e;d.limit=Math.ceil(d.count/d.size);if(d.limit&&d.limit!=d.old_limit){d.page=Math.min(d.limit-1,d.page)}var c=d.page;if(c!=-1&&c!=d.old_page||d.limit!=d.old_limit){this.render(),this.callEvent("onRefresh",[]),d.old_limit=d.limit,d.old_page=d.page}},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.SingleRender={p:function(){},fa:function(b){return this.type.kc(b,this.type)+this.type.template(b,this.type)+this.type.jc},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this.j.innerHTML=this.fa(this.data)}this.callEvent&&this.callEvent("onAfterRender",[])}}};dhtmlx.ui.Tooltip=function(b){this.name="Tooltip";this.version="3.0";typeof b=="string"&&(b={template:b});dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this.J(b,{type:"default",dy:0,dx:20});this.j=this.g=document.createElement("DIV");this.g.className="dhx_tooltip";dhtmlx.html.insertBefore(this.g,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(d,c){if(!this.Ob){if(this.data!=d){this.data=d,this.render(d)}this.g.style.top=c.y+this.e.dy+"px";this.g.style.left=c.x+this.e.dx+"px";this.g.style.display="block"}},hide:function(){this.data=null;this.g.style.display="none"},disable:function(){this.Ob=!0},enable:function(){this.Ob=!1},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(d){var c=new dhtmlx.ui.Tooltip(d);this.attachEvent("onMouseMove",function(b,e){c.show(this.get(b),dhtmlx.html.pos(e))});this.attachEvent("onMouseOut",function(){c.hide()});this.attachEvent("onMouseMoving",function(){c.hide()});return c}};dhtmlx.compat=function(d,c){if(dhtmlx.compat[d]){dhtmlx.compat[d](c)}};(function(){if(!window.dhtmlxError){var d=function(){};window.dhtmlxError={catchError:d,throwError:d};window.convertStringToBoolean=function(b){return !!b};window.dhtmlxEventable=function(b){dhtmlx.extend(b,dhtmlx.EventSystem)};var c={getXMLTopNode:function(){},doXPath:function(b){return dhtmlx.DataDriver.xml.xpath(this.xml,b)},xmlDoc:{responseXML:!0}};dhtmlx.compat.dataProcessor=function(b){var l="_sendData",k="_in_progress",j="_tMode",h="_waitMode";b[l]=function(e,m){if(e){m&&(this[k][m]=(new Date).valueOf());if(!this.callEvent("onBeforeDataSending",m?[m,this.getState(m)]:[])){return !1}var g=this,f=this.serverProcessor;this[j]!="POST"?dhtmlx.ajax().get(f+(f.indexOf("?")!=-1?"&":"?")+this.serialize(e,m),"",function(n,o){c.xml=dhtmlx.DataDriver.xml.checkResponse(n,o);g.afterUpdate(g,null,null,null,c)}):dhtmlx.ajax().post(f,this.serialize(e,m),function(n,o){c.xml=dhtmlx.DataDriver.xml.checkResponse(n,o);g.afterUpdate(g,null,null,null,c)});this[h]++}}}}})();dhtmlx.DataProcessor={Sc:function(d){var c="_methods";d[c]=["setItemStyle","","changeId","remove"];this.attachEvent("onAfterAdd",function(a){d.setUpdated(a,!0,"inserted")});this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(f,e){f.getUserData&&f.getUserData(e,this.ha)},this));this.attachEvent("onBeforeDelete",function(a){if(d.me){return !0}var e=d.getState(a);if(e=="inserted"){return d.setUpdated(a,!1),!0}if(e=="deleted"){return !1}if(e=="true_deleted"){return !0}d.setUpdated(a,!0,"deleted");return !1});this.attachEvent("onAfterEditStop",function(a){d.setUpdated(a,!0,"updated")});this.attachEvent("onBindUpdate",function(a){window.setTimeout(function(){d.setUpdated(a.id,!0,"updated")},1)});c="_getRowData";d[c]=function(h){var g=this.obj.data.get(h),k={},j;for(j in g){j.indexOf("_")!==0&&(k[j]=g[j])}return k};c="_clearUpdateFlag";d[c]=function(){};this.ha={};d.attachEvent("insertCallback",this.Qb);d.attachEvent("updateCallback",this.Qb);d.attachEvent("deleteCallback",function(f,e){this.obj.setUserData(e,this.action_param,"true_deleted");this.obj.remove(e)});dhtmlx.compat("dataProcessor",d)},Qb:function(d,c){this.obj.data.set(c,dhtmlx.DataDriver.xml.getDetails(d.firstChild));this.obj.data.refresh(c)},setItemStyle:function(e,d){var f=this.C(e);f&&(f.style.cssText+=";"+d)},changeId:function(d,c){this.data.changeId(d,c);this.refresh()},setUserData:function(e,d,f){e?this.data.get(e)[d]=f:this.ha[d]=f},getUserData:function(d,c){return d?this.data.get(d)[c]:this.ha[c]}};(function(){var b="_dp_init";dhtmlx.DataProcessor[b]=dhtmlx.DataProcessor.Sc})();dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var k="_dragged",j=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(b,h,g){j.apply(this,arguments);if(!g){var f=dhtmlx.DragControl.F=dhtmlx.DragControl.F||{};if(!f.from){f.from=this.dragStartObject}dhtmlx.DragControl.Ba(b,h,!0)}};var u=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(d,c,f){if(!f&&dhtmlx.DragControl.s){dhtmlx.DragControl.D=s.dragStartNode,dhtmlx.DragControl.Qa(d,!0)}u.apply(this,arguments)};var s=new dhtmlDragAndDropObject,o=dhtmlx.DragControl.Ab;dhtmlx.DragControl.Ab=function(){o.apply(this,arguments);var a=dhtmlx.DragControl.F;if(a){for(var h=[],e=[],d=0;d<a.source.length;d++){h[d]={idd:a.source[d]},e.push(a.source[d])}s.dragStartNode={parentNode:{},parentObject:{idd:h,id:e.length==1?e[0]:e,treeNod:{object:a.from}}};s.dragStartNode.parentObject.treeNod[k]=h;s.dragStartObject=a.from}};var n=dhtmlx.DragControl.Ba;dhtmlx.DragControl.Ba=function(e,d,f){n.apply(this,arguments);!this.s&&!f&&(e=s.checkLanding(e,d,!0))};var m=dhtmlx.DragControl.Qa;dhtmlx.DragControl.Qa=function(d,c){m.apply(this,arguments);s.lastLanding&&!c&&s.stopDrag(d,!1,!0)};var l=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(a){var w=null;a&&(w=l.apply(this,arguments));if(!w){for(var w=s.dragStartObject,v=[],h=w[k],d=0;d<h.length;d++){v.push(h[d].idd||h[d].id)}dhtmlx.DragControl.F.source=v}return w}}};dhtmlx.DataMove={p:function(){},copy:function(g,f,k,j){var h=this.get(g);if(h){return k&&(h=k.externalData(h)),k=k||this,k.add(k.externalData(h,j),f)}},move:function(j,h,o,n){if(j instanceof Array){for(var m=0;m<j.length;m++){var l=(o||this).indexById(this.move(j[m],h,o,dhtmlx.uid()));j[m+1]&&(h=l+(this.indexById(j[m+1])<l?0:1))}}else{if(nid=j,!(h<0)){var k=this.get(j);if(k){return !o||o==this?this.data.move(this.indexById(j),h):(nid=o.add(o.externalData(k,n),h),this.remove(j)),nid}}}},moveUp:function(d,c){return this.move(d,this.indexById(d)-(c||1))},moveDown:function(d,c){return this.moveUp(d,(c||1)*-1)},moveTop:function(b){return this.move(b,0)},moveBottom:function(b){return this.move(b,this.data.dataCount()-1)},externalData:function(e,d){var f=dhtmlx.extend({},e);f.id=d||dhtmlx.uid();f.$selected=f.$template=null;return f}};dhtmlx.DragControl={G:dhtmlx.toArray(["dummy"]),addDrop:function(e,d,f){e=dhtmlx.toNode(e);e.dhx_drop=this.ac(d);if(f){e.dhx_master=!0}},ac:function(d){var d=d||dhtmlx.DragControl,c=this.G.find(d);if(c<0){c=this.G.length,this.G.push(d)}return c},addDrag:function(d,c){d=dhtmlx.toNode(d);d.dhx_drag=this.ac(c);dhtmlx.event(d,"mousedown",this.Od,d)},Od:function(b){dhtmlx.DragControl.D&&(dhtmlx.DragControl.Ja(),dhtmlx.DragControl.destroyDrag());dhtmlx.DragControl.D=this;dhtmlx.DragControl.yc={x:b.pageX,y:b.pageY};dhtmlx.DragControl.oa=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl.Ab);dhtmlx.DragControl.pa=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl.Ja);dhtmlx.DragControl.Nb=dhtmlx.event(this,"scroll",dhtmlx.DragControl.Ja);b.cancelBubble=!0;return !1},Ja:function(){dhtmlx.DragControl.oa=dhtmlx.eventRemove(dhtmlx.DragControl.oa);dhtmlx.DragControl.pa=dhtmlx.eventRemove(dhtmlx.DragControl.pa);dhtmlx.DragControl.Nb=dhtmlx.eventRemove(dhtmlx.DragControl.Nb)},Ab:function(d){var c={x:d.pageX,y:d.pageY};if(!(Math.abs(c.x-dhtmlx.DragControl.yc.x)<5&&Math.abs(c.y-dhtmlx.DragControl.yc.y)<5)&&(dhtmlx.DragControl.Ja(),dhtmlx.DragControl.createDrag(d))){dhtmlx.DragControl.sendSignal("start"),dhtmlx.DragControl.oa=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl.mc),dhtmlx.DragControl.pa=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl.Qa),dhtmlx.DragControl.mc(d)}},Qa:function(b){dhtmlx.DragControl.oa=dhtmlx.eventRemove(dhtmlx.DragControl.oa);dhtmlx.DragControl.pa=dhtmlx.eventRemove(dhtmlx.DragControl.pa);dhtmlx.DragControl.s&&(dhtmlx.DragControl.onDrop(dhtmlx.DragControl.D,dhtmlx.DragControl.s,this.T,b),dhtmlx.DragControl.onDragOut(dhtmlx.DragControl.D,dhtmlx.DragControl.s,null,b));dhtmlx.DragControl.destroyDrag();dhtmlx.DragControl.sendSignal("stop")},mc:function(d){var c=dhtmlx.html.pos(d);dhtmlx.DragControl.B.style.top=c.y+dhtmlx.DragControl.top+"px";dhtmlx.DragControl.B.style.left=c.x+dhtmlx.DragControl.left+"px";dhtmlx.DragControl.wc?dhtmlx.DragControl.wc=!1:dhtmlx.DragControl.Ba(d.srcElement||d.target,d);d.cancelBubble=!0;return !1},Ba:function(d,c){for(;d&&d.tagName!="BODY";){if(d.dhx_drop){if(this.s&&(this.s!=d||d.dhx_master)){this.onDragOut(this.D,this.s,d,c)}if(!this.s||this.s!=d||d.dhx_master){if(this.s=null,this.T=this.onDragIn(dhtmlx.DragControl.D,d,c)){this.s=d}}return}d=d.parentNode}if(this.s){this.s=this.T=this.onDragOut(this.D,this.s,null,c)}},sendSignal:function(b){dhtmlx.DragControl.active=b=="start"},getMaster:function(b){return this.G[b.dhx_drag||b.dhx_drop]},getContext:function(){return this.F},createDrag:function(g){var f=dhtmlx.DragControl.D,k=this.G[f.dhx_drag],j;if(k.onDragCreate){j=k.onDragCreate(f,g),j.style.position="absolute",j.style.zIndex=dhtmlx.zIndex.drag,j.onmousemove=dhtmlx.DragControl.xc}else{var h=dhtmlx.DragControl.onDrag(f,g);if(!h){return !1}j=document.createElement("DIV");j.innerHTML=h;j.className="dhx_drag_zone";j.onmousemove=dhtmlx.DragControl.xc;document.body.appendChild(j)}dhtmlx.DragControl.B=j;return !0},xc:function(){dhtmlx.DragControl.wc=!0},destroyDrag:function(){var d=dhtmlx.DragControl.D,c=this.G[d.dhx_drag];if(c&&c.onDragDestroy){c.onDragDestroy(d,dhtmlx.DragControl.B)}else{dhtmlx.html.remove(dhtmlx.DragControl.B)}dhtmlx.DragControl.T=dhtmlx.DragControl.D=dhtmlx.DragControl.s=dhtmlx.DragControl.B=null},top:5,left:5,onDragIn:function(f,e,h){var g=this.G[e.dhx_drop];if(g.onDragIn&&g!=this){return g.onDragIn(f,e,h)}e.className+=" dhx_drop_zone";return e},onDragOut:function(g,f,k,j){var h=this.G[f.dhx_drop];if(h.onDragOut&&h!=this){return h.onDragOut(g,f,k,j)}f.className=f.className.replace("dhx_drop_zone","");return null},onDrop:function(g,f,k,j){var h=this.G[f.dhx_drop];dhtmlx.DragControl.F.from=dhtmlx.DragControl.getMaster(g);if(h.onDrop&&h!=this){return h.onDrop(g,f,k,j)}f.appendChild(g)},onDrag:function(e,d){var f=this.G[e.dhx_drag];if(f.onDrag&&f!=this){return f.onDrag(e,d)}dhtmlx.DragControl.F={source:e,from:e};return"<div style='"+e.style.cssText+"'>"+e.innerHTML+"</div>"}};dhtmlx.DragItem={p:function(){if(!this.e||this.e.drag){dhtmlx.DragItem.gc(this)}else{if(this.e){this.drag_setter=function(b){b&&(this.gc(this),delete this.drag_setter);return b}}}this.dragMarker&&(this.attachEvent("onBeforeDragIn",this.dragMarker),this.attachEvent("onDragOut",this.dragMarker))},gc:function(b){dhtmlx.DragControl.addDrop(b.g,b,!0);dhtmlx.DragControl.addDrag(b.g,b)},onDragIn:function(j,h,o){var n=this.locate(o)||null,m=dhtmlx.DragControl.F,l=dhtmlx.DragControl.getMaster(j),k=this.C(n)||this.g;if(k==dhtmlx.DragControl.T){return k}m.target=n;m.to=l;if(!this.callEvent("onBeforeDragIn",[m,o])){return m.id=null}dhtmlx.html.addCss(k,"dhx_drag_over");return k},onDragOut:function(j,h,o,n){var m=this.locate(n)||null;o!=this.j&&(m=null);var l=this.C(m)||(o?dhtmlx.DragControl.getMaster(o).g:window.undefined);if(l==dhtmlx.DragControl.T){return null}var k=dhtmlx.DragControl.F;dhtmlx.html.removeCss(dhtmlx.DragControl.T,"dhx_drag_over");k.target=k.to=null;this.callEvent("onDragOut",[k,n]);return null},onDrop:function(g,f,k,j){var h=dhtmlx.DragControl.F;h.to=this;h.index=h.target?this.indexById(h.target):this.dataCount();h.new_id=dhtmlx.uid();this.callEvent("onBeforeDrop",[h,j])&&(h.from==h.to?this.move(h.source,h.index):h.from&&h.from.move(h.source,h.index,h.to,h.new_id),this.callEvent("onAfterDrop",[h,j]))},onDrag:function(h,g){var m=this.locate(g),l=[m];if(m){if(this.getSelected){var k=this.getSelected();dhtmlx.PowerArray.find.call(k,m)!=-1&&(l=k)}var j=dhtmlx.DragControl.F={source:l,start:m};j.from=this;if(this.callEvent("onBeforeDrag",[j,g])){return j.html||this.fa(this.get(m))}}return null}};dhtmlx.EditAbility={p:function(){this.sa=this.K=null;this.attachEvent("onEditKeyPress",function(e,d,f){e==13&&!f?this.stopEdit():e==27&&this.stopEdit(!0)});this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this.K},edit:function(d){if(this.stopEdit(!1,d)&&this.callEvent("onBeforeEditStart",[d])){var c=this.data.get(d);if(!c.$template){c.$template="edit",this.data.refresh(d),this.K=d,this.Xd(d),this.sa(!0,c),this.callEvent("onAfterEditStart",[d])}}},stopEdit:function(g,f){if(!this.K){return !0}if(this.K==f){return !1}var k={};g?k=null:this.sa(!1,k);if(!this.callEvent("onBeforeEditStop",[this.K,k])){return !1}var j=this.data.get(this.K);j.$template=null;g||this.sa(!1,j);var h=this.K;this.sa=this.K=null;this.data.refresh(h);this.callEvent("onAfterEditStop",[h,k]);return !0},Xd:function(k){var j=this.C(k),u="",s="",o=[];if(j){for(var n=j.getElementsByTagName("*"),m="",l=0;l<n.length;l++){if(n[l].nodeType==1&&(m=n[l].getAttribute("bind"))){u+="els["+o.length+"].value="+m+";",s+=m+"=els["+o.length+"].value;",o.push(n[l]),n[l].className+=" dhx_allow_selection",n[l].onselectstart=this.Hc}}n=null}u=Function("obj","els",u);s=Function("obj","els",s);this.sa=function(d,c){d?(u(c,o),o.length&&o[0].select&&o[0].select()):s(c,o)}},Hc:function(b){return(b||event).cancelBubble=!0}};dhtmlx.KeyEvents={p:function(){dhtmlx.event(this.g,"keypress",this.Kd,this)},Kd:function(d){var d=d||event,c=d.which||d.keyCode;this.callEvent(this.K?"onEditKeyPress":"onKeyPress",[c,d.ctrlKey,d.shiftKey,d])}};dhtmlx.MouseEvents={p:function(){this.on_click&&(dhtmlx.event(this.g,"click",this.Hd,this),dhtmlx.event(this.g,"contextmenu",this.Id,this));this.on_dblclick&&dhtmlx.event(this.g,"dblclick",this.Jd,this);this.on_mouse_move&&(dhtmlx.event(this.g,"mousemove",this.oc,this),dhtmlx.event(this.g,dhtmlx.z?"mouseleave":"mouseout",this.oc,this))},Hd:function(b){return this.pb(b,this.on_click,"ItemClick")},Jd:function(b){return this.pb(b,this.on_dblclick,"ItemDblClick")},Id:function(d){var c=dhtmlx.html.locate(d,this.w);if(c&&!this.callEvent("onBeforeContextMenu",[c,d])){return dhtmlx.html.preventEvent(d)}},oc:function(b){dhtmlx.z&&(b=document.createEventObject(event));this.lc&&window.clearTimeout(this.lc);this.callEvent("onMouseMoving",[b]);this.lc=window.setTimeout(dhtmlx.bind(function(){b.type=="mousemove"?this.Ld(b):this.Md(b)},this),500)},Ld:function(b){this.pb(b,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[b||event])},Md:function(b){this.callEvent("onMouseOut",[b||event])},pb:function(j,h,o){for(var j=j||event,n=j.target||j.srcElement,m="",l=null,k=!1;n&&n.parentNode;){if(!k&&n.getAttribute&&(l=n.getAttribute(this.w))){n.getAttribute("userdata")&&this.callEvent("onLocateData",[l,n]);if(!this.callEvent("on"+o,[l,j,n])){return}k=!0}if(m=n.className){if(m=m.split(" "),m=m[0]||m[1],h[m]){return h[m].call(this,j,l||dhtmlx.html.locate(j,this.w),n)}}n=n.parentNode}return k}};dhtmlx.SelectionModel={p:function(){this.l=dhtmlx.toArray();this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this.Pc,this));this.data.attachEvent("onStoreLoad",dhtmlx.bind(this.Oc,this));this.data.attachEvent("onAfterFilter",dhtmlx.bind(this.Nc,this));this.data.attachEvent("onIdChange",dhtmlx.bind(this.yd,this))},yd:function(e,d){for(var f=this.l.length-1;f>=0;f--){this.l[f]==e&&(this.l[f]=d)}},Nc:function(){for(var e=this.l.length-1;e>=0;e--){if(this.data.indexById(this.l[e])<0){var d=this.l[e]}var f=this.item(d);f&&delete f.$selected;this.l.splice(e,1);this.callEvent("onSelectChange",[d])}},Pc:function(e,d,f){if(f=="delete"){this.l.remove(e)}else{if(!this.data.dataCount()&&!this.data.h){this.l=dhtmlx.toArray()}}},Oc:function(){this.e.select&&this.data.each(function(b){b.$selected&&this.select(b.id)},this)},Na:function(e,d,f){if(!f&&!this.callEvent("onBeforeSelect",[e,d])){return !1}this.data.item(e).$selected=d;f?f.push(e):(d?this.l.push(e):this.l.remove(e),this.ub(e));return !0},select:function(f,e,h){if(!f){return this.selectAll()}if(f instanceof Array){for(var g=0;g<f.length;g++){this.select(f[g],e,h)}}else{if(this.data.exists(f)){if(h&&this.l.length){return this.selectAll(this.l[this.l.length-1],f)}if(!e&&(this.l.length!=1||this.l[0]!=f)){this.vc=!0,this.unselectAll(),this.vc=!1}this.isSelected(f)?e&&this.unselect(f):this.Na(f,!0)&&this.callEvent("onAfterSelect",[f])}}},unselect:function(b){if(!b){return this.unselectAll()}this.isSelected(b)&&this.Na(b,!1)},selectAll:function(f,e){var h,g=[];h=f||e?this.data.getRange(f||null,e||null):this.data.getRange();h.each(function(d){var c=this.data.item(d.id);c.$selected||(this.l.push(d.id),this.Na(d.id,!0,g));return d.id},this);this.ub(g)},unselectAll:function(){var b=[];this.l.each(function(a){this.Na(a,!1,b)},this);this.l=dhtmlx.toArray();this.ub(b)},isSelected:function(b){return this.l.find(b)!=-1},getSelected:function(b){switch(this.l.length){case 0:return b?[]:"";case 1:return b?[this.l[0]]:this.l[0];default:return[].concat(this.l)}},Dd:function(b){return b.length>100||b.length>this.data.dataCount/2},ub:function(d){typeof d!="object"&&(d=[d]);if(d.length){if(this.Dd(d)){this.data.refresh()}else{for(var c=0;c<d.length;c++){this.render(d[c],this.data.item(d[c]),"update")}}this.vc||this.callEvent("onSelectChange",[d])}}};dhtmlx.RenderStack={p:function(){this.B=document.createElement("DIV")},fa:function(b){this.callEvent("onItemRender",[b]);return this.type.kc(b,this.type)+(b.$template?this.type["template_"+b.$template]:this.type.template)(b,this.type)+this.type.jc},Db:function(b){this.B.innerHTML=this.fa(b);return this.B.firstChild},C:function(f){if(this.n){return this.n[f]}this.n={};for(var e=this.j.childNodes,h=0;h<e.length;h++){var g=e[h].getAttribute(this.w);g&&(this.n[g]=e[h])}return this.C(f)},locate:function(b){return dhtmlx.html.locate(b,this.w)},show:function(d){var c=this.C(d);if(c){this.j.scrollTop=c.offsetTop-this.j.offsetTop}},render:function(g,f,k){if(g){var j=this.C(g);switch(k){case"update":if(!j){return}var h=this.n[g]=this.Db(f);dhtmlx.html.insertBefore(h,j);dhtmlx.html.remove(j);break;case"delete":if(!j){return}dhtmlx.html.remove(j);delete this.n[g];break;case"add":h=this.n[g]=this.Db(f);dhtmlx.html.insertBefore(h,this.C(this.data.next(g)),this.j);break;case"move":this.render(g,f,"delete"),this.render(g,f,"add")}}else{if(this.callEvent("onBeforeRender",[this.data])){this.j.innerHTML=this.data.getRange().map(this.fa,this).join(""),this.n=null}}this.callEvent("onAfterRender",[])},pager_setter:function(e){this.attachEvent("onBeforeRender",function(){var b=this.e.pager.e;if(b.page==-1){return !1}this.data.min=b.page*b.size;this.data.max=(b.page+1)*b.size-1;return !0});var d=new dhtmlx.ui.pager(e),f=dhtmlx.bind(function(){this.data.refresh()},this);d.attachEvent("onRefresh",f);this.data.attachEvent("onStoreUpdated",function(){var b=this.dataCount();if(b!=d.e.count){d.e.count=b;if(d.e.page==-1){d.e.page=0}d.refresh()}});return d},height_setter:function(b){b=="auto"&&(this.attachEvent("onAfterRender",this.Kb),dhtmlx.event(window,"resize",dhtmlx.bind(this.Kb,this)));return b},Kb:function(){this.j.style.overflow="hidden";this.j.style.height="1px";var d=this.j.scrollHeight;this.j.style.height=d+"px";if(dhtmlx.hc){var c=this.j.scrollHeight;if(c!=d){this.j.style.height=c+"px"}}this.g.style.height=this.j.style.height},ib:function(){var d=this.type,c=(d.border||0)+(d.padding||0)*2+(d.margin||0)*2;return{x:d.width+c,y:d.height+c}},x_count_setter:function(e){var d=this.ib(),f=dhtmlx.$customScroll?0:18;this.j.style.width=d.x*e+(this.e.height!="auto"?f:0)+"px";return e},y_count_setter:function(d){var c=this.ib();this.j.style.height=c.y*d+"px";return d}};dhtmlx.VirtualRenderStack={p:function(){this.n={};this.j.style.overflowY="scroll";dhtmlx.event(this.j,"scroll",dhtmlx.bind(this.xb,this));dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this));this.data.ga=[];this.data.getIndexRange=this.rd},C:function(b){return this.n[b]},show:function(e){range=this.mb();var d=this.data.indexById(e),f=Math.floor(d/range.fb)*range.Sa;this.j.scrollTop=f},rd:function(g,f){f!==0&&(f=Math.min(f||Infinity,this.dataCount()-1));for(var k=dhtmlx.toArray(),j=g||0;j<=f;j++){var h=this.item(this.order[j]);this.order.length>j&&(h?h.$template=="loading"&&this.ga.push(this.order[j]):(this.order[j]=dhtmlx.uid(),h={id:this.order[j],$template:"loading"},this.ga.push(this.order[j])),k.push(h))}return k},render:function(g,f,k){if(g){var j=this.C(g);switch(k){case"update":if(!j){break}var h=this.n[g]=this.Db(f);dhtmlx.html.insertBefore(h,j);dhtmlx.html.remove(j);break;default:this.Vd()}}else{if(this.callEvent("onBeforeRender",[this.data])){this.n={},this.xb(null,!0),this.Bc=!1,this.callEvent("onAfterRender",[])}}},Vd:function(){if(!this.Bc){this.Bc=!0,window.setTimeout(dhtmlx.bind(function(){this.render()},this),1)}},ab:function(d){var c=document.createElement("DIV");c.style.cssText="height:"+d+"px; width:100%; overflow:hidden;";return c},xb:function(Q,P){this.data.ga=[];var O=this.mb();if(!this.j.firstChild||P){this.j.innerHTML="",this.j.appendChild(this.ab(O.Ed)),this.P=[this.j.firstChild]}for(var N=Math.max(O.r,0),L=this.data.max||this.data.max===0?this.data.max:Infinity;N<=O.nb;){for(;this.P[N]&&this.P[N].ld&&N<=O.nb;){N++}if(N>O.nb){break}for(var K=N;!this.P[K];){K--}var J=this.P[K],I=N*O.fb+(this.data.min||0);if(I>L){break}var H=Math.min(I+O.fb-1,L),F=this.ab(O.Sa),E=this.data.getIndexRange(I,H);if(!E.length){break}F.innerHTML=E.map(this.fa,this).join("");for(var D=0;D<E.length;D++){this.n[this.data.idByIndex(I+D)]=F.childNodes[D]}var C=parseInt(J.style.height,10),A=(N-K)*O.Sa,y=C-A-O.Sa;dhtmlx.html.insertBefore(F,A?J.nextSibling:J,this.j);this.P[N]=F;F.ld=!0;if(A<=0&&y>0){J.style.height=y+"px",this.P[N+1]=J}else{if(A<0?dhtmlx.html.remove(J):J.style.height=A+"px",y>0){var x=this.P[N+1]=this.ab(y);dhtmlx.html.insertBefore(x,F.nextSibling,this.j)}}N++}if(this.data.ga.length){var w=this.indexById(this.data.ga[0]),v=this.indexById(this.data.ga.pop())+1;if(v>w){if(!this.callEvent("onDataRequest",[w,v-w])){return !1}this.data.feed.call(this,w,v-w)}}if(dhtmlx.z){var u=this.mb();u.r!=O.r&&this.xb()}},mb:function(){var A=dhtmlx.$customScroll?0:18,y=this.j.scrollTop,x=Math.max(this.j.scrollWidth,this.j.offsetWidth)-A,w=this.j.offsetHeight,v=this.type,u=this.ib(),s=Math.floor(x/u.x)||1,o=Math.floor(y/u.y),n=Math.ceil((w+y)/u.y)-1,m=this.data.max?this.data.max-this.data.min:this.data.dataCount(),l=Math.ceil(m/s)*u.y;return{r:o,nb:n,oe:y,Ed:l,Sa:u.y,fb:s}}};dhtmlx.ajax=function(f,e,h){if(arguments.length!==0){var g=new dhtmlx.ajax;if(h){g.master=h}g.get(f,null,e)}return !this.getXHR?new dhtmlx.ajax:this};dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx.z?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(k,j,u){var s=this.getXHR();typeof u=="function"&&(u=[u]);if(typeof j=="object"){var o=[],n;for(n in j){var m=j[n];if(m===null||m===dhtmlx.undefined){m=""}o.push(n+"="+encodeURIComponent(m))}j=o.join("&")}j&&!this.post&&(k=k+(k.indexOf("?")!=-1?"&":"?")+j,j=null);s.open(this.post?"POST":"GET",k,!this.Bb);this.post&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded");var l=this;s.onreadystatechange=function(){if(!s.readyState||s.readyState==4){if(u&&l){for(var b=0;b<u.length;b++){u[b]&&u[b].call(l.master||l,s.responseText,s.responseXML,s)}}u=l=l.master=null}};s.send(j||null);return s},get:function(e,d,f){this.post=!1;return this.send(e,d,f)},post:function(e,d,f){this.post=!0;return this.send(e,d,f)},sync:function(){this.Bb=!0;return this}};dhtmlx.AtomDataLoader={p:function(b){this.data={};if(b){this.e.datatype=b.datatype||"json",this.ge.push(this.ob)}},ob:function(){this.wa=!0;this.e.url&&this.url_setter(this.e.url);this.e.data&&this.data_setter(this.e.data)},url_setter:function(b){if(!this.wa){return b}this.load(b,this.e.datatype);return b},data_setter:function(b){if(!this.wa){return b}this.parse(b,this.e.datatype);return !0},load:function(e,d,f){this.callEvent("onXLS",[]);typeof d=="string"?(this.data.driver=dhtmlx.DataDriver[d],d=f):this.data.driver=dhtmlx.DataDriver.xml;dhtmlx.ajax(e,[this.V,d],this)},parse:function(d,c){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[c||"xml"];this.V(d,null)},V:function(f,e){var h=this.data.driver,g=h.getRecords(h.toObject(f,e))[0];this.data=h?h.getDetails(g):f;this.callEvent("onXLE",[])},la:function(d){if(!this.e.dataFeed||this.ca||!d){return !0}var c=this.e.dataFeed;if(typeof c=="function"){return c.call(this,d.id||d,d)}c=c+(c.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(d.id||d);this.callEvent("onXLS",[]);dhtmlx.ajax(c,function(b){this.ca=!0;this.setValues(dhtmlx.DataDriver.json.toObject(b)[0]);this.ca=!1;this.callEvent("onXLE",[])},this);return !1}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(a){a||(a="[]");return typeof a=="string"?(eval("dhtmlx.temp="+a),dhtmlx.temp):a},getRecords:function(b){return b&&!(b instanceof Array)?[b]:b},getDetails:function(b){return b},getInfo:function(b){return{v:b.total_count||0,r:b.pos||0,M:b.dhx_security}}};dhtmlx.DataDriver.json_ext={toObject:function(a){a||(a="[]");if(typeof a=="string"){var b;eval("temp="+a);dhtmlx.temp=[];for(var c=b.header,d=0;d<b.data.length;d++){for(var e={},f=0;f<c.length;f++){typeof b.data[d][f]!="undefined"&&(e[c[f]]=b.data[d][f])}dhtmlx.temp.push(e)}return dhtmlx.temp}return a},getRecords:function(b){return b&&!(b instanceof Array)?[b]:b},getDetails:function(b){return b},getInfo:function(b){return{v:b.total_count||0,r:b.pos||0}}};dhtmlx.DataDriver.html={toObject:function(d){if(typeof d=="string"){var c=null;d.indexOf("<")==-1&&(c=dhtmlx.toNode(d));if(!c){c=document.createElement("DIV"),c.innerHTML=d}return c.getElementsByTagName(this.tag)}return d},getRecords:function(b){return b.tagName?b.childNodes:b},getDetails:function(b){return dhtmlx.DataDriver.xml.tagToObject(b)},getInfo:function(){return{v:0,r:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(a){return typeof a=="string"?(eval("dhtmlx.temp="+a),dhtmlx.temp):a},getRecords:function(b){return b},getDetails:function(e){for(var d={},f=0;f<e.length;f++){d["data"+f]=e[f]}return d},getInfo:function(){return{v:0,r:0}}};dhtmlx.DataDriver.csv={toObject:function(b){return b},getRecords:function(b){return b.split(this.row)},getDetails:function(e){for(var e=this.stringToArray(e),d={},f=0;f<e.length;f++){d["data"+f]=e[f]}return d},getInfo:function(){return{v:0,r:0}},stringToArray:function(d){for(var d=d.split(this.cell),c=0;c<d.length;c++){d[c]=d[c].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return d},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(d,c){return c&&(c=this.checkResponse(d,c))?c:typeof d=="string"?this.fromString(d):d},getRecords:function(b){return this.xpath(b,this.records)},records:"/*/item",getDetails:function(b){return this.tagToObject(b,{})},getInfo:function(b){return{v:b.documentElement.getAttribute("total_count")||0,r:b.documentElement.getAttribute("pos")||0,M:b.documentElement.getAttribute("dhx_security")}},xpath:function(v,u){if(window.XPathResult){var s=v;if(v.nodeName.indexOf("document")==-1){v=v.ownerDocument}for(var o=[],n=v.evaluate(u,s,null,XPathResult.ANY_TYPE,null),m=n.iterateNext();m;){o.push(m),m=n.iterateNext()}return o}else{var l=!0;try{typeof v.selectNodes=="undefined"&&(l=!1)}catch(k){}if(l){return v.selectNodes(u)}else{var j=u.split("/").pop();return v.getElementsByTagName(j)}}},tagToObject:function(k,j){var j=j||{},u=!1,s=k.attributes;if(s&&s.length){for(var o=0;o<s.length;o++){j[s[o].name]=s[o].value}u=!0}for(var n=k.childNodes,m={},o=0;o<n.length;o++){if(n[o].nodeType==1){var l=n[o].tagName;typeof j[l]!="undefined"?(j[l] instanceof Array||(j[l]=[j[l]]),j[l].push(this.tagToObject(n[o],{}))):j[n[o].tagName]=this.tagToObject(n[o],{});u=!0}}if(!u){return this.nodeValue(k)}j.value=this.nodeValue(k);return j},nodeValue:function(b){return b.firstChild?b.firstChild.data:""},fromString:function(d){if(window.DOMParser&&!dhtmlx.z){return(new DOMParser).parseFromString(d,"text/xml")}if(window.ActiveXObject){var c=new ActiveXObject("Microsoft.xmlDOM");c.loadXML(d);return c}},checkResponse:function(e,d){if(d&&d.firstChild&&d.firstChild.tagName!="parsererror"){return d}var f=this.fromString(e.replace(/^[\s]+/,""));if(f){return f}}};dhtmlx.DataLoader={p:function(b){b=b||"";this.name="DataStore";this.data=b.datastore||new dhtmlx.DataStore;this.tb=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this.Xa,this))},load:function(d,c){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(a,e){if(this.H){return this.H=[a,e]}else{this.H=!0}this.load(d+(d.indexOf("?")==-1?"?":"&")+"posStart="+a+"&count="+e,function(){var b=this.H;this.H=!1;typeof b=="object"&&this.data.feed.apply(this,b)})}}},V:function(d,c){this.data.rb(this.data.driver.toObject(d,c));this.callEvent("onXLE",[]);if(this.tb){this.data.detachEvent(this.tb),this.tb=null}},dataFeed_setter:function(b){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(h,n){if(this.e.dataFeed){var m={};if(h||m){if(typeof h=="function"){if(!n){return}h(n,m)}else{m={text:n}}this.clearAll();var l=this.e.dataFeed;if(typeof l=="function"){return l.call(this,n,m)}var k=[],j;for(j in m){k.push("dhx_filter["+j+"]="+encodeURIComponent(m[j]))}this.load(l+(l.indexOf("?")<0?"?":"&")+k.join("&"),this.e.datatype);return !1}}},this));return b},Xa:function(){if(this.e.ready){var b=dhtmlx.toFunctor(this.e.ready);b&&b.call&&b.apply(this,arguments)}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(b){this.driver=dhtmlx.DataDriver[b]},rb:function(k){this.callEvent("onParse",[this.driver,k]);this.h&&this.filter();var j=this.driver.getInfo(k);if(j.M){dhtmlx.security_key=j.M}var u=this.driver.getRecords(k),s=(j.r||0)*1;if(s===0&&this.order[0]){s=this.order.length}for(var o=0,n=0;n<u.length;n++){var m=this.driver.getDetails(u[n]),l=this.id(m);this.pull[l]||(this.order[o+s]=l,o++);this.pull[l]=m;this.extraParser&&this.extraParser(m);this.o&&(this.o.$init?this.o.$update(m):this.o.$update&&this.o.$update(m))}for(n=0;n<j.v;n++){this.order[n]||(l=dhtmlx.uid(),m={id:l,$template:"loading"},this.pull[l]=m,this.order[n]=l)}this.callEvent("onStoreLoad",[this.driver,k]);this.refresh()},id:function(b){return b.id||(b.id=dhtmlx.uid())},changeId:function(d,c){this.pull[c]=this.pull[d];this.pull[c].id=c;this.order[this.order.find(d)]=c;this.h&&(this.h[this.h.find(d)]=c);this.callEvent("onIdChange",[d,c]);this.wb&&this.wb(d,c)},get:function(b){return this.item(b)},set:function(d,c){return this.update(d,c)},item:function(b){return this.pull[b]},update:function(d,c){this.o&&this.o.$update&&this.o.$update(c);if(this.callEvent("onBeforeUpdate",[d,c])===!1){return !1}this.pull[d]=c;this.refresh(d)},refresh:function(b){this.ya||(b?this.callEvent("onStoreUpdated",[b,this.pull[b],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(b){this.ya=!0;b.call(this);this.ya=!1},getRange:function(e,d){e=e?this.indexById(e):this.startOffset||0;d?d=this.indexById(d):(d=Math.min(this.endOffset||Infinity,this.dataCount()-1),d<0&&(d=0));if(e>d){var f=d,d=e,e=f}return this.getIndexRange(e,d)},getIndexRange:function(f,e){for(var e=Math.min(e||Infinity,this.dataCount()-1),h=dhtmlx.toArray(),g=f||0;g<=e;g++){h.push(this.item(this.order[g]))}return h},dataCount:function(){return this.order.length},exists:function(b){return !!this.pull[b]},move:function(f,e){if(!(f<0||e<0)){var h=this.idByIndex(f),g=this.item(h);this.order.removeAt(f);this.order.insertAt(h,Math.min(this.order.length,e));this.callEvent("onStoreUpdated",[h,g,"move"])}},scheme:function(b){this.o=b},sync:function(g,f,k){typeof f!="function"&&(k=f,f=null);if(dhtmlx.debug_bind){this.debug_sync_master=g}var j=g;if(g.name!="DataStore"){g=g.data}var h=dhtmlx.bind(function(c,b,a){if(a!="update"||f){c=null}if(!c){this.order=dhtmlx.toArray([].concat(g.order)),this.h=null,this.pull=g.pull,f&&this.silent(f),this.Ia&&this.Ia()}k?k=!1:this.refresh(c)},this);g.attachEvent("onStoreUpdated",h);this.feed=function(d,c){j.loadNext(c,d)};h()},add:function(h,g){if(this.o){var h=h||{},m;for(m in this.o){h[m]=h[m]||this.o[m]}this.o&&(this.o.$init?this.o.$update(h):this.o.$update&&this.o.$update(h))}var l=this.id(h),k=this.dataCount();if(dhtmlx.isNotDefined(g)||g<0){g=k}g>k&&(g=Math.min(this.order.length,g));if(this.callEvent("onBeforeAdd",[l,h,g])===!1){return !1}if(this.exists(l)){return null}this.pull[l]=h;this.order.insertAt(l,g);if(this.h){var j=this.h.length;!g&&this.order.length&&(j=0);this.h.insertAt(l,j)}this.callEvent("onafterAdd",[l,g]);this.callEvent("onStoreUpdated",[l,h,"add"]);return l},remove:function(e){if(e instanceof Array){for(var d=0;d<e.length;d++){this.remove(e[d])}}else{if(this.callEvent("onBeforeDelete",[e])===!1){return !1}if(!this.exists(e)){return null}var f=this.item(e);this.order.remove(e);this.h&&this.h.remove(e);delete this.pull[e];this.callEvent("onafterdelete",[e]);this.callEvent("onStoreUpdated",[e,f,"delete"])}},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.h=this.feed=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(b){return this.order[b]},indexById:function(d){var c=this.order.find(d);return c},next:function(d,c){return this.order[this.indexById(d)+(c||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(d,c){return this.order[this.indexById(d)-(c||1)]},sort:function(j,h,o){var n=j;typeof j=="function"?n={as:j,dir:h}:typeof j=="string"&&(n={by:j,dir:h,as:o});var m=[n.by,n.dir,n.as];if(this.callEvent("onbeforesort",m)){if(this.order.length){var l=dhtmlx.sort.create(n),k=this.getRange(this.first(),this.last());k.sort(l);this.order=k.map(function(b){return this.id(b)},this)}this.refresh();this.callEvent("onaftersort",m)}},filter:function(h,g){if(this.callEvent("onBeforeFilter",[h,g])){if(this.h){this.order=this.h,delete this.h}if(this.order.length){if(h){var m=h,g=g||"";typeof h=="string"&&(h=dhtmlx.Template.fromHTML(h),g=g.toString().toLowerCase(),m=function(a,d){return h(a).toLowerCase().indexOf(d)!=-1});for(var l=dhtmlx.toArray(),k=0;k<this.order.length;k++){var j=this.order[k];m(this.item(j),g)&&l.push(j)}this.h=this.order;this.order=l}this.refresh();this.callEvent("onAfterFilter",[])}}},each:function(e,d){for(var f=0;f<this.order.length;f++){e.call(d||this,this.item(this.order[f]))}},provideApi:function(f,e){this.debug_bind_master=f;e&&this.mapEvent({onbeforesort:f,onaftersort:f,onbeforeadd:f,onafteradd:f,onbeforedelete:f,onafterdelete:f,onbeforeupdate:f});for(var h="get,set,sort,add,remove,exists,idByIndex,indexById,item,update,refresh,dataCount,filter,next,previous,clearAll,first,last,serialize".split(","),g=0;g<h.length;g++){f[h[g]]=dhtmlx.methodPush(this,h[g])}},serialize:function(){for(var e=this.order,d=[],f=0;f<e.length;f++){d.push(this.pull[e[f]])}return d}};dhtmlx.sort={create:function(b){return dhtmlx.sort.dir(b.dir,dhtmlx.sort.by(b.by,b.as))},as:{"int":function(d,c){d*=1;c*=1;return d>c?1:d<c?-1:0},string_strict:function(d,c){d=d.toString();c=c.toString();return d>c?1:d<c?-1:0},string:function(d,c){d=d.toString().toLowerCase();c=c.toString().toLowerCase();return d>c?1:d<c?-1:0}},by:function(d,c){if(!d){return c}typeof c!="function"&&(c=dhtmlx.sort.as[c||"string"]);d=dhtmlx.Template.fromHTML(d);return function(b,a){return c(d(b),d(a))}},dir:function(d,c){return d=="asc"?c:function(b,e){return c(b,e)*-1}}};if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(g,f){var k=document.createElement("DIV");k.id="CustomObject_"+dhtmlx.uid();k.style.width="100%";k.style.height="100%";k.cmp="grid";document.body.appendChild(k);this.attachObject(k.id);f.container=k.id;var j=this.vs[this.av];j.grid=new window[g](f);j.gridId=k.id;j.gridObj=k;j.grid.setSizes=function(){this.resize?this.resize():this.render()};var h="_viewRestore";return this.vs[this[h]()].grid};dhtmlx.attaches.attachDataView=function(b){return this.attachAbstract("dhtmlXDataView",b)};dhtmlx.attaches.attachChart=function(b){return this.attachAbstract("dhtmlXChart",b)};dhtmlx.compat.layout=function(){};dhtmlXDataView=function(b){this.name="DataView";this.version="3.0";dhtmlx.extend(this,dhtmlx.Settings);this.sb(b,"dhx_dataview");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this.J(b,{drag:!1,edit:!1,select:"multiselect",type:"default"});this.e.height!="auto"&&!this.e.renderAll&&dhtmlx.extend(this,dhtmlx.VirtualRenderStack);this.data.provideApi(this,!0);dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)};dhtmlXDataView.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(h){var g=this.C(h.target);if(this.type.drag_marker){if(this.bb){this.bb.style.backgroundImage="",this.bb.style.backgroundRepeat=""}if(g){g.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")",g.style.backgroundRepeat="no-repeat",this.bb=g}}if(g&&this.e.auto_scroll){var m=g.offsetTop,l=g.offsetHeight,k=this.g.scrollTop,j=this.g.offsetHeight;m-l>=0&&m-l*0.75<k?k=Math.max(m-l,0):m+l/0.75>k+j&&(k+=l);this.g.scrollTop=k}return !0},w:"dhx_f_id",on_click:{dhx_dataview_item:function(d,c){this.stopEdit(!1,c)&&this.e.select&&(this.e.select=="multiselect"?this.select(c,d.ctrlKey,d.shiftKey):this.select(c))}},on_dblclick:{dhx_dataview_item:function(d,c){this.e.edit&&this.edit(c)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.compat("layout");dhtmlx.Date={Locale:{month_full:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),month_short:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),day_full:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),day_short:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",")},date_part:function(b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0);return b},time_part:function(b){return(b.valueOf()/1000-b.getTimezoneOffset()*60)%86400},week_start:function(d){var c=d.getDay();this.config.start_on_monday&&(c===0?c=6:c--);return this.date_part(this.add(d,-1*c,"day"))},month_start:function(b){b.setDate(1);return this.date_part(b)},year_start:function(b){b.setMonth(0);return this.month_start(b)},day_start:function(b){return this.date_part(b)},add:function(f,e,h){var g=new Date(f.valueOf());switch(h){case"day":g.setDate(g.getDate()+e);break;case"week":g.setDate(g.getDate()+7*e);break;case"month":g.setMonth(g.getMonth()+e);break;case"year":g.setYear(g.getFullYear()+e);break;case"hour":g.setHours(g.getHours()+e);break;case"minute":g.setMinutes(g.getMinutes()+e);break;default:return dhtmlx.Date["add_"+h](f,e,h)}return g},to_fixed:function(b){return b<10?"0"+b:b},copy:function(b){return new Date(b.valueOf())},date_to_str:function(d,c){d=d.replace(/%[a-zA-Z]/g,function(b){switch(b){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return b}});c&&(d=d.replace(/date\.get/g,"date.getUTC"));return new Function("date",'return "'+d+'";')},str_to_date:function(h,g){for(var m="var temp=date.split(/[^0-9a-zA-Z]+/g);",l=h.match(/%[a-zA-Z]/g),k=0;k<l.length;k++){switch(l[k]){case"%j":case"%d":m+="set[2]=temp["+k+"]||1;";break;case"%n":case"%m":m+="set[1]=(temp["+k+"]||1)-1;";break;case"%y":m+="set[0]=temp["+k+"]*1+(temp["+k+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":m+="set[3]=temp["+k+"]||0;";break;case"%i":m+="set[4]=temp["+k+"]||0;";break;case"%Y":m+="set[0]=temp["+k+"]||0;";break;case"%a":case"%A":m+="set[3]=set[3]%12+((temp["+k+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":m+="set[5]=temp["+k+"]||0;"}}var j="set[0],set[1],set[2],set[3],set[4],set[5]";g&&(j=" Date.UTC("+j+")");return new Function("date","var set=[0,0,1,0,0,0]; "+m+" return new Date("+j+");")},getISOWeek:function(h){if(!h){return !1}var g=h.getDay();g===0&&(g=7);var m=new Date(h.valueOf());m.setDate(h.getDate()+(4-g));var l=m.getFullYear(),k=Math.floor((m.getTime()-(new Date(l,0,1)).getTime())/86400000),j=1+Math.floor(k/7);return j},getUTCISOWeek:function(b){return this.getISOWeek(b)}};dhtmlx.math={};dhtmlx.math.ee="0,1,2,3,4,5,6,7,8,9,A,B,C,D,E,F".split(",");dhtmlx.math.toHex=function(d,c){d=parseInt(d,10);for(str="";d>0;){str=this.ee[d%16]+str,d=Math.floor(d/16)}for(;str.length<c;){str="0"+str}return str};dhtmlx.math.hexToDec=function(b){return parseInt(b,16)};dhtmlx.math.toRgb=function(g){var f,k,j,h;typeof g!="string"?(f=g[0],k=g[1],j=g[2]):g.indexOf("rgb")!=-1?(h=g.substr(g.indexOf("(")+1,g.lastIndexOf(")")-g.indexOf("(")-1).split(","),f=h[0],k=h[1],j=h[2]):(g.substr(0,1)=="#"&&(g=g.substr(1)),f=this.hexToDec(g.substr(0,2)),k=this.hexToDec(g.substr(2,2)),j=this.hexToDec(g.substr(4,2)));f=parseInt(f,10)||0;k=parseInt(k,10)||0;j=parseInt(j,10)||0;if(f<0||f>255){f=0}if(k<0||k>255){k=0}if(j<0||j>255){j=0}return[f,k,j]};dhtmlx.math.hsvToRgb=function(A,y,x){var w,v,u,s,o,n,m,l;w=Math.floor(A/60)%6;v=A/60-w;u=x*(1-y);s=x*(1-v*y);o=x*(1-(1-v)*y);l=m=n=0;switch(w){case 0:n=x;m=o;l=u;break;case 1:n=s;m=x;l=u;break;case 2:n=u;m=x;l=o;break;case 3:n=u;m=s;l=x;break;case 4:n=o;m=u;l=x;break;case 5:n=x,m=u,l=s}n=Math.floor(n*255);m=Math.floor(m*255);l=Math.floor(l*255);return[n,m,l]};dhtmlx.math.rgbToHsv=function(A,y,x){var w,v,u,s,o,n,m,l;w=A/255;v=y/255;u=x/255;s=Math.min(w,v,u);o=Math.max(w,v,u);m=0;n=o==0?0:1-s/o;l=o;o==s?m=0:o==w&&v>=u?m=60*(v-u)/(o-s)+0:o==w&&v<u?m=60*(v-u)/(o-s)+360:o==v?m=60*(u-w)/(o-s)+120:o==u&&(m=60*(w-v)/(o-s)+240);return[m,n,l]};if(!dhtmlx.presets){dhtmlx.presets={}}dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:0.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:0.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:0.5,border:!0}};dhtmlx.ui.Map=function(b){this.name="Map";this.w="map_"+dhtmlx.uid();this.M=b;this.U=[]};dhtmlx.ui.Map.prototype={addRect:function(e,d,f){this.Mb(e,"RECT",d,f)},addPoly:function(e,d,f){this.Mb(e,"POLY",d,f)},Mb:function(g,f,k,j){var h="";arguments.length==4&&(h="userdata='"+j+"'");this.U.push("<area "+this.M+"='"+g+"' shape='"+f+"' coords='"+k.join()+"' "+h+"></area>")},addSector:function(x,w,v,u,s,o,n,m){var l=[];l.push(u);l.push(Math.floor(s*n));for(var k=w;k<v;k+=Math.PI/18){l.push(Math.floor(u+o*Math.cos(k))),l.push(Math.floor((s+o*Math.sin(k))*n))}l.push(Math.floor(u+o*Math.cos(v)));l.push(Math.floor((s+o*Math.sin(v))*n));l.push(u);l.push(Math.floor(s*n));return this.addPoly(x,l,m)},render:function(e){var d=dhtmlx.html.create("DIV");d.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";e.appendChild(d);var f=dhtmlx.z?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";d.innerHTML="<map id='"+this.w+"' name='"+this.w+"'>"+this.U.join("\n")+"</map><img "+f+" class='dhx_map_img' usemap='#"+this.w+"'>";e.n=d;this.U=[]}};dhtmlx.chart={};dhtmlx.chart.scatter={pvt_render_scatter:function(x,w,v,u,s,o){if(!this.e.xValue){return null}var n=this.aa(),m=this.aa("h","xValue");if(!s){this.canvases.x=new dhtmlx.ui.Canvas(this.g,"axis_x"),this.canvases.y=new dhtmlx.ui.Canvas(this.g,"axis_y"),this.Zb(this.canvases.y.getCanvas(),w,v,u,n.min,n.max),this.Tb(this.canvases.x.getCanvas(),w,v,u,m.min,m.max)}var n={min:this.e.yAxis.start,max:this.e.yAxis.end},m={min:this.e.xAxis.start,max:this.e.xAxis.end},l=this.sd(x,w,v,u,m,n);this.Ha=v;for(var k=0;k<w.length;k++){this.dd(x,o,v,u,l,m,n,w[k],s)}},sd:function(j,h,o,n,m,l){var k={};k.totalHeight=n.y-o.y;k.totalWidth=n.x-o.x;this.Hb(k,m.min,m.max,k.totalWidth,"X");this.Hb(k,l.min,l.max,k.totalHeight,"Y");return k},dd:function(A,y,x,w,v,u,s,o,n){var m=this.Ib(v,w,x,u,o,"X"),l=this.Ib(v,x,w,s,o,"Y");this.Da(A,m,l,o,this.e.label.call(this,o),n,y)},Ib:function(A,y,x,w,v,u){var s=this.e[u=="X"?"xValue":"value"].call(this,v),o=A["valueFactor"+u],n=(parseFloat(s||0)-w.min)*o,m=A["unit"+u],l=x[u.toLowerCase()]-(u=="X"?-1:1)*Math.floor(m*n);n<0&&(l=x[u.toLowerCase()]);s>w.max&&(l=y[u.toLowerCase()]);s<w.min&&(l=x[u.toLowerCase()]);return l},Hb:function(h,g,m,l,k){var j=this.S(g,m),k=k||"";h["relValue"+k]=j[0];h["valueFactor"+k]=j[1];h["unit"+k]=h["relValue"+k]?l/h["relValue"+k]:10}};dhtmlx.chart.radar={pvt_render_radar:function(h,g,m,l,k,j){this.Ud(h,g,m,l,k,j)},Ud:function(F,E,D,C,A,y){if(E.length){for(var x=this.jb(D,C),w=this.e.radius?this.e.radius:x.radius,v=this.e.x?this.e.x:x.x,u=this.e.y?this.e.y:x.y,s=[],o=0;o<E.length;o++){s.push(1)}var n=this.cc(s,E.length);this.Ha=D;A||this.$c(n,v,u,w,E);this.ad(F,n,v,u,w,E,A,y)}},ad:function(af,ae,ad,ac,ab,aa,Z,Y){var W,V,U,T,S,Q,P,O,N,K,I,E,H,F,D,A,x,L,J;U=this.e;S=U.yAxis.start;Q=U.yAxis.end;J=this.S(S,Q);L=(E=J[0])?ab/E:ab/2;x=J[1];W=V=H=-Math.PI/2;N=[];for(T=O=0;T<aa.length;T++){A?D=A:(F=U.value(aa[T]),D=(parseFloat(F||0)-S)*x),K=Math.floor(L*D),F=U.value(T!=aa.length-1?aa[T+1]:aa[0]),A=(parseFloat(F||0)-S)*x,I=Math.floor(L*A),W=V,V=T!=aa.length-1?H+ae[T]-0.0001:H,P=O||this.R(W,ad,ac,K),O=this.R(V,ad,ac,I),N.push(P)}U.fill&&this.kd(af,N,aa);U.disableLines||this.ce(af,N,aa);U.disableItems||this.bd(af,N,aa,Z,Y);N=null},bd:function(h,g,m,l,k){for(var j=0;j<g.length;j++){this.Da(h,g[j].x,g[j].y,m[j],this.e.label.call(this,m),l,k)}},kd:function(h,g,m){var l,k;h.globalAlpha=this.e.alpha.call(this,{});h.beginPath();for(var j=0;j<g.length;j++){h.fillStyle=this.e.fill.call(this,m[j]),l=g[j],k=g[j+1]||g[0],j||h.moveTo(l.x,l.y),h.lineTo(k.x,k.y)}h.fill();h.globalAlpha=1},ce:function(h,g,m){for(var l,k,j=0;j<g.length;j++){l=g[j],k=g[j+1]||g[0],this.m(h,l.x,l.y,k.x,k.y,this.e.line.color.call(this,m[j]),this.e.line.width)}},$c:function(af,ae,ad,ac,ab){var aa=this.e.yAxis,Z=this.e.xAxis,Y=aa.start,W=aa.end,V=aa.step,U={},T=this.ma;if(typeof T.step=="undefined"||typeof T.start=="undefined"||typeof T.end=="undefined"){var S=this.aa(),U=this.Wa(S.min,S.max),Y=U.start,W=U.end,V=U.step;aa.end=W;aa.start=Y}var Q=[],P,O,N,K=0,I=ac*V/(W-Y),E,H;V<1&&(E=Math.min(this.da(V),Y<=0?0:this.da(Y)),H=Math.pow(10,-E));var F=[];this.canvases.scale=new dhtmlx.ui.Canvas(this.g,"radar_scale");var D=this.canvases.scale.getCanvas();for(P=W;P>=Y;P-=V){U.fixNum&&(P=parseFloat((new Number(P)).toFixed(U.fixNum)));Q.push(Math.floor(K*I)+0.5);H&&(P=Math.round(P*H)/H);var A=ad-ac+Q[Q.length-1];this.canvases.scale.renderTextAt("middle","left",ae,A,aa.template(P.toString()),"dhx_axis_item_y dhx_radar");if(af.length<2){this.Vb(D,"arc",ae,ad,ac-Q[Q.length-1],-Math.PI/2,3*Math.PI/2,P);return}var x=-Math.PI/2,L=x,J;for(O=0;O<af.length;O++){P==W&&F.push(L),J=x+af[O]-0.0001,this.Vb(D,T.lineShape||"line",ae,ad,ac-Q[Q.length-1],L,J,P,O,ab[P]),L=J}K++}for(P=0;P<F.length;P++){N=this.R(F[P],ae,ad,ac),Z.lines.call(this,ab[P],P)&&this.m(D,ae,ad,N.x,N.y,Z?Z.lineColor.call(this,ab[P]):"#cfcfcf",1),this.cd(D,ae,ad,ac,F[P],Z?Z.template.call(this,ab[P]):"&nbsp;")}},Vb:function(D,C,A,y,x,w,v,u,s){var o,n;if(x<0){return !1}o=this.R(w,A,y,x);n=this.R(v,A,y,x);var m=this.e.yAxis;if(m.bg){D.beginPath(),D.moveTo(A,y),C=="arc"?D.arc(A,y,x,w,v,!1):(D.lineTo(o.x,o.y),D.lineTo(n.x,n.y)),D.fillStyle=m.bg(u,s),D.moveTo(A,y),D.fill(),D.closePath()}if(m.lines.call(this,u)){D.lineWidth=1,D.beginPath(),C=="arc"?D.arc(A,y,x,w,v,!1):(D.moveTo(o.x,o.y),D.lineTo(n.x,n.y)),D.strokeStyle=m.lineColor.call(this,u),D.stroke()}},cd:function(F,E,D,C,A,y){var x=this.canvases.scale.renderText(0,0,y,"dhx_axis_radar_title",1),w=x.scrollWidth,v=x.offsetHeight,u=0.001,s=this.R(A,E,D,C+5),o=0,n=0;if(A<0||A>Math.PI){n=-v}A>Math.PI/2&&(o=-w);if(Math.abs(A+Math.PI/2)<u||Math.abs(A-Math.PI/2)<u){o=-w/2}else{if(Math.abs(A)<u||Math.abs(A-Math.PI)<u){n=-v/2}}x.style.top=s.y+n+"px";x.style.left=s.x+o+"px";x.style.width=w+"px";x.style.whiteSpace="nowrap"}};dhtmlx.chart.area={pvt_render_area:function(K,J,I,H,F,E){var D,C,A,y,x,w,v,u,s;w=this.Aa(K,J,I,H,F);C=this.e;y=C.eventRadius||Math.floor(w.cellWidth/2);if(J.length){v=[];u=!C.offset?I.x:I.x+w.cellWidth*0.5;for(A=0;A<J.length;A++){x=J[A],A?u+=w.cellWidth:v.push([u,H.y]),(s=this.Ea(x,I,H,w))?(v.push([u,s]),E.addRect(x.id,[u-y-I.x,s-y-I.y,u+y-I.x,s+y-I.y],F),C.yAxis||(D=!C.offset&&A==J.length-1?"left":"center",this.canvases[F].renderTextAt(!1,D,u,s-C.labelOffset,C.label(x)))):A||v.push([u,H.y])}v.push([u,H.y]);v.push([v[0][0],H.y]);K.globalAlpha=this.e.alpha.call(this,J[0]);K.fillStyle=this.e.color.call(this,J[0]);K.beginPath();this.va(K,v);K.fill();if(C.border){K.lineWidth=C.borderWidth||1,C.borderColor?K.strokeStyle=C.borderColor.call(this,J[0]):this.Pa(K,K.fillStyle),K.beginPath(),this.va(K,v),K.stroke()}K.lineWidth=1;K.globalAlpha=1}}};dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(W,V,U,T,S,Q){var P,O,N,L,K,J,I,H,F,E,D,C,A,w;E=this.Aa(W,V,U,T,S);L=this.e;H=L.eventRadius||Math.floor(E.cellWidth/2);if(V.length){D=[];w=[];C=!L.offset?U.x:U.x+E.cellWidth*0.5;var y=function(b,d){return S?V[b].$startY?d-T.y+V[b].$startY:0:d},x=function(f,e,h){var g=(h.y-e.y)/(h.x-e.x);return g*f+e.y-g*e.x};for(K=0;K<V.length;K++){F=V[K],K?C+=E.cellWidth:(A=y(K,T.y),D.push([C,A])),A=y(K,this.Ea(F,U,T,E)),w.push(isNaN(A)&&!K?V[K].$startY||T.y:A),A&&(D.push([C,A]),Q.addRect(F.id,[C-H-U.x,A-H-U.y,C+H-U.x,A+H-U.y],S),L.yAxis||(N=!L.offset&&I?"left":"center",this.canvases[S].renderTextAt(!1,N,C,A-L.labelOffset,L.label(F))))}D.push([C,y(K-1,T.y)]);if(S){for(K=V.length-2;K>0;K--){C-=E.cellWidth,(A=V[K].$startY)&&D.push([C,A])}}D.push([D[0][0],D[0][1]]);W.globalAlpha=this.e.alpha.call(this,V[0]);W.fillStyle=this.e.color.call(this,V[0]);W.beginPath();this.va(W,D);W.fill();for(K=0;K<V.length;K++){A=w[K];if(!A){if(K==V.length-1){A=V[K].$startY}for(J=K+1;J<V.length;J++){if(w[J]){P={x:U.x,y:w[0]};O={x:U.x+E.cellWidth*J,y:w[J]};A=x(U.x+E.cellWidth*K,P,O);break}}}V[K].$startY=A}}}};dhtmlx.chart.spline={pvt_render_spline:function(U,T,S,Q,P,O){var N,L,K,J,I,H,F,E,D,C,A,y,x;I=this.Aa(U,T,S,Q,P);N=this.e;this.Ha=S;K=[];if(T.length){E=N.offset?S.x+I.cellWidth*0.5:S.x;for(L=0;L<T.length;L++){if(A=this.Ea(T[L],S,Q,I)){F=!L?E:I.cellWidth*L-0.5+E,K.push({x:F,y:A,index:L})}}H=this.td(K);for(L=0;L<K.length;L++){D=K[L].x;y=K[L].y;if(L<K.length-1){C=K[L+1].x;x=K[L+1].y;for(J=D;J<C;J++){var u=this.kb(J,D,L,H.a,H.b,H.c,H.d);if(u<S.y){u=S.y}if(u>Q.y){u=Q.y}var w=this.kb(J+1,D,L,H.a,H.b,H.c,H.d);if(w<S.y){w=S.y}if(w>Q.y){w=Q.y}this.m(U,J,u,J+1,w,N.line.color(T[L]),N.line.width)}this.m(U,C-1,this.kb(J,D,L,H.a,H.b,H.c,H.d),C,x,N.line.color(T[L]),N.line.width)}this.Da(U,D,y,T[K[L].index],N.label(T[K[L].index]),P,O)}}},td:function(D){var C,A,y,x,w,v,u,s,o=[],n=[],m=D.length;for(C=0;C<m-1;C++){o[C]=D[C+1].x-D[C].x,n[C]=(D[C+1].y-D[C].y)/o[C]}A=[];y=[];A[0]=0;A[1]=2*(o[0]+o[1]);y[0]=0;y[1]=6*(n[1]-n[0]);for(C=2;C<m-1;C++){A[C]=2*(o[C-1]+o[C])-o[C-1]*o[C-1]/A[C-1],y[C]=6*(n[C]-n[C-1])-o[C-1]*y[C-1]/A[C-1]}x=[];x[m-1]=x[0]=0;for(C=m-2;C>=1;C--){x[C]=(y[C]-o[C]*x[C+1])/A[C]}w=[];v=[];u=[];s=[];for(C=0;C<m-1;C++){w[C]=D[C].y,v[C]=-o[C]*x[C+1]/6-o[C]*x[C]/3+(D[C+1].y-D[C].y)/o[C],u[C]=x[C]/2,s[C]=(x[C+1]-x[C])/(6*o[C])}return{a:w,b:v,c:u,d:s}},kb:function(j,h,o,n,m,l,k){return n[o]+(j-h)*(m[o]+(j-h)*(l[o]+(j-h)*k[o]))}};dhtmlx.chart.barH={pvt_render_barH:function(ah,ag,af,ae,ad,ac){var ab,aa,Z,Y,W,V,U,T,S,Q,P,N,K,H,J,I,F,D,A,O,L;Z=(ae.y-af.y)/ag.length;U=this.aa("h");T=U.max;S=U.min;I=ae.x-af.x;L=!!this.e.yAxis;ad||this.Sb(ah,ag,af,ae,S,T,Z);L&&(T=parseFloat(this.e.xAxis.end),S=parseFloat(this.e.xAxis.start));H=this.S(S,T);N=H[0];P=H[1];D=N?I/N:10;L||(J=10,D=N?(I-J)/N:10);aa=parseInt(this.e.width,10);aa*this.k.length+4>Z&&(aa=Z/this.k.length-4);ab=Math.floor((Z-aa*this.k.length)/2);K=typeof this.e.radius!="undefined"?parseInt(this.e.radius,10):Math.round(aa/5);Q=!1;(W=this.e.gradient)&&typeof W!="function"?(Q=W,W=!1):W&&(W=ah.createLinearGradient(af.x,af.y,ae.x,af.y),this.e.gradient(W));L||this.m(ah,af.x-0.5,af.y,af.x-0.5,ae.y,"#000000",1);for(V=0;V<ag.length;V++){if(F=parseFloat(this.e.value(ag[V]||0)),F>T&&(F=T),F-=S,F*=P,A=af.x,O=af.y+ab+V*Z+(aa+1)*ad,F<0&&this.e.origin=="auto"||this.e.xAxis&&F===0&&!(this.e.origin!="auto"&&this.e.origin>S)){this.canvases[ad].renderTextAt("middle","right",A+10,O+aa/2+ab,this.e.label(ag[V]))}else{F<0&&this.e.origin!="auto"&&this.e.origin>S&&(F=0);L||(F+=J/D);Y=W||this.e.color.call(this,ag[V]);this.e.border&&this.Rb(ah,A,O,aa,S,K,D,F,Y);ah.globalAlpha=this.e.alpha.call(this,ag[V]);var E=this.Wc(ah,ae,A,O,aa,S,K,D,F,Y,W,Q);Q!=!1&&this.Xc(ah,A,O,aa,S,K,D,F,Y,Q);ah.globalAlpha=1;E[3]==O?(this.canvases[ad].renderTextAt("middle","left",E[0]-5,E[3]+Math.floor(aa/2),this.e.label(ag[V])),ac.addRect(ag[V].id,[E[0]-af.x,E[3]-af.y,E[2]-af.x,E[3]+aa-af.y],ad)):(this.canvases[ad].renderTextAt("middle",!1,E[2]+5,E[1]+Math.floor(aa/2),this.e.label(ag[V])),ac.addRect(ag[V].id,[E[0]-af.x,O-af.y,E[2]-af.x,E[3]-af.y],ad))}}},xa:function(L,K,J,I,H,F,E,D,C){var A=0;if(H>F*E){var y=(H-F*E)/H,A=-Math.asin(y)+Math.PI/2}L.moveTo(K,J+D);var x=K+F*E-H-(H?0:D);H<F*E&&L.lineTo(x,J+D);var w=J+H;H&&H>0&&L.arc(x,w,H-D,-Math.PI/2+A,0,!1);var v=J+I-H-(H?0:D),u=x+H-(H?D:0);L.lineTo(u,v);H&&H>0&&L.arc(x,v,H-D,0,Math.PI/2-A,!1);var s=J+I-D;L.lineTo(K,s);C||L.lineTo(K,J+D);return[u,s]},Sb:function(k,j,u,s,o,n,m){var l=0;if(this.e.xAxis){this.canvases.x=new dhtmlx.ui.Canvas(this.g),l=this.Tb(this.canvases.x.getCanvas(),j,u,s,o,n)}if(this.e.yAxis){this.canvases.y=new dhtmlx.ui.Canvas(this.g),this.Yc(this.canvases.y.getCanvas(),j,u,s,m,l)}},Yc:function(D,C,A,y,x,w){if(this.e.yAxis){var v,u=parseInt(w?w:A.x,10)-0.5,s=y.y+0.5,o=A.y;this.m(D,u,s,u,o,this.e.yAxis.color,1);for(var n=0;n<C.length;n++){var m=this.e.origin!="auto"&&this.e.view=="barH"&&parseFloat(this.e.value(C[n]))<this.e.origin;v=o+x/2+n*x;this.canvases.y.renderTextAt("middle",m?!1:"left",m?u+5:u-5,v,this.e.yAxis.template(C[n]),"dhx_axis_item_y",m?0:u-10);this.e.yAxis.lines.call(this,C[n])&&this.m(D,A.x,v,y.x,v,this.e.yAxis.lineColor.call(this,C[n]),1)}this.m(D,A.x+0.5,o+0.5,y.x,o+0.5,this.e.yAxis.lineColor.call(this,{}),1);this.tc(A,y)}},Tb:function(N,L,K,J,I,H){var F,E={},D=this.e.xAxis;if(D){var C=J.y+0.5,A=K.x-0.5,y=J.x-0.5,x=K.x;this.m(N,A,C,y,C,D.color,1);D.step&&(F=parseFloat(D.step));if(typeof this.Ca.step=="undefined"||typeof this.Ca.start=="undefined"||typeof this.Ca.end=="undefined"){E=this.Wa(I,H),I=E.start,H=E.end,F=E.step,this.e.xAxis.end=H,this.e.xAxis.start=I,this.e.xAxis.step=F}if(F!==0){for(var w=(y-A)*F/(H-I),v=0,u=I;u<=H;u+=F){E.fixNum&&(u=parseFloat((new Number(u)).toFixed(E.fixNum)));var s=Math.floor(A+v*w)+0.5;!(u==I&&this.e.origin=="auto")&&D.lines.call(this,u)&&this.m(N,s,C,s,K.y,this.e.xAxis.lineColor.call(this,u),1);u==this.e.origin&&(x=s+1);this.canvases.x.renderTextAt(!1,!0,s,C+2,D.template(u.toString()),"dhx_axis_item_x");v++}this.canvases.x.renderTextAt(!0,!1,A,J.y+this.e.padding.bottom-3,this.e.xAxis.title,"dhx_axis_title_x",J.x-K.x);D.lines.call(this,{})||this.m(N,A,K.y-0.5,y,K.y-0.5,this.e.xAxis.color,0.2);return x}}},Za:function(v,u,s,o,n,m,l){var k=this.e.yAxis,j=u;k&&this.e.origin!="auto"&&this.e.origin>l&&(u+=(this.e.origin-l)*n,j=u,o-=this.e.origin-l,o<0&&(o*=-1,v.translate(u,s+m),v.rotate(Math.PI),u=0.5,s=0),u+=0.5);return{value:o,x0:u,y0:s,start:j}},Wc:function(O,N,L,K,J,I,H,F,E,D,C,A){O.save();var y=this.Za(O,L,K,E,F,J,I);O.fillStyle=D;O.beginPath();var x=this.xa(O,y.x0,y.y0,J,H,F,y.value,this.e.border?1:0);C&&!A&&O.lineTo(N.x,y.y0+(this.e.border?1:0));O.fill();O.restore();var w=y.y0,v=y.y0!=K?K:x[1],u=y.y0!=K?y.start-x[0]:y.start,s=y.y0!=K?y.start:x[0];return[u,w,s,v]},Rb:function(x,w,v,u,s,o,n,m,l){x.save();var k=this.Za(x,w,v,m,n,u,s);x.beginPath();this.Pa(x,l);x.globalAlpha=0.9;this.xa(x,k.x0,k.y0,u,o,n,k.value,x.lineWidth/2,1);x.stroke();x.restore()},Xc:function(D,C,A,y,x,w,v,u,s,o){D.save();var n=this.Za(D,C,A,u,v,y,x),m=this.Oa(D,n.x0,n.y0+y,n.x0+v*n.value,n.y0,o,s,"x");D.fillStyle=m.gradient;D.beginPath();this.xa(D,n.x0,n.y0+m.offset,y-m.offset*2,w,v,n.value,m.offset);D.fill();D.globalAlpha=1;D.restore()}};dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(an,am,al,ak,aj,ai){var ah,ag,af,ae,ad=ak.x-al.x,ac=!!this.e.yAxis,ab=this.lb(am);ah=ab.max;ag=ab.min;var aa=Math.floor((ak.y-al.y)/am.length);aj||this.Sb(an,am,al,ak,ag,ah,aa);ac&&(ah=parseFloat(this.e.xAxis.end),ag=parseFloat(this.e.xAxis.start));var Z=this.S(ag,ah);ae=Z[0];af=Z[1];var Y=ae?ad/ae:10;if(!ac){var V=10,Y=ae?(ad-V)/ae:10}var T=parseInt(this.e.width,10);T+4>aa&&(T=aa-4);var Q=(aa-T)/2,K=0,O=!1,L=this.e.gradient;L&&(O=!0);ac||this.m(an,al.x-0.5,al.y,al.x-0.5,ak.y,"#000000",1);for(var J=0,H=0,F=0;F<this.k.length;F++){F==aj&&(H=J),this.k[F].view=="stackedBarH"&&J++}for(F=0;F<am.length;F++){if(!H){am[F].$startX=al.x}var U=parseFloat(this.e.value(am[F]||0));U>ah&&(U=ah);U-=ag;U*=af;var S=al.x,I=al.y+Q+F*aa;H?S=am[F].$startX:am[F].$startX=S;if(U<0||this.e.yAxis&&U===0){this.canvases.y.renderTextAt("middle",!0,S+10,I+T/2,this.e.label(am[F]))}else{ac||(U+=V/Y);var W=this.e.color.call(this,am[F]);an.globalAlpha=this.e.alpha.call(this,am[F]);an.fillStyle=this.e.color.call(this,am[F]);an.beginPath();var N=this.xa(an,S,I,T,K,Y,U,this.e.border?1:0);L&&!O&&an.lineTo(al.x+ad,I+(this.e.border?1:0));an.fill();if(O!=!1){var P=this.Oa(an,S,I+T,S,I,O,W,"x");an.fillStyle=P.gradient;an.beginPath();N=this.xa(an,S,I,T,K,Y,U,0);an.fill()}this.e.border&&this.Rb(an,S,I,T,ag,K,Y,U,W);an.globalAlpha=1;this.canvases[aj].renderTextAt("middle",!0,am[F].$startX+(N[0]-am[F].$startX)/2-1,I+(N[1]-I)/2,this.e.label(am[F]));ai.addRect(am[F].id,[am[F].$startX-al.x,I-al.y,N[0]-al.x,N[1]-al.y],aj);am[F].$startX=N[0]}}}};dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(af,ae,ad,ac,ab,aa){var Z,Y,W,V,U=ac.y-ad.y,T=!!this.e.yAxis,S=!!this.e.xAxis,Q=this.lb(ae);Z=Q.max;Y=Q.min;var P=Math.floor((ac.x-ad.x)/ae.length);ab||this.eb(ae,ad,ac,Y,Z,P);T&&(Z=parseFloat(this.e.yAxis.end),Y=parseFloat(this.e.yAxis.start));var O=this.S(Y,Z);V=O[0];W=O[1];var N=V?U/V:10,K=parseInt(this.e.width,10);K+4>P&&(K=P-4);var I=Math.floor((P-K)/2),E=this.e.gradient?this.e.gradient:!1;S||this.m(af,ad.x,ac.y+0.5,ac.x,ac.y+0.5,"#000000",1);for(var H=0;H<ae.length;H++){var F=parseFloat(this.e.value(ae[H]||0));if(F){ab||(F-=Y);F*=W;var D=ad.x+I+H*P,A=ac.y;ab?A=ae[H].$startY:ae[H].$startY=A;if(!(A<ad.y+1)){if(F<0||this.e.yAxis&&F===0){this.canvases.y.renderTextAt(!0,!0,D+Math.floor(K/2),A,this.e.label(ae[H]))}else{var x=this.e.color.call(this,ae[H]);af.globalAlpha=this.e.alpha.call(this,ae[H]);af.fillStyle=this.e.color.call(this,ae[H]);af.beginPath();var L=this.zb(af,D-(this.e.border?0.5:0),A,K+(this.e.border?0.5:0),N,F,0,ad.y);af.fill();if(E){af.save();var J=this.Oa(af,D,A,D+K,L[1],E,x,"y");af.fillStyle=J.gradient;af.beginPath();L=this.zb(af,D+J.offset,A,K-J.offset*2,N,F,this.e.border?1:0,ad.y);af.fill();af.restore()}this.e.border&&(af.save(),this.Pa(af,x),af.beginPath(),this.zb(af,D-0.5,A,K+1,N,F,0,ad.y,1),af.stroke(),af.restore());af.globalAlpha=1;this.canvases[ab].renderTextAt(!1,!0,D+Math.floor(K/2),L[1]+(A-L[1])/2-7,this.e.label(ae[H]));aa.addRect(ae[H].id,[D-ad.x,L[1]-ad.y,L[0]-ad.x,(ae[H].$startY||A)-ad.y],ab);ae[H].$startY=this.e.border?L[1]+1:L[1]}}}else{if(!ab||!ae[H].$startY){ae[H].$startY=ac.y}}}},zb:function(F,E,D,C,A,y,x,w,v){F.moveTo(E,D);var u=D-A*y+x;u<w&&(u=w);F.lineTo(E,u);var s=E+C,o=u;F.lineTo(s,o);var n=E+C;F.lineTo(n,D);v||F.lineTo(E,D);return[n,o-2*x]}};dhtmlx.chart.line={pvt_render_line:function(L,K,J,I,H,F){var E,D,C,A,y,x,w,v,u;A=this.Aa(L,K,J,I,H);E=this.e;if(K.length){y=E.offset?J.x+A.cellWidth*0.5:J.x;C=[];for(D=0;D<K.length;D++){if(v=this.Ea(K[D],J,I,A)){x=!D?y:A.cellWidth*D-0.5+y,C.push({x:x,y:v,index:D})}}var s=(new Date).valueOf();this.Ha=J;for(D=1;D<=C.length;D++){x=C[D-1].x;v=C[D-1].y;if(D<C.length&&(w=C[D].x,u=C[D].y,this.m(L,x,v,w,u,E.line.color.call(this,K[D-1]),E.line.width),E.line&&E.line.shadow)){L.globalAlpha=0.3,this.m(L,x+2,v+E.line.width+8,w+2,u+E.line.width+8,"#eeeeee",E.line.width+3),L.globalAlpha=1}this.Da(L,x,v,K[C[D-1].index],E.label(K[C[D-1].index]),H,F,J)}}},Da:function(F,E,D,C,A,y,x){var w=this.e.item,v=parseInt(w.radius.call(this,C),10)||0,u=this.Ha;if(v){F.save();if(w.shadow){F.lineWidth=1;F.strokeStyle="#bdbdbd";F.fillStyle="#bdbdbd";for(var s=[0.1,0.2,0.3],o=s.length-1;o>=0;o--){F.globalAlpha=s[o],F.strokeStyle="#d0d0d0",F.beginPath(),this.Ra(F,E,D+2*v/3,v+o+1,w.type),F.stroke()}F.beginPath();F.globalAlpha=0.3;F.fillStyle="#bdbdbd";this.Ra(F,E,D+2*v/3,v+1,w.type);F.fill()}F.restore();F.lineWidth=w.borderWidth;F.fillStyle=w.color.call(this,C);F.strokeStyle=w.borderColor.call(this,C);F.globalAlpha=w.alpha.call(this,C);F.beginPath();this.Ra(F,E,D,v+1,w.type);F.fill();F.stroke();F.globalAlpha=1}A&&this.canvases[y].renderTextAt(!1,!0,E,D-v-this.e.labelOffset,this.e.label.call(this,C));var n=this.e.eventRadius||v+1;x.addRect(C.id,[E-n-u.x,D-n-u.y,E+n-u.x,D+n-u.y],y)},Ra:function(j,h,o,n,m){var l=[];if(m&&(m=="square"||m=="s")){n*=Math.sqrt(2)/2,l=[[h-n-j.lineWidth/2,o-n],[h+n,o-n],[h+n,o+n],[h-n,o+n],[h-n,o-n]]}else{if(m&&(m=="diamond"||m=="d")){var k=j.lineWidth>1?j.lineWidth*Math.sqrt(2)/4:0,l=[[h,o-n],[h+n,o],[h,o+n],[h-n,o],[h+k,o-n-k]]}else{l=m&&(m=="triangle"||m=="t")?[[h,o-n],[h+Math.sqrt(3)*n/2,o+n/2],[h-Math.sqrt(3)*n/2,o+n/2],[h,o-n]]:[[h,o,n,0,Math.PI*2,!0]]}}this.va(j,l)},Ea:function(A,y,x,w){var v=w.minValue,u=w.maxValue,s=w.unit,o=w.valueFactor,n=this.e.value(A),m=(parseFloat(n||0)-v)*o;this.e.yAxis||(m+=w.startValue/s);var l=x.y-s*m;if(m<0){l=x.y}if(n>u){l=y.y}if(n<v){l=x.y}return l},Aa:function(x,w,v,u,s){var o={},n;o.totalHeight=u.y-v.y;o.cellWidth=(u.x-v.x)/(!this.e.offset?w.length-1:w.length);var m=!!this.e.yAxis,l=this.e.view.indexOf("stacked")!=-1?this.lb(w):this.aa();o.maxValue=l.max;o.minValue=l.min;s||this.eb(w,v,u,o.minValue,o.maxValue,o.cellWidth);if(m){o.maxValue=parseFloat(this.e.yAxis.end),o.minValue=parseFloat(this.e.yAxis.start)}var k=this.S(o.minValue,o.maxValue);n=k[0];o.valueFactor=k[1];o.unit=n?o.totalHeight/n:10;o.startValue=0;if(!m&&(o.startValue=10,o.unit!=o.totalHeight)){o.unit=n?(o.totalHeight-o.startValue)/n:10}return o}};dhtmlx.chart.bar={pvt_render_bar:function(an,am,al,ak,aj,ai){var ah,ag,af,ae,ad,ac,ab,aa,Z,Y,V,T,Q,K=ak.y-al.y;Q=!!this.e.yAxis;T=!!this.e.xAxis;ae=this.aa();ad=ae.max;ac=ae.min;ag=(ak.x-al.x)/am.length;!aj&&(this.e.origin=="auto"||Q)&&this.eb(am,al,ak,ac,ad,ag);Q&&(ad=parseFloat(this.e.yAxis.end),ac=parseFloat(this.e.yAxis.start));Z=this.S(ac,ad);ab=Z[0];aa=Z[1];V=ab?K/ab:ab;!Q&&!(this.e.origin!="auto"&&T)&&(Y=10,V=ab?(K-Y)/ab:Y);!aj&&this.e.origin!="auto"&&!Q&&this.e.origin>ac&&this.Yb(an,am,al,ak,ag,ak.y-V*(this.e.origin-ac));ah=parseInt(this.e.width,10);var O=0,L=0;for(af=0;af<this.k.length;af++){af==aj&&(L=O),this.k[af].view=="bar"&&O++}this.k&&ah*O+4>ag&&(ah=parseInt(ag/O-4,10));var J=(ag-ah*O)/2,H=typeof this.e.radius!="undefined"?parseInt(this.e.radius,10):Math.round(ah/5),F=!1,U=this.e.gradient;U&&typeof U!="function"?(F=U,U=!1):U&&(U=an.createLinearGradient(0,ak.y,0,al.y),this.e.gradient(U));T||this.m(an,al.x,ak.y+0.5,ak.x,ak.y+0.5,"#000000",1);for(af=0;af<am.length;af++){var S=parseFloat(this.e.value(am[af])||0);if(!isNaN(S)){S>ad&&(S=ad);S-=ac;S*=aa;var I=al.x+J+af*ag+(ah+1)*L,W=ak.y;if(S<0||this.e.yAxis&&S===0&&!(this.e.origin!="auto"&&this.e.origin>ac)){this.canvases[aj].renderTextAt(!0,!0,I+Math.floor(ah/2),W,this.e.label(am[af]))}else{!Q&&!(this.e.origin!="auto"&&T)&&(S+=Y/V);var N=U||this.e.color.call(this,am[af]);an.globalAlpha=this.e.alpha.call(this,am[af]);var P=this.Tc(an,al,I,W,ah,ac,H,V,S,N,U,F);F&&this.Vc(an,I,W,ah,ac,H,V,S,N,F);this.e.border&&this.Uc(an,I,W,ah,ac,H,V,S,N);an.globalAlpha=1;P[0]!=I?this.canvases[aj].renderTextAt(!1,!0,I+Math.floor(ah/2),P[1],this.e.label(am[af])):this.canvases[aj].renderTextAt(!0,!0,I+Math.floor(ah/2),P[3],this.e.label(am[af]));ai.addRect(am[af].id,[I-al.x,P[3]-al.y,P[2]-al.x,P[1]-al.y],aj)}}}},$a:function(v,u,s,o,n,m,l){var k=this.e.xAxis,j=s;k&&this.e.origin!="auto"&&this.e.origin>l&&(s-=(this.e.origin-l)*n,j=s,o-=this.e.origin-l,o<0&&(o*=-1,v.translate(u+m,s),v.rotate(Math.PI),s=u=0),s-=0.5);return{value:o,x0:u,y0:s,start:j}},Tc:function(O,N,L,K,J,I,H,F,E,D,C,A){O.save();O.fillStyle=D;var y=this.$a(O,L,K,E,F,J,I),x=this.yb(O,y.x0,y.y0,J,H,F,y.value,this.e.border?1:0);C&&!A&&O.lineTo(y.x0+(this.e.border?1:0),N.y);O.fill();O.restore();var w=y.x0,v=y.x0!=L?L+x[0]:x[0],u=y.x0!=L?y.start-x[1]-y.y0:y.y0,s=y.x0!=L?y.start-y.y0:x[1];return[w,u,v,s]},Pa:function(f,e){var h,g;g=dhtmlx.math.toRgb(e);h=dhtmlx.math.rgbToHsv(g[0],g[1],g[2]);h[2]/=2;e="rgb("+dhtmlx.math.hsvToRgb(h[0],h[1],h[2])+")";f.strokeStyle=e;if(f.globalAlpha==1){f.globalAlpha=0.9}},Uc:function(x,w,v,u,s,o,n,m,l){var k;x.save();k=this.$a(x,w,v,m,n,u,s);this.Pa(x,l);this.yb(x,k.x0,k.y0,u,o,n,k.value,x.lineWidth/2,1);x.stroke();x.restore()},Vc:function(F,E,D,C,A,y,x,w,v,u){F.save();var s=this.$a(F,E,D,w,x,C,A),o=this.Oa(F,s.x0,s.y0,s.x0+C,s.y0-x*s.value+2,u,v,"y"),n=this.e.border?1:0;F.fillStyle=o.gradient;this.yb(F,s.x0+o.offset,s.y0,C-o.offset*2,y,x,s.value,o.offset+n);F.fill();F.restore()},yb:function(L,K,J,I,H,F,E,D,C){L.beginPath();var A=0;if(H>F*E){var y=(H-F*E)/H;y<=1&&y>=-1&&(A=-Math.acos(y)+Math.PI/2)}L.moveTo(K+D,J);var x=J-Math.floor(F*E)+H+(H?0:D);H<F*E&&L.lineTo(K+D,x);var w=K+H;H&&H>0&&L.arc(w,x,H-D,-Math.PI+A,-Math.PI/2,!1);var v=K+I-H-D,u=x-H+(H?D:0);L.lineTo(v,u);H&&H>0&&L.arc(v,x,H-D,-Math.PI/2,0-A,!1);var s=K+I-D;L.lineTo(s,J);C||L.lineTo(K+D,J);return[s,u]}};dhtmlx.chart.pie={pvt_render_pie:function(h,g,m,l,k,j){this.vb(h,g,m,l,1,j,k)},vb:function(U,T,S,Q,P,O,N){if(T.length){var L=this.jb(S,Q),K=this.e.radius?this.e.radius:L.radius;if(!(K<0)){var J=this.ud(T),I=this.dc(J),H=this.cc(J,I),F=this.e.x?this.e.x:L.x,E=this.e.y?this.e.y:L.y;P==1&&this.e.shadow&&this.Cc(U,F,E,K);E/=P;var D=-Math.PI/2,C=[];U.scale(1,P);if(this.e.gradient){var A=P!=1?F+K/3:F,y=P!=1?E+K/3:E;this.Zd(U,F,E,K,A,y)}for(var x=0;x<T.length;x++){if(J[x]){U.strokeStyle=this.e.lineColor.call(this,T[x]);U.beginPath();U.moveTo(F,E);C.push(D);alpha1=-Math.PI/2+H[x]-0.0001;U.arc(F,E,K,D,alpha1,!1);U.lineTo(F,E);var u=this.e.color.call(this,T[x]);U.fillStyle=u;U.fill();this.e.pieInnerText&&this.Wb(F,E,5*K/6,D,alpha1,P,this.e.pieInnerText(T[x],I),!0);this.e.label&&this.Wb(F,E,K+this.e.labelOffset,D,alpha1,P,this.e.label(T[x]));if(P!=1){this.Lb(U,F,E,D,alpha1,K,!0),U.fillStyle="#000000",U.globalAlpha=0.2,this.Lb(U,F,E,D,alpha1,K,!1),U.globalAlpha=1,U.fillStyle=u}O.addSector(T[x].id,D,alpha1,F-S.x,E-S.y/P,K,P,N);D=alpha1}}U.globalAlpha=0.8;for(var w,x=0;x<C.length;x++){w=this.R(C[x],F,E,K),this.m(U,F,E,w.x,w.y,this.e.lineColor.call(this,T[x]),2)}if(P==1){U.lineWidth=2,U.strokeStyle="#ffffff",U.beginPath(),U.arc(F,E,K+1,0,2*Math.PI,!1),U.stroke()}U.globalAlpha=1;U.scale(1,1/P)}}},ud:function(e){for(var d=[],f=0;f<e.length;f++){d.push(parseFloat(this.e.value(e[f])||0))}return d},dc:function(e){for(var d=0,f=0;f<e.length;f++){d+=e[f]}return d},cc:function(h,g){for(var m,l=[],k=0,g=g||this.dc(h),j=0;j<h.length;j++){m=h[j],l[j]=Math.PI*2*(g?(m+k)/g:1/h.length),k+=m}return l},jb:function(j,h){var o=h.x-j.x,n=h.y-j.y,m=j.x+o/2,l=j.y+n/2,k=Math.min(o/2,n/2);return{x:m,y:l,radius:k}},Lb:function(k,j,u,s,o,n,m){k.lineWidth=1;if(s<=0&&o>=0||s>=0&&o<=Math.PI||Math.abs(s-Math.PI)>0.003&&s<=Math.PI&&o>=Math.PI){s<=0&&o>=0&&(s=0,m=!1,this.Xb(k,j,u,n,s,o));if(s<=Math.PI&&o>=Math.PI){o=Math.PI,m=!1,this.Xb(k,j,u,n,s,o)}var l=(this.e.height||Math.floor(n/4))/this.e.cant;k.beginPath();k.arc(j,u,n,s,o,!1);k.lineTo(j+n*Math.cos(o),u+n*Math.sin(o)+l);k.arc(j,u+l,n,o,s,!0);k.lineTo(j+n*Math.cos(s),u+n*Math.sin(s));k.fill();m&&k.stroke()}},Xb:function(h,g,m,l,k,j){h.beginPath();h.arc(g,m,l,k,j,!1);h.stroke()},Cc:function(h,g,m,l){h.globalAlpha=0.5;for(var k="#c4c4c4,#c6c6c6,#cacaca,#dcdcdc,#dddddd,#e0e0e0,#eeeeee,#f5f5f5,#f8f8f8".split(","),j=k.length-1;j>-1;j--){h.beginPath(),h.fillStyle=k[j],h.arc(g+1,m+1,l+j,0,Math.PI*2,!0),h.fill()}h.globalAlpha=1},qd:function(b){b.addColorStop(0,"#ffffff");b.addColorStop(0.7,"#7a7a7a");b.addColorStop(1,"#000000");return b},Zd:function(j,h,o,n,m,l){j.beginPath();var k;typeof this.e.gradient!="function"?(k=j.createRadialGradient(m,l,n/4,h,o,n),k=this.qd(k)):k=this.e.gradient(k);j.fillStyle=k;j.arc(h,o,n,0,Math.PI*2,!0);j.fill();j.globalAlpha=0.7},Wb:function(T,S,Q,P,O,N,L,K){var J=this.canvases[0].renderText(0,0,L,0,1);if(J){var I=J.scrollWidth;J.style.width=I+"px";I>T&&(I=T);var H=O-P<0.2?4:8;K&&(H=I/1.8);var F=P+(O-P)/2;Q-=(H-8)/2;var E=-H,D=-8,C="right";if(F>=Math.PI/2&&F<Math.PI||F<=3*Math.PI/2&&F>=Math.PI){E=-I-E+1,C="left"}var A=0;!K&&N<1&&F>0&&F<Math.PI&&(A=(this.e.height||Math.floor(Q/4))/N);var y=(S+Math.floor((Q+A)*Math.sin(F)))*N+D,x=T+Math.floor((Q+H/2)*Math.cos(F))+E,w=O<Math.PI/2+0.01,u=P<Math.PI/2;if(u&&w){x=Math.max(x,T+3)}else{if(!u&&!w){x=Math.min(x,T-I)}else{if(!K&&(F>=Math.PI/2&&F<Math.PI||F<=3*Math.PI/2&&F>=Math.PI)){x+=I/3}}}J.style.top=y+"px";J.style.left=x+"px";J.style.width=I+"px";J.style.textAlign=C;J.style.whiteSpace="nowrap"}}};dhtmlx.chart.pie3D={pvt_render_pie3D:function(h,g,m,l,k,j){this.vb(h,g,m,l,this.e.cant,j)}};dhtmlx.chart.donut={pvt_render_donut:function(D,C,A,y,x,w){if(C.length){this.vb(D,C,A,y,1,w);var v=this.e,u=this.jb(A,y),s=v.radius?v.radius:u.radius,o=v.innerRadius&&v.innerRadius<s?v.innerRadius:s/3,n=v.x?v.x:u.x,m=v.y?v.y:u.y;D.fillStyle="#ffffff";D.beginPath();D.arc(n,m,o,0,Math.PI*2,!0);D.fill()}}};dhtmlx.Group={p:function(){this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this.e.group&&this.group(this.e.group,!1)},this));this.attachEvent("onBeforeRender",dhtmlx.bind(function(b){this.e.sort&&(b.block(),b.sort(this.e.sort),b.unblock())},this));this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this.e.sort=null},this))},zd:function(d,c){d.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1);this.block();this.clearAll();this.unblock()},c))},sum:function(e,d){var e=dhtmlx.Template.setter(e),d=d||this.data,f=0;d.each(function(a){f+=e(a)*1});return f},min:function(e,d){var e=dhtmlx.Template.setter(e),d=d||this.data,f=Infinity;d.each(function(a){e(a)*1<f&&(f=e(a)*1)});return f*1},max:function(e,d){var e=dhtmlx.Template.setter(e),d=d||this.data,f=-Infinity;d.each(function(a){e(a)*1>f&&(f=e(a)*1)});return f},be:function(k){var j=function(d,c){d=dhtmlx.Template.setter(d);return d(c[0])},u=dhtmlx.Template.setter(k.by);k.map[u]||(k.map[u]=[u,j]);var s={},o=[];this.data.each(function(d){var c=u(d);s[c]||(o.push({id:c}),s[c]=dhtmlx.toArray());s[c].push(d)});for(var n in k.map){var m=k.map[n][1]||j;typeof m!="function"&&(m=this[m]);for(var l=0;l<o.length;l++){o[l][n]=m.call(this,k.map[n][0],s[o[l].id])}}this.nc=this.data;this.data=new dhtmlx.DataStore;this.data.provideApi(this,!0);this.zd(this.data,this);this.parse(o,"json")},group:function(d,c){this.ungroup(!1);this.be(d);c!==!1&&this.render()},ungroup:function(b){if(this.nc){this.data=this.nc,this.data.provideApi(this,!0)}b!==!1&&this.render()},group_setter:function(b){return b},sort_setter:function(b){typeof b!="object"&&(b={by:b});this.N(b,{as:"string",dir:"asc"});return b}};dhtmlx.DataDriver.dhtmlxgrid={wd:"_get_cell_value",toObject:function(b){return this.ec=b},getRecords:function(b){return b.rowsBuffer},getDetails:function(e){for(var d={},f=0;f<this.ec.getColumnsNum();f++){d["data"+f]=this.ec[this.wd](e,f)}return d},getInfo:function(){return{v:0,r:0}}};dhtmlx.ui.Canvas=function(e,d,f){this.$=[];this.Lc=d;this.g=e;this.pc(e,d,f)};dhtmlx.ui.Canvas.prototype={pc:function(e,d,f){this.u=dhtmlx.html.create("canvas",{width:e.offsetWidth,height:e.offsetHeight,canvas_id:d,style:f||""});e.appendChild(this.u);!this.u.getContext&&dhtmlx.z&&(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this.u));return this.u},getCanvas:function(b){return(this.u||this.pc()).getContext(b||"2d")},Wd:function(){this.u&&(this.u.setAttribute("width",this.u.parentNode.offsetWidth),this.u.setAttribute("height",this.u.parentNode.offsetHeight))},renderText:function(h,g,m,l,k){if(m){var j=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(l?" "+l:""),style:"left:"+h+"px; top:"+g+"px;"},m);this.g.appendChild(j);this.$.push(j);if(k){j.style.width=k+"px"}return j}},renderTextAt:function(k,j,u,s,o,n,m){var l=this.renderText.call(this,u,s,o,n,m);if(l){if(k){l.style.top=k=="middle"?parseInt(s-l.offsetHeight/2,10)+"px":s-l.offsetHeight+"px"}if(j){l.style.left=j=="left"?u-l.offsetWidth+"px":parseInt(u-l.offsetWidth/2,10)+"px"}}return l},clearCanvas:function(e){var d=[],f;for(f=0;f<this.$.length;f++){this.g.removeChild(this.$[f])}this.$=[];if(!e&&this.g.n){for(d=this.bc();d.length;){d[0].parentNode.removeChild(d[0]),d.splice(0,1)}d=null;if(!this.g.n.getElementsByTagName("AREA").length){this.g.n.parentNode.removeChild(this.g.n),this.g.n=null}}this.getCanvas().clearRect(0,0,this.u.offsetWidth,this.u.offsetHeight)},toggleCanvas:function(){this.Eb(this.u.style.display=="none")},showCanvas:function(){this.Eb(!0)},hideCanvas:function(){this.Eb(!1)},Eb:function(e){var d,f;for(f=0;f<this.$.length;f++){this.$[f].style.display=e?"":"none"}if(this.g.n){d=this.bc();for(f=0;f<d.length;f++){e?d[f].removeAttribute("disabled"):d[f].setAttribute("disabled","true")}}this.u.style.display=e?"":"none"},bc:function(){var e=[],d,f;d=this.g.n.getElementsByTagName("AREA");for(f=0;f<d.length;f++){d[f].getAttribute("userdata")==this.Lc&&e.push(d[f])}return e}};dhtmlXChart=function(d){this.name="Chart";this.version="3.0";dhtmlx.extend(this,dhtmlx.Settings);this.sb(d,"dhx_chart");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);this.data.provideApi(this,!0);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.Destruction);dhtmlx.extend(this,dhtmlx.Group);dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var c in dhtmlx.chart){dhtmlx.extend(this,dhtmlx.chart[c])}d.preset&&this.definePreset(d);this.J(d,this.defaults);this.k=[this.e];this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this));this.attachEvent("onLocateData",this.de)};dhtmlXChart.prototype={w:"dhx_area_id",on_click:{dhx_chart_legend_item:function(j,h,o){var n=o.getAttribute("series_id");if(this.callEvent("onLegendClick",[j,n,o])){var m=this.e,l=m.legend.values,k=l&&l[n].toggle||m.legend.toggle;typeof n!="undefined"&&this.k.length>1&&k&&(o.className.indexOf("hidden")!=-1?this.showSeries(n):this.hideSeries(n))}}},on_dblclick:{},on_mouse_move:{},bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var b in this.canvases){this.canvases[b].Wd()}this.render()},view_setter:function(b){if(typeof this.e.offset=="undefined"){this.e.offset=!(b=="area"||b=="stackedArea")}b=="radar"&&!this.e.yAxis&&this.define("yAxis",{});b=="scatter"&&(this.e.yAxis||this.define("yAxis",{}),this.e.xAxis||this.define("xAxis",{}));return b},clearCanvas:function(){if(this.canvases&&typeof this.canvases=="object"){for(var b in this.canvases){this.canvases[b].clearCanvas()}}},render:function(){var g,f,k,j,h;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&typeof this.canvases=="object"){for(f in this.canvases){this.canvases[f].clearCanvas()}}else{this.canvases={}}if(this.e.legend){this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this.g,"legend")),this.cb(this.data.getRange(),this.g.offsetWidth)}g=this.od(this.g.offsetWidth,this.g.offsetHeight);j=new dhtmlx.ui.Map(this.w);h=this.e;k=this.pd();for(f=0;f<this.k.length;f++){this.e=this.k[f],this.canvases[f]||(this.canvases[f]=new dhtmlx.ui.Canvas(this.g,f,"z-index:"+(2+f))),this["pvt_render_"+this.e.view](this.canvases[f].getCanvas(),k,g.start,g.end,f,j)}j.render(this.g);this.g.lastChild.style.zIndex=1000;this.Dc(this.g.lastChild,g);this.callEvent("onAfterRender",[]);this.e=h}},Dc:function(f,e){var h={};h.left=e.start.x;h.top=e.start.y;h.width=e.end.x-e.start.x;h.height=e.end.y-e.start.y;for(var g in h){f.style[g]=h[g]+"px"}},pd:function(){var x,w,v,u,s,o,n,m,l,k;u=this.data.getRange();x=this.e.view.toLowerCase().indexOf("barh")!=-1?"yAxis":"xAxis";if((w=this.e[x])&&w.units&&typeof w.units=="object"){v=w.units;m=[];if(typeof v.start!="undefined"&&typeof v.end!="undefined"&&typeof v.next!="undefined"){for(n=v.start;n<=v.end;){m.push(n),n=v.next.call(this,n)}}else{Object.prototype.toString.call(v)==="[object Array]"&&(m=v)}o=[];if(m.length){l=w.value;k={};for(s=0;s<u.length;s++){k[l(u[s])]=s}for(s=0;s<m.length;s++){typeof k[m[s]]!="undefined"?(u[k[m[s]]].$unit=m[s],o.push(u[k[m[s]]])):o.push({$unit:m[s]})}}return o}return u},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(b){this.define("value",b)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(b){typeof b!="function"&&b&&b===!0&&(b="light");return b},colormap:{RAINBOW:function(d){var c=Math.floor(this.indexById(d.id)/this.dataCount()*1536);c==1536&&(c-=1);return this.Pd[Math.floor(c/256)](c%256)}},color_setter:function(b){return this.colormap[b]||dhtmlx.Template.obj_setter(b)},fill_setter:function(b){return !b||b==0?!1:dhtmlx.Template.obj_setter(b)},definePreset:function(b){this.define("preset",b.preset);delete b.preset},preset_setter:function(f){var e,h,g;this.defaults=dhtmlx.extend({},this.defaults);if(typeof dhtmlx.presets.chart[f]=="object"){g=dhtmlx.presets.chart[f];for(e in g){if(typeof g[e]=="object"){if(!this.defaults[e]||typeof this.defaults[e]!="object"){this.defaults[e]=dhtmlx.extend({},g[e])}else{for(h in this.defaults[e]=dhtmlx.extend({},this.defaults[e]),g[e]){this.defaults[e][h]=g[e][h]}}}else{this.defaults[e]=g[e]}}return f}return !1},legend_setter:function(b){if(!b){if(this.legendObj){this.legendObj.innerHTML="",this.legendObj=null}return !1}typeof b!="object"&&(b={template:b});this.N(b,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:this.e.view.toLowerCase().indexOf("stacked")!=-1?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3});b.template=dhtmlx.Template.setter(b.template);return b},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:0.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(e){typeof e!="object"&&(e={color:e,borderColor:e});this.N(e,dhtmlx.extend({},this.defaults.item));for(var d=["alpha","borderColor","color","radius"],f=0;f<d.length;f++){e[d[f]]=dhtmlx.Template.setter(e[d[f]])}return e},line_setter:function(b){typeof b!="object"&&(b={color:b});dhtmlx.extend(this.defaults.line,b);b=dhtmlx.extend({},this.defaults.line);b.color=dhtmlx.Template.setter(b.color);return b},padding_setter:function(b){typeof b!="object"&&(b={left:b,right:b,top:b,bottom:b});this.N(b,{left:50,right:20,top:35,bottom:40});return b},xAxis_setter:function(d){if(!d){return !1}typeof d!="object"&&(d={template:d});if(!d.value){d.value=d.template}this.N(d,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});var c=["lineColor","template","lines","value"];this.Jb(c,d);this.Ca=dhtmlx.extend({},d);return d},yAxis_setter:function(d){this.N(d,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var c=["lineColor","template","lines","bg"];this.Jb(c,d);this.ma=dhtmlx.extend({},d);return d},Jb:function(e,d){for(var f=0;f<e.length;f++){d[e[f]]=dhtmlx.Template.setter(d[e[f]])}},eb:function(j,h,o,n,m,l){var k=0;if(this.e.yAxis){this.canvases.y=new dhtmlx.ui.Canvas(this.g,"axis_y"),k=this.Zb(this.canvases.y.getCanvas(),j,h,o,n,m)}if(this.e.xAxis){this.canvases.x=new dhtmlx.ui.Canvas(this.g,"axis_x"),this.Yb(this.canvases.x.getCanvas(),j,h,o,l,k)}return k},Yb:function(F,E,D,C,A,y){for(var x=D.x-0.5,w=parseInt(y?y:C.y,10)+0.5,v=C.x,u,s=!0,o=0;o<E.length;o++){this.e.offset===!0?u=x+A/2+o*A:(u=o==E.length-1?C.x:x+o*A,s=!!o);u=Math.ceil(u)-0.5;var n=this.e.origin!="auto"&&this.e.view=="bar"&&parseFloat(this.e.value(E[o]))<this.e.origin;this.ed(u,w,E[o],s,n);(this.e.offset||o)&&this.e.xAxis.lines.call(this,E[o])&&this.fd(F,u,C.y,D.y,E[o])}this.canvases.x.renderTextAt(!0,!1,x,C.y+this.e.padding.bottom-3,this.e.xAxis.title,"dhx_axis_title_x",C.x-D.x);this.m(F,x,w,v,w,this.e.xAxis.color,1);this.e.xAxis.lines.call(this,{})&&this.e.offset&&this.m(F,v+0.5,C.y,v+0.5,D.y+0.5,this.e.xAxis.color,0.2)},Zb:function(Q,P,O,N,L,K){var J,I={};if(this.e.yAxis){var H=O.x-0.5,F=N.y,E=O.y,D=N.y;this.e.yAxis.step&&(J=parseFloat(this.e.yAxis.step));if(typeof this.ma.step=="undefined"||typeof this.ma.start=="undefined"||typeof this.ma.end=="undefined"){I=this.Wa(L,K),L=I.start,K=I.end,J=I.step,this.e.yAxis.end=K,this.e.yAxis.start=L}this.tc(O,N);if(J!==0){if(K==L){return F}for(var C=(F-E)*J/(K-L),A=0,y=L;y<=K;y+=J){I.fixNum&&(y=parseFloat((new Number(y)).toFixed(I.fixNum)));var x=Math.floor(F-A*C)+0.5;!(y==L&&this.e.origin=="auto")&&this.e.yAxis.lines.call(this,y)&&this.m(Q,H,x,N.x,x,this.e.yAxis.lineColor.call(this,y),1);y==this.e.origin&&(D=x);var w=y;if(J<1){var v=Math.min(this.da(J),L<=0?0:this.da(L)),u=Math.pow(10,-v),y=w=Math.round(y*u)/u}this.canvases.y.renderText(0,x-5,this.e.yAxis.template(w.toString()),"dhx_axis_item_y",O.x-5);A++}this.m(Q,H,F+1,H,E,this.e.yAxis.color,1);return D}}},tc:function(f,e){var h="dhx_axis_title_y"+(dhtmlx.z&&dhtmlx.z!=9?" dhx_ie_filter":""),g=this.canvases.y.renderTextAt("middle",!1,0,parseInt((e.y-f.y)/2+f.y,10),this.e.yAxis.title,h);if(g){g.style.left=(dhtmlx.env.transform?(g.offsetHeight-g.offsetWidth)/2:0)+"px"}},Wa:function(A,y){if(this.e.origin!="auto"&&this.e.origin<A){A=this.e.origin}var x,w,v;x=(y-A)/8||1;var u=Math.floor(this.da(x)),s=Math.pow(10,u),o=x/s,o=o>5?10:5;x=parseInt(o,10)*s;if(x>Math.abs(A)){w=A<0?-x:0}else{var n=Math.abs(A),m=Math.floor(this.da(n)),l=n/Math.pow(10,m);w=Math.ceil(l*10)/10*Math.pow(10,m)-x;for(n>1&&x>0.1&&(w=Math.ceil(w));A<0?w<=A:w>=A;){w-=x}A<0&&(w=-w-2*x)}for(v=w;v<y;){v+=x,v=parseFloat((new Number(v)).toFixed(Math.abs(u)))}return{start:w,end:v,step:x,fixNum:Math.abs(u)}},aa:function(k,j){var u,s,o=arguments.length&&k=="h"?this.Ca:this.ma,j=j||"value";if(o&&typeof o.end!="undefined"&&typeof o.start!="undefined"&&o.step){u=parseFloat(o.end),s=parseFloat(o.start)}else{if(u=this.max(this.k[0][j]),s=o&&typeof o.start!="undefined"?parseFloat(o.start):this.min(this.k[0][j]),this.k.length>1){for(var n=1;n<this.k.length;n++){var m=this.max(this.k[n][j]),l=this.min(this.k[n][j]);m>u&&(u=m);l<s&&(s=l)}}}return{max:u,min:s}},da:function(d){var c="log";return Math.floor(Math[c](d)/Math.LN10)},ed:function(h,g,m,l,k){if(this.e.xAxis){var j=this.canvases.x.renderTextAt(k,l,h,g-(k?2:0),this.e.xAxis.template(m));j&&(j.className+=" dhx_axis_item_x")}},fd:function(g,f,k,j,h){this.e.xAxis&&this.e.xAxis.lines&&this.m(g,f,k,f,j,this.e.xAxis.lineColor.call(this,h),1)},m:function(j,h,o,n,m,l,k){j.strokeStyle=l;j.lineWidth=k;j.beginPath();j.moveTo(h,o);j.lineTo(n,m);j.stroke();j.lineWidth=1},S:function(g,f){var k,j,h=1;k=f!=g?f-g:g;return[k,h]},Pd:[function(b){return"#FF"+dhtmlx.math.toHex(b/2,2)+"00"},function(b){return"#FF"+dhtmlx.math.toHex(b/2+128,2)+"00"},function(b){return"#"+dhtmlx.math.toHex(255-b,2)+"FF00"},function(b){return"#00FF"+dhtmlx.math.toHex(b,2)},function(b){return"#00"+dhtmlx.math.toHex(255-b,2)+"FF"},function(b){return"#"+dhtmlx.math.toHex(b,2)+"00FF"}],addSeries:function(d){var c=this.e;this.e=dhtmlx.extend({},c);this.J(d,{});this.k.push(this.e);this.e=c},de:function(f,e){var h;this.Fb=e.getAttribute("userdata");if(this.k[this.Fb]){for(var g=0;g<this.k.length;g++){(h=this.k[g].tooltip)&&h.disable()}if(!e.getAttribute("disabled")){(h=this.k[this.Fb].tooltip)&&h.enable()}}},hideSeries:function(b){this.canvases[b].hideCanvas();if(this.e.legend.values&&this.e.legend.values[b]){this.e.legend.values[b].$hidden=!0}this.cb()},showSeries:function(b){this.canvases[b].showCanvas();this.e.legend.values&&this.e.legend.values[b]&&delete this.e.legend.values[b].$hidden;this.cb()},cb:function(K,J){var I,H,F,E,D,C,A,y=0,x=0,w,v,u,s,K=K||[],J=J||this.g.offsetWidth;w=this.canvases.legend.getCanvas();H=this.e.legend;A=this.e.legend.layout!="x"?"width:"+H.width+"px":"";if(this.legendObj){this.legendObj.innerHTML="",this.legendObj.parentNode.removeChild(this.legendObj)}this.canvases.legend.clearCanvas(!0);F=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+y+"px; top:"+x+"px;"+A},"");if(H.padding){F.style.padding=H.padding+"px"}this.legendObj=F;this.g.appendChild(F);D=[];if(H.values){for(I=0;I<H.values.length;I++){D.push(this.Ub(F,H.values[I].text,typeof H.values[I].id!="undefined"?typeof H.values[I].id:I,H.values[I].$hidden))}}else{for(I=0;I<K.length;I++){D.push(this.Ub(F,H.template(K[I])))}}C=F.offsetWidth;E=F.offsetHeight;C<this.g.offsetWidth&&(H.layout=="x"&&H.align=="center"&&(y=(this.g.offsetWidth-C)/2),H.align=="right"&&(y=this.g.offsetWidth-C),H.margin&&H.align!="center"&&(y+=(H.align=="left"?1:-1)*H.margin));E<this.g.offsetHeight&&(H.valign=="middle"&&H.align!="center"&&H.layout!="x"?x=(this.g.offsetHeight-E)/2:H.valign=="bottom"&&(x=this.g.offsetHeight-E),H.margin&&H.valign!="middle"&&(x+=(H.valign=="top"?1:-1)*H.margin));F.style.left=y+"px";F.style.top=x+"px";w.save();for(I=0;I<D.length;I++){s=D[I],H.values&&H.values[I].$hidden?(u=!0,v=H.values[I].disableColor?H.values[I].disableColor:"#d9d9d9"):(u=!1,v=H.values?H.values[I].color:this.e.color.call(this,K[I])),this.Zc(w,s.offsetLeft+y,s.offsetTop+x,v,s.offsetHeight,u,I)}w.restore();D=null},Ub:function(h,g,m,l){var k="";this.e.legend.layout=="x"&&(k="float:left;");var j=dhtmlx.html.create("DIV",{style:k+"padding-left:"+(10+this.e.legend.marker.width)+"px","class":"dhx_chart_legend_item"+(l?" hidden":"")},g);arguments.length>2&&j.setAttribute("series_id",m);h.appendChild(j);return j},Zc:function(L,K,J,I,H,F,E){var D=[],C=this.e.legend.marker,A=this.e.legend.values,y=A&&A[E].markerType?A[E].markerType:C.type;if(I){L.strokeStyle=L.fillStyle=I}L.beginPath();if(y=="round"||!C.radius){L.lineWidth=C.height;L.lineCap=y;K+=L.lineWidth/2+5;J+=H/2;L.moveTo(K,J);var x=K+C.width-C.height+1;L.lineTo(x,J)}else{if(y=="item"){if(this.e.line&&this.e.view!="scatter"&&!this.e.disableLines){L.beginPath();L.lineWidth=this.k[E].line.width;L.strokeStyle=F?I:this.k[E].line.color.call(this,{});var w=K+5,v=J+H/2;L.moveTo(w,v);x=w+C.width;L.lineTo(x,v);L.stroke()}var u=this.k[E].item,s=parseInt(u.radius.call(this,{}),10)||0;if(s){L.beginPath(),F?(L.lineWidth=u.borderWidth,L.strokeStyle=I,L.fillStyle=I):(L.lineWidth=u.borderWidth,L.fillStyle=u.color.call(this,{}),L.strokeStyle=u.borderColor.call(this,{}),L.globalAlpha=u.alpha.call(this,{})),L.beginPath(),K+=C.width/2+5,J+=H/2,this.Ra(L,K,J,s+1,u.type),L.fill(),L.stroke()}L.globalAlpha=1}else{L.lineWidth=1,K+=5,J+=H/2-C.height/2,D=[[K+C.radius,J+C.radius,C.radius,Math.PI,3*Math.PI/2,!1],[K+C.width-C.radius,J],[K+C.width-C.radius,J+C.radius,C.radius,-Math.PI/2,0,!1],[K+C.width,J+C.height-C.radius],[K+C.width-C.radius,J+C.height-C.radius,C.radius,0,Math.PI/2,!1],[K+C.radius,J+C.height],[K+C.radius,J+C.height-C.radius,C.radius,Math.PI/2,Math.PI,!1],[K,J+C.radius]],this.va(L,D)}}L.stroke();L.fill()},od:function(v,u){var s,o,n,m;s=this.e.padding.left;o=this.e.padding.top;n=v-this.e.padding.right;m=u-this.e.padding.bottom;if(this.e.legend){var l=this.e.legend,k=this.e.legend.width,j=this.e.legend.height;l.layout=="x"?l.valign=="center"?l.align=="right"?n-=k:l.align=="left"&&(s+=k):l.valign=="bottom"?m-=j:o+=j:l.align=="right"?n-=k:l.align=="left"&&(s+=k)}return{start:{x:s,y:o},end:{x:n,y:m}}},lb:function(h){var g,m,l,k,j;if(this.e.yAxis&&typeof this.e.yAxis.end!="undefined"&&typeof this.e.yAxis.start!="undefined"&&this.e.yAxis.step){l=parseFloat(this.e.yAxis.end),k=parseFloat(this.e.yAxis.start)}else{for(g=0;g<h.length;g++){h[g].$sum=0;h[g].$min=Infinity;for(m=0;m<this.k.length;m++){if(j=parseFloat(this.k[m].value(h[g])||0),!isNaN(j)&&(this.k[m].view.toLowerCase().indexOf("stacked")!=-1&&(h[g].$sum+=j),j<h[g].$min)){h[g].$min=j}}}l=-Infinity;k=Infinity;for(g=0;g<h.length;g++){if(h[g].$sum>l){l=h[g].$sum}if(h[g].$min<k){k=h[g].$min}}k>0&&(k=0)}return{max:l,min:k}},Oa:function(I,H,F,E,D,C,A,y){var x,w,v,u,s,o;C=="light"?(x=y=="x"?I.createLinearGradient(H,F,E,F):I.createLinearGradient(H,F,H,D),o=[[0,"#FFFFFF"],[0.9,A],[1,A]],w=2):C=="falling"||C=="rising"?(x=y=="x"?I.createLinearGradient(H,F,E,F):I.createLinearGradient(H,F,H,D),v=dhtmlx.math.toRgb(A),u=dhtmlx.math.rgbToHsv(v[0],v[1],v[2]),u[1]*=0.5,s="rgb("+dhtmlx.math.hsvToRgb(u[0],u[1],u[2])+")",C=="falling"?o=[[0,s],[0.7,A],[1,A]]:C=="rising"&&(o=[[0,A],[0.3,A],[1,s]]),w=0):(I.globalAlpha=0.37,w=0,x=y=="x"?I.createLinearGradient(H,D,H,F):I.createLinearGradient(H,F,E,F),o=[[0,"#9d9d9d"],[0.3,"#e8e8e8"],[0.45,"#ffffff"],[0.55,"#ffffff"],[0.7,"#e8e8e8"],[1,"#9d9d9d"]]);this.vd(x,o);return{gradient:x,offset:w}},R:function(f,e,h,g){f*=-1;e+=Math.cos(f)*g;h-=Math.sin(f)*g;return{x:e,y:h}},vd:function(e,d){for(var f=0;f<d.length;f++){e.addColorStop(d[f][0],d[f][1])}},va:function(f,e){var h,g;for(h=0;h<e.length;h++){g=h?"lineTo":"moveTo",e[h].length>2&&(g="arc"),f[g].apply(f,e[h])}},he:function(f,e,h,g){f.arc(e,h,g,Math.PI*2,!0)},fe:function(g,f,k,j,h){g.addRect(f,[k[0].x-j.x,k[0].y-j.y,k[1].x-j.x,k[1].y-j.y],h)}};dhtmlx.compat("layout");document.createElement("canvas").getContext||function(){function aj(){return this.context_||(this.context_=new aa(this))}function ai(f,e,h){var g=E.call(arguments,2);return function(){return f.apply(e,g.concat(E.call(arguments)))}}function ah(d){var c=d.srcElement;switch(d.propertyName){case"width":c.style.width=c.attributes.width.nodeValue+"px";c.getContext().clearRect();break;case"height":c.style.height=c.attributes.height.nodeValue+"px",c.getContext().clearRect()}}function ag(d){var c=d.srcElement;if(c.firstChild){c.firstChild.style.width=c.clientWidth+"px",c.firstChild.style.height=c.clientHeight+"px"}}function af(){return[[1,0,0],[0,1,0],[0,0,1]]}function ae(j,e){for(var o=af(),n=0;n<3;n++){for(var m=0;m<3;m++){for(var l=0,k=0;k<3;k++){l+=j[n][k]*e[k][m]}o[n][m]=l}}return o}function ad(d,c){c.fillStyle=d.fillStyle;c.lineCap=d.lineCap;c.lineJoin=d.lineJoin;c.lineWidth=d.lineWidth;c.miterLimit=d.miterLimit;c.shadowBlur=d.shadowBlur;c.shadowColor=d.shadowColor;c.shadowOffsetX=d.shadowOffsetX;c.shadowOffsetY=d.shadowOffsetY;c.strokeStyle=d.strokeStyle;c.globalAlpha=d.globalAlpha;c.arcScaleX_=d.arcScaleX_;c.arcScaleY_=d.arcScaleY_;c.lineScale_=d.lineScale_}function ac(j){var h,o=1,j=String(j);if(j.substring(0,3)=="rgb"){var n=j.indexOf("(",3),m=j.indexOf(")",n+1),l=j.substring(n+1,m).split(",");h="#";for(var k=0;k<3;k++){h+=P[Number(l[k])]}l.length==4&&j.substr(3,1)=="a"&&(o=l[3])}else{h=j}return{color:h,alpha:o}}function ab(b){switch(b){case"butt":return"flat";case"round":return"round";default:return"square"}}function aa(d){this.m_=af();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.fillStyle=this.strokeStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=J*1;this.globalAlpha=1;this.canvas=d;var c=d.ownerDocument.createElement("div");c.style.width=d.clientWidth+"px";c.style.height=d.clientHeight+"px";c.style.overflow="hidden";c.style.position="absolute";d.appendChild(c);this.element_=c;this.lineScale_=this.arcScaleY_=this.arcScaleX_=1}function Z(f,e,h,g){f.currentPath_.push({type:"bezierCurveTo",cp1x:e.x,cp1y:e.y,cp2x:h.x,cp2y:h.y,x:g.x,y:g.y});f.currentX_=g.x;f.currentY_=g.y}function Y(e){for(var d=0;d<3;d++){for(var f=0;f<2;f++){if(!isFinite(e[d][f])||isNaN(e[d][f])){return !1}}}return !0}function W(f,e,h){if(Y(e)&&(f.m_=e,h)){var g=e[0][0]*e[1][1]-e[0][1]*e[1][0];f.lineScale_=K(I(g))}}function V(b){this.type_=b;this.r1_=this.y1_=this.x1_=this.r0_=this.y0_=this.x0_=0;this.colors_=[]}function U(){}var T=Math,Q=T.round,O=T.sin,L=T.cos,I=T.abs,K=T.sqrt,J=10,H=J/2,E=Array.prototype.slice,D={init:function(b){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var d=b||document;d.createElement("canvas");d.attachEvent("onreadystatechange",ai(this.init_,this,d))}},init_:function(f){f.namespaces.g_vml_||f.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML");f.namespaces.g_o_||f.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML");if(!f.styleSheets.ex_canvas_){var e=f.createStyleSheet();e.owningElement.id="ex_canvas_";e.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}for(var h=f.getElementsByTagName("canvas"),g=0;g<h.length;g++){this.initElement(h[g])}},initElement:function(a){if(!a.getContext){a.getContext=aj;a.innerHTML="";a.attachEvent("onpropertychange",ah);a.attachEvent("onresize",ag);var c=a.attributes;c.width&&c.width.specified?a.style.width=c.width.nodeValue+"px":a.width=a.clientWidth;c.height&&c.height.specified?a.style.height=c.height.nodeValue+"px":a.height=a.clientHeight}return a}};D.init();for(var P=[],N=0;N<16;N++){for(var F=0;F<16;F++){P[N*16+F]=N.toString(16)+F.toString(16)}}var S=aa.prototype;S.clearRect=function(){this.element_.innerHTML=""};S.beginPath=function(){this.currentPath_=[]};S.moveTo=function(e,d){var f=this.getCoords_(e,d);this.currentPath_.push({type:"moveTo",x:f.x,y:f.y});this.currentX_=f.x;this.currentY_=f.y};S.lineTo=function(e,d){var f=this.getCoords_(e,d);this.currentPath_.push({type:"lineTo",x:f.x,y:f.y});this.currentX_=f.x;this.currentY_=f.y};S.bezierCurveTo=function(v,u,s,o,n,m){var l=this.getCoords_(n,m),k=this.getCoords_(v,u),j=this.getCoords_(s,o);Z(this,k,j,l)};S.quadraticCurveTo=function(k,j,u,s){var o=this.getCoords_(k,j),n=this.getCoords_(u,s),m={x:this.currentX_+2/3*(o.x-this.currentX_),y:this.currentY_+2/3*(o.y-this.currentY_)},l={x:m.x+(n.x-this.currentX_)/3,y:m.y+(n.y-this.currentY_)/3};Z(this,m,l,n)};S.arc=function(ao,an,am,al,ak,C){am*=J;var A=C?"at":"wa",y=ao+L(al)*am-H,x=an+O(al)*am-H,w=ao+L(ak)*am-H,v=an+O(ak)*am-H;y==w&&!C&&(y+=0.125);var u=this.getCoords_(ao,an),s=this.getCoords_(y,x),o=this.getCoords_(w,v);this.currentPath_.push({type:A,x:u.x,y:u.y,radius:am,xStart:s.x,yStart:s.y,xEnd:o.x,yEnd:o.y})};S.rect=function(f,e,h,g){this.moveTo(f,e);this.lineTo(f+h,e);this.lineTo(f+h,e+g);this.lineTo(f,e+g);this.closePath()};S.strokeRect=function(g,f,k,j){var h=this.currentPath_;this.beginPath();this.moveTo(g,f);this.lineTo(g+k,f);this.lineTo(g+k,f+j);this.lineTo(g,f+j);this.closePath();this.stroke();this.currentPath_=h};S.fillRect=function(g,f,k,j){var h=this.currentPath_;this.beginPath();this.moveTo(g,f);this.lineTo(g+k,f);this.lineTo(g+k,f+j);this.lineTo(g,f+j);this.closePath();this.fill();this.currentPath_=h};S.createLinearGradient=function(g,f,k,j){var h=new V("gradient");h.x0_=g;h.y0_=f;h.x1_=k;h.y1_=j;return h};S.createRadialGradient=function(j,h,o,n,m,l){var k=new V("gradientradial");k.x0_=j;k.y0_=h;k.r0_=o;k.x1_=n;k.y1_=m;k.r1_=l;return k};S.drawImage=function(aH,aG){var aF,aE,aD,aC,aB,aA,az,ay,ax=aH.runtimeStyle.width,aw=aH.runtimeStyle.height;aH.runtimeStyle.width="auto";aH.runtimeStyle.height="auto";var av=aH.width,au=aH.height;aH.runtimeStyle.width=ax;aH.runtimeStyle.height=aw;if(arguments.length==3){aF=arguments[1],aE=arguments[2],aB=aA=0,az=aD=av,ay=aC=au}else{if(arguments.length==5){aF=arguments[1],aE=arguments[2],aD=arguments[3],aC=arguments[4],aB=aA=0,az=av,ay=au}else{if(arguments.length==9){aB=arguments[1],aA=arguments[2],az=arguments[3],ay=arguments[4],aF=arguments[5],aE=arguments[6],aD=arguments[7],aC=arguments[8]}else{throw Error("Invalid number of arguments")}}}var at=this.getCoords_(aF,aE),ap=az/2,ao=ay/2,an=[],am=10,al=10;an.push(" <g_vml_:group",' coordsize="',J*am,",",J*al,'"',' coordorigin="0,0"',' style="width:',am,"px;height:",al,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var ak=[];ak.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",Q(at.x/J),",","Dy=",Q(at.y/J),"");var C=at,u=this.getCoords_(aF+aD,aE),ar=this.getCoords_(aF,aE+aC),aq=this.getCoords_(aF+aD,aE+aC);C.x=T.max(C.x,u.x,ar.x,aq.x);C.y=T.max(C.y,u.y,ar.y,aq.y);an.push("padding:0 ",Q(C.x/J),"px ",Q(C.y/J),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",ak.join(""),", sizingmethod='clip');")}else{an.push("top:",Q(at.y/J),"px;left:",Q(at.x/J),"px;")}an.push(' ">','<g_vml_:image src="',aH.src,'"',' style="width:',J*aD,"px;"," height:",J*aC,'px;"',' cropleft="',aB/av,'"',' croptop="',aA/au,'"',' cropright="',(av-aB-az)/av,'"',' cropbottom="',(au-aA-ay)/au,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",an.join(""))};S.stroke=function(aV){var aU=[],aT=!1,aS=ac(aV?this.fillStyle:this.strokeStyle),aR=aS.color,aQ=aS.alpha*this.globalAlpha,aP=10,aO=10;aU.push("<g_vml_:shape",' filled="',!!aV,'"',' style="position:absolute;width:',aP,"px;height:",aO,'px;"',' coordorigin="0 0" coordsize="',J*aP," ",J*aO,'"',' stroked="',!aV,'"',' path="');for(var aN=!1,aM={x:null,y:null},aL={x:null,y:null},aK=0;aK<this.currentPath_.length;aK++){var aJ=this.currentPath_[aK],aI;switch(aJ.type){case"moveTo":aI=aJ;aU.push(" m ",Q(aJ.x),",",Q(aJ.y));break;case"lineTo":aU.push(" l ",Q(aJ.x),",",Q(aJ.y));break;case"close":aU.push(" x ");aJ=null;break;case"bezierCurveTo":aU.push(" c ",Q(aJ.cp1x),",",Q(aJ.cp1y),",",Q(aJ.cp2x),",",Q(aJ.cp2y),",",Q(aJ.x),",",Q(aJ.y));break;case"at":case"wa":aU.push(" ",aJ.type," ",Q(aJ.x-this.arcScaleX_*aJ.radius),",",Q(aJ.y-this.arcScaleY_*aJ.radius)," ",Q(aJ.x+this.arcScaleX_*aJ.radius),",",Q(aJ.y+this.arcScaleY_*aJ.radius)," ",Q(aJ.xStart),",",Q(aJ.yStart)," ",Q(aJ.xEnd),",",Q(aJ.yEnd))}if(aJ){if(aM.x==null||aJ.x<aM.x){aM.x=aJ.x}if(aL.x==null||aJ.x>aL.x){aL.x=aJ.x}if(aM.y==null||aJ.y<aM.y){aM.y=aJ.y}if(aL.y==null||aJ.y>aL.y){aL.y=aJ.y}}}aU.push(' ">');if(aV){if(typeof this.fillStyle=="object"){var aH=this.fillStyle,aG=0,aF={x:0,y:0},aE=0,aD=1;if(aH.type_=="gradient"){var aC=aH.x0_/this.arcScaleX_,aB=aH.y0_/this.arcScaleY_,ay=aH.x1_/this.arcScaleX_,ax=aH.y1_/this.arcScaleY_,aw=this.getCoords_(aC,aB),ap=this.getCoords_(ay,ax),al=ap.x-aw.x,ak=ap.y-aw.y,aG=Math.atan2(al,ak)*180/Math.PI;aG<0&&(aG+=360);aG<0.000001&&(aG=0)}else{var aw=this.getCoords_(aH.x0_,aH.y0_),au=aL.x-aM.x,at=aL.y-aM.y,aF={x:(aw.x-aM.x)/au,y:(aw.y-aM.y)/at};au/=this.arcScaleX_*J;at/=this.arcScaleY_*J;var ao=T.max(au,at),aE=2*aH.r0_/ao,aD=2*aH.r1_/ao-aE}var av=aH.colors_;av.sort(function(d,c){return d.offset-c.offset});for(var ar=av.length,u=av[0].color,h=av[ar-1].color,aA=av[0].alpha*this.globalAlpha,az=av[ar-1].alpha*this.globalAlpha,an=[],aK=0;aK<ar;aK++){var am=av[aK];an.push(am.offset*aD+aE+" "+am.color)}aU.push('<g_vml_:fill type="',aH.type_,'"',' method="none" focus="100%"',' color="',u,'"',' color2="',h,'"',' colors="',an.join(","),'"',' opacity="',az,'"',' g_o_:opacity2="',aA,'"',' angle="',aG,'"',' focusposition="',aF.x,",",aF.y,'" />')}else{aU.push('<g_vml_:fill color="',aR,'" opacity="',aQ,'" />')}}else{var aq=this.lineScale_*this.lineWidth;aq<1&&(aQ*=aq);aU.push("<g_vml_:stroke",' opacity="',aQ,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',ab(this.lineCap),'"',' weight="',aq,'px"',' color="',aR,'" />')}aU.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",aU.join(""))};S.fill=function(){this.stroke(!0)};S.closePath=function(){this.currentPath_.push({type:"close"})};S.getCoords_=function(e,d){var f=this.m_;return{x:J*(e*f[0][0]+d*f[1][0]+f[2][0])-H,y:J*(e*f[0][1]+d*f[1][1]+f[2][1])-H}};S.save=function(){var b={};ad(this,b);this.aStack_.push(b);this.mStack_.push(this.m_);this.m_=ae(af(),this.m_)};S.restore=function(){ad(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};S.translate=function(e,d){var f=[[1,0,0],[0,1,0],[e,d,1]];W(this,ae(f,this.m_),!1)};S.rotate=function(f){var e=L(f),h=O(f),g=[[e,h,0],[-h,e,0],[0,0,1]];W(this,ae(g,this.m_),!1)};S.scale=function(e,d){this.arcScaleX_*=e;this.arcScaleY_*=d;var f=[[e,0,0],[0,d,0],[0,0,1]];W(this,ae(f,this.m_),!0)};S.transform=function(j,f,o,n,m,l){var k=[[j,f,0],[o,n,0],[m,l,1]];W(this,ae(k,this.m_),!0)};S.setTransform=function(j,h,o,n,m,l){var k=[[j,h,0],[o,n,0],[m,l,1]];W(this,k,!0)};S.clip=function(){};S.arcTo=function(){};S.createPattern=function(){return new U};V.prototype.addColorStop=function(d,c){c=ac(c);this.colors_.push({offset:d,color:c.color,alpha:c.alpha})};G_vmlCanvasManager=D;CanvasRenderingContext2D=aa;CanvasGradient=V;CanvasPattern=U}();dhtmlx&&dhtmlx.A&&(dhtmlx.A["thirdparty/excanvas/excanvas.js"]=!0);window.dhx||(dhx={});dhx.version="3.0";dhx.codebase="./";dhx.name="Core";dhx.clone=function(d){var c=dhx.clone.hb;c.prototype=d;return new c};dhx.clone.hb=function(){};dhx.extend=function(f,e,h){if(f.qa){return dhx.PowerArray.insertAt.call(f.qa,e,1),f}for(var g in e){if(!f[g]||h){f[g]=e[g]}}e.defaults&&dhx.extend(f.defaults,e.defaults);e.$init&&e.$init.call(f);return f};dhx.copy=function(e){if(arguments.length>1){var d=arguments[0],e=arguments[1]}else{d=dhx.isArray(e)?[]:{}}for(var f in e){e[f]&&typeof e[f]=="object"&&!dhx.isDate(e[f])?(d[f]=dhx.isArray(e[f])?[]:{},dhx.copy(d[f],e[f])):d[f]=e[f]}return d};dhx.single=function(e){var d=null,f=function(a){d||(d=new e({}));d.Sd&&d.Sd.apply(d,arguments);return d};return f};dhx.protoUI=function(){var e=arguments,d=e[0].name,f=function(b){if(!f){return dhx.ui[d].prototype}var j=f.qa;if(j){for(var h=[j[0]],c=1;c<j.length;c++){h[c]=j[c],h[c].qa&&(h[c]=h[c].call(dhx,h[c].name)),h[c].prototype&&h[c].prototype.name&&(dhx.ui[h[c].prototype.name]=h[c])}dhx.ui[d]=dhx.proto.apply(dhx,h);if(f.ra){for(c=0;c<f.ra.length;c++){dhx.Type(dhx.ui[d],f.ra[c])}}f=j=null}return this!=dhx?new dhx.ui[d](b):dhx.ui[d]};f.qa=Array.prototype.slice.call(arguments,0);return dhx.ui[d]=f};dhx.proto=function(){for(var v=arguments,u=v[0],s=!!u.$init,o=[],n=v.length-1;n>0;n--){if(typeof v[n]=="function"){v[n]=v[n].prototype}v[n].$init&&o.push(v[n].$init);if(v[n].defaults){var m=v[n].defaults;if(!u.defaults){u.defaults={}}for(var l in m){dhx.isUndefined(u.defaults[l])&&(u.defaults[l]=m[l])}}if(v[n].type&&u.type){for(l in v[n].type){u.type[l]||(u.type[l]=v[n].type[l])}}for(var k in v[n]){u[k]||(u[k]=v[n][k])}}s&&o.push(u.$init);u.$init=function(){for(var b=0;b<o.length;b++){o[b].apply(this,arguments)}};var j=function(d){this.$ready=[];this.$init(d);this.J&&this.J(d,this.defaults);for(var c=0;c<this.$ready.length;c++){this.$ready[c].call(this)}};j.prototype=u;u=v=null;return j};dhx.bind=function(d,c){return function(){return d.apply(c,arguments)}};dhx.require=function(x,w,v,u,s){if(typeof x!="string"){var o=x.length||0,n=w;if(o){w=function(){if(o){o--,dhx.require(x[x.length-o-1],w,v)}else{return n.apply(this,arguments)}},w()}else{for(var m in x){o++}w=function(){o--;o===0&&n.apply(this,arguments)};for(m in x){dhx.require(m,w,v)}}}else{if(dhx.A[x]!==!0){if(x.substr(-4)==".css"){var l=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+x});document.head.appendChild(l);w&&w.call(v||window)}else{var k=s;w?dhx.A[x]?dhx.A[x].push([w,v]):(dhx.A[x]=[[w,v]],dhx.ajax(dhx.codebase+x,function(a){dhx.exec(a);var f=dhx.A[x];dhx.A[x]=!0;for(var e=0;e<f.length;e++){f[e][0].call(f[e][1]||window,!e)}})):(dhx.exec(dhx.ajax().sync().get(dhx.codebase+x).responseText),dhx.A[x]=!0)}}}};dhx.A={};dhx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};dhx.wrap=function(d,c){return !d?c:function(){var a=d.apply(this,arguments);c.apply(this,arguments);return a}};dhx.isUndefined=function(b){return typeof b=="undefined"};dhx.delay=function(f,e,h,g){return window.setTimeout(function(){var a=f.apply(e,h||[]);f=e=h=null;return a},g||1)};dhx.uid=function(){if(!this.W){this.W=(new Date).valueOf()}this.W++;return this.W};dhx.toNode=function(b){return typeof b=="string"?document.getElementById(b):b};dhx.toArray=function(b){return dhx.extend(b||[],dhx.PowerArray,!0)};dhx.toFunctor=function(a){return typeof a=="string"?eval(a):a};dhx.isArray=function(b){return Array.isArray?Array.isArray(b):Object.prototype.toString.call(b)==="[object Array]"};dhx.isDate=function(b){return b instanceof Date};dhx.q={};dhx.event=function(g,f,k,j){var g=dhx.toNode(g),h=dhx.uid();j&&(k=dhx.bind(k,j));dhx.q[h]=[g,f,k];g.addEventListener?g.addEventListener(f,k,!1):g.attachEvent&&g.attachEvent("on"+f,k);return h};dhx.eventRemove=function(d){if(d){var c=dhx.q[d];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]);delete this.q[d]}};dhx.debug_code=function(b){b.call(dhx)};dhx.EventSystem={$init:function(){if(!this.L){this.L={},this.ta={},this.gb={}}},blockEvent:function(){this.L.ka=!0},unblockEvent:function(){this.L.ka=!1},mapEvent:function(b){dhx.extend(this.gb,b,!0)},on_setter:function(d){if(d){for(var c in d){typeof d[c]=="function"&&this.attachEvent(c,d[c])}}},callEvent:function(g,f){if(this.L.ka){return !0}var g=g.toLowerCase(),k=this.L[g.toLowerCase()],j=!0;if(k){for(var h=0;h<k.length;h++){if(k[h].apply(this,f||[])===!1){j=!1}}}this.gb[g]&&!this.gb[g].callEvent(g,f)&&(j=!1);return j},attachEvent:function(f,e,h){var f=f.toLowerCase(),h=h||dhx.uid(),e=dhx.toFunctor(e),g=this.L[f]||dhx.toArray();g.push(e);this.L[f]=g;this.ta[h]={f:e,t:f};return h},detachEvent:function(f){if(this.ta[f]){var e=this.ta[f].t,h=this.ta[f].f,g=this.L[e];g.remove(h);delete this.ta[f]}},hasEvent:function(b){b=b.toLowerCase();return this.L[b]?!0:!1}};dhx.extend(dhx,dhx.EventSystem);dhx.PowerArray={removeAt:function(d,c){d>=0&&this.splice(d,c||1)},remove:function(b){this.removeAt(this.find(b))},insertAt:function(e,d){if(!d&&d!==0){this.push(e)}else{var f=this.splice(d,this.length-d);this[d]=e;this.push.apply(this,f)}},find:function(d){for(var c=0;c<this.length;c++){if(d==this[c]){return c}}return -1},each:function(e,d){for(var f=0;f<this.length;f++){e.call(d||this,this[f])}},map:function(e,d){for(var f=0;f<this.length;f++){this[f]=e.call(d||this,this[f])}return this},filter:function(e,d){for(var f=0;f<this.length;f++){e.call(d||this,this[f])||(this.splice(f,1),f--)}return this}};dhx.env={};(function(){if(navigator.userAgent.indexOf("Mobile")!=-1){dhx.env.mobile=!0}if(dhx.env.mobile||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1){dhx.env.touch=!0}navigator.userAgent.indexOf("Opera")!=-1?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=navigator.userAgent.indexOf("KHTML")!=-1,dhx.env.isSafari=dhx.env.isWebKit&&navigator.userAgent.indexOf("Mac")!=-1);if(navigator.userAgent.toLowerCase().indexOf("android")!=-1){dhx.env.isAndroid=!0}dhx.env.transform=!1;dhx.env.transition=!1;for(var j={names:["transform","transition"],transform:["transform","WebkitTransform","MozTransform","OTransform","msTransform"],transition:["transition","WebkitTransition","MozTransition","OTransition","msTransition"]},h=document.createElement("DIV"),o=0;o<j.names.length;o++){for(var n=j[j.names[o]],m=0;m<n.length;m++){if(typeof h.style[n[m]]!="undefined"){dhx.env[j.names[o]]=n[m];break}}}h.style[dhx.env.transform]="translate3d(0,0,0)";dhx.env.translate=h.style[dhx.env.transform]?"translate3d":"translate";var l="",k=!1;dhx.env.isOpera&&(l="-o-",k="O");dhx.env.isFF&&(l="-Moz-");dhx.env.isWebKit&&(l="-webkit-");dhx.env.isIE&&(l="-ms-");dhx.env.transformCSSPrefix=l;dhx.env.transformPrefix=k||dhx.env.transformCSSPrefix.replace(/-/gi,"");dhx.env.transitionEnd=dhx.env.transformCSSPrefix=="-Moz-"?"transitionend":dhx.env.transformPrefix+"TransitionEnd"})();dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();dhx.html={ua:0,denySelect:function(){if(!dhx.ua){dhx.ua=document.onselectstart}document.onselectstart=dhx.html.stopEvent},allowSelect:function(){if(dhx.ua!==0){document.onselectstart=dhx.ua||null}dhx.ua=0},index:function(d){for(var c=0;d=d.previousSibling;){c++}return c},zc:{},createCss:function(f){var e="",h;for(h in f){e+=h+":"+f[h]+";"}var g=this.zc[e];g||(g="s"+dhx.uid(),this.addStyle("."+g+"{"+e+"}"),this.zc[e]=g);return g},addStyle:function(d){var c=document.createElement("style");c.setAttribute("type","text/css");c.setAttribute("media","screen");c.styleSheet?c.styleSheet.cssText=d:c.appendChild(document.createTextNode(d));document.getElementsByTagName("head")[0].appendChild(c)},create:function(g,f,k){var f=f||{},j=document.createElement(g),h;for(h in f){j.setAttribute(h,f[h])}if(f.style){j.style.cssText=f.style}if(f["class"]){j.className=f["class"]}if(k){j.innerHTML=k}return j},getValue:function(b){b=dhx.toNode(b);return !b?"":dhx.isUndefined(b.value)?b.innerHTML:b.value},remove:function(d){if(d instanceof Array){for(var c=0;c<d.length;c++){this.remove(d[c])}}else{d&&d.parentNode&&d.parentNode.removeChild(d)}},insertBefore:function(e,d,f){e&&(d&&d.parentNode?d.parentNode.insertBefore(e,d):f.appendChild(e))},locate:function(f,e){if(f.tagName){var h=f}else{f=f||event,h=f.target||f.srcElement}for(;h;){if(h.getAttribute){var g=h.getAttribute(e);if(g){return g}}h=h.parentNode}return null},offset:function(x){if(x.getBoundingClientRect){var w=x.getBoundingClientRect(),v=document.body,u=document.documentElement,s=window.pageYOffset||u.scrollTop||v.scrollTop,o=window.pageXOffset||u.scrollLeft||v.scrollLeft,n=u.clientTop||v.clientTop||0,m=u.clientLeft||v.clientLeft||0,l=w.top+s-n,k=w.left+o-m;return{y:Math.round(l),x:Math.round(k)}}else{for(k=l=0;x;){l+=parseInt(x.offsetTop,10),k+=parseInt(x.offsetLeft,10),x=x.offsetParent}return{y:l,x:k}}},posRelative:function(b){b=b||event;return dhx.isUndefined(b.offsetX)?{x:b.layerX,y:b.layerY}:{x:b.offsetX,y:b.offsetY}},pos:function(d){d=d||event;if(d.pageX||d.pageY){return{x:d.pageX,y:d.pageY}}var c=dhx.env.isIE&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:d.clientX+c.scrollLeft-c.clientLeft,y:d.clientY+c.scrollTop-c.clientTop}},preventEvent:function(b){b&&b.preventDefault&&b.preventDefault();return dhx.html.stopEvent(b)},stopEvent:function(b){(b||event).cancelBubble=!0;return !1},addCss:function(d,c){d.className+=" "+c},removeCss:function(d,c){d.className=d.className.replace(RegExp(" "+c,"g"),"")}};dhx.ready=function(b){this.Qd?b.call():this.Ka.push(b)};dhx.Ka=[];(function(){var b=document.getElementsByTagName("SCRIPT");if(b.length){b=(b[b.length-1].getAttribute("src")||"").split("/"),b.splice(b.length-1,1),dhx.codebase=b.slice(0,b.length).join("/")+"/"}dhx.event(window,"load",function(){dhx.callEvent("onReady",[]);dhx.delay(function(){dhx.Qd=!0;for(var c=0;c<dhx.Ka.length;c++){dhx.Ka[c].call()}dhx.Ka=[]})})})();dhx.locale=dhx.locale||{};dhx.ready(function(){dhx.event(document.body,"click",function(b){dhx.callEvent("onClick",[b||event])})});(function(){var e={},d=RegExp("(\\r\\n|\\n)","g"),f=RegExp('(\\")',"g");dhx.Template=function(b){if(typeof b=="function"){return b}if(e[b]){return e[b]}b=(b||"").toString();if(b.indexOf("->")!=-1){switch(b=b.split("->"),b[0]){case"html":b=dhx.html.getValue(b[1]);break;case"http":b=(new dhx.ajax).sync().get(b[1],{uid:dhx.uid()}).responseText}}b=(b||"").toString();b=b.replace(d,"\\n");b=b.replace(f,'\\"');b=b.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');b=b.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");b=b.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');b=b.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');b=b.replace("{obj}",'"+obj+"');b=b.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{e[b]=Function("obj","common",'return "'+b+'";')}catch(a){}return e[b]};dhx.Template.empty=function(){return""};dhx.Template.bind=function(b){return dhx.bind(dhx.Template(b),this)};dhx.Type=function(k,j){if(k.qa){if(!k.ra){k.ra=[]}k.ra.push(j)}else{if(typeof k=="function"){k=k.prototype}if(!k.types){k.types={"default":k.type},k.type.name="default"}var n=j.name,m=k.type;n&&(m=k.types[n]=dhx.clone(j.baseType?k.types[j.baseType]:k.type));for(var l in j){m[l]=l.indexOf("template")===0?dhx.Template(j[l]):j[l]}return n}}})();dhx.Settings={$init:function(){this.e=this.config={}},define:function(d,c){return typeof d=="object"?this.ea(d):this.na(d,c)},na:function(e,d){var f=this[e+"_setter"];return this.e[e]=f?f.call(this,d,e):d},ea:function(d){if(d){for(var c in d){this.na(c,d[c])}}},J:function(e,d){var f={};d&&(f=dhx.extend(f,d));typeof e=="object"&&!e.tagName&&dhx.extend(f,e,!0);this.ea(f)},N:function(e,d){for(var f in d){switch(typeof e[f]){case"object":e[f]=this.N(e[f]||{},d[f]);break;case"undefined":e[f]=d[f]}}return e},debug_freid_c_id:!0,debug_freid_a_name:!0};dhx.ajax=function(f,e,h){if(arguments.length!==0){var g=new dhx.ajax;if(h){g.master=h}return g.get(f,null,e)}return !this.getXHR?new dhx.ajax:this};dhx.ajax.count=0;dhx.ajax.prototype={master:null,getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(k,j,u){var s=this.getXHR();dhx.isArray(u)||(u=[u]);if(typeof j=="object"){var o=[],n;for(n in j){var m=j[n];if(m===null||m===dhx.undefined){m=""}o.push(n+"="+encodeURIComponent(m))}j=o.join("&")}j&&this.request==="GET"&&(k=k+(k.indexOf("?")!=-1?"&":"?")+j,j=null);s.open(this.request,k,!this.Bb);this.request==="POST"&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded");var l=this;s.onreadystatechange=function(){if(!s.readyState||s.readyState==4){dhx.ajax.count++;if(u&&l){for(var d=0;d<u.length;d++){if(u[d]){var c=u[d].success||u[d];if(s.status>=400||!s.status&&!s.responseText){c=u[d].error}c&&c.call(l.master||l,s.responseText,s.responseXML,s)}}}if(l){l.master=null}u=l=null}};s.send(j||null);return s},get:function(e,d,f){arguments.length==2&&(f=d,d=null);this.request="GET";return this.send(e,d,f)},post:function(e,d,f){this.request="POST";return this.send(e,d,f)},put:function(e,d,f){this.request="PUT";return this.send(e,d,f)},del:function(e,d,f){this.request="DELETE";return this.send(e,d,f)},sync:function(){this.Bb=!0;return this},bind:function(b){this.master=b;return this}};dhx.send=function(j,h,o,n){var m=dhx.html.create("FORM",{target:n||"_self",action:j,method:o||"POST"},""),l;for(l in h){var k=dhx.html.create("INPUT",{type:"hidden",name:l,value:h[l]},"");m.appendChild(k)}m.style.display="none";document.body.appendChild(m);m.submit();document.body.removeChild(m)};dhx.AtomDataLoader={$init:function(b){this.data={};if(b){this.e.datatype=b.datatype||"json",this.$ready.push(this.ob)}},ob:function(){this.wa=!0;this.e.url&&this.url_setter(this.e.url);this.e.data&&this.data_setter(this.e.data)},url_setter:function(b){if(!this.wa){return b}this.load(b,this.e.datatype);return b},data_setter:function(b){if(!this.wa){return b}this.parse(b,this.e.datatype);return !0},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(f,e,h){if(f.$proxy){f.load(this,typeof e=="string"?e:"json")}else{this.callEvent("onXLS",[]);if(typeof e=="string"){this.data.driver=dhx.DataDriver[e],e=h}else{if(!this.data.driver){this.data.driver=dhx.DataDriver.json}}var g=[{success:this.V}];e&&(dhx.isArray(e)?g.push.apply(g,e):g.push(e));return dhx.ajax(f,g,this)}},parse:function(d,c){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[c||"json"];this.V(d,null)},V:function(h,g,m){var l=this.data.driver,k=l.toObject(h,g);if(k){var j=l.getRecords(k)[0];this.data=l?l.getDetails(j):h}else{this.qb(h,g,m)}this.callEvent("onXLE",[])},qb:function(e,d,f){this.callEvent("onXLE",[]);this.callEvent("onLoadError",arguments);dhx.callEvent("onLoadError",[e,d,f,this])},la:function(d){if(!this.e.dataFeed||this.ca||!d){return !0}var c=this.e.dataFeed;if(typeof c=="function"){return c.call(this,d.id||d,d)}c=c+(c.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(d.id||d);this.callEvent("onXLS",[]);dhx.ajax(c,function(h,g,k){this.ca=!0;var j=dhx.DataDriver.toObject(h,g);j?this.setValues(j.getDetails(j.getRecords()[0])):this.qb(h,g,k);this.ca=!1;this.callEvent("onXLE",[])},this);return !1}};dhx.DataDriver={};dhx.DataDriver.json={toObject:function(a){a||(a="[]");if(typeof a=="string"){try{eval("dhx.temp="+a)}catch(b){return null}a=dhx.temp}if(a.data){var c=a.data.config={},d;for(d in a){d!="data"&&(c[d]=a[d])}a=a.data}return a},getRecords:function(b){return b&&!dhx.isArray(b)?[b]:b},getDetails:function(b){return typeof b=="string"?{id:dhx.uid(),value:b}:b},getInfo:function(d){var c=d.config;return !c?{}:{v:c.total_count||0,r:c.pos||0,Nd:c.parent||0,Ya:c.config,M:c.dhx_security}},child:"data"};dhx.DataDriver.html={toObject:function(d){if(typeof d=="string"){var c=null;d.indexOf("<")==-1&&(c=dhx.toNode(d));if(!c){c=document.createElement("DIV"),c.innerHTML=d}return c.getElementsByTagName(this.tag)}return d},getRecords:function(f){for(var e=[],h=0;h<f.childNodes.length;h++){var g=f.childNodes[h];g.nodeType==1&&e.push(g)}return e},getDetails:function(b){return dhx.DataDriver.xml.tagToObject(b)},getInfo:function(){return{v:0,r:0}},tag:"LI"};dhx.DataDriver.jsarray={toObject:function(a){return typeof a=="string"?(eval("dhx.temp="+a),dhx.temp):a},getRecords:function(b){return b},getDetails:function(e){for(var d={},f=0;f<e.length;f++){d["data"+f]=e[f]}return d},getInfo:function(){return{v:0,r:0}}};dhx.DataDriver.csv={toObject:function(b){return b},getRecords:function(b){return b.split(this.row)},getDetails:function(e){for(var e=this.stringToArray(e),d={},f=0;f<e.length;f++){d["data"+f]=e[f]}return d},getInfo:function(){return{v:0,r:0}},stringToArray:function(d){for(var d=d.split(this.cell),c=0;c<d.length;c++){d[c]=d[c].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return d},row:"\n",cell:","};dhx.DataDriver.xml={ic:function(b){return !b||!b.documentElement?null:b.getElementsByTagName("parsererror").length?null:b},toObject:function(d){if(this.ic(c)){return c}var c=typeof d=="string"?this.fromString(d.replace(/^[\s]+/,"")):d;return this.ic(c)?c:null},getRecords:function(b){return this.xpath(b,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(b){return this.tagToObject(b,{})},getInfo:function(d){var c=this.xpath(d,this.config),c=c.length?this.assignTypes(this.tagToObject(c[0],{})):null;return{v:d.documentElement.getAttribute("total_count")||0,r:d.documentElement.getAttribute("pos")||0,Nd:d.documentElement.getAttribute("parent")||0,Ya:c,M:d.documentElement.getAttribute("dhx_security")||null}},xpath:function(v,u){if(window.XPathResult){var s=v;if(v.nodeName.indexOf("document")==-1){v=v.ownerDocument}for(var o=[],n=v.evaluate(u,s,null,XPathResult.ANY_TYPE,null),m=n.iterateNext();m;){o.push(m),m=n.iterateNext()}return o}else{var l=!0;try{typeof v.selectNodes=="undefined"&&(l=!1)}catch(k){}if(l){return v.selectNodes(u)}else{var j=u.split("/").pop();return v.getElementsByTagName(j)}}},assignTypes:function(e){for(var d in e){var f=e[d];typeof f=="object"?this.assignTypes(f):typeof f=="string"&&f!==""&&(f=="true"?e[d]=!0:f=="false"?e[d]=!1:f==f*1&&(e[d]*=1))}return e},tagToObject:function(k,j){var j=j||{},u=!1,s=k.attributes;if(s&&s.length){for(var o=0;o<s.length;o++){j[s[o].name]=s[o].value}u=!0}for(var n=k.childNodes,m={},o=0;o<n.length;o++){if(n[o].nodeType==1){var l=n[o].tagName;typeof j[l]!="undefined"?(dhx.isArray(j[l])||(j[l]=[j[l]]),j[l].push(this.tagToObject(n[o],{}))):j[n[o].tagName]=this.tagToObject(n[o],{});u=!0}}if(!u){return this.nodeValue(k)}j.value=j.value||this.nodeValue(k);return j},nodeValue:function(b){return b.firstChild?b.firstChild.data:""},fromString:function(e){try{if(window.DOMParser){return(new DOMParser).parseFromString(e,"text/xml")}if(window.ActiveXObject){var d=new ActiveXObject("Microsoft.xmlDOM");d.loadXML(e);return d}}catch(f){return null}}};dhx.debug_code(function(){dhx.debug_load_event=dhx.attachEvent("onLoadError",function(b){b.indexOf("<?php")!==0&&b.indexOf("DHX_ERROR:");dhx.message&&dhx.message({type:"debug",text:null,expire:-1})});dhx.ready(function(){var b=document.location.href;b.indexOf("file:")===0&&(dhx.message?dhx.message({type:"error",text:"Please open sample by http,<br>not as file://",expire:-1}):window.alert("Please open sample by http, not as file://"))})});dhx.DataLoader=dhx.proto({$init:function(b){b=b||"";this.ia=dhx.toArray();this.data=new dhx.DataStore;this.data.attachEvent("onClearAll",dhx.bind(this.Kc,this));this.data.attachEvent("onServerConfig",dhx.bind(this.Jc,this));this.data.feed=this.gd},gd:function(e,d,f){if(this.H){return this.H=[e,d,f]}else{this.H=!0}this.$b=[e,d];this.jd.call(this,e,d,f)},jd:function(f,e,h){var g=this.data.url;f<0&&(f=0);this.load(g+(g.indexOf("?")==-1?"?":"&")+(this.dataCount()?"continue=true&":"")+"start="+f+"&count="+e,[this.hd,h])},hd:function(){var d=this.H,c=this.$b;this.H=!1;typeof d=="object"&&(d[0]!=c[0]||d[1]!=c[1])&&this.data.feed.apply(this,d)},load:function(e,d){var f=dhx.AtomDataLoader.load.apply(this,arguments);this.ia.push(f);if(!this.data.url){this.data.url=e}},loadNext:function(g,f,k,j,h){this.e.datathrottle&&!h?(this.Ac&&window.clearTimeout(this.Ac),this.Ac=dhx.delay(function(){this.loadNext(g,f,k,j,!0)},this,0,this.e.datathrottle)):(!f&&f!==0&&(f=this.dataCount()),this.data.url=this.data.url||j,this.callEvent("onDataRequest",[f,g,k,j])&&this.data.url&&this.data.feed.call(this,f,g,k))},le:function(e,d){var f=this.$b;return this.H&&f&&f[0]<=d&&f[1]+f[0]>=e+d?!0:!1},V:function(f,e,h){this.ia.remove(h);var g=this.data.driver.toObject(f,e);if(g){this.data.rb(g)}else{return this.qb(f,e,h)}this.Xa();this.callEvent("onXLE",[])},removeMissed_setter:function(b){return this.data.Td=b},scheme_setter:function(b){this.data.scheme(b)},dataFeed_setter:function(b){this.data.attachEvent("onBeforeFilter",dhx.bind(function(h,n){if(this.e.dataFeed){var m={};if(h||n){if(typeof h=="function"){if(!n){return}h(n,m)}else{m={text:n}}this.clearAll();var l=this.e.dataFeed,k=[];if(typeof l=="function"){return l.call(this,n,m)}for(var j in m){k.push("dhx_filter["+j+"]="+encodeURIComponent(m[j]))}this.load(l+(l.indexOf("?")<0?"?":"&")+k.join("&"),this.e.datatype);return !1}}},this));return b},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,Xa:function(){if(this.e.ready&&!this.Rd){var b=dhx.toFunctor(this.e.ready);b&&dhx.delay(b,this,arguments);this.Rd=!0}},Kc:function(){for(var b=0;b<this.ia.length;b++){this.ia[b].abort()}this.ia=dhx.toArray()},Jc:function(b){this.ea(b)}},dhx.AtomDataLoader);dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("json");this.pull={};this.order=dhx.toArray();this.I={}};dhx.DataStore.prototype={setDriver:function(b){this.driver=dhx.DataDriver[b]},rb:function(e){this.callEvent("onParse",[this.driver,e]);this.h&&this.filter();var d=this.driver.getInfo(e);if(d.M){dhx.securityKey=d.M}d.Ya&&this.callEvent("onServerConfig",[d.Ya]);var f=this.driver.getRecords(e);this.Ad(d,f);this.qc&&this.xd&&this.xd(this.qc);this.sc&&(this.blockEvent(),this.sort(this.sc),this.unblockEvent());this.callEvent("onStoreLoad",[this.driver,e]);this.refresh()},Ad:function(x,w){var v=(x.r||0)*1,u=!0,s=!1;if(v===0&&this.order[0]){if(this.Td){for(var s={},o=0;o<this.order.length;o++){s[this.order[o]]=!0}}u=!1;v=this.order.length}for(var n=0,o=0;o<w.length;o++){var m=this.driver.getDetails(w[o]),l=this.id(m);this.pull[l]?u&&this.order[n+v]&&n++:(this.order[n+v]=l,n++);this.pull[l]?(dhx.extend(this.pull[l],m,!0),this.Ma&&this.Ma(this.pull[l]),s&&delete s[l]):(this.pull[l]=m,this.La&&this.La(m))}if(s){this.blockEvent();for(var k in s){this.remove(k)}this.unblockEvent()}if(!this.order[x.v-1]){this.order[x.v-1]=dhx.undefined}},id:function(b){return b.id||(b.id=dhx.uid())},changeId:function(d,c){this.pull[d]&&(this.pull[c]=this.pull[d]);this.pull[c].id=c;this.order[this.order.find(d)]=c;this.h&&(this.h[this.h.find(d)]=c);this.I[d]&&(this.I[c]=this.I[d],delete this.I[d]);this.callEvent("onIdChange",[d,c]);this.wb&&this.wb(d,c);delete this.pull[d]},item:function(b){return this.pull[b]},update:function(d,c){dhx.isUndefined(c)&&(c=this.item(d));this.Ma&&this.Ma(c);if(this.callEvent("onBeforeUpdate",[d,c])===!1){return !1}this.pull[d]=c;this.callEvent("onStoreUpdated",[d,c,"update"])},refresh:function(b){this.ya||(b?this.callEvent("onStoreUpdated",[b,this.pull[b],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(d,c){this.ya=!0;d.call(c||this);this.ya=!1},getRange:function(e,d){e=e?this.indexById(e):this.$min||this.startOffset||0;d?d=this.indexById(d):(d=Math.min(this.$max||this.endOffset||Infinity,this.dataCount()-1),d<0&&(d=0));if(e>d){var f=d,d=e,e=f}return this.getIndexRange(e,d)},getIndexRange:function(f,e){for(var e=Math.min(e||Infinity,this.dataCount()-1),h=dhx.toArray(),g=f||0;g<=e;g++){h.push(this.item(this.order[g]))}return h},dataCount:function(){return this.order.length},exists:function(b){return !!this.pull[b]},move:function(f,e){var h=this.idByIndex(f),g=this.item(h);this.order.removeAt(f);this.order.insertAt(h,Math.min(this.order.length,e));this.callEvent("onStoreUpdated",[h,g,"move"])},scheme:function(d){this.o={};this.La=d.$init;this.Ma=d.$update;this.rc=d.$serialize;this.qc=d.$group;this.sc=d.$sort;for(var c in d){c.substr(0,1)!="$"&&(this.o[c]=d[c])}},sync:function(f,e,h){typeof f=="string"&&(f=$$("source"));typeof e!="function"&&(h=e,e=null);if(dhx.debug_bind){this.debug_sync_master=f}this.Ta=!1;if(f.name!="DataStore"){f.data&&f.data.name=="DataStore"?f=f.data:this.Ta=!0}var g=dhx.bind(function(k,j,c){if(this.Ta){if(!k){return}if(k.indexOf("change")===0){if(k=="change"){this.pull[j.id]=j.attributes,this.refresh(j.id)}return}k=="reset"&&(c=j);this.order=[];this.pull={};this.h=null;for(var b=0;b<c.models.length;b++){var a=c.models[b].id;this.order.push(a);this.pull[a]=c.models[b].attributes}}else{this.h=null,this.order=dhx.toArray([].concat(f.order)),this.pull=f.pull}e&&this.silent(e);this.Ia&&this.Ia();this.callEvent("onSyncApply",[]);h?h=!1:this.refresh()},this);this.Ta?f.bind("all",g):this.za=[f.attachEvent("onStoreUpdated",g),f.attachEvent("onIdChange",dhx.bind(function(d,c){this.changeId(d,c)},this))];g()},add:function(k,j,u){if(this.o){for(var s in this.o){dhx.isUndefined(k[s])&&(k[s]=this.o[s])}}this.La&&this.La(k);var o=this.id(k),n=u||this.order,m=n.length;if(dhx.isUndefined(j)||j<0){j=m}j>m&&(j=Math.min(n.length,j));if(this.callEvent("onBeforeAdd",[o,k,j])===!1){return !1}this.pull[o]=k;n.insertAt(o,j);if(this.h){var l=this.h.length;!j&&this.order.length&&(l=0);this.h.insertAt(o,l)}this.callEvent("onAfterAdd",[o,j]);this.callEvent("onStoreUpdated",[o,k,"add"]);return o},remove:function(e){if(dhx.isArray(e)){for(var d=0;d<e.length;d++){this.remove(e[d])}}else{if(this.callEvent("onBeforeDelete",[e])===!1){return !1}var f=this.item(e);this.order.remove(e);this.h&&this.h.remove(e);delete this.pull[e];this.I[e]&&delete this.I[e];this.callEvent("onAfterDelete",[e]);this.callEvent("onStoreUpdated",[e,f,"delete"])}},clearAll:function(){this.pull={};this.order=dhx.toArray();this.h=this.url=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(b){return this.order[b]},indexById:function(d){var c=this.order.find(d);return c},next:function(d,c){return this.order[this.indexById(d)+(c||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(d,c){return this.order[this.indexById(d)-(c||1)]},sort:function(g,f,k){var j=g;typeof g=="function"?j={as:g,dir:f}:typeof g=="string"&&(j={by:g.replace(/#/g,""),dir:f,as:k});var h=[j.by,j.dir,j.as];this.callEvent("onBeforeSort",h)&&(this.ae(j),this.refresh(),this.callEvent("onAfterSort",h))},ae:function(e){if(this.order.length){var d=this.$d.Mc(e),f=this.getRange(this.first(),this.last());f.sort(d);this.order=f.map(function(b){return this.id(b)},this)}},nd:function(b){if(this.h&&!b){this.order=this.h,delete this.h}},md:function(h,g,m){for(var l=dhx.toArray(),k=0;k<this.order.length;k++){var j=this.order[k];h(this.item(j),g)&&l.push(j)}if(!m||!this.h){this.h=this.order}this.order=l},filter:function(f,e,h){if(this.callEvent("onBeforeFilter",[f,e])&&(this.nd(h),this.order.length)){if(f){var g=f,e=e||"";typeof f=="string"&&(f=f.replace(/#/g,""),typeof e=="function"?g=function(a){return e(a[f])}:(e=e.toString().toLowerCase(),g=function(a,d){return(a[f]||"").toString().toLowerCase().indexOf(d)!=-1}));this.md(g,e,h,this.je)}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(e,d){for(var f=0;f<this.order.length;f++){e.call(d||this,this.item(this.order[f]))}},Fd:function(d,c){return function(){return d[c].apply(d,arguments)}},addMark:function(g,f,k,j){var h=this.I[g]||{};this.I[g]=h;if(!h[f]&&(h[f]=j||!0,k)){this.item(g).$css=(this.item(g).$css||"")+" "+f,this.refresh(g)}return h[f]},removeMark:function(g,f,k){var j=this.I[g];j&&j[f]&&delete j[f];if(k){var h=this.item(g).$css;if(h){this.item(g).$css=h.replace(f,""),this.refresh(g)}}},hasMark:function(e,d){var f=this.I[e];return f&&f[d]},provideApi:function(f,e){this.debug_bind_master=f;e&&this.mapEvent({onbeforesort:f,onaftersort:f,onbeforeadd:f,onafteradd:f,onbeforedelete:f,onafterdelete:f,onbeforeupdate:f});for(var h="sort,add,remove,exists,idByIndex,indexById,item,update,refresh,dataCount,filter,next,previous,clearAll,first,last,serialize,sync,addMark,removeMark,hasMark".split(","),g=0;g<h.length;g++){f[h[g]]=this.Fd(this,h[g])}},serialize:function(){for(var f=this.order,e=[],h=0;h<f.length;h++){var g=this.pull[f[h]];(!this.rc||!(g=this.rc(g),g===!1))&&e.push(g)}return e},$d:{Mc:function(b){return this.Rc(b.dir,this.Ic(b.by,b.as))},Ec:{date:function(d,c){d-=0;c-=0;return d>c?1:d<c?-1:0},"int":function(d,c){d*=1;c*=1;return d>c?1:d<c?-1:0},string_strict:function(d,c){d=d.toString();c=c.toString();return d>c?1:d<c?-1:0},string:function(d,c){if(!c){return 1}if(!d){return -1}d=d.toString().toLowerCase();c=c.toString().toLowerCase();return d>c?1:d<c?-1:0}},Ic:function(d,c){if(!d){return c}typeof c!="function"&&(c=this.Ec[c||"string"]);return function(b,a){return c(b[d],a[d])}},Rc:function(d,c){return d=="asc"||!d?c:function(b,e){return c(b,e)*-1}}}};dhx.BaseBind={debug_freid_ignore:{id:!0},bind:function(h,g,m){typeof h=="string"&&(h=dhx.ui.get(h));h.i&&h.i();this.i&&this.i();h.getBindData||dhx.extend(h,dhx.BindSource);if(!this.Fc){var l=this.render;if(this.filter){var k=this.e.id;this.data.Ia=function(){h.Z[k]=!1}}this.render=function(){if(!this.fc){this.fc=!0;var b=this.callEvent("onBindRequest");this.fc=!1;return l.apply(this,b===!1?arguments:[])}};if(this.getValue||this.getValues){this.save=function(){if(!this.validate||this.validate()){h.setBindData(this.getValue?this.getValue:this.getValues(),this.e.id)}}}this.Fc=!0}h.addBind(this.e.id,g,m);var j=this.e.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return h.getBindData(j)});!this.e.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",function(){h.Z[j]=!1});this.isVisible(this.e.id)&&this.refresh()},O:function(e){e.removeBind(this.e.id);var d=this.za||(this.data?this.data.za:0);if(d&&e.data){for(var f=0;f<d.length;f++){e.data.detachEvent(d[f])}}}};dhx.BindSource={$init:function(){this.ja={};this.Z={};this.Fa={};this.Gc(this)},saveBatch:function(b){this.Pb=!0;b.call(this);this.Pb=!1;this.Y()},setBindData:function(e,d){d&&(this.Fa[d]=!0);if(this.setValue){this.setValue(e)}else{if(this.setValues){this.setValues(e)}else{var f=this.getCursor();f&&(e=dhx.extend(this.item(f),e,!0),this.update(f,e))}}this.callEvent("onBindUpdate",[e,d]);this.save&&this.save();d&&(this.Fa[d]=!1)},getBindData:function(e,d){if(this.Z[e]){return !1}var f=dhx.ui.get(e);f.isVisible(f.e.id)&&(this.Z[e]=!0,this.Ua(f,this.ja[e][0],this.ja[e][1]),d&&f.filter&&f.refresh())},addBind:function(e,d,f){this.ja[e]=[d,f]},removeBind:function(b){delete this.ja[b];delete this.Z[b];delete this.Fa[b]},Gc:function(b){b.filter?dhx.extend(this,dhx.CollectionBind):b.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},Y:function(){if(!this.Pb){for(var b in this.ja){this.Fa[b]||(this.Z[b]=!1,this.getBindData(b,!0))}}},Gb:function(e,d,f){e.setValue?e.setValue(f?f[d]:f):e.filter?e.data.silent(function(){this.filter(d,f)}):!f&&e.clear?e.clear():e.la(f)&&e.setValues(dhx.clone(f));e.callEvent("onBindApply",[f,d,this])}};dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return !0},$init:function(d){var c=(this.data=d)&&d.id?d.id:dhx.uid();this.e={id:c};dhx.ui.views[c]=this},setValue:function(b){this.data=b;this.callEvent("onChange",[b])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind);dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return !0},$init:function(d){this.data=d||{};var c=d&&d.id?d.id:dhx.uid();this.e={id:c};dhx.ui.views[c]=this},getValues:function(){return this.data},setValues:function(b){this.data=b;this.callEvent("onChange",[b])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings);dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return !this.data.order.length&&!this.data.h&&!this.e.dataFeed?!1:!0},$init:function(d){this.data.provideApi(this,!0);var c=d&&d.id?d.id:dhx.uid();this.e.id=c;dhx.ui.views[c]=this;this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings);dhx.ValueBind={$init:function(){this.attachEvent("onChange",this.Y)},Ua:function(g,f,k){var j=this.getValue()||"";k&&(j=k(j));if(g.setValue){g.setValue(j)}else{if(g.filter){g.data.silent(function(){this.filter(f,j)})}else{var h={};h[f]=j;g.la(j)&&g.setValues(h)}}g.callEvent("onBindApply",[j,f,this])}};dhx.RecordBind={$init:function(){this.attachEvent("onChange",this.Y)},Ua:function(e,d){var f=this.getValues()||null;this.Gb(e,d,f)}};dhx.CollectionBind={$init:function(){this.Q=null;this.attachEvent("onSelectChange",function(){var b=this.getSelected();this.setCursor(b?b.id||b:null)});this.attachEvent("onAfterCursorChange",this.Y);this.data.attachEvent("onStoreUpdated",dhx.bind(function(e,d,f){e&&e==this.getCursor()&&f!="paint"&&this.Y()},this));this.data.attachEvent("onClearAll",dhx.bind(function(){this.Q=null},this));this.data.attachEvent("onIdChange",dhx.bind(function(d,c){if(this.Q==d){this.Q=c}},this))},setCursor:function(b){if(!(b==this.Q||b!==null&&!this.item(b))){this.callEvent("onBeforeCursorChange",[this.Q]),this.Q=b,this.callEvent("onAfterCursorChange",[b])}},getCursor:function(){return this.Q},Ua:function(e,d){var f=this.item(this.getCursor())||this.e.defaultData||null;this.Gb(e,d,f)}};if(!dhx.ui){dhx.ui={}}if(!dhx.ui.views){dhx.ui.views={},dhx.ui.get=function(b){return b.e?b:dhx.ui.views[b]}}dhtmlXDataStore=function(e){var d=new dhx.DataCollection(e),f="_dp_init";d[f]=function(g){var c="_methods";g[c]=["dummy","dummy","changeId","dummy"];this.data.Gd={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(a,j,h){a&&!g.uc&&g.setUpdated(a,!0,this.Gd[h])});c="_getRowData";g[c]=function(j){var h=this.obj.data.item(j),l={id:j};l[this.action_param]=this.obj.getUserData(j);if(h){for(var k in h){l[k]=h[k]}}return l};this.changeId=function(a,h){this.data.changeId(a,h);g.uc=!0;this.data.callEvent("onStoreUpdated",[h,this.item(h),"update"]);g.uc=!1};c="_clearUpdateFlag";g[c]=function(){};this.ha={}};d.dummy=function(){};d.setUserData=function(h,g,j){this.ha[h]=j};d.getUserData=function(b){return this.ha[b]};d.dataFeed=function(b){this.define("dataFeed",b)};dhx.extend(d,dhx.BindSource);return d};if(window.dhtmlXDataView){dhtmlXDataView.prototype.i=function(){this.isVisible=function(){return !this.data.order.length&&!this.data.h&&!this.e.dataFeed?!1:!0};var b="_settings";this.e=this.e||this[b];if(!this.e.id){this.e.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this.e.id]=this}}if(window.dhtmlXChart){dhtmlXChart.prototype.i=function(){this.isVisible=function(){return !this.data.order.length&&!this.data.ke&&!this.e.dataFeed?!1:!0};var b="_settings";this.e=this.e||this[b];if(!this.e.id){this.e.id=dhx.uid()}this.unbind=dhx.BaseBind.unbind;this.unsync=dhx.BaseBind.unsync;dhx.ui.views[this.e.id]=this}}dhx.BaseBind.unsync=function(b){return dhx.BaseBind.O.call(this,b)};dhx.BaseBind.unbind=function(b){return dhx.BaseBind.O.call(this,b)};dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)};dhx.BaseBind.legacySync=function(d,c){this.i&&this.i();d.i&&d.i();this.attachEvent("onAfterEditStop",function(b){this.save(b);return !0});this.attachEvent("onDataRequest",function(a,g){for(var f=a;f<a+g;f++){if(!d.data.order[f]){return d.loadNext(g,a),!1}}});this.save=function(a){a||(a=this.getCursor());var j=this.item(a),h=d.item(a),g;for(g in j){g.indexOf("$")!==0&&(h[g]=j[g])}d.refresh(a)};return d&&d.name=="DataCollection"?d.data.sync.apply(this.data,arguments):this.data.sync.apply(this.data,arguments)};if(window.dhtmlXForm){dhtmlXForm.prototype.bind=function(b){dhx.BaseBind.bind.apply(this,arguments);b.getBindData(this.e.id)},dhtmlXForm.prototype.unbind=function(b){dhx.BaseBind.O.call(this,b)},dhtmlXForm.prototype.i=function(){if(dhx.isUndefined(this.e)){this.e={id:dhx.uid(),dataFeed:this.X},dhx.ui.views[this.e.id]=this}},dhtmlXForm.prototype.la=function(d){if(!this.e.dataFeed||this.ca||!d){return !0}var c=this.e.dataFeed;if(typeof c=="function"){return c.call(this,d.id||d,d)}c=c+(c.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(d.id||d);this.load(c);return !1},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(b){this.e?this.e.dataFeed=b:this.X=b},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(){return !0}}if(window.scheduler){if(!window.Scheduler){window.Scheduler={}}Scheduler.$syncFactory=function(b){b.sync=function(a,h){this.i&&this.i();a.i&&a.i();var g="_process_loading",f=function(){b.clearAll();for(var k=a.data.order,j=a.data.pull,d=[],c=0;c<k.length;c++){d[c]=h&&h.copy?dhx.clone(j[k[c]]):j[k[c]]}b[g](d)};this.save=function(e){e||(e=this.getCursor());var k=this.item(e),j=a.item(e);this.callEvent("onStoreSave",[e,k,j])&&(dhx.extend(a.item(e),k,!0),a.update(e))};this.item=function(c){return this.getEvent(c)};this.za=[a.data.attachEvent("onStoreUpdated",function(){f.call(this)}),a.data.attachEvent("onIdChange",function(d,c){combo.changeOptionId(d,c)})];this.attachEvent("onEventChanged",function(c){this.save(c)});this.attachEvent("onEventAdded",function(d,e){a.data.pull[d]||a.add(e)});this.attachEvent("onEventDeleted",function(c){a.data.pull[c]&&a.remove(c)});f()};b.unsync=function(c){dhx.BaseBind.O.call(this,c)};b.i=function(){if(!this.e){this.e={id:dhx.uid()}}}};Scheduler.$syncFactory(window.scheduler)}if(window.dhtmlXCombo){dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.unbind=function(b){dhx.BaseBind.O.call(this,b)},dhtmlXCombo.unsync=function(b){dhx.BaseBind.O.call(this,b)},dhtmlXCombo.prototype.dataFeed=function(b){this.e?this.e.dataFeed=b:this.X=b},dhtmlXCombo.prototype.sync=function(e){this.i&&this.i();e.i&&e.i();var d=this,f=function(){d.clearAll();d.addOption(this.serialize())};this.za=[e.data.attachEvent("onStoreUpdated",function(){f.call(this)}),e.data.attachEvent("onIdChange",function(b,g){d.changeOptionId(b,g)})];f.call(e)},dhtmlXCombo.prototype.i=function(){if(dhx.isUndefined(this.e)){this.e={id:dhx.uid(),dataFeed:this.X},dhx.ui.views[this.e.id]=this,this.data={silent:dhx.bind(function(b){b.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXCombo.prototype.item=function(b){return this.getOption(b)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return !this.optionsArr.length&&!this.e.dataFeed?!1:!0},dhtmlXCombo.prototype.refresh=function(){this.render(!0)},dhtmlXCombo.prototype.filter=function(){alert("not implemented")}}if(window.dhtmlXGridObject){dhtmlXGridObject.prototype.bind=function(e,d,f){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(b){dhx.BaseBind.O.call(this,b)},dhtmlXGridObject.prototype.unsync=function(b){dhx.BaseBind.O.call(this,b)},dhtmlXGridObject.prototype.dataFeed=function(b){this.e?this.e.dataFeed=b:this.X=b},dhtmlXGridObject.prototype.sync=function(v,u){this.i&&this.i();v.i&&v.i();var s=this,o="_parsing",n="_parser",m="_locator",l="_process_store_row",k="_get_store_data";this.save=function(a){a||(a=this.getCursor());dhx.extend(v.item(a),this.item(a),!0);v.update(a)};var j=function(){var e=s.getCursor?s.getCursor():null,d=0;s.Ga?(d=s.Ga,s.Ga=!1):s.clearAll();var f=this.dataCount();if(f){s[o]=!0;for(var c=d;c<f;c++){var g=this.order[c];if(g&&(!d||!s.rowsBuffer[c])){s.rowsBuffer[c]={idd:g,data:this.pull[g]},s.rowsBuffer[c][n]=s[l],s.rowsBuffer[c][m]=s[k],s.rowsAr[g]=this.pull[g]}}if(!s.rowsBuffer[f-1]){s.rowsBuffer[f-1]=dhtmlx.undefined,s.xmlFileUrl=s.xmlFileUrl||this.url}s.pagingOn?s.changePage():s.ne&&s.ie?s.pe():(s.render_dataset(),s.callEvent("onXLE",[]));s[o]=!1}e&&s.setCursor&&s.setCursor(s.rowsAr[e]?e:null)};this.za=[v.data.attachEvent("onStoreUpdated",function(e,c,f){f=="delete"?(s.deleteRow(e),s.data.callEvent("onStoreUpdated",[e,c,f])):f=="update"?(s.callEvent("onSyncUpdate",[c,f]),s.update(e,c),s.data.callEvent("onStoreUpdated",[e,c,f])):f=="add"?(s.callEvent("onSyncUpdate",[c,f]),s.add(e,c,this.indexById(e)),s.data.callEvent("onStoreUpdated",[e,c,f])):j.call(this)}),v.data.attachEvent("onStoreLoad",function(a,c){s.xmlFileUrl=v.data.url;s.Ga=a.getInfo(c).r}),v.data.attachEvent("onIdChange",function(d,c){s.changeRowId(d,c)})];s.attachEvent("onDynXLS",function(a,f){for(var c=a;c<a+f;c++){if(!v.data.order[c]){return v.loadNext(f,a),!1}}s.Ga=a;j.call(v.data)});j.call(v.data);s.attachEvent("onEditCell",function(g,f,x,w,h){g==2&&w!=h&&this.save(f);return !0});s.attachEvent("onClearAll",function(){var b="_f_rowsBuffer";this[b]=null});u&&u.sort&&s.attachEvent("onBeforeSorting",function(a,h,g){if(h=="connector"){return !1}var c=this.getColumnId(a);v.sort("#"+c+"#",g=="asc"?"asc":"desc",h=="int"?h:"string");s.setSortImgState(!0,a,g);return !1});if(u&&u.filter){s.attachEvent("onFilterStart",function(a,f){var c="_con_f_used";if(s[c]&&s[c].length){return !1}v.data.silent(function(){v.filter();for(var d=0;d<a.length;d++){if(f[d]!=""){var b=s.getColumnId(a[d]);v.filter("#"+b+"#",f[d],d!=0)}}});v.refresh();return !1}),s.collectValues=function(a){var d=this.getColumnId(a);return function(f){var e=[],g={};this.data.each(function(c){var b=c[f];g[b]||(g[b]=!0,e.push(b))});e.sort();return e}.call(v,d)}}u&&u.select&&s.attachEvent("onRowSelect",function(a){v.setCursor(a)});s.clearAndLoad=function(a){v.clearAll();v.load(a)}},dhtmlXGridObject.prototype.i=function(){if(dhx.isUndefined(this.e)){this.e={id:dhx.uid(),dataFeed:this.X};dhx.ui.views[this.e.id]=this;this.data={silent:dhx.bind(function(b){b.call(this)},this)};dhtmlxEventable(this.data);for(var d="_cCount",c=0;c<this[d];c++){this.columnIds[c]||(this.columnIds[c]="cell"+c)}this.attachEvent("onSelectStateChanged",function(b){this.callEvent("onSelectChange",[b])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(f,e){f===2&&this.getCursor&&e&&e==this.getCursor()&&this.Y();return !0});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(h){if(h===null){return null}var g=this.getRowById(h);if(!g){return null}var m="_attrs",l=dhx.copy(g[m]);l.id=h;for(var k=this.getColumnsNum(),j=0;j<k;j++){l[this.columnIds[j]]=this.cells(h,j).getValue()}return l},dhtmlXGridObject.prototype.update=function(h,g){for(var m=0;m<this.columnIds.length;m++){var l=this.columnIds[m];dhx.isUndefined(g[l])||this.cells(h,m).setValue(g[l])}var k="_attrs",j=this.getRowById(h)[k];for(l in g){j[l]=g[l]}this.callEvent("onBindUpdate",[h])},dhtmlXGridObject.prototype.add=function(j,h,o){for(var n=[],m=0;m<this.columnIds.length;m++){var l=this.columnIds[m];n[m]=dhx.isUndefined(h[l])?"":h[l]}this.addRow(j,n,o);var k="_attrs";this.getRowById(j)[k]=dhx.copy(h)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){var b="_f_rowsBuffer";return !this.rowsBuffer.length&&!this[b]&&!this.e.dataFeed?!1:!0},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(h,g){if(this.e.dataFeed){var m={};if(!h&&!g){return}if(typeof h=="function"){if(!g){return}h(g,m)}else{dhx.isUndefined(h)?m=g:m[h]=g}this.clearAll();var l=this.e.dataFeed;if(typeof l=="function"){return l.call(this,g,m)}var k=[],j;for(j in m){k.push("dhx_filter["+j+"]="+encodeURIComponent(m[j]))}this.load(l+(l.indexOf("?")<0?"?":"&")+k.join("&"));return !1}if(g===null){return this.filterBy(0,function(){return !1})}this.filterBy(0,function(b,a){return h.call(this,a,g)})}}if(window.dhtmlXTreeObject){dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(b){dhx.BaseBind.O.call(this,b)},dhtmlXTreeObject.prototype.dataFeed=function(b){this.e?this.e.dataFeed=b:this.X=b},dhtmlXTreeObject.prototype.i=function(){if(dhx.isUndefined(this.e)){this.e={id:dhx.uid(),dataFeed:this.X},dhx.ui.views[this.e.id]=this,this.data={silent:dhx.bind(function(b){b.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onSelect",function(b){this.callEvent("onSelectChange",[b])}),this.attachEvent("onEdit",function(d,c){d===2&&c&&c==this.getCursor()&&this.Y();return !0})}},dhtmlXTreeObject.prototype.item=function(b){return b===null?null:{id:b,text:this.getItemText(b)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return !0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(h,g){if(this.e.dataFeed){var m={};if(h||g){if(typeof h=="function"){if(!g){return}h(g,m)}else{dhx.isUndefined(h)?m=g:m[h]=g}this.deleteChildItems(0);var l=this.e.dataFeed;if(typeof l=="function"){return l.call(this,[data.id||data,data])}var k=[],j;for(j in m){k.push("dhx_filter["+j+"]="+encodeURIComponent(m[j]))}this.loadXML(l+(l.indexOf("?")<0?"?":"&")+k.join("&"));return !1}}},dhtmlXTreeObject.prototype.update=function(d,c){dhx.isUndefined(c.text)||this.setItemText(d,c.text)}}dhtmlx.skin="dhx_skyblue";