/*
Copyright DHTMLX LTD. http://www.dhtmlx.com
dhtmlx TOUCH v.0.8 beta, build 110217

This software is licensed under GPL and Commercial licenses. In both cases you allowed to use it free of charge. PLease contact sales@dhtmlx.com if you have any questions.
*/
window.dhx||(dhx={});dhx.version="3.0";dhx.codebase="./";dhx.name="Core";dhx.copy=function(a){var b=dhx.copy.Td;b.prototype=a;return new b};dhx.copy.Td=function(){};dhx.extend=function(a,b,c){for(var d in b)if(!a[d]||c)a[d]=b[d];b.defaults&&dhx.extend(a.defaults,b.defaults);b.m&&b.m.call(a);return a};
dhx.copy_tree=function(a){var b={};if(arguments.length>1){b=arguments[0];a=arguments[1]}for(var c in a)if(typeof b[c]=="undefined")if(typeof a[c]=="object"){b[c]=a[c].length?[]:{};dhx.copy_tree(b[c],a[c])}else b[c]=a[c];return b};dhx.single=function(a){var b=null,c=function(){b||(b=new a({}));b.Sc&&b.Sc.apply(b,arguments);return b};return c};
dhx.proto=function(){for(var a=arguments,b=a[0],c=!!b.m,d=[],e=a.length-1;e>0;e--){if(typeof a[e]=="function")a[e]=a[e].prototype;a[e].m&&d.push(a[e].m);if(a[e].defaults){var f=a[e].defaults;if(!b.defaults)b.defaults={};for(var g in f)b.defaults[g]||(b.defaults[g]=f[g])}if(a[e].type&&b.type)for(g in a[e].type)b.type[g]||(b.type[g]=a[e].type[g]);for(var h in a[e])b[h]||(b[h]=a[e][h])}c&&d.push(b.m);b.m=function(){for(var k=0;k<d.length;k++)d[k].apply(this,arguments)};var j=function(k){this.I=[];this.m(k);
this.La&&this.La(k,this.defaults);for(k=0;k<this.I.length;k++)this.I[k].call(this)};j.prototype=b;b=a=null;return j};dhx.bind=function(a,b){return function(){return a.apply(b,arguments)}};dhx.require=function(a){if(!dhx.Hc[a]){dhx.exec(dhx.ajax().sync().get(dhx.codebase+a).responseText);dhx.Hc[a]=true}};dhx.Hc={};dhx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)};dhx.methodPush=function(a,b){return function(){var c=false;return c=a[b].apply(a,arguments)}};
dhx.isNotDefined=function(a){return typeof a=="undefined"};dhx.delay=function(a,b,c,d){return setTimeout(function(){var e=a.apply(b,c);a=b=c=null;return e},d||1)};dhx.uid=function(){if(!this.Wb)this.Wb=(new Date).valueOf();this.Wb++;return this.Wb};dhx.toNode=function(a){if(typeof a=="string")return document.getElementById(a);return a};dhx.toArray=function(a){return dhx.extend(a||[],dhx.PowerArray,true)};dhx.toFunctor=function(a){return typeof a=="string"?eval(a):a};dhx.H={};
dhx.event=function(a,b,c,d){a=dhx.toNode(a);var e=dhx.uid();dhx.H[e]=[a,b,c];if(d)c=dhx.bind(c,d);if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent&&a.attachEvent("on"+b,c);return e};dhx.eventRemove=function(a){if(a){var b=dhx.H[a];if(b[0].removeEventListener)b[0].removeEventListener(b[1],b[2],false);else b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]);delete this.H[a]}};
dhx.EventSystem={m:function(){this.H={};this.Ga={};this.ma={}},blockEvent:function(){this.H.ac=true},unblockEvent:function(){this.H.ac=false},mapEvent:function(a){dhx.extend(this.ma,a,true)},callEvent:function(a,b){if(this.H.ac)return true;a=a.toLowerCase();var c=this.H[a.toLowerCase()],d=true;if(c)for(var e=0;e<c.length;e++)if(c[e].apply(this,b||[])===false)d=false;if(this.ma[a]&&!this.ma[a].callEvent(a,b))d=false;return d},attachEvent:function(a,b,c){a=a.toLowerCase();c=c||dhx.uid();b=dhx.toFunctor(b);
var d=this.H[a]||dhx.toArray();d.push(b);this.H[a]=d;this.Ga[c]={f:b,t:a};return c},detachEvent:function(a){var b=this.Ga[a].t,c=this.Ga[a].f;b=this.H[b];b.remove(c);delete this.Ga[a]},hasEvent:function(a){a=a.toLowerCase();return this.H[a]?true:false}};dhx.extend(dhx,dhx.EventSystem);
dhx.PowerArray={removeAt:function(a,b){if(a>=0)this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(!b&&b!==0)this.push(a);else{var c=this.splice(b,this.length-b);this[b]=a;this.push.apply(this,c)}},find:function(a){for(i=0;i<this.length;i++)if(a==this[i])return i;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this}};dhx.env={};
(function(){if(navigator.userAgent.indexOf("Mobile")!=-1)dhx.env.mobile=true;if(dhx.env.mobile||navigator.userAgent.indexOf("iPad")!=-1)dhx.env.touch=true;if(navigator.userAgent.indexOf("Opera")!=-1)dhx.env.isOpera=true;else{dhx.env.isIE=!!document.all;dhx.env.isFF=!document.all;dhx.env.isWebKit=navigator.userAgent.indexOf("KHTML")!=-1}if(navigator.userAgent.toLowerCase().indexOf("android")!=-1)dhx.env.isAndroid=true;dhx.env.transform=false;dhx.env.transition=false;var a={};a.names=["transform","transition"];
a.transform=["transform","WebkitTransform","MozTransform","oTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition"];for(var b=document.createElement("DIV"),c=0;c<a.names.length;c++)for(var d=a[a.names[c]],e=0;e<d.length;e++)if(typeof b.style[d[e]]!="undefined"){dhx.env[a.names[c]]=d[e];break}})();dhx.env.transform_prefix=function(){var a;if(dhx.env.isOpera)a="-o-";else{a="";if(dhx.env.isFF)a="-moz-";if(dhx.env.isWebKit)a="-webkit-"}return a}();
dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();
dhx.html={create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);if(b.style)d.style.cssText=b.style;if(b["class"])d.className=b["class"];if(c)d.innerHTML=c;return d},getValue:function(a){a=dhx.toNode(a);if(!a)return"";return dhx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){if(a)b?b.parentNode.insertBefore(a,
b):c.appendChild(a)},locate:function(a,b){if(a.tagName)var c=a;else{a=a||event;c=a.target||a.srcElement}for(;c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,j=b.top+e-g,k=b.left+f-
h;return{y:Math.round(j),x:Math.round(k)}}else{for(k=j=0;a;){j+=parseInt(a.offsetTop,10);k+=parseInt(a.offsetLeft,10);a=a.offsetParent}return{y:j,x:k}}},pos:function(a){a=a||event;if(a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=dhx.env.isIE&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault();dhx.html.stopEvent(a)},stopEvent:function(a){(a||
event).cancelBubble=true;return false},addCss:function(a,b){a.className+=" "+b},removeCss:function(a,b){a.className=a.className.replace(RegExp(" "+b,"g"),"")}};dhx.ready=function(a){this.Ce?a.call():this.ib.push(a)};dhx.ib=[];
(function(){var a=document.getElementsByTagName("SCRIPT");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhx.codebase=a.slice(0,a.length).join("/")+"/"}dhx.event(window,"load",function(){dhx.Ce=true;for(var b=0;b<dhx.ib.length;b++)dhx.ib[b].call();dhx.ib=[]})})();dhx.ui={};dhx.ui.zIndex=function(){return dhx.ui.Zb++};dhx.ui.Zb=1;
(function(){var a=dhx.Touch={defaults:{longTouchDelay:1E3,scrollDelay:150,gravity:500,deltaStep:30,stepSize:5,speed:"0ms",finish:1500},init:function(){dhx.extend(this,this.defaults);if(dhx.env.touch){dhx.event(document.body,"touchstart",a.kd);dhx.event(document.body,"touchmove",a.rb);dhx.event(document.body,"touchend",a.jd)}else{this.Hb=this.Vd;dhx.event(document.body,"mousedown",a.kd);dhx.event(document.body,"mousemove",a.rb);dhx.event(document.body,"mouseup",a.jd)}dhx.event(document.body,"dragstart",
function(b){return dhx.html.preventEvent(b)});dhx.event(document.body,"touchstart",function(){})},jd:function(b){if(a.S){if(a.ba){if(a.F){var c=a.tc(a.M),d=new Date-a.Ha,e=c.e,f=c.f,g=a.finish,h="f";if(a.F=="x")h="e";var j=c[h];if(d<a.scrollDelay){var k=Math.round(c[h]+a.gravity*a.Nb/a.db);if(!isNaN(k)){c[h]=a.Va(k);if(k!=j)g=Math.round(g*(c[h]-j)/(k-j))}}var i=a.Ya("onAfterScroll");i&&i.callEvent("onAfterScroll",[c]);c[h]=a.Va(c[h]);g=Math.max(100,a.pc?100:g);if(e!=c.e||f!=c.f){a.setMatrix(a.M,c,
g+"ms");a.ad(c.e,c.f,g+"ms")}else{a.ba=null;a.scrollEnd()}}}else if(a.Ra&&!a.Qa)a.sb("onSwipeX");else a.Qa&&!a.Ra&&a.sb("onSwipeY");a.fd();dhx.callEvent("onTouchEnd",[b])}},scrollEnd:function(){if(a.na){dhx.html.remove(a.na);a.na=null}},zc:function(){if(a.ba){var b=a.tc(a.M),c=b.e,d=b.f,e=a.Pc||a.S;if(a.F=="x")b.e=a.Va(b.e-e.x+a.fa.x,true,b.e);else b.f=a.Va(b.f-e.y+a.fa.y,true,b.f);if(b.e!=c||b.f!=d){var f=new Date,g=a.F=="x"?b.e:b.f;if(a.Ha&&f-a.Ha<a.scrollDelay){a.db=a.db/1.3+(f-a.Ha);a.Nb=a.Nb/
1.3+(g-a.Cc)}else{a.db=0;a.Nb=0}a.Ha=f;a.Cc=g;a.Pc=a.fa}a.setMatrix(a.M,b,"0ms");a.ad(b.e,b.f,"0ms")}else if(a.w){dhx.html.remove(a.na);a.na=a.ba=dhx.html.create("DIV",{"class":"dhx_scroll_"+a.F},"");if(a.F=="y"){if(a.w.dy-a.w.py<2)return this.F=false;var h=a.w.py*a.w.py/a.w.dy-7;a.ba.style.height=h+"px"}else{if(a.w.dx-a.w.px<2)return this.F=false;h=a.w.px*a.w.px/a.w.dx-7;a.ba.style.width=h+"px"}a.M.parentNode.appendChild(a.ba);a.ba.addEventListener("webkitTransitionEnd",a.scrollEnd,false);if(!a.M.scroll_enabled){a.M.scroll_enabled=
true;a.M.parentNode.style.position="relative";a.M.style.cssText+="-webkit-transition: -webkit-transform; -webkit-user-select:none; -webkit-transform-style:flat;"}window.setTimeout(a.zc,1)}},Va:function(b,c,d){var e=Math.abs(b-d),f=e/(b-d);a.pc=true;if(b>0)return c?d+f*Math.sqrt(e):0;var g=a.w.dy-a.w.py;if(a.F=="x")g=a.w.dx-a.w.px;if(g+b<0)return c?d-Math.sqrt(-(b-d)):-g;a.pc=false;return b},ad:function(b,c,d){d=d||0;var e=a.w.px/a.w.dx*-b,f=a.w.py/a.w.dy*-c;a.setMatrix(a.ba,{e:e,f:f},d)},rb:function(b){if(a.S){a.fa=
a.Hb(b);delta=a.Xd();if(a.F)a.zc(true);else{if(Math.abs(delta.x)>a.deltaStep){a.Qa=false;if(a.tb){a.Mb();if(a.F=="y")a.F=false}}if(Math.abs(delta.y)>a.deltaStep){a.Ra=false;if(a.tb){a.Mb();if(a.F=="x")a.F=false}}if(a.F){var c=a.Ya("onBeforeScroll");if(c){var d={};c.callEvent("onBeforeScroll",[d]);if(d.update){a.speed=d.speed;a.scale=d.scale}}a.rb(b)}}return dhx.html.preventEvent(b)}},Xd:function(){return{x:a.S.x-a.fa.x,y:a.S.y-a.fa.y}},We:function(b){a.Dc(a.S.target,"touch_scroll");if(a.M&&a.na&&
a.M.parentNode==a.na.parentNode){a.Mb();a.rb(b)}else a.F=a.M=a.w=null},Dc:function(b,c){if(dhx.env.touch||dhx.env.isWebKit)for(;b&&b.tagName!="BODY";){if(b.getAttribute){var d=b.getAttribute(c);if(d){a.F=d;a.M=b;a.w={dx:b.offsetWidth,dy:b.offsetHeight,px:b.parentNode.offsetWidth,py:b.parentNode.offsetHeight};return}}b=b.parentNode}},Mb:function(){window.clearTimeout(a.Fc);a.tb=false;a.Dc(a.S.target,"touch_scroll")},kd:function(b){a.S=a.Hb(b);a.sb("onTouchStart");if(a.S.target)a.Fc=window.setTimeout(a.he,
a.longTouchDelay);a.tb=true;a.Qa=true;a.Ra=true;a.na&&a.We(b)},he:function(){a.sb("onLongTouch");dhx.callEvent("onClick",[]);a.fd()},fd:function(){a.Qa=a.Ra=a.tb=a.S=a.fa=a.Pc=null;a.ba=a.w=a.F=a.M=null;a.db=a.Cc=a.Ha=0;window.clearTimeout(a.Fc)},Hb:function(b){return{target:b.target,x:b.touches[0].pageX,y:b.touches[0].pageY}},Vd:function(b){return{target:b.target,x:b.pageX,y:b.pageY}},sb:function(b){dhx.callEvent(b,[a.S,a.fa]);var c=this.Ya.apply(this,arguments);c&&c.callEvent(b,[a.S,a.fa])},Ya:function(b,
c){if(arguments.length<2)c=dhx.ui.get(a.S);if(!c)return null;return c.callEvent&&c.hasEvent(b)?c:c.getParent?this.Ya(b,c.getParent()):null},tc:function(b){var c=window.getComputedStyle(b).webkitTransform;return c=="none"?{e:0,f:0}:new WebKitCSSMatrix(c)},setMatrix:function(b,c,d){b.style.webkitTransform="translate3d("+Math.round(c.e)+"px,"+Math.round(c.f)+"px, 0px)";b.style.webkitTransitionDuration=d}};dhx.TouchEvents={m:function(){this.attachEvent("onSwipeX",this.Xe);this.attachEvent("onBeforeSelect",
this.unSwipe);this.attachEvent("onAfterDelete",this.unSwipe)},Xe:function(b){if((b=this.locate(b))&&b!=this.oa){this.unSwipe();this.swipe(b)}},swipe:function(b){this.oa=b;this.item(this.oa).$template="Swipe";this.refresh(this.oa)},unSwipe:function(){if(this.oa){var b=this.item(this.oa);if(b){b.$template="";this.refresh(this.oa)}this.oa=null}}};dhx.ready(function(){a.init()})})();
dhx.RenderStack={m:function(){this.P=document.createElement("DIV");this.data.attachEvent("onIdChange",dhx.bind(this.Vb,this));if(!this.types){this.types={"default":this.type};this.type.name="default"}this.type=dhx.copy(this.types[this.type.name])},customize:function(a){dhx.Type(this,a)},type_setter:function(a){if(this.types[a]){this.type=dhx.copy(this.types[a]);if(this.type.css)this.h.className+=" "+this.type.css}else this.customize(a);return a},template_setter:function(a){this.type.template=dhx.Template(a)},
pa:function(a){this.callEvent("onItemRender",[a]);return this.type.templateStart(a,this.type)+(a.$template?this.type["template"+a.$template]:this.type.template)(a,this.type)+this.type.templateEnd(a,this.type)},Yb:function(a){this.P.innerHTML=this.pa(a);return this.P.firstChild},Vb:function(a,b){var c=this.q(a);if(c){c.setAttribute(this.r,b);this.u[b]=this.u[a];delete this.u[a]}},q:function(a){if(this.u)return this.u[a];this.u={};for(var b=this.l.childNodes,c=0;c<b.length;c++){var d=b[c].getAttribute(this.r);
if(d)this.u[d]=b[c]}return this.q(a)},locate:function(a){return dhx.html.locate(a,this.r)},show:function(a){if(a=this.q(a))this.l.scrollTop=a.offsetTop-this.l.offsetTop},render:function(a,b,c){if(a){var d=this.q(a);switch(c){case "update":if(!d)return;b=this.u[a]=this.Yb(b);dhx.html.insertBefore(b,d);dhx.html.remove(d);break;case "delete":if(!d)return;dhx.html.remove(d);delete this.u[a];break;case "add":b=this.u[a]=this.Yb(b);dhx.html.insertBefore(b,this.q(this.data.next(a)),this.l);break;case "move":this.render(a,
b,"delete");this.render(a,b,"add");break;default:break}}else if(this.callEvent("onBeforeRender",[this.data])){this.l.innerHTML=this.data.getRange().map(this.pa,this).join("");this.u=null;this.callEvent("onAfterRender",[])}}};
dhx.VirtualRenderStack={m:function(){this.u={};this.l.style.overflowY="scroll";dhx.event(this.l,"scroll",dhx.bind(this.Xc,this));dhx.event(window,"resize",dhx.bind(function(){this.render()},this));this.Pa=[];this.attachEvent("onItemRender",function(a){a.$template=="loading"&&this.Pa.push(this.data.id(a))})},q:function(a){return this.u[a]},show:function(a){range=this.sc();var b=this.data.indexById(a);a=Math.floor(b/range.Fb)*range.ub;this.l.scrollTop=a},render:function(a,b,c){if(a){var d=this.q(a);
switch(c){case "update":if(!d)return;a=this.u[a]=this.Yb(b);dhx.html.insertBefore(a,d);dhx.html.remove(d);break;default:this.Fe();break}}else if(this.callEvent("onBeforeRender",[this.data])){this.u={};this.Xc(null,true);this.od=false;this.callEvent("onAfterRender",[])}},Fe:function(){if(!this.od){this.od=true;window.setTimeout(dhx.bind(function(){this.render()},this),1)}},zb:function(a){var b=document.createElement("DIV");b.style.cssText="height:"+a+"px; width:100%; overflow:hidden;";return b},Xc:function(a,
b){this.Pa=[];var c=this.sc();if(!this.l.firstChild||b){this.l.innerHTML="";this.l.appendChild(this.zb(c.je));this.ia=[this.l.firstChild]}for(a=c.ga;a<=c.la;){for(;this.ia[a]&&this.ia[a].Sd&&a<=c.la;)a++;if(a>c.la)break;for(var d=a;!this.ia[d];)d--;var e=this.ia[d],f=a*c.Fb+(this.data.min||0);if(f>(this.data.max||Infinity))break;var g=Math.min(f+c.Fb-1,this.data.max||Infinity),h=this.zb(c.ub),j=this.data.getIndexRange(f,g);if(!j.length)break;h.innerHTML=j.map(this.pa,this).join("");for(var k=0;k<
j.length;k++)this.u[this.data.idByIndex(f+k)]=h.childNodes[k];k=parseInt(e.style.height,10);var i=(a-d)*c.ub,m=k-i-c.ub;dhx.html.insertBefore(h,i?e.nextSibling:e,this.l);this.ia[a]=h;h.Sd=true;if(i<=0&&m>0){e.style.height=m+"px";this.ia[a+1]=e}else{if(i<0)dhx.html.remove(e);else e.style.height=i+"px";if(m>0){var l=this.ia[a+1]=this.zb(m);dhx.html.insertBefore(l,h.nextSibling,this.l)}}a++}if(this.Pa.length){var n=this.indexById(this.Pa[0]),o=this.indexById(this.Pa.pop())+1;if(o>n){if(!this.callEvent("onDataRequest",
[n,o-n]))return false;this.data.feed.call(this,n,o-n)}}},sc:function(){var a=this.l.scrollTop,b=Math.max(this.l.scrollWidth,this.l.offsetWidth)-18,c=this.l.offsetHeight,d=this.Wa(),e=Math.floor(b/d.x)||1,f=Math.floor(a/d.y);c=Math.ceil((c+a)/d.y)-1;var g=this.data.max?this.data.max-this.data.min:this.data.dataCount(),h=Math.ceil(g/e)*d.y;return{ga:f,la:c,xa:a,je:h,ub:d.y,Fb:e}}};
dhx.SelectionModel={m:function(){this.s=dhx.toArray();this.data.attachEvent("onStoreUpdated",dhx.bind(this.Fd,this));this.data.attachEvent("onStoreLoad",dhx.bind(this.Ed,this))},Fd:function(a,b,c){if(c=="delete")this.s.remove(a);else if(!this.data.dataCount())this.s=dhx.toArray()},Ed:function(){this.g.select&&this.data.each(function(a){a.$selected&&this.select(a.id)},this)},kb:function(a,b,c){if(!c&&!this.callEvent("onBeforeSelect",[a,b]))return false;this.data.item(a).$selected=b;if(c)c.push(a);
else{b?this.s.push(a):this.s.remove(a);this.Tb(a)}return true},select:function(a,b,c){if(!a)return this.selectAll();if(a instanceof Array)for(var d=0;d<a.length;d++)this.select(a[d],b,c);else if(this.data.exists(a)){if(c&&this.s.length)return this.selectAll(this.s[this.s.length-1],a);if(!b&&(this.s.length!=1||this.s[0]!=a)){this.bd=true;this.unselectAll();this.bd=false}if(this.isSelected(a))b&&this.unselect(a);else this.kb(a,true)&&this.callEvent("onAfterSelect",[a])}},unselect:function(a){if(!a)return this.unselectAll();
this.isSelected(a)&&this.kb(a,false)},selectAll:function(a,b){var c=[];a=a||b?this.data.getRange(a||null,b||null):this.data.getRange();a.each(function(d){var e=this.data.item(d.id);if(!e.$selected){this.s.push(d.id);this.kb(d.id,true,c)}return d.id},this);this.Tb(c)},unselectAll:function(){var a=[];this.s.each(function(b){this.kb(b,false,a)},this);this.s=dhx.toArray();this.Tb(a)},isSelected:function(a){return this.s.find(a)!=-1},getSelected:function(a){switch(this.s.length){case 0:return a?[]:"";
case 1:return a?[this.s[0]]:this.s[0];default:return[].concat(this.s)}},ee:function(a){return a.length>100||a.length>this.data.dataCount/2},Tb:function(a){if(typeof a!="object")a=[a];if(a.length){if(this.ee(a))this.data.refresh();else for(var b=0;b<a.length;b++)this.render(a[b],this.data.item(a[b]),"update");this.bd||this.callEvent("onSelectChange",[a])}}};
dhx.EditAbility={m:function(){this.Ea=this.W=null;this.attachEvent("onEditKeyPress",function(a,b,c){if(a==13&&!c)this.stopEdit();else a==27&&this.stopEdit(true)});this.attachEvent("onBeforeRender",function(){this.stopEdit()});this.data.attachEvent("onClearAll",dhx.bind(function(){this.Ea=this.W=null},this))},isEdit:function(){return this.W},edit:function(a){if(this.stopEdit(false,a))if(this.callEvent("onBeforeEditStart",[a])){var b=this.data.item(a);if(!b.$template){b.$template="Edit";this.data.refresh(a);
this.W=a;this.He(a);this.Ea(true,b);this.callEvent("onAfterEditStart",[a])}}},stopEdit:function(a,b){if(!this.W)return true;if(this.W==b)return false;if(!this.callEvent("onBeforeEditStop",[this.W]))return false;var c=this.data.item(this.W);c.$template=null;a||this.Ea(false,c);a=this.W;this.Ea=this.W=null;this.data.refresh(a);this.callEvent("onAfterEditStop",[a]);return true},He:function(a){a=this.q(a);var b="",c="",d=[];if(a){var e=a.getElementsByTagName("*"),f="";for(a=0;a<e.length;a++)if(e[a].nodeType==
1&&(f=e[a].getAttribute("bind"))){b+="els["+d.length+"].value="+f+";";c+=f+"=els["+d.length+"].value;";d.push(e[a]);e[a].className+=" dhx_allow_selection";e[a].onselectstart=this.vd}e=null}b=Function("obj","els",b);c=Function("obj","els",c);this.Ea=function(g,h){if(g){b(h,d);d.length&&d[0].select&&d[0].select()}else c(h,d)}},vd:function(a){return(a||event).cancelBubble=true}};dhx.keyPressTimeout=200;
dhx.KeyEvents={m:function(){dhx.event(this.h,"keyup",this.pe,this)},pe:function(a){a=a||event;var b=a.which||a.keyCode;this.callEvent(this.W?"onEditKeyPress":"onKeyPress",[b,a.ctrlKey,a.shiftKey,a]);dhx.Bc&&window.clearTimeout(dhx.Bc);dhx.Bc=window.setTimeout(dhx.bind(this.qe,this),dhx.keyPressTimeout)},qe:function(){this.callEvent("onTimedKeyPress",[])}};
dhx.MouseEvents={m:function(){this.on_click&&dhx.event(this.h,"click",this.me,this);this.on_context&&dhx.event(this.h,"contextmenu",this.ne,this);this.on_dblclick&&dhx.event(this.h,"dblclick",this.oe,this);if(this.on_mouse_move){dhx.event(this.h,"mousemove",this.Mc,this);dhx.event(this.h,dhx.env.isIE?"mouseleave":"mouseout",this.Mc,this)}},me:function(a){return this.Ka(a,this.on_click,"ItemClick")},oe:function(a){return this.Ka(a,this.on_dblclick,"ItemDblClick")},ne:function(a){if(this.Ka(a,this.on_context,
"BeforeContextMenu")){this.Ka(a,{},"AfterContextMenu");return dhx.html.preventEvent(a)}},Mc:function(a){if(dhx.env.isIE)a=document.createEventObject(event);this.Jc&&window.clearTimeout(this.Jc);this.callEvent("onMouseMoving",[a]);this.Jc=window.setTimeout(dhx.bind(function(){a.type=="mousemove"?this.re(a):this.se(a)},this),500)},re:function(a){this.Ka(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},se:function(a){this.callEvent("onMouseOut",[a||event])},Ka:function(a,b,
c){a=a||event;for(var d=a.target||a.srcElement,e="",f=null,g=false;d&&d.parentNode;){if(!g&&d.getAttribute)if(f=d.getAttribute(this.r)){d.getAttribute("userdata")&&this.callEvent("onLocateData",[f,d]);if(!this.callEvent("on"+c,[f,a,d]))return;g=true}if(e=d.className){e=e.split(" ");e=e[0]||e[1];if(b[e]){var h=b[e].call(this,a,f||dhx.html.locate(a,this.r),d);if(typeof h!="undefined"&&h!==true)return}}d=d.parentNode}return g}};
dhx.DataMove={m:function(){},copy:function(a,b,c,d){var e=this.item(a);if(e){if(c)e=c.externalData(e);c=c||this;return c.add(c.externalData(e,d),b)}},move:function(a,b,c,d){if(a instanceof Array)for(var e=0;e<a.length;e++){var f=(c||this).indexById(this.move(a[e],b,c,d?d[e]:null));if(a[e+1])b=f+(this.indexById(a[e+1])<f?0:1)}else{nid=a;if(!(b<0))if(e=this.item(a)){if(!c||c==this)this.data.move(this.indexById(a),b);else{if(!d||c.item(d))d=dhx.uid();nid=c.add(c.externalData(e,d),b);this.remove(a)}return nid}}},
moveUp:function(a,b){return this.move(a,this.indexById(a)-(b||1))},moveDown:function(a,b){return this.moveUp(a,(b||1)*-1)},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.dataCount()-1)},externalData:function(a,b){var c=dhx.extend({},a);c.id=b||dhx.uid();c.$selected=c.$template=null;return c}};
dhx.DragControl={V:dhx.toArray(["dummy"]),addDrop:function(a,b,c){a=dhx.toNode(a);a.dhx_drop=this.rc(b);if(c)a.dhx_master=true},rc:function(a){a=a||dhx.DragControl;var b=this.V.find(a);if(b<0){b=this.V.length;this.V.push(a)}return b},addDrag:function(a,b){a=dhx.toNode(a);a.dhx_drag=this.rc(b);dhx.event(a,"mousedown",this.xe,a)},xe:function(a){if(dhx.DragControl.Z){dhx.DragControl.Sb();dhx.DragControl.destroyDrag()}dhx.DragControl.Z=this;dhx.DragControl.Ca=dhx.event(document.body,"mousemove",dhx.DragControl.Ue);
dhx.DragControl.Da=dhx.event(document.body,"mouseup",dhx.DragControl.Sb);a.cancelBubble=true;return false},Sb:function(){dhx.DragControl.Ca=dhx.eventRemove(dhx.DragControl.Ca);dhx.DragControl.Da=dhx.eventRemove(dhx.DragControl.Da)},Ue:function(a){dhx.DragControl.Sb();if(dhx.DragControl.createDrag(a)){dhx.DragControl.sendSignal("start");dhx.DragControl.Ca=dhx.event(document.body,"mousemove",dhx.DragControl.Kc);dhx.DragControl.Da=dhx.event(document.body,"mouseup",dhx.DragControl.Ve);dhx.DragControl.Kc(a)}},
Ve:function(a){dhx.DragControl.Ca=dhx.eventRemove(dhx.DragControl.Ca);dhx.DragControl.Da=dhx.eventRemove(dhx.DragControl.Da);if(dhx.DragControl.L){dhx.DragControl.onDrop(dhx.DragControl.Z,dhx.DragControl.L,this.$a,a);dhx.DragControl.onDragOut(dhx.DragControl.Z,dhx.DragControl.L,null,a)}dhx.DragControl.destroyDrag();dhx.DragControl.sendSignal("stop")},Kc:function(a){var b=dhx.html.pos(a);dhx.DragControl.P.style.top=b.y+dhx.DragControl.top+"px";dhx.DragControl.P.style.left=b.x+dhx.DragControl.left+
"px";if(dhx.DragControl.cd)dhx.DragControl.cd=false;else dhx.DragControl.zd(a.srcElement||a.target,a);a.cancelBubble=true;return false},zd:function(a,b){for(;a&&a.tagName!="BODY";){if(a.dhx_drop){if(this.L&&(this.L!=a||a.dhx_master))this.onDragOut(this.Z,this.L,a,b);if(!this.L||this.L!=a||a.dhx_master){this.L=null;if(this.$a=this.onDragIn(dhx.DragControl.Z,a,b))this.L=a;return}return}a=a.parentNode}if(this.L)this.L=this.$a=this.onDragOut(this.Z,this.L,null,b)},sendSignal:function(a){dhx.DragControl.active=
a=="start"},getMaster:function(a){return this.V[a.dhx_drag||a.dhx_drop]},getContext:function(){return this.jc},getNode:function(){return this.P},createDrag:function(a){var b=dhx.DragControl.Z,c=this.V[b.dhx_drag],d;if(c.onDragCreate){d=c.onDragCreate(b,a);d.style.position="absolute";d.style.zIndex=dhx.ui.zIndex();d.onmousemove=dhx.DragControl.dd}else{var e=dhx.DragControl.onDrag(b,a);if(!e)return false;d=document.createElement("DIV");d.innerHTML=e;d.className="dhx_drag_zone";d.onmousemove=dhx.DragControl.dd;
document.body.appendChild(d)}dhx.DragControl.P=d;return true},dd:function(){dhx.DragControl.cd=true},destroyDrag:function(){var a=dhx.DragControl.Z,b=this.V[a.dhx_drag];b&&b.onDragDestroy?b.onDragDestroy(a,dhx.DragControl.P):dhx.html.remove(dhx.DragControl.P);dhx.DragControl.$a=dhx.DragControl.Z=dhx.DragControl.L=dhx.DragControl.P=null},top:5,left:5,onDragIn:function(a,b,c){var d=this.V[b.dhx_drop];if(d.onDragIn&&d!=this)return d.onDragIn(a,b,c);b.className+=" dhx_drop_zone";return b},onDragOut:function(a,
b,c,d){var e=this.V[b.dhx_drop];if(e.onDragOut&&e!=this)return e.onDragOut(a,b,c,d);b.className=b.className.replace("dhx_drop_zone","");return null},onDrop:function(a,b,c,d){var e=this.V[b.dhx_drop];dhx.DragControl.jc.from=dhx.DragControl.getMaster(a);if(e.onDrop&&e!=this)return e.onDrop(a,b,c,d);b.appendChild(a)},onDrag:function(a,b){var c=this.V[a.dhx_drag];if(c.onDrag&&c!=this)return c.onDrag(a,b);dhx.DragControl.jc={source:a,from:a};return"<div style='"+a.style.cssText+"'>"+a.innerHTML+"</div>"}};
dhx.Movable={move_setter:function(a){if(a){this.eb=dhx.copy(this.eb);this.eb.master=this;dhx.DragControl.addDrag(this.D,this.eb)}},eb:{onDragCreate:function(a,b){var c=dhx.html.offset(a);a=dhx.html.pos(b);dhx.DragControl.top=c.y-a.y;dhx.DragControl.left=c.x-a.x;return dhx.toNode(this.master.i)},onDragDestroy:function(){dhx.DragControl.top=dhx.DragControl.left=5}}};
dhx.Scrollable={m:function(a){if(a&&!a.scroll&&this.te)return this.l=this.l||this.h;(this.l||this.h).appendChild(dhx.html.create("DIV",{"class":"dhx_scroll_cont"},""));this.l=(this.l||this.h).firstChild},scrollSize:dhx.Touch?0:18,scroll_setter:function(a){if(!a)return false;if(dhx.Touch){this.l.setAttribute("touch_scroll",a=="x"?"x":"y");this.attachEvent&&this.attachEvent("onAfterRender",dhx.bind(this.De,this));this.g.touch_scroll=true}else this.l.parentNode.style.overflowY=a?"scroll":"";return a},
scrollTo:function(a,b){if(dhx.Touch)dhx.Touch.setMatrix(this.l,{e:-a,f:-b},this.g.scrollSpeed||"100ms");else{this.l.parentNode.scrollLeft=-a;this.l.parentNode.scrollTop=-b}},De:function(){if(this.g.touch_scroll){dhx.Touch.scrollEnd();dhx.Touch.setMatrix(this.l,{e:0,f:0},0)}}};
(function(){var a={};dhx.Template=function(b){if(typeof b=="function")return b;if(a[b])return a[b];b=(b||"").toString();if(b.indexOf("->")!=-1){b=b.split("->");switch(b[0]){case "html":b=dhx.html.getValue(b[1]);break;case "http":b=(new dhx.ajax).sync().get(b[1],{uid:dhx.uid()}).responseText;break;default:break}}b=(b||"").toString();b=b.replace(/(\r\n|\n)/g,"\\n");b=b.replace(/(\")/g,'\\"');b=b.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');b=b.replace(/\{common\.([^}\(]*)\}/g,
"\"+(common.$1||'')+\"");b=b.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj,common):"")+"');b=b.replace(/\{obj\.([^}]*)\}/g,"\"+(obj.$1||'')+\"");b=b.replace(/#([a-z0-9_\[\]]+)#/gi,"\"+(obj.$1||'')+\"");b=b.replace(/\{obj\}/g,'"+obj+"');b=b.replace(/\{-obj/g,"{obj");b=b.replace(/\{-common/g,"{common");b='return "'+b+'";';try{Function("obj","common",b)}catch(c){debugger}return a[b]=Function("obj","common",b)};dhx.Template.empty=function(){return""};dhx.Template.bind=function(b){return dhx.bind(dhx.Template(b),
this)};dhx.Type=function(b,c){if(typeof b=="function")b=b.prototype;if(!b.types){b.types={"default":b.type};b.type.name="default"}var d=c.name,e=b.type;if(d)e=b.types[d]=dhx.copy(b.type);for(var f in c)e[f]=f.indexOf("template")===0?dhx.Template(c[f]):c[f];return d}})();
dhx.AtomRender={pa:function(a){return this.g.template(a)},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data)this.l.innerHTML=this.pa(this.data);this.callEvent&&this.callEvent("onAfterRender",[])}},template_setter:dhx.Template};dhx.SingleRender=dhx.proto({pa:function(a){return this.type.templateStart(a,this.type)+this.type.template(a,this.type)+this.type.templateEnd(a,this.type)},customize:function(a){dhx.Type(this,a)}},dhx.AtomRender);
dhx.ajax=function(a,b,c){if(arguments.length!==0){var d=new dhx.ajax;if(c)d.master=c;d.get(a,null,b)}if(!this.getXHR)return new dhx.ajax;return this};
dhx.ajax.prototype={getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,b,c){var d=this.getXHR();if(typeof c=="function")c=[c];if(typeof b=="object"){var e=[];for(var f in b){var g=b[f];if(g===null||g===dhx.undefined)g="";e.push(f+"="+encodeURIComponent(g))}b=e.join("&")}if(b&&!this.post){a=a+(a.indexOf("?")!=-1?"&":"?")+b;b=null}d.open(this.post?"POST":"GET",a,!this.gd);this.post&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");
if(!this.gd){var h=this;d.onreadystatechange=function(){if(!d.readyState||d.readyState==4){if(c&&h)for(var j=0;j<c.length;j++)if(c[j])c[j].call(h.master||h,d.responseText,d.responseXML,d);c=d=h=h.master=null}}}d.send(b||null);return d},get:function(a,b,c){this.post=false;return this.send(a,b,c)},post:function(a,b,c){this.post=true;return this.send(a,b,c)},sync:function(){this.gd=true;return this}};
dhx.AtomDataLoader={m:function(a){this.data={};this.g.datatype=a.datatype||"json";this.I.push(this.ge)},ge:function(){this.Rc=true;this.g.url&&this.url_setter(this.g.url);this.g.data&&this.data_setter(this.g.data)},url_setter:function(a){if(!this.Rc)return a;this.load(a,this.g.datatype);return a},data_setter:function(a){if(!this.Rc)return a;this.parse(a,this.g.datatype);return true},load:function(a,b,c){this.callEvent("onXLS",[]);if(typeof b=="string"){this.data.driver=dhx.DataDriver[b];b=c}dhx.ajax(a,
[this.Rb,b],this)},parse:function(a,b){this.callEvent("onXLS",[]);this.data.driver=dhx.DataDriver[b||"json"];this.Rb(a,null)},Rb:function(a,b){var c=this.data.driver,d=c.getRecords(c.toObject(a,b))[0];this.data=c?c.getDetails(d):a;this.callEvent("onXLE",[])}};dhx.DataDriver={};
dhx.DataDriver.json={toObject:function(a){a||(a="[]");if(typeof a=="string"){eval("dhx.temp="+a);return dhx.temp}return a},getRecords:function(a){if(a&&!(a instanceof Array))return[a];return a},getDetails:function(a){return a},getInfo:function(a){return{wa:a.total_count||0,ga:a.pos||0}}};
dhx.DataDriver.json_ext={toObject:function(a){a||(a="[]");if(typeof a=="string"){eval("var temp="+a);dhx.temp=[];var b=temp.header;for(a=0;a<temp.data.length;a++){for(var c={},d=0;d<b.length;d++)if(typeof temp.data[a][d]!="undefined")c[b[d]]=temp.data[a][d];dhx.temp.push(c)}return dhx.temp}return a},getRecords:function(a){if(a&&!(a instanceof Array))return[a];return a},getDetails:function(a){return a},getInfo:function(a){return{wa:a.total_count||0,ga:a.pos||0}}};
dhx.DataDriver.html={toObject:function(a){if(typeof a=="string"){var b=null;if(a.indexOf("<")==-1)b=dhx.toNode(a);if(!b){b=document.createElement("DIV");b.innerHTML=a}return b.getElementsByTagName(this.tag)}return a},getRecords:function(a){if(a.tagName)return a.childNodes;return a},getDetails:function(a){return dhx.DataDriver.xml.tagToObject(a)},getInfo:function(){return{wa:0,ga:0}},tag:"LI"};
dhx.DataDriver.jsarray={toObject:function(a){if(typeof a=="string"){eval("dhx.temp="+a);return dhx.temp}return a},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{wa:0,ga:0}}};
dhx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{wa:0,ga:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","};
dhx.DataDriver.xml={toObject:function(a,b){if(b&&(b=this.checkResponse(a,b)))return b;if(typeof a=="string")return this.fromString(a);return a},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{wa:a.documentElement.getAttribute("total_count")||0,ga:a.documentElement.getAttribute("pos")||0}},xpath:function(a,b){if(window.XPathResult){var c=a;if(a.nodeName.indexOf("document")==-1)a=a.ownerDocument;
var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null);for(a=e.iterateNext();a;){d.push(a);a=e.iterateNext()}return d}else{d=true;try{if(typeof a.selectNodes=="undefined")d=false}catch(f){}if(d)return a.selectNodes(b);else{d=b.split("/").pop();return a.getElementsByTagName(d)}}},tagToObject:function(a,b){b=b||{};var c=a.attributes;if(c)for(var d=0;d<c.length;d++)b[c[d].name]=c[d].value;var e=false,f=a.childNodes;for(d=0;d<f.length;d++)if(f[d].nodeType==1){var g=f[d].tagName;if(typeof b[g]!="undefined"){b[g]instanceof
Array||(b[g]=[b[g]]);b[g].push(this.tagToObject(f[d],{}))}else b[f[d].tagName]=this.tagToObject(f[d],{});e=true}if(c&&!c.length&&!e)return this.nodeValue(a);b.value=this.nodeValue(a);return b},nodeValue:function(a){if(a.firstChild)return a.firstChild.data;return""},fromString:function(a){if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){temp=new ActiveXObject("Microsoft.xmlDOM");temp.loadXML(a);return temp}},checkResponse:function(a,b){if(b&&b.firstChild&&
b.firstChild.tagName!="parsererror")return b;if(a=this.fromString(a.replace(/^[\s]+/,"")))return a}};
dhx.Settings={m:function(){this.g=this.config={}},define:function(a,b){if(typeof a=="object")return this.Oc(a);return this.ic(a,b)},ic:function(a,b){var c=this[a+"_setter"];return this.g[a]=c?c.call(this,b,a):b},Oc:function(a){if(a)for(var b in a)this.ic(b,a[b])},La:function(a,b){var c=dhx.extend({},b);typeof a=="object"&&!a.tagName&&dhx.extend(c,a,true);this.Oc(c)},J:function(a,b){for(var c in b)switch(typeof a[c]){case "object":a[c]=this.J(a[c]||{},b[c]);break;case "undefined":a[c]=b[c];break;default:break}return a}};
dhx.Destruction={m:function(){dhx.destructors.push(this)},destructor:function(){this.destructor=function(){};this.ia=this.u=null;this.P&&document.body.appendChild(this.P);this.P=null;if(this.h){this.h.innerHTML="";this.h.u=null}this.data=this.h=this.l=null;this.H=this.Ga={}}};dhx.destructors=[];
dhx.event(window,"unload",function(){for(var a=0;a<dhx.destructors.length;a++)dhx.destructors[a].destructor();dhx.destructors=[];for(var b in dhx.H){a=dhx.H[b];if(a[0].removeEventListener)a[0].removeEventListener(a[1],a[2],false);else a[0].detachEvent&&a[0].detachEvent("on"+a[1],a[2]);delete dhx.H[b]}});
(function(){var a=dhx.ui=function(d){var e=dhx.toNode(d.container||document.body),f=a.za(d);if(e.appendChild){e.appendChild(f.i);f.setPosition||dhx.event(window,"resize",dhx.bind(f.resize,f))}else e.getParent()&&e.getParent().replace(e,f);f.resize();return f};a.Bb={};a.delay=function(d){dhx.ui.Bb[d.id]=d};dhx.ui.zIndex=function(){return dhx.ui.Zb++};dhx.ui.Zb=1;var b=a.map={};a.za=function(d){if(d.view){var e=d.view;delete d.view;return new b[e](d)}else return d.rows||d.cols?new b.layout(d):d.cells?
new b.multiview(d):d.content||d.template?new b.template(d):new b.view(d)};a.views={};a.get=function(d){if(a.views[d])return a.views[d];if(a.Bb[d])return dhx.ui(a.Bb[d]);var e=d;if(typeof d=="object")e=d.target||d.srcElement;return a.views[dhx.html.locate({target:dhx.toNode(e)},"view_id")]};if(dhx.isNotDefined(window.$$))$$=a.get;b.view=a.view=dhx.proto({m:function(d){this.name="View";this.version="3.0";if(!d.id)d.id=dhx.uid();this.h=this.i=dhx.html.create("DIV",{"class":"dhx_view"})},defaults:{width:-1,
height:-1,gravity:1},getNode:function(){return this.i},getParent:function(){return this.Y||dhx.Y||null},container_setter:function(){return true},css_setter:function(d){this.i.className+=" "+d},id_setter:function(d){a.views[d]=this;this.i.setAttribute("view_id",d);return d},j:function(d,e){if(this.ua&&this.ua[0]==d&&this.ua[1]==e)return false;this.ua=[d,e];this.A=d;this.A=d-(!dhx.Touch&&this.g.scroll?dhx.Scrollable.scrollSize:0);this.B=e;this.i.style.width=d+"px";this.i.style.height=e+"px";return true},
n:function(){var d=this.g.width,e=this.g.height,f,g;f=g=this.g.gravity;if(d==-1)d=0;else{f=0;d+=this.g.scroll?dhx.Scrollable.scrollSize:0}if(e==-1)e=0;else g=0;return[f,d,g,e]},show:function(){if(this.getParent()){var d=this.getParent(),e=[this];e.push.apply(e,arguments);typeof d.pb!="undefined"&&d.pb.apply(d,e)}},resize:function(){if(this.Y)var d=this.A,e=this.B;else{d=this.i.parentNode.offsetWidth;e=this.i.parentNode.offsetHeight}var f=this.n();d=f[0]?Math.max(d,f[1]):Math.max(f[1],d);e=f[2]?Math.max(e,
f[3]):Math.max(f[3],e);this.j(d,e)}},dhx.Settings,dhx.Destruction);var c=a.view.prototype;b.layout=a.layout=dhx.proto({m:function(){this.name="Layout";this.I.push(this.T)},rows_setter:function(d){this.z=1;this.da=d},cols_setter:function(d){this.z=0;this.da=d},replace:function(d,e){var f=dhx.PowerArray.find.call(this.k,d);d.i.parentNode.insertBefore(e.i,d.i);e.i.style.cssFloat=d.i.style.cssFloat;dhx.html.remove(d.i);this.k[f]=e;this.k[f].Y=this},reconstruct:function(){for(var d=0;d<this.k.length;d++)dhx.html.remove(this.k[d].i);
this.T();this.resize()},T:function(d){d=this.da||d;this.da=null;this.k=[];this.i.style.verticalAlign="top";dhx.Y=this;for(var e=0;e<d.length;e++){this.k[e]=a.za(d[e]);this.k[e].Y=this;if(!this.z)this.k[e].i.style.cssFloat="left";this.h.appendChild(this.k[e].i)}dhx.Y=null},n:function(){var d=0,e=0,f=0,g=0;this.ca=[];for(var h=0;h<this.k.length;h++){var j=this.ca[h]=this.k[h].n();if(this.z){d=Math.max(d,j[1]);f=Math.max(f,j[0]);e+=j[3];g+=j[2]}else{e=Math.max(e,j[3]);g=Math.max(g,j[2]);d+=j[1];f+=j[0]}}this.cb=
[f,d,g,e];if(this.g.height>-1){e=this.g.height;g=0}if(this.g.width>-1){d=this.g.width;f=0}if(this.z){if(d)f=0;if(g)e=0}else{if(e)g=0;if(f)d=0}return[f,d,g,e]},j:function(d,e){c.j.call(this,d,e);this.ob(d,e)},ob:function(d,e){for(var f=d-this.cb[1],g=e-this.cb[3],h=this.cb[0],j=this.cb[2],k=0;k<this.k.length;k++){if(this.z){var i=d,m;if(this.ca[k][2]){m=Math.round(this.ca[k][2]*g/j);g-=m;j-=this.ca[k][2]}else m=this.ca[k][3]}else{m=e;if(this.ca[k][0]){i=Math.round(this.ca[k][0]*f/h);f-=i;h-=this.ca[k][0]}else i=
this.ca[k][1]}this.k[k].j(i,m)}}},a.view);b.debug=a.debug_view=dhx.proto({m:function(){this.h=dhx.html.create("DIV");this.i.appendChild(this.h);this.h.style.border="2px inset silver"},j:function(d,e){if(c.j.call(this,d-1,e)){this.A=d-4;this.B=e-4;this.h.style.width=d-4+"px";this.h.style.height=e-4+"px";return true}return false}},a.view);b.touch=a.touch_view=dhx.proto({m:function(){this.h.style.border="1px solid #AEAEAE"},n:function(){var d=this.g.p,e=c.n.call(this);if(!d)return e;var f=(d.left?0:
1)+(d.right?0:1);d=(d.top?0:1)+(d.bottom?0:1);if(e[1]&&f)e[1]+=f;if(e[3]&&d)e[3]+=d;return e},j:function(d,e){var f=this.g.p;if(f){d-=(f.left?0:1)+(f.right?0:1);e-=(f.top?0:1)+(f.bottom?0:1)}else this.h.style.border="0px solid #AEAEAE";return c.j.call(this,d,e)}},a.view);dhx.ui.border_layout=b.border_layout=dhx.proto({m:function(){},T:function(){this.i.className+=" dhx_layout_"+(this.g.type||"");var d=this.da;if(!this.g.p)this.g.p={top:true,left:true,right:true,bottom:true};for(var e=0;e<d.length;e++)d[e].p=
dhx.copy(this.g.p);var f=false;if(this.g.type=="clean")f=true;if(this.z){for(e=1;e<d.length-1;e++)d[e].p.top=d[e].p.bottom=f;if(this.g.type!="head")d[0].p.bottom=f;d[d.length-1].p.top=f}else{for(e=1;e<d.length-1;e++)d[e].p.left=d[e].p.right=f;if(this.g.type!="head")d[0].p.right=f;d[d.length-1].p.left=f}a.layout.prototype.T.call(this,d);for(e=0;e<d.length;e++){var g=this.k[e];if(!g.k){f=g.g.p;if(f.top)g.i.style.borderTopWidth="0px";if(f.left)g.i.style.borderLeftWidth="0px";if(f.right)g.i.style.borderRightWidth=
"0px";if(f.bottom)g.i.style.borderBottomWidth="0px"}}if(this.z)for(e=1;e<d.length;e++)this.k[e].i.style.marginTop=this.Ja+"px";else for(e=1;e<d.length;e++)this.k[e].i.style.marginLeft=this.Ja+"px"},n:function(){var d=dhx.ui.layout.prototype.n.call(this),e=this.Ja*(this.k.length-1);if(this.z){if(d[3])d[3]+=e}else if(d[1])d[1]+=e;return d},j:function(d,e){c.j.call(this,d,e);var f=this.Ja*(this.k.length-1);if(this.z)e-=f;else d-=f;a.layout.prototype.ob.call(this,d,e)},type_setter:function(d){this.Ja=
this.ie[d];return d},ie:{wide:4,clean:0,head:4,line:0},Ja:-1},b.layout);b.layout=b.border_layout;b.view=window.DHTMLX_SKIN?b[DHTMLX_SKIN]:b.touch;b.template=dhx.ui.template=dhx.proto({m:function(){this.name="Template";this.attachEvent("onXLE",this.render);this.I.push(this.Qc)},setValues:function(d){this.data=d;this.render()},defaults:{template:dhx.Template.empty,loading:true},Qc:function(){this.Qb||this.render()},src_setter:function(d){this.Qb=true;if(this.g.loading)this.l.innerHTML="<div class='dhx_loading_cover'></div>";
dhx.ajax(d,dhx.bind(function(e){this.g.template=dhx.Template(e);this.Qb=false;this.Qc()},this));return d},content_setter:function(d){if(d){this.Qb=true;this.l.appendChild(dhx.toNode(d))}},te:true},dhx.Scrollable,dhx.MouseEvents,dhx.AtomDataLoader,dhx.AtomRender,dhx.EventSystem,b.view);b.iframe=dhx.ui.iframe=dhx.proto({defaults:{loading:true},m:function(){this.name="Iframe";this.l=this.h;this.h.innerHTML="<div class='dhx_loading_cover' style='display:none'></div><iframe style='width:100%; height:100%' frameborder='0' src='about:blank'></iframe>"},
src_setter:function(d){this.h.childNodes[1].src=d;if(d.indexOf("http")&&this.g.loading){this.h.childNodes[0].style.display="block";dhx.delay(this.Qe,this)}return d},Qe:function(){try{if(this.getWindow().document.body)this.h.childNodes[0].style.display="none";else dhx.event(this.getWindow(),"load",dhx.bind(function(){this.h.childNodes[0].style.display="none"},this))}catch(d){}},getWindow:function(){return this.h.childNodes[1].contentWindow}},b.view);b.scrollview=dhx.ui.scrollview=dhx.proto({defaults:{scroll:"x",
scrollSpeed:"0ms"},m:function(){this.name="Scrollview";this.i.className+=" dhx_scrollview"},content_setter:function(d){this.ra=dhx.ui.za(d);this.ra.Y=this;this.l.appendChild(this.ra.i)},n:function(){this.qa=this.ra.n();if(this.g.scroll=="x"&&this.qa[3]>0)this.g.height=this.qa[3];else if(this.g.scroll=="y"&&this.qa[1]>0)this.g.width=this.qa[1];return dhx.ui.map.view.prototype.n.call(this)},j:function(d,e){if(dhx.ui.map.view.prototype.j.call(this,d,e)){this.ra.j(Math.max(this.qa[1],this.A),Math.max(this.qa[3],
this.B));this.l.style.width=this.ra.A+"px";this.l.style.height=this.ra.B+"px"}}},dhx.Scrollable,b.view)})();
dhx.DataLoader=dhx.proto({m:function(a){a=a||"";name="DataStore";this.data=a.datastore||new dhx.DataStore},load:function(a){dhx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed)this.data.feed=function(b,c){if(this.bb)return this.bb=[b,c];else this.bb=true;this.load(a+(a.indexOf("?")==-1?"?":"&")+"posStart="+b+"&count="+c,function(){var d=this.bb;this.bb=false;typeof d=="object"&&this.data.feed.apply(this,d)})}},Rb:function(a,b){this.data.ue(this.data.driver.toObject(a,b));this.callEvent("onXLE",
[])}},dhx.AtomDataLoader).prototype;dhx.DataStore=function(){this.name="DataStore";dhx.extend(this,dhx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhx.toArray()};
dhx.DataStore.prototype={setDriver:function(a){this.driver=dhx.DataDriver[a]},ue:function(a){this.filter();for(var b=this.driver.getInfo(a),c=this.driver.getRecords(a),d=(b.ga||0)*1,e=0,f=0;f<c.length;f++){var g=this.driver.getDetails(c[f]),h=this.id(g);if(!this.pull[h]){this.order[e+d]=h;e++}this.pull[h]=g;this.extraParser&&this.extraParser(g)}for(f=0;f<b.wa;f++)if(!this.order[f]){h=dhx.uid();g={id:h,$template:"loading"};this.pull[h]=g;this.order[f]=h}this.callEvent("onStoreLoad",[this.driver,a]);
this.refresh()},id:function(a){return a.id||(a.id=dhx.uid())},changeId:function(a,b){this.pull[b]=this.pull[a];this.pull[b].id=b;this.order[this.order.find(a)]=b;this.callEvent("onIdChange",[a,b]);this.Vb&&this.Vb(a,b)},item:function(a){return this.pull[a]},update:function(a,b){if(this.callEvent("onBeforeUpdate",[a,b])===false)return false;this.pull[a]=b;this.refresh(a)},refresh:function(a){a?this.callEvent("onStoreUpdated",[a,this.pull[a],"update"]):this.callEvent("onStoreUpdated",[null,null,null])},
getRange:function(a,b){a=a?this.indexById(a):this.min||0;if(b)b=this.indexById(b);else{b=Math.min(this.max||Infinity,this.dataCount()-1);if(b<0)b=0}if(a>b){var c=b;b=a;a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(b,this.dataCount()-1);var c=dhx.toArray();for(a=a;a<=b;a++)c.push(this.item(this.order[a]));return c},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(!(a<0||b<0)){var c=this.idByIndex(a),d=this.item(c);
this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,b));this.callEvent("onStoreUpdated",[c,d,"move"])}},add:function(a,b){var c=this.id(a),d=this.dataCount();if(dhx.isNotDefined(b)||b<0)b=d;if(b>d)b=Math.min(this.order.length,b);if(this.callEvent("onBeforeAdd",[c,a,b])===false)return false;if(this.exists(c))return null;this.pull[c]=a;this.order.insertAt(c,b);if(this.aa){var e=this.aa.length;if(!b&&this.order.length)e=0;this.aa.insertAt(c,e)}this.callEvent("onafterAdd",[c,b]);this.callEvent("onStoreUpdated",
[c,a,"add"]);return c},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===false)return false;if(!this.exists(a))return null;b=this.item(a);this.order.remove(a);this.aa&&this.aa.remove(a);delete this.pull[a];this.callEvent("onafterdelete",[a]);this.callEvent("onStoreUpdated",[a,b,"delete"])}},clearAll:function(){this.pull={};this.order=dhx.toArray();this.aa=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){return this.order[a]},
indexById:function(a){return a=this.order.find(a)},next:function(a,b){return this.order[this.indexById(a)+(b||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,b){return this.order[this.indexById(a)-(b||1)]},sort:function(a,b,c){var d=a;if(typeof a=="function")d={as:a,dir:b};else if(typeof a=="string")d={by:a,dir:b,as:c};var e=[d.by,d.dir,d.as];if(this.callEvent("onbeforesort",e)){if(this.order.length){var f=dhx.sort.create(d),
g=this.getRange(this.first(),this.last());g.sort(f);this.order=g.map(function(h){return this.id(h)},this)}this.refresh();this.callEvent("onaftersort",e)}},filter:function(a,b){if(this.callEvent("onBeforeFilter",[a,b])){if(this.aa){this.order=this.aa;delete this.aa}if(this.order.length){if(a){var c=a;if(typeof a=="string"){a=dhx.Template(a);c=function(g,h){return a(g).toLowerCase().indexOf(h)!=-1}}b=(b||"").toString().toLowerCase();for(var d=dhx.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];
c(this.item(f),b)&&d.push(f)}this.aa=this.order;this.order=d}this.refresh();this.callEvent("onAfterFilter",[])}}},each:function(a,b){for(var c=0;c<this.order.length;c++)a.call(b||this,this.item(this.order[c]))},provideApi:function(a,b){b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});for(var c=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll",
"first","last"],d=0;d<c.length;d++)a[c[d]]=dhx.methodPush(this,c[d])},serialize:function(){for(var a=this.order,b=[],c=0;c<a.length;c++)b.push(this.pull[a[c]]);return b}};
dhx.sort={create:function(a){return dhx.sort.dir(a.dir,dhx.sort.by(a.by,a.as))},as:{"int":function(a,b){a*=1;b*=1;return a>b?1:a<b?-1:0},string_strict:function(a,b){a=a.toString();b=b.toString();return a>b?1:a<b?-1:0},string:function(a,b){a=a.toString().toLowerCase();b=b.toString().toLowerCase();return a>b?1:a<b?-1:0}},by:function(a,b){if(typeof b!="function")b=dhx.sort.as[b||"string"];a=dhx.Template(a);return function(c,d){return b(a(c),a(d))}},dir:function(a,b){if(a=="asc")return b;return function(c,
d){return b(c,d)*-1}}};dhx.ui.proto=dhx.proto({m:function(){this.data.provideApi(this,true);this.l=this.h;this.data.attachEvent("onStoreUpdated",dhx.bind(function(){this.render.apply(this,arguments)},this))},j:function(){dhx.ui.map.view.prototype.j.apply(this,arguments)&&this.render()}},dhx.RenderStack,dhx.DataLoader,dhx.ui.map.view,dhx.EventSystem,dhx.Settings);
dhx.ui.map.dataview=dhx.ui.dataview=dhx.proto({m:function(){this.name="DataView";this.version="3.0";this.h.className+=" dhx_dataview";this.data.provideApi(this,true);this.data.attachEvent("onStoreUpdated",dhx.bind(this.render,this))},U:function(){this.g.height!="auto"&&dhx.extend(this,dhx.VirtualRenderStack)},defaults:{edit:false,select:"multiselect",type:"default",scroll:true},r:"dhx_f_id",on_click:{dhx_dataview_item:function(a,b){if(this.stopEdit(false,b))if(this.g.select)this.g.select=="multiselect"?
this.select(b,a.ctrlKey,a.shiftKey):this.select(b)}},on_dblclick:{dhx_dataview_item:function(a,b){this.g.edit&&this.edit(b)}},on_mouse_move:{},dragMarker:function(a){var b=this.q(a.target);if(this.type.drag_marker){if(this.Cb){this.Cb.style.backgroundImage="";this.Cb.style.backgroundRepeat=""}if(b){b.style.backgroundImage="url("+(dhx.image_path||"")+this.type.drag_marker+")";b.style.backgroundRepeat="no-repeat";this.Cb=b}}if(b&&this.g.auto_scroll){var c=b.offsetTop,d=b.offsetHeight,e=this.l.scrollTop,
f=this.l.offsetHeight;if(c-d>0&&c-d*0.75<e)e=Math.max(c-d,0);else if(c+d/0.75>e+f)e+=d;this.l.scrollTop=e}return true},type:{css:"default",template:"<div style='padding:10px; white-space:nowrap; overflow:hidden;'>#value#</div>",templateEdit:dhx.Template("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='#text#'></textarea></div>"),templateLoading:dhx.Template("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),
width:210,height:115,margin:0,padding:10,border:1,templateStart:dhx.Template("<div dhx_f_id='#id#' class='dhx_dataview_item dhx_dataview_{common.css}_item{obj.$selected?_selected:}' style='width:{common.width}px; height:{common.height}px; padding:{common.padding}px; margin:{common.margin}px; float:left; overflow:hidden;'>"),templateEnd:dhx.Template("</div>")},xCount_setter:function(a){var b=this.Wa();this.l.style.width=b.x*a+(this.g.height!="auto"?18:0)+"px";return a},yCount_setter:function(a){var b=
this.Wa();this.l.style.height=b.y*a+"px";return a},Wa:function(){var a=this.type,b=(a.border||0)+(a.padding||0)*2+(a.margin||0)*2;return{x:a.width+b,y:a.height+b}}},dhx.MouseEvents,dhx.KeyEvents,dhx.SelectionModel,dhx.EditAbility,dhx.Scrollable,dhx.ui.proto);dhx.Type(dhx.ui.dataview,{name:"dummy"});dhx.ui.Map=function(a){this.name="Map";this.r="map_"+dhx.uid();this.fe=a;this.ma=[]};
dhx.ui.Map.prototype={addRect:function(a,b,c){this.gc(a,"RECT",b,c)},addPoly:function(a,b){this.gc(a,"POLY",b)},gc:function(a,b,c,d){var e="";if(arguments.length==4)e="userdata='"+d+"'";this.ma.push("<area "+this.fe+"='"+a+"' shape='"+b+"' coords='"+c.join()+"' "+e+"></area>")},addSector:function(a,b,c,d,e,f,g){var h=[];h.push(d);h.push(Math.floor(e*g));for(var j=b;j<c;j+=Math.PI/18){h.push(Math.floor(d+f*Math.cos(j)));h.push(Math.floor((e+f*Math.sin(j))*g))}h.push(Math.floor(d+f*Math.cos(c)));h.push(Math.floor((e+
f*Math.sin(c))*g));h.push(d);h.push(Math.floor(e*g));return this.addPoly(a,h)},render:function(a){var b=dhx.html.create("DIV");b.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";a.appendChild(b);var c=dhx.env.isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";b.innerHTML="<map id='"+this.r+"' name='"+this.r+"'>"+this.ma.join("\n")+"</map><img "+c+" class='dhx_map_img' usemap='#"+this.r+"'>";a.u=b;this.ma=
[]}};dhx.math={};dhx.math.$e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];dhx.math.toHex=function(a,b){a=parseInt(a,10);for(str="";a>0;){str=this.$e[a%16]+str;a=Math.floor(a/16)}for(;str.length<b;)str="0"+str;return str};dhx.math.toFixed=function(a){if(a<10)return"0"+a;return a};dhx.chart={};
dhx.chart.area={pvt_render_area:function(a,b,c,d,e,f){var g=this.Ta(a,b,c,d,e),h=Math.floor(g.cellWidth/2);if(b.length){a.globalAlpha=this.g.alpha.call(this,b[0]);a.fillStyle=this.g.color.call(this,b[0]);var j=this.ka(b[0],c,d,g),k=this.g.offset?c.x+g.cellWidth*0.5:c.x;a.beginPath();a.moveTo(k,d.y);a.lineTo(k,j);f.addRect(b[0].id,[k-h,j-h,k+h,j+h]);this.g.yAxis||this.renderTextAt(false,!this.g.offset?false:true,k,j-this.g.labelOffset,this.g.label(b[0]));for(var i=1;i<b.length;i++){var m=k+Math.floor(g.cellWidth*
i)-0.5,l=this.ka(b[i],c,d,g);a.lineTo(m,l);f.addRect(b[i].id,[m-h,l-h,m+h,l+h]);this.g.yAxis||this.renderTextAt(false,!this.g.offset&&i==b.length-1?"left":"center",m,l-this.g.labelOffset,this.g.label(b[i]))}a.lineTo(k+Math.floor(g.cellWidth*[b.length-1]),d.y);a.lineTo(k,d.y);a.fill()}}};
dhx.chart.stackedArea={pvt_render_stackedArea:function(a,b,c,d,e,f){var g=this.Ta(a,b,c,d,e),h=Math.floor(g.cellWidth/2),j=[];if(b.length){a.globalAlpha=this.g.alpha.call(this,b[0]);a.fillStyle=this.g.color.call(this,b[0]);var k=e?b[0].$startY:d.y,i=this.g.offset?c.x+g.cellWidth*0.5:c.x,m=this.ka(b[0],c,d,g)-(e?d.y-k:0);j[0]=m;a.beginPath();a.moveTo(i,k);a.lineTo(i,m);f.addRect(b[0].id,[i-h,m-h,i+h,m+h]);this.g.yAxis||this.renderTextAt(false,true,i,m-this.g.labelOffset,this.g.label(b[0]));for(var l=
1;l<b.length;l++){var n=i+Math.floor(g.cellWidth*l)-0.5,o=this.ka(b[l],c,d,g)-(e?d.y-b[l].$startY:0);j[l]=o;a.lineTo(n,o);f.addRect(b[l].id,[n-h,o-h,n+h,o+h]);this.g.yAxis||this.renderTextAt(false,true,n,o-this.g.labelOffset,this.g.label(b[l]))}a.lineTo(i+Math.floor(g.cellWidth*[b.length-1]),k);if(e)for(l=b.length-1;l>=0;l--){n=i+Math.floor(g.cellWidth*l)-0.5;var s=b[l].$startY;a.lineTo(n,s)}else a.lineTo(i+Math.floor(g.cellWidth*(length-1))-0.5,k);a.lineTo(i,k);a.fill();for(l=0;l<b.length;l++)b[l].$startY=
j[l]}}};
dhx.chart.spline={pvt_render_spline:function(a,b,c,d,e){var f=this.Ta(a,b,c,d,e);Math.floor(f.cellWidth/2);var g=[];if(b.length){var h=this.g.offset?c.x+f.cellWidth*0.5:c.x;for(e=0;e<b.length;e++){var j=!e?h:Math.floor(f.cellWidth*e)-0.5+h,k=this.ka(b[e],c,d,f);g.push({x:j,y:k})}var i=this.ae(g);for(e=0;e<g.length-1;e++){var m=g[e].x;c=g[e].y;var l=g[e+1].x,n=g[e+1].y;for(d=m;d<l;d++)this.G(a,d,this.Jb(d,m,e,i.a,i.b,i.c,i.d),d+1,this.Jb(d+1,m,e,i.a,i.b,i.c,i.d),this.g.line.color(b[e]),this.g.line.width);this.G(a,
l-1,this.Jb(d,m,e,i.a,i.b,i.c,i.d),l,n,this.g.line.color(b[e]),this.g.line.width);this.Db(a,m,c,b[e],this.g.label(b[e]))}this.Db(a,l,n,b[e],this.g.label(b[e]))}},ae:function(a){var b,c,d,e,f,g,h,j,k;b=[];m=[];k=a.length;for(var i=0;i<k-1;i++){b[i]=a[i+1].x-a[i].x;m[i]=(a[i+1].y-a[i].y)/b[i]}c=[];d=[];c[0]=0;c[1]=2*(b[0]+b[1]);d[0]=0;d[1]=6*(m[1]-m[0]);for(i=2;i<k-1;i++){c[i]=2*(b[i-1]+b[i])-b[i-1]*b[i-1]/c[i-1];d[i]=6*(m[i]-m[i-1])-b[i-1]*d[i-1]/c[i-1]}e=[];e[k-1]=e[0]=0;for(i=k-2;i>=1;i--)e[i]=(d[i]-
b[i]*e[i+1])/c[i];f=[];g=[];h=[];j=[];for(i=0;i<k-1;i++){f[i]=a[i].y;g[i]=-b[i]*e[i+1]/6-b[i]*e[i]/3+(a[i+1].y-a[i].y)/b[i];h[i]=e[i]/2;j[i]=(e[i+1]-e[i])/(6*b[i])}return{a:f,b:g,c:h,d:j}},Jb:function(a,b,c,d,e,f,g){return d[c]+(a-b)*(e[c]+(a-b)*(f[c]+(a-b)*g[c]))}};
dhx.chart.barH={pvt_render_barH:function(a,b,c,d,e,f){var g,h,j,k,i=d.x-c.x,m=!!this.g.yAxis,l=this.Ib("h");g=l.max;h=l.min;var n=Math.floor((d.y-c.y)/b.length);e||this.kc(a,b,c,d,h,g,n);if(m){g=parseFloat(this.g.xAxis.end);h=parseFloat(this.g.xAxis.start)}var o=this.Fa(h,g);k=o[0];j=o[1];var s=k?i/k:10;if(!m){var u=10;s=k?(i-u)/k:10}var q=parseInt(this.g.barWidth,10);if(q*this.v.length+4>n)q=n/this.v.length-4;var w=Math.floor((n-q*this.v.length)/2),p=typeof this.g.radius!="undefined"?parseInt(this.g.radius,
10):Math.round(q/5),t=false,r=this.g.gradient;if(r&&typeof r!="function"){t=r;r=false}else if(r){r=a.createLinearGradient(c.x,c.y,d.x,c.y);this.g.gradient(r)}m||this.G(a,c.x-0.5,c.y,c.x-0.5,d.y,"#000000",1);for(d=0;d<b.length;d++){var v=parseFloat(this.g.value(b[d]));if(v>g)v=g;v-=h;v*=j;var x=c.x,y=c.y+w+d*n+(q+1)*e;if(v<0||this.g.yAxis&&v===0)this.renderTextAt(true,true,x+Math.floor(q/2),y,this.g.label(b[d]));else{m||(v+=u/s);var B=r||this.g.color.call(this,b[d]);if(this.g.border){a.beginPath();
a.fillStyle=B;this.ja(a,x,y,q,p,s,v,0);a.lineTo(x,0);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;a.beginPath();this.ja(a,x,y,q,p,s,v,0);a.fill()}a.globalAlpha=this.g.alpha.call(this,b[d]);a.fillStyle=r||this.g.color.call(this,b[d]);a.beginPath();var z=this.ja(a,x,y,q,p,s,v,this.g.border?1:0);if(r&&!t)a.lineTo(c.x+i,y+(this.g.border?1:0));a.fill();a.globalAlpha=1;if(t!=false){var A=this.lb(a,c.x,y+q,c.x+s*v+2,y,t,B,"x");a.fillStyle=A.gradient;a.beginPath();z=this.ja(a,x,y+A.offset,q-A.offset*
2,p,s,v,A.offset);a.fill();a.globalAlpha=1}this.renderTextAt("middle",false,z[0]+3,parseInt(y+(z[1]-y)/2,10),this.g.label(b[d]));f.addRect(b[d].id,[x,y,z[0],z[1]],e)}}},ja:function(a,b,c,d,e,f,g,h){var j=0;if(e>f*g){var k=(e-f*g)/e;j=-Math.asin(k)+Math.PI/2}a.moveTo(b,c+h);var i=b+f*g-e-(e?0:h);e<f*g&&a.lineTo(i,c+h);f=c+e;e&&a.arc(i,f,e-h,-Math.PI/2+j,0,false);var m=c+d-e-(e?0:h),l=i+e-(e?h:0);a.lineTo(l,m);var n=i;e&&a.arc(n,m,e-h,0,Math.PI/2-j,false);var o=c+d-h;a.lineTo(b,o);a.lineTo(b,c+h);return[l,
o]},kc:function(a,b,c,d,e,f,g){this.Jd(a,b,c,d,e,f);this.Kd(a,b,c,d,g)},Kd:function(a,b,c,d,e){if(this.g.yAxis){var f=c.x-0.5,g=d.y+0.5,h=c.y;this.G(a,f,g,f,h,this.g.yAxis.color,1);for(a=0;a<b.length;a++)this.renderTextAt("middle",0,0,h+e/2+a*e,this.g.yAxis.template(b[a]),"dhx_axis_item_y",c.x-5);this.Zc(c,d)}},Jd:function(a,b,c,d,e,f){var g,h={},j=this.g.xAxis;if(j){b=d.y+0.5;var k=c.x-0.5,i=d.x-0.5;this.G(a,k,b,i,b,j.color,1);if(j.step)g=parseFloat(j.step);if(typeof j.step=="undefined"||typeof j.start==
"undefined"||typeof j.end=="undefined"){h=this.bc(e,f);e=h.start;f=h.end;g=h.step;this.g.xAxis.end=f;this.g.xAxis.start=e;this.g.xAxis.step=g}if(g!==0){for(var m=(i-k)*g/(f-e),l=0,n=e;n<=f;n+=g){if(h.fixNum)n=parseFloat((new Number(n)).toFixed(h.fixNum));var o=Math.floor(k+l*m)+0.5;n!=e&&j.lines&&this.G(a,o,b,o,c.y,this.g.xAxis.color,0.2);this.renderTextAt(false,true,o,b+2,j.template(n.toString()),"dhx_axis_item_x");l++}this.renderTextAt(true,false,k,d.y+this.g.padding.bottom-3,this.g.xAxis.title,
"dhx_axis_title_x",d.x-c.x);j.lines&&this.G(a,k,c.y-0.5,i,c.y-0.5,this.g.xAxis.color,0.2)}}}};
dhx.chart.stackedBarH={pvt_render_stackedBarH:function(a,b,c,d,e,f){var g,h,j,k,i=d.x-c.x,m=!!this.g.yAxis;h=this.Kb(b);g=h.max;h=h.min;var l=Math.floor((d.y-c.y)/b.length);e||this.kc(a,b,c,d,h,g,l);if(m){g=parseFloat(this.g.xAxis.end);h=parseFloat(this.g.xAxis.start)}j=this.Fa(h,g);k=j[0];j=j[1];var n=k?i/k:10;if(!m){var o=10;n=k?(i-o)/k:10}k=parseInt(this.g.barWidth,10);if(k+4>l)k=l-4;var s=Math.floor((l-k)/2),u=0,q=false,w=this.g.gradient;q=false;if(w=this.g.gradient)q=true;m||this.G(a,c.x-0.5,
c.y,c.x-0.5,d.y,"#000000",1);for(d=0;d<b.length;d++){if(!e)b[d].$startX=c.x;var p=parseFloat(this.g.value(b[d]));if(p>g)p=g;p-=h;p*=j;var t=c.x,r=c.y+s+d*l;if(e)t=b[d].$startX;if(p<0||this.g.yAxis&&p===0)this.renderTextAt(true,true,t+Math.floor(k/2),r,this.g.label(b[d]));else{m||(p+=o/n);var v=this.g.color.call(this,b[d]);if(this.g.border){a.beginPath();a.fillStyle=v;this.ja(a,t,r,k,u,n,p,0);a.lineTo(t,0);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;a.beginPath();this.ja(a,t,r,k,u,n,p,0);a.fill()}a.globalAlpha=
1;a.globalAlpha=this.g.alpha.call(this,b[d]);a.fillStyle=this.g.color.call(this,b[d]);a.beginPath();var x=this.ja(a,t,r,k,u,n,p,this.g.border?1:0);if(w&&!q)a.lineTo(c.x+i,r+(this.g.border?1:0));a.fill();if(q!=false){v=this.lb(a,t,r+k,t,r,q,v,"x");a.fillStyle=v.gradient;a.beginPath();x=this.ja(a,t,r,k,u,n,p,0);a.fill();a.globalAlpha=1}this.renderTextAt("middle",true,b[d].$startX+(x[0]-b[d].$startX)/2-1,r+(x[1]-r)/2,this.g.label(b[d]));f.addRect(b[d].id,[b[d].$startX,r,x[0],x[1]],e);b[d].$startX=x[0]}}}};
dhx.chart.stackedBar={pvt_render_stackedBar:function(a,b,c,d,e,f){var g,h,j,k=d.y-c.y;j=!!this.g.yAxis;var i=!!this.g.xAxis;h=this.Kb(b);g=h.max;h=h.min;var m=Math.floor((d.x-c.x)/b.length);e||this.Eb(a,b,c,d,h,g,m);if(j){g=parseFloat(this.g.yAxis.end);h=parseFloat(this.g.yAxis.start)}g=this.Fa(h,g);j=g[0];g=g[1];j=j?k/j:10;var l=parseInt(this.g.barWidth,10);if(l+4>m)l=m-4;var n=Math.floor((m-l)/2),o=this.g.gradient?this.g.gradient:false;i||this.G(a,c.x,d.y+0.5,d.x,d.y+0.5,"#000000",1);for(i=0;i<
b.length;i++){var s=parseFloat(this.g.value(b[i]));if(s){e||(s-=h);s*=g;var u=c.x+n+i*m,q=d.y;if(e)q=b[i].$startY;if(!(q<c.y+1))if(s<0||this.g.yAxis&&s===0)this.renderTextAt(true,true,u+Math.floor(l/2),q,this.g.label(b[i]));else{var w=this.g.color.call(this,b[i]);if(this.g.border){a.beginPath();a.fillStyle=w;this.nb(a,u-1,q,l+2,j,s,0,c.y);a.lineTo(u,q);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;a.beginPath();this.nb(a,u-1,q,l+2,j,s,0,c.y);a.fill()}a.globalAlpha=this.g.alpha.call(this,b[i]);
a.fillStyle=this.g.color.call(this,b[i]);a.beginPath();var p=this.nb(a,u,q,l,j,s,this.g.border?1:0,c.y);a.fill();a.globalAlpha=1;if(o){w=this.lb(a,u,q,u+l,p[1],o,w,"y");a.fillStyle=w.gradient;a.beginPath();p=this.nb(a,u+w.offset,q,l-w.offset*2,j,s,this.g.border?1:0,c.y);a.fill();a.globalAlpha=1}this.renderTextAt(false,true,u+Math.floor(l/2),p[1]+(q-p[1])/2-7,this.g.label(b[i]));f.addRect(b[i].id,[u,p[1],p[0],b[i].$startY||q],e);b[i].$startY=this.g.border?p[1]+1:p[1]}}}},nb:function(a,b,c,d,e,f,g,
h){a.moveTo(b,c);f=c-e*f+g;if(f<h)f=h;a.lineTo(b,f);e=b+d;f=f;a.lineTo(e,f);var j=b+d;a.lineTo(j,c);a.lineTo(b,c);return[j,f-2*g]}};
dhx.chart.line={pvt_render_line:function(a,b,c,d,e,f){e=this.Ta(a,b,c,d,e);var g=Math.floor(e.cellWidth/2);if(b.length)for(var h=this.ka(b[0],c,d,e),j=this.g.offset?c.x+e.cellWidth*0.5:c.x,k=j,i=1;i<=b.length;i++){var m=Math.floor(e.cellWidth*i)-0.5+k;if(b.length!=i){var l=this.ka(b[i],c,d,e);this.G(a,j,h,m,l,this.g.line.color(b[i-1]),this.g.line.width)}this.Db(a,j,h,b[i-1],!!this.g.offset);f.addRect(b[i-1].id,[j-g,h-g,j+g,h+g]);h=l;j=m}},Db:function(a,b,c,d,e){var f=parseInt(this.g.item.radius,10);
a.lineWidth=parseInt(this.g.item.borderWidth,10);a.fillStyle=this.g.item.color(d);a.strokeStyle=this.g.item.borderColor(d);a.beginPath();a.arc(b,c,f,0,Math.PI*2,true);a.fill();a.stroke();e&&this.renderTextAt(false,true,b,c-f-this.g.labelOffset,this.g.label(d))},ka:function(a,b,c,d){var e=d.minValue,f=d.maxValue,g=d.unit,h=d.valueFactor;a=this.g.value(a);h=(parseFloat(a)-e)*h;this.g.yAxis||(h+=d.startValue/g);d=c.y-Math.floor(g*h);if(h<0)d=c.y;if(a>f)d=b.y;if(a<e)d=c.y;return d},Ta:function(a,b,c,
d,e){var f={};f.totalHeight=d.y-c.y;f.cellWidth=Math.round((d.x-c.x)/(!this.g.offset?b.length-1:b.length));var g=!!this.g.yAxis,h=this.g.type.indexOf("stacked")!=-1?this.Kb(b):this.Ib();f.maxValue=h.max;f.minValue=h.min;e||this.Eb(a,b,c,d,f.minValue,f.maxValue,f.cellWidth);if(g){f.maxValue=parseFloat(this.g.yAxis.end);f.minValue=parseFloat(this.g.yAxis.start)}b=this.Fa(f.minValue,f.maxValue);a=b[0];f.valueFactor=b[1];f.unit=a?f.totalHeight/a:10;f.startValue=0;if(!g){f.startValue=f.unit>10?f.unit:
10;f.unit=a?(f.totalHeight-f.startValue)/a:10}return f}};
dhx.chart.bar={pvt_render_bar:function(a,b,c,d,e,f){var g,h,j,k,i=d.y-c.y,m=!!this.g.yAxis,l=!!this.g.xAxis;h=this.Ib();g=h.max;h=h.min;var n=Math.floor((d.x-c.x)/b.length);!e&&!(this.g.origin!="auto"&&!m)&&this.Eb(a,b,c,d,h,g,n);if(m){g=parseFloat(this.g.yAxis.end);h=parseFloat(this.g.yAxis.start)}j=this.Fa(h,g);k=j[0];j=j[1];var o=k?i/k:k;if(!m&&!(this.g.origin!="auto"&&l)){var s=10;o=k?(i-s)/k:s}!e&&this.g.origin!="auto"&&!m&&this.g.origin>h&&this.oc(a,b,c,d,n,d.y-o*(this.g.origin-h));i=parseInt(this.g.barWidth,
10);if(this.v&&i*this.v.length+4>n)i=n/this.v.length-4;k=Math.floor((n-i*this.v.length)/2);var u=typeof this.g.radius!="undefined"?parseInt(this.g.radius,10):Math.round(i/5),q=false,w=this.g.gradient;if(w&&typeof w!="function"){q=w;w=false}else if(w){w=a.createLinearGradient(0,d.y,0,c.y);this.g.gradient(w)}l||this.G(a,c.x,d.y+0.5,d.x,d.y+0.5,"#000000",1);for(var p=0;p<b.length;p++){var t=parseFloat(this.g.value(b[p]));if(t>g)t=g;t-=h;t*=j;var r=c.x+k+p*n+(i+1)*e,v=d.y;if(t<0||this.g.yAxis&&t===0&&
!(this.g.origin!="auto"&&this.g.origin>h))this.renderTextAt(true,true,r+Math.floor(i/2),v,this.g.label(b[p]));else{if(!m&&!(this.g.origin!="auto"&&l))t+=s/o;var x=w||this.g.color.call(this,b[p]);this.g.border&&this.Hd(a,r,v,i,h,u,o,t,x);a.globalAlpha=this.g.alpha.call(this,b[p]);var y=this.Gd(a,c,r,v,i,h,u,o,t,x,w,q);a.globalAlpha=1;q&&this.Id(a,r,v,i,h,u,o,t,x,q);y[0]!=r?this.renderTextAt(false,true,r+Math.floor(i/2),y[1],this.g.label(b[p])):this.renderTextAt(true,true,r+Math.floor(i/2),y[3],this.g.label(b[p]));
f.addRect(b[p].id,[r,y[3],y[2],y[1]],e)}}},xb:function(a,b,c,d,e,f,g){var h=this.g.xAxis,j=c;if(h&&this.g.origin!="auto"&&this.g.origin>g){c-=(this.g.origin-g)*e;j=c;d-=this.g.origin-g;if(d<0){d*=-1;a.translate(b+f,c);a.rotate(Math.PI);c=b=0}c-=0.5}return{value:d,x0:b,y0:c,start:j}},Gd:function(a,b,c,d,e,f,g,h,j,k,i,m){a.save();a.fillStyle=k;var l=this.xb(a,c,d,j,h,e,f);e=this.mb(a,l.x0,l.y0,e,g,h,l.value,this.g.border?1:0);if(i&&!m)a.lineTo(l.x0+(this.g.border?1:0),b.y);a.fill();a.restore();a=l.x0;
b=l.x0!=c?c+e[0]:e[0];d=l.x0!=c?l.start-e[1]:d;c=l.x0!=c?l.start:e[1];return[a,d,b,c]},Hd:function(a,b,c,d,e,f,g,h,j){a.save();b=this.xb(a,b,c,h,g,d,e);a.fillStyle=j;this.mb(a,b.x0,b.y0,d,f,g,b.value,0);a.lineTo(b.x0,0);a.fill();a.fillStyle="#000000";a.globalAlpha=0.37;this.mb(a,b.x0,b.y0,d,f,g,b.value,0);a.fill();a.restore()},Id:function(a,b,c,d,e,f,g,h,j,k){a.save();b=this.xb(a,b,c,h,g,d,e);j=this.lb(a,b.x0,b.y0,b.x0+d,b.y0-g*b.value+2,k,j,"y");a.fillStyle=j.gradient;this.mb(a,b.x0+j.offset,b.y0,
d-j.offset*2,f,g,b.value,j.offset);a.fill();a.restore()},mb:function(a,b,c,d,e,f,g,h){a.beginPath();var j=0;if(e>f*g){var k=(e-f*g)/e;if(k<=1&&k>=-1)j=-Math.acos(k)+Math.PI/2}a.moveTo(b+h,c);var i=c-Math.floor(f*g)+e+(e?0:h);e<f*g&&a.lineTo(b+h,i);f=b+e;e&&e>0&&a.arc(f,i,e-h,-Math.PI+j,-Math.PI/2,false);g=b+d-e-(e?0:h);f=i-e+(e?h:0);a.lineTo(g,f);i=i;e&&e>0&&a.arc(g,i,e-h,-Math.PI/2,0-j,false);d=b+d-h;a.lineTo(d,c);a.lineTo(b+h,c);return[d,f]}};
dhx.chart.pie={pvt_render_pie:function(a,b,c,d,e,f){this.Wc(a,b,c,d,1,f)},Wc:function(a,b,c,d,e,f){var g=0,h=this.$d(c,d);c=this.g.radius?this.g.radius:h.radius;this.max(this.g.value);for(var j=[],k=[],i=0,m=0;m<b.length;m++)g+=parseFloat(this.g.value(b[m]));for(m=0;m<b.length;m++){k[m]=parseFloat(this.g.value(b[m]));j[m]=Math.PI*2*(g?(k[m]+i)/g:1/b.length);i+=k[m]}d=this.g.x?this.g.x:h.x;var l=this.g.y?this.g.y:h.y;e==1&&this.g.shadow&&this.sd(a,d,l,c);l/=e;var n=-Math.PI/2;a.scale(1,e);for(m=0;m<
b.length;m++)if(k[m]){a.lineWidth=2;a.beginPath();a.moveTo(d,l);alpha1=-Math.PI/2+j[m]-1.0E-4;a.arc(d,l,c,n,alpha1,false);a.lineTo(d,l);var o=this.g.color.call(this,b[m]);a.fillStyle=o;a.strokeStyle=this.g.lineColor(b[m]);a.stroke();a.fill();this.g.pieInnerText&&this.mc(d,l,5*c/6,n,alpha1,e,this.g.pieInnerText(b[m],g),true);this.g.label&&this.mc(d,l,c+this.g.labelOffset,n,alpha1,e,this.g.label(b[m]));if(e!=1){this.fc(a,d,l,n,alpha1,c,true);a.fillStyle="#000000";a.globalAlpha=0.2;this.fc(a,d,l,n,alpha1,
c,false);a.globalAlpha=1;a.fillStyle=o}f.addSector(b[m].id,n,alpha1,d,l,c,e);n=alpha1}if(this.g.gradient){b=e!=1?d+c/3:d;f=e!=1?l+c/3:l;this.Re(a,d,l,c,b,f)}a.scale(1,1/e)},$d:function(a,b){var c=b.x-a.x,d=b.y-a.y;b=a.x+c/2;a=a.y+d/2;c=Math.min(c/2,d/2);return{x:b,y:a,radius:c}},fc:function(a,b,c,d,e,f,g){a.lineWidth=1;if(d<=0&&e>=0||d>=0&&e<=Math.PI||d<=Math.PI&&e>=Math.PI){if(d<=0&&e>=0){d=0;g=false;this.nc(a,b,c,f,d,e)}if(d<=Math.PI&&e>=Math.PI){e=Math.PI;g=false;this.nc(a,b,c,f,d,e)}var h=(this.g.height||
Math.floor(f/4))/this.g.cant;a.beginPath();a.arc(b,c,f,d,e,false);a.lineTo(b+f*Math.cos(e),c+f*Math.sin(e)+h);a.arc(b,c+h,f,e,d,true);a.lineTo(b+f*Math.cos(d),c+f*Math.sin(d));a.fill();g&&a.stroke()}},nc:function(a,b,c,d,e,f){a.beginPath();a.arc(b,c,d,e,f,false);a.stroke()},sd:function(a,b,c,d){for(var e=["#676767","#7b7b7b","#a0a0a0","#bcbcbc","#d1d1d1","#d6d6d6"],f=e.length-1;f>-1;f--){a.beginPath();a.fillStyle=e[f];a.arc(b+2,c+2,d+f,0,Math.PI*2,true);a.fill()}},Zd:function(a){a.addColorStop(0,
"#ffffff");a.addColorStop(0.7,"#7a7a7a");a.addColorStop(1,"#000000");return a},Re:function(a,b,c,d,e,f){a.globalAlpha=0.3;a.beginPath();var g;if(typeof this.g.gradient!="function"){g=a.createRadialGradient(e,f,d/4,b,c,d);g=this.Zd(g)}else g=this.g.gradient(g);a.fillStyle=g;a.arc(b,c,d,0,Math.PI*2,true);a.fill();a.globalAlpha=1},mc:function(a,b,c,d,e,f,g,h){if(g=this.renderText(0,0,g,0,1)){var j=g.scrollWidth;g.style.width=j+"px";if(j>a)j=a;var k=8;if(h)k=j/1.8;var i=d+(e-d)/2;c-=(k-8)/2;var m=-k,
l=-8,n="left";if(i>=Math.PI/2&&i<Math.PI){m=-j-m+1;n="right"}if(i<=3*Math.PI/2&&i>=Math.PI){m=-j-m+1;n="right"}d=(b+Math.floor(c*Math.sin(i)))*f+l;k=a+Math.floor((c+k/2)*Math.cos(i))+m;var o=e<Math.PI/2+0.01,s=i<Math.PI/2;if(s&&o)k=Math.max(k,a+3);else if(!s&&!o)k=Math.min(k,a-j);if(!h&&f<1&&d>b*f)d+=this.g.height||Math.floor(c/4);g.style.top=d+"px";g.style.left=k+"px";g.style.width=j+"px";g.style.textAlign=n;g.style.whiteSpace="nowrap"}}};
dhx.chart.pie3D={pvt_render_pie3D:function(a,b,c,d,e,f){this.Wc(a,b,c,d,this.g.cant,f)}};
dhx.Group={m:function(){this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.g.group&&this.group(this.g.group,false)},this));this.attachEvent("onBeforeRender",dhx.bind(function(a){if(this.g.sort){a.blockEvent();a.sort(this.g.sort);a.unblockEvent()}},this));this.attachEvent("onBeforeSort",dhx.bind(function(){this.g.sort=null},this))},be:function(a,b){a.attachEvent("onClearAll",dhx.bind(function(){this.ungroup(false)},b))},sum:function(a,b){a=dhx.Template(a);b=b||this.data;var c=0;b.each(function(d){c+=
a(d)*1});return c},min:function(a,b){a=dhx.Template(a);b=b||this.data;var c=Infinity;b.each(function(d){if(a(d)*1<c)c=a(d)*1});return c*1},max:function(a,b){a=dhx.Template(a);b=b||this.data;var c=-Infinity;b.each(function(d){if(a(d)*1>c)c=a(d)*1});return c},Te:function(a){var b=function(j,k){j=dhx.Template(j);return j(k[0])},c=dhx.Template(a.by);a.map[c]||(a.map[c]=[c,b]);var d={},e=[];this.data.each(function(j){var k=c(j);if(!d[k]){e.push({id:k});d[k]=dhx.toArray()}d[k].push(j)});for(var f in a.map){var g=
a.map[f][1]||b;if(typeof g!="function")g=this[g];for(var h=0;h<e.length;h++)e[h][f]=g.call(this,a.map[f][0],d[e[h].id])}this.Lc=this.data;this.data=new dhx.DataStore;this.data.provideApi(this,true);this.be(this.data,this);this.parse(e,"json")},group:function(a,b){this.ungroup(false);this.Te(a);b!==false&&this.render()},ungroup:function(a){if(this.Lc){this.data=this.Lc;this.data.provideApi(this,true)}a!==false&&this.render()},group_setter:function(a){return a},sort_setter:function(a){if(typeof a!=
"object")a={by:a};this.J(a,{as:"string",dir:"asc"});return a}};
dhx.Canvas={m:function(){this.Ua=[]},ye:function(a){this.O=dhx.html.create("canvas",{width:a.offsetWidth,height:a.offsetHeight});a.appendChild(this.O);if(!this.O.getContext)if(dhx.env.isIE){dhx.require("thirdparty/excanvas/excanvas.js");G_vmlCanvasManager.init_(document);G_vmlCanvasManager.initElement(this.O)}return this.O},getCanvas:function(a){return(this.O||this.ye(this.h)).getContext(a||"2d")},Yc:function(){if(this.O){this.O.setAttribute("width",this.O.parentNode.offsetWidth);this.O.setAttribute("height",
this.O.parentNode.offsetHeight)}},renderText:function(a,b,c,d,e){if(c){if(e)e=Math.max(e,0);if(b)b=Math.max(b,0);a=dhx.html.create("DIV",{"class":"dhx_canvas_text"+(d?" "+d:""),style:"left:"+a+"px; top:"+b+"px;"},c);this.h.appendChild(a);this.Ua.push(a);if(e)a.style.width=e+"px";return a}},renderTextAt:function(a,b,c,d,e,f,g){if(e=this.renderText.call(this,c,d,e,f,g)){if(a)e.style.top=a=="middle"?parseInt(d-e.offsetHeight/2,10)+"px":d-e.offsetHeight+"px";if(b)e.style.left=b=="left"?c-e.offsetWidth+
"px":parseInt(c-e.offsetWidth/2,10)+"px"}return e},clearCanvas:function(){for(var a=0;a<this.Ua.length;a++)this.h.removeChild(this.Ua[a]);this.Ua=[];if(this.h.u){this.h.u.parentNode.removeChild(this.h.u);this.h.u=null}this.getCanvas().clearRect(0,0,this.O.offsetWidth,this.O.offsetHeight)}};
dhtmlXChart=dhx.ui.map.chart=dhx.ui.chart=dhx.proto({m:function(){this.name="Chart";this.version="3.0";for(var a in dhx.chart)dhx.extend(this,dhx.chart[a]);this.v=[this.g];this.ab=[];this.h.className+=" dhx_chart";this.I.push(this.U);this.attachEvent("onLocateData",this.Ye);this.data.provideApi(this,true)},U:function(){this.data.attachEvent("onStoreUpdated",dhx.bind(function(){this.render()},this))},defaults:{color:"RAINBOW",alpha:"1",label:false,value:"{obj.value}",padding:{},type:"pie",lineColor:"#ffffff",
cant:0.5,barWidth:15,line:{},item:{},shadow:true,gradient:false,border:true,labelOffset:20,origin:"auto"},r:"dhx_area_id",on_click:{},on_dblclick:{},on_mouse_move:{},resize:function(){dhx.ui.view.prototype.resize.call(this);this.Yc();this.render()},j:function(a,b){if(dhx.ui.map.view.prototype.j.call(this,a,b)){this.Yc();this.render()}},type_setter:function(a){if(typeof this.g.offset=="undefined")this.g.offset=a=="area"||a=="stackedArea"?false:true;return a},render:function(){if(this.callEvent("onBeforeRender",
[this.data])){if(this.Ia)for(var a=0;a<this.ab.length;a++)this.Ia.removeChild(this.ab[a]);this.ab=[];this.clearCanvas();this.g.legend&&this.Ld(this.getCanvas(),this.data.getRange(),this.A,this.B);var b=this.Ud(this.A,this.B),c=new dhx.ui.Map(this.r),d=this.g;for(a=0;a<this.v.length;a++){this.g=this.v[a];this["pvt_render_"+this.g.type](this.getCanvas(),this.data.getRange(),b.start,b.end,a,c)}c.render(this.h);this.g=d}},series_setter:function(a){if(typeof a=="object"){this.La(!a.length?a:a[0],{});for(var b=
1;b<a.length;b++)this.addSeries(a[b])}return a},value_setter:dhx.Template,alpha_setter:dhx.Template,label_setter:dhx.Template,lineColor_setter:dhx.Template,pieInnerText_setter:dhx.Template,gradient_setter:function(a){if(typeof a!="function"&&a&&(a===true||a!="3d"))a="light";return a},colormap:{RAINBOW:function(a){a=Math.floor(this.indexById(a.id)/this.dataCount()*1536);if(a==1536)a-=1;return this.Be[Math.floor(a/256)](a%256)}},color_setter:function(a){return this.colormap[a]||dhx.Template(a)},legend_setter:function(a){if(typeof a!=
"object")a={template:a};this.J(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",marker:{type:"square",width:25,height:15}});a.template=dhx.Template(a.template);return a},item_setter:function(a){if(typeof a!="object")a={color:a,borderColor:a};this.J(a,{radius:4,color:"#000000",borderColor:"#000000",borderWidth:2});a.color=dhx.Template(a.color);a.borderColor=dhx.Template(a.borderColor);return a},line_setter:function(a){if(typeof a!="object")a={color:a};this.J(a,{width:3,color:"#d4d4d4"});
a.color=dhx.Template(a.color);return a},padding_setter:function(a){if(typeof a!="object")a={left:a,right:a,top:a,bottom:a};this.J(a,{left:50,right:20,top:35,bottom:40});return a},xAxis_setter:function(a){if(!a)return false;if(typeof a!="object")a={template:a};this.J(a,{title:"",color:"#000000",template:"{obj}",lines:false});if(a.template)a.template=dhx.Template(a.template);return a},yAxis_setter:function(a){this.J(a,{title:"",color:"#000000",template:"{obj}",lines:true});if(a.template)a.template=
dhx.Template(a.template);return a},Eb:function(a,b,c,d,e,f,g){e=this.Pd(a,b,c,d,e,f);this.oc(a,b,c,d,g,e);return e},oc:function(a,b,c,d,e,f){if(this.g.xAxis){var g=c.x-0.5;f=parseInt(f?f:d.y,10)+0.5;var h=d.x,j,k=true;this.G(a,g,f,h,f,this.g.xAxis.color,1);for(var i=0;i<b.length;i++){if(this.g.offset===true)j=g+e/2+i*e;else{j=g+i*e;k=!!i}var m=this.g.origin!="auto"&&this.g.type=="bar"&&parseFloat(this.g.value(b[i]))<this.g.origin;this.Nd(j,f,b[i],k,m);this.g.type_setter!="bar"&&this.Od(a,j,d.y,c.y)}this.renderTextAt(true,
false,g,d.y+this.g.padding.bottom-3,this.g.xAxis.title,"dhx_axis_title_x",d.x-c.x);this.g.xAxis.lines&&this.g.offset&&this.G(a,h+0.5,d.y,h+0.5,c.y+0.5,this.g.xAxis.color,0.2)}},Pd:function(a,b,c,d,e,f){var g;b={};if(this.g.yAxis){var h=c.x-0.5,j=d.y,k=c.y,i=d.y;this.G(a,h,j,h,k,this.g.yAxis.color,1);if(this.g.yAxis.step)g=parseFloat(this.g.yAxis.step);if(typeof this.g.yAxis.step=="undefined"||typeof this.g.yAxis.start=="undefined"||typeof this.g.yAxis.end=="undefined"){b=this.bc(e,f);e=b.start;f=
b.end;g=b.step;this.g.yAxis.end=f;this.g.yAxis.start=e}if(g!==0){k=(j-k)*g/(f-e);for(var m=0,l=e;l<=f;l+=g){if(b.fixNum)l=parseFloat((new Number(l)).toFixed(b.fixNum));var n=Math.floor(j-m*k)+0.5;!(l==e&&this.g.origin=="auto")&&this.g.yAxis.lines&&this.G(a,h,n,d.x,n,this.g.yAxis.color,0.2);if(l==this.g.origin)i=n;this.renderText(0,n-5,this.g.yAxis.template(l.toString()),"dhx_axis_item_y",c.x-5);m++}this.Zc(c,d);return i}}},Zc:function(a,b){if(a=this.renderTextAt("middle",false,0,parseInt((b.y-a.y)/
2+a.y,10),this.g.yAxis.title,"dhx_axis_title_y"))a.style.left=(dhx.env.transform?(a.offsetHeight-a.offsetWidth)/2:0)+"px"},bc:function(a,b){var c,d,e;c=(b-a)/8||1;var f=Math.floor(this.Ec(c)),g=Math.pow(10,f),h=c/g;h=h>5?10:5;c=parseInt(h,10)*g;if(c>Math.abs(a))d=a<0?-c:0;else{var j=Math.abs(a),k=Math.floor(this.Ec(j)),i=j/Math.pow(10,k);d=Math.ceil(i*10)/10*Math.pow(10,k)-c;if(a<0)d=-d-2*c}for(e=d;e<b;){e+=c;e=parseFloat((new Number(e)).toFixed(Math.abs(f)))}return{start:d,end:e,step:c,fixNum:Math.abs(f)}},
Ib:function(a){var b,c;if((c=arguments.length&&a=="h"?this.g.xAxis:this.g.yAxis)&&typeof c.end!="undefined"&&typeof c.start!="undefined"&&c.step){b=parseFloat(c.end);c=parseFloat(c.start)}else{b=this.max(this.v[0].value);c=this.min(this.v[0].value);if(this.v.length>1)for(var d=1;d<this.v.length;d++){var e=this.max(this.v[d].value),f=this.min(this.v[d].value);if(e>b)b=e;if(f<c)c=f}}return{max:b,min:c}},Ec:function(a){var b="log";return Math.floor(Math[b](a)/Math.LN10)},Nd:function(a,b,c,d,e){this.g.xAxis&&
this.renderTextAt(e,d,a,b,this.g.xAxis.template(c),"dhx_axis_item_x")},Od:function(a,b,c,d){this.g.xAxis&&this.g.xAxis.lines&&this.G(a,b,c,b,d,this.g.xAxis.color,0.2)},G:function(a,b,c,d,e,f,g){a.strokeStyle=f;a.lineWidth=g;a.beginPath();a.moveTo(b,c);a.lineTo(d,e);a.stroke()},Fa:function(a,b){var c=1;if(b!=a){a=b-a;if(Math.abs(a)<1)for(;Math.abs(a)<1;){c*=10;a*=c}}else a=a;return[a,c]},Be:[function(a){return"#FF"+dhx.math.toHex(a/2,2)+"00"},function(a){return"#FF"+dhx.math.toHex(a/2+128,2)+"00"},
function(a){return"#"+dhx.math.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+dhx.math.toHex(a,2)},function(a){return"#00"+dhx.math.toHex(255-a,2)+"FF"},function(a){return"#"+dhx.math.toHex(a,2)+"00FF"}],addSeries:function(a){var b=this.g;this.g=dhx.extend({},b);this.La(a,{});this.v.push(this.g);this.g=b},Ye:function(a,b){this.$b=b.getAttribute("userdata");if(this.v[this.$b]){for(a=0;a<this.v.length;a++){var c=this.v[a].tooltip;c&&c.disable()}(c=this.v[this.$b].tooltip)&&c.enable()}},Ld:function(a,
b){var c=0,d=0,e=this.g.legend,f,g,h=this.g.legend.layout!="x"?"width:"+e.width+"px":"";this.Ia&&this.Ia.parentNode.removeChild(this.Ia);var j=dhx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+c+"px; top:"+d+"px;"+h},"");this.Ia=j;this.h.appendChild(j);var k=[];if(e.values)for(i=0;i<e.values.length;i++)k.push(this.lc(j,e.values[i].text));else for(var i=0;i<b.length;i++)k.push(this.lc(j,e.template(b[i])));if(j.offsetWidth===0)j.style.width="auto";g=j.offsetWidth;f=j.offsetHeight;this.g.legend.width=
g;this.g.legend.height=f;if(g<this.h.offsetWidth){if(e.layout=="x"&&e.align=="center")c=(this.h.offsetWidth-g)/2;if(e.align=="right")c=this.h.offsetWidth-g}if(f<this.h.offsetHeight)if(e.valign=="middle"&&e.align!="center"&&e.layout!="x")d=(this.h.offsetHeight-f)/2;else if(e.valign=="bottom")d=this.h.offsetHeight-f;j.style.left=c+"px";j.style.top=d+"px";for(i=0;i<k.length;i++){var m=k[i],l=e.values?e.values[i].color:this.g.color.call(this,b[i]);this.Md(a,m.offsetLeft+c,m.offsetTop+d,l)}k=null},lc:function(a,
b){var c="";if(this.g.legend.layout=="x")c="float:left;";b=dhx.html.create("DIV",{style:c+"padding-left:"+(10+this.g.legend.marker.width)+"px","class":"dhx_chart_legend_item"},b);this.ab.push(b);a.appendChild(b);return b},Md:function(a,b,c,d){var e=this.g.legend;a.strokeStyle=a.fillStyle=d;a.lineWidth=e.marker.height;a.lineCap=e.marker.type;a.beginPath();b+=a.lineWidth/2+5;c+=a.lineWidth/2+3;a.moveTo(b,c);b=b+e.marker.width-e.marker.height+1;a.lineTo(b,c);a.stroke()},Ud:function(a,b){var c,d,e,f;
c=this.g.padding.left;d=this.g.padding.top;e=a-this.g.padding.right;f=b-this.g.padding.bottom;if(this.g.legend){a=this.g.legend;b=this.g.legend.width;var g=this.g.legend.height;if(a.layout=="x")if(a.valign=="center")if(a.align=="right")e-=b;else{if(a.align=="left")c+=b}else if(a.valign=="bottom")f-=g;else d+=g;else if(a.align=="right")e-=b;else if(a.align=="left")c+=b}return{start:{x:c,y:d},end:{x:e,y:f}}},Kb:function(a){var b,c;if(this.g.yAxis&&typeof this.g.yAxis.end!="undefied"&&typeof this.g.yAxis.start!=
"undefied"&&this.g.yAxis.step){b=parseFloat(this.g.yAxis.end);c=parseFloat(this.g.yAxis.start)}else{for(var d=0;d<a.length;d++){a[d].$sum=0;a[d].$min=Infinity;for(b=0;b<this.v.length;b++){c=parseFloat(this.v[b].value(a[d]));if(!isNaN(c)){a[d].$sum+=c;if(c<a[d].$min)a[d].$min=c}}}b=-Infinity;c=Infinity;for(d=0;d<a.length;d++){if(a[d].$sum>b)b=a[d].$sum;if(a[d].$min<c)c=a[d].$min}if(c>0)c=0}return{max:b,min:c}},lb:function(a,b,c,d,e,f,g,h){if(f=="light"){a=h=="x"?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,
c,b,e);a.addColorStop(0,"#FFFFFF");a.addColorStop(0.9,g);a.addColorStop(1,g);g=2}else{a.globalAlpha=0.37;g=0;a=h=="x"?a.createLinearGradient(b,e,b,c):a.createLinearGradient(b,c,d,c);a.addColorStop(0,"#000000");a.addColorStop(0.5,"#FFFFFF");a.addColorStop(0.6,"#FFFFFF");a.addColorStop(1,"#000000")}return{gradient:a,offset:g}}},dhx.Group,dhx.DataLoader,dhx.MouseEvents,dhx.ui.map.view,dhx.Destruction,dhx.Canvas,dhx.EventSystem,dhx.Settings);
dhx.jsonp=function(a,b,c,d){var e="dhx_jsonp_"+dhx.uid(),f=document.createElement("script");f.id=e;f.type="text/javascript";var g=document.getElementsByTagName("head")[0];b||(b={});b.jsonp="dhx.jsonp."+e;dhx.jsonp[e]=function(){c.apply(d||window,arguments);f.parentNode.removeChild(f);c=g=d=f=null;delete dhx.jsonp[e]};var h=[];for(key in b)h.push(key+"="+encodeURIComponent(b[key]));a+=(a.indexOf("?")==-1?"?":"&")+h.join("&");f.src=a;g.appendChild(f)};
dhx.ValidateData={validate:function(a){var b=true,c=this.g.rules;if(c){var d=c.$obj;if(!a&&this.getValues)a=this.getValues();if(d&&!d.call(this,a))return false;var e=c.$all;for(var f in c)if(f.indexOf("$")!==0)if(c[f].call(this,a[f],a,f)&&(!e||e.call(this,a[f],a,f)))this.callEvent("onValidationSuccess",[f,a])&&this.dc&&this.dc(f,a,this.q(f));else{b=false;this.callEvent("onValidationError",[f,a])&&this.Gc&&this.Gc(f,a,this.q(f))}}return b}};
dhx.rules={isNumber:function(a){return parseFloat(a)==a},isNotEmpty:function(a){return a=="0"||a}};
dhx.DataProcessor=dhx.proto({defaults:{autoupdate:true,mode:"post"},m:function(){this.ya=[];this.Lb=[];this.Ab=null;this.sa=false;this.name="DataProcessor";this.I.push(this.U)},master_setter:function(a){var b=a;if(a.name!="DataStore"){a.attachEvent("onSelectChange",dhx.bind(this.Le,this));b=a.data}this.g.store=b;return a},U:function(){this.g.store.attachEvent("onStoreUpdated",dhx.bind(this.Nc,this))},link:function(a,b,c){this.Lb.push({obj:a,rule:b,filter:c});if(a.getValues){var d=this;a.save=function(){return d.ud(this.getValues())}}if(b)if(typeof b==
"function"){a.attachEvent("onXLE",dhx.bind(function(){this.Gb(a,b,c)},this));a.dataCount()&&this.Gb(a,b,c)}},ud:function(a){var b=this.getCursor();if(b){var c=this.g.store.item(b),d=dhx.extend({},c);dhx.extend(d,a,true);if(!this.validate(d))return false;this.g.store.update(b,d)}return true},Le:function(){var a=this.g.master.getSelected();a!=this.getCursor()&&this.setCursor(a)},setCursor:function(a){this.callEvent("onCursorChange",[a,this.Ab]);this.Ab=a;this.ld()},ld:function(){for(var a=this.getCursor(),
b=0;b<this.Lb.length;b++){var c=this.Lb[b];if(c.obj.filter&&c.rule)this.Gb(c.obj,c.rule,c.filter);else if(a)c.obj.setValues&&c.obj.setValues(this.g.store.item(a));else c.obj.clear&&c.obj.clear()}},Gb:function(a,b,c){var d=this.getCursor();if(typeof b=="function")if(d)var e=this.g.store.item(d),f=function(k){return b(e,k)};else f=function(){return false};else{a.clearAll();if(d){var g={},h=[];e=this.g.store.item(d);c(e,g);for(var j in g)h.push("dhx_filter["+this.escape(j)+"]="+this.escape(g[j]));c=
b+(b.indexOf("?")!=-1?"&":"?")+h.join("&");a.load(c,a.g.datatype||"json")}}a.filter(f)},getCursor:function(){return this.Ab},ignore:function(a,b){var c=this.sa;this.sa=true;a.call(b||this);this.sa=c},off:function(){this.sa=true},on:function(){this.sa=false},Dd:function(a){var b={};for(var c in a)if(c.indexOf("$")!==0)b[c]=a[c];return b},save:function(a,b){b=b||"update";this.Nc(a,this.g.store.item(a),b)},Nc:function(a,b,c){if(this.sa===true||!c)return true;var d={id:a,data:this.Dd(b)};switch(c){case "update":d.operation=
"update";this.getCursor()==a&&this.ld();break;case "add":d.operation="insert";break;case "delete":d.operation="delete";break;default:return true}if(d.operation!="delete"&&!this.validate(d.data))return false;this.ya.push(d);this.g.autoupdate&&this.send();return true},send:function(){this.Ke()},Ke:function(){if(this.g.url){for(var a=this.ya,b=[],c=0;c<a.length;c++){var d=a[c].id,e=a[c].operation;if(this.g.store.exists(d))a[c].data=this.g.store.item(d);this.callEvent("onBefore"+e,[d,a[c].data])&&b.push(a[c])}b.length&&
this.callEvent("onBeforeDataSend",[b])&&this.Je(this.g.url,this.af(b),this.g.mode)}},af:function(a){for(var b={},c=[],d=0;d<a.length;d++){var e=a[d];c.push(e.id);b[e.id+"_!nativeeditor_status"]=e.operation;for(var f in e.data)if(f.indexOf("$")!==0)b[e.id+"_"+f]=e.data[f]}b.ids=c.join(",");return b},Je:function(a,b,c){if(typeof a=="function")return a(b);a+=a.indexOf("?")==-1?"?":"&";a+="editing=true";dhx.ajax()[c](a,b,dhx.bind(this.Ae,this))},Ae:function(a,b,c){this.callEvent("onBeforeSync",[f,a,b,
c]);var d=dhx.DataDriver.xml;b=d.toObject(a,d);for(var e=d.xpath(b,"//action"),f=[],g=0;g<e.length;g++){var h=d.tagToObject(e[g]);f.push(h);for(var j=-1,k=0;k<this.ya.length;){if(this.ya[k].id==h.sid)j=k;break}if(h.type=="error"||h.type=="invalid")if(!this.callEvent("onDBError",[h,this.ya[j]]))continue;j>=0&&this.ya.splice(j,1);h.tid!=h.sid&&this.g.store.changeId(h.sid,h.tid);this.callEvent("onAfter"+h.type,[h])}this.callEvent("onAfterSync",[f,a,b,c])},escape:function(a){return this.g.escape?this.g.escape(a):
encodeURIComponent(a)}},dhx.Settings,dhx.EventSystem,dhx.ValidateData);dhx.animate=function(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++){if(b.type=="slide"){if(b.subtype=="out"&&c===0)continue;if(b.subtype=="in"&&c==1)continue}if(b.type=="flip"){var d=dhx.copy(b);if(c===0)d.type="flipback";if(c==1)d.callback=null;dhx.animate(a[c],d)}else dhx.animate(a[c],b)}else{c=dhx.toNode(a);c.Za?dhx.animate.end(c,b):dhx.animate.start(c,b)}};
dhx.animate.end=function(a,b){a.style[dhx.env.transform_prefix.replace(/-/g,"")+"TransitionDuration"]="1ms";a.Za=null;dhx.nd&&window.clearTimeout(dhx.nd);dhx.nd=dhx.delay(dhx.animate,dhx,[a,b],10)};dhx.animate.isSupported=function(){return dhx.env.transform&&dhx.env.transition};
dhx.animate.formLine=function(a,b,c){var d=c.direction;b.parentNode.style.position="relative";b.style.position="absolute";a.style.position="absolute";if(d=="top"||d=="bottom"){a.style.left="0px";a.style.top=(d=="top"?1:-1)*b.offsetHeight+"px"}else{a.style.top="0px";a.style.left=(d=="left"?1:-1)*b.offsetWidth+"px"}b.parentNode.appendChild(a);if(c.type=="slide"&&c.subtype=="out"){a.style.left=0;a.style.top=0;b.parentNode.removeChild(b);a.parentNode.appendChild(b)}return[a,b]};
dhx.animate.breakLine=function(a){dhx.html.remove(a[1]);dhx.animate.clear(a[0]);dhx.animate.clear(a[1]);a[0].style.position=""};dhx.animate.clear=function(a){var b=dhx.env.transform_prefix.replace(/-/g,"");a.style[b+"Transform"]="";a.style[b+"Transition"]="";a.style.top=a.style.left=""};
dhx.animate.start=function(a,b){if(typeof b=="string")b={type:b};b=dhx.Settings.J(b,{type:"slide",delay:"0",duration:"500",timing:"ease-in-out",x:0,y:0});var c=dhx.env.transform_prefix,d=c.replace(/-/g,""),e=a.Za=b;switch(e.type=="slide"&&e.direction){case "right":e.x=a.offsetWidth;break;case "left":e.x=-a.offsetWidth;break;case "top":e.y=-a.offsetHeight;break;case "bottom":default:e.y=a.offsetHeight;break}if(e.type=="flip"||e.type=="flipback"){var f=[0,0],g="scaleX";if(e.subtype=="vertical"){f[0]=
20;g="scaleY"}else f[1]=20;if(e.direction=="right"||e.direction=="bottom"){f[0]*=-1;f[1]*=-1}}var h=e.duration+"ms "+e.timing+" "+e.delay+"ms",j=d+"TransformStyle: preserve-3d;",k="",i="";switch(e.type){case "fade":k="opacity "+h;j="opacity: 0;";break;case "show":k="opacity "+h;j="opacity: 1;";break;case "flip":h=e.duration/2+"ms "+e.timing+" "+e.delay+"ms";i="skew("+f[0]+"deg, "+f[1]+"deg) "+g+"(0.00001)";k="all "+h;break;case "flipback":e.delay+=e.duration/2;h=e.duration/2+"ms "+e.timing+" "+e.delay+
"ms";a.style[d+"Transform"]="skew("+-1*f[0]+"deg, "+-1*f[1]+"deg) "+g+"(0.00001)";a.style.left="0";i="skew(0deg, 0deg) "+g+"(1)";k="all "+h;break;case "slide":b=e.x+"px";var m=e.y+"px";i="translate3d("+b+", "+m+", 0)";k=c+"transform "+h;break;default:break}dhx.delay(function(){a.style[d+"Transition"]=k;dhx.delay(function(){if(j)a.style.cssText+=j;if(i)a.style[d+"Transform"]=i;var l=false,n=dhx.event(a,d+"TransitionEnd",function(o){a.Za=null;if(e.callback)e.callback.call(e.master||window,a,e,o);l=
true;dhx.eventRemove(n)});window.setTimeout(function(){if(!l){a.Za=null;if(e.callback)e.callback.call(e.master||window,a,e);l=true;dhx.eventRemove(n)}},(e.duration*1+e.delay*1)*1.3)})})};dhx.Modality={modal_setter:function(a){if(a){if(!this.va){this.va=dhx.html.create("div",{"class":a=="rich"?"dhx_modal_rich":"dhx_modal"});this.va.style.zIndex=dhx.ui.zIndex();this.i.style.zIndex=dhx.ui.zIndex();document.body.appendChild(this.va)}}else{this.va&&dhx.html.remove(this.va);this.va=null}return a}};
dhx.ui.map.window=dhx.ui.window=dhx.proto({m:function(a){this.i.innerHTML="<div class='dhx_win_content'><div class='dhx_win_head'></div><div class='dhx_win_body'></div></div>";this.h=this.i.firstChild;this.D=this.h.childNodes[0];this.N=this.h.childNodes[1];this.i.className+=" dhx_window";this.X=this.o=null;this.g.p={top:false,left:false,right:false,bottom:false};if(!a.id)a.id=dhx.uid()},show:function(a,b,c){this.g.hidden=false;this.i.style.zIndex=dhx.ui.zIndex();this.g.modal&&this.modal_setter(true);
var d,e,f;if(a){if(typeof a=="object"&&!a.tagName){d={x:a.clientX-this.ua[0]/2,y:a.clientY};e=document.body.offsetWidth;f=1}else a=dhx.toNode(a);var g=document.body.offsetWidth,h=document.body.offsetHeight;e=e||a.offsetWidth;f=f||a.offsetHeight;var j=this.ua;d=d||dhx.html.offset(a);var k=a=6,i=6;c="top";var m=0,l=0,n=0,o=0;if(b=="right"){o=d.x+a+e;k=-f;c="left";m=Math.round(d.y+f/2);l=o-i}else if(b=="left"){o=d.x-a-j[0];k=-f;c="right";m=Math.round(d.y+f/2);l=o+j[0]+1}else{o=g-d.x>j[0]?d.x:g-a-j[0];
l=Math.round(d.x+e/2);if(l>o+j[0])l=o+j[0]/2}if(h-f-d.y-k>j[1]){n=f+d.y+k;if(!m){c="top";m=n-i}}else{n=d.y-k-j[1];if(n<0){n=0;c=false}else if(!m){c="bottom";m=n+j[1]+1}}this.setPosition(o,n);c&&this.$c&&this.$c(c,l,m)}this.Se=new Date;this.i.style.display="block";this.callEvent("onShow",[])},hidden_setter:function(a){a?this.hide():this.show();return!!a},hide:function(){if(!this.g.hidden)if(!(new Date-this.Se<100)){this.g.modal&&this.modal_setter(false);this.g.position=="top"?dhx.animate(this.i,{type:"slide",
x:0,y:0,duration:300,callback:this.xc,master:this}):this.xc()}},xc:function(){this.i.style.display="none";this.g.hidden=true;this.callEvent("onHide",[])},close:function(){this.define("modal",false);dhx.html.remove(this.i);this.destructor()},body_setter:function(a){if(typeof a!="object")a={template:a};this.o=dhx.ui.za(a);this.o.Y=this;this.N.appendChild(this.o.i);return a},head_setter:function(a){if(a===false)return a;if(typeof a!="object")a={template:a,css:"dhx_alert_template"};this.X=dhx.ui.za(a);
this.X.Y=this;this.D.appendChild(this.X.i);return a},getBody:function(){return this.o},getHead:function(){return this.X},resize:function(){var a=this.n();this.j(a[1]||this.g.width,a[3]||this.g.height);this.Pe(this.g.left,this.g.top)},Pe:function(a,b){if(this.g.position){a=Math.round((document.body.offsetWidth-this.g.width)/2);b=Math.round((document.body.offsetHeight-this.g.height)/2);if(this.g.position=="top")b=dhx.animate.isSupported()?-1*this.g.height:10;this.setPosition(a,b);this.g.position=="top"&&
dhx.animate(this.i,{type:"slide",x:0,y:this.g.height,duration:300})}else this.setPosition(a,b)},setPosition:function(a,b){this.i.style.top=b+"px";this.i.style.left=a+"px";this.g.left=a;this.g.top=b},n:function(){var a=this.o.n();if(this.X){var b=this.X.n();if(b[3])this.g.headHeight=b[3]}if(a[3]){a[3]+=this.g.head!==false?this.g.headHeight:0;this.g.height=a[3]}if(a[1])this.g.width=a[1];if(a[0]||a[2])this.g.gravity=Math.max(a[0],a[2]);return dhx.ui.map.view.prototype.n.call(this)},j:function(a,b){if(dhx.ui.map.view.prototype.j.call(this,
a,b)){a=this.A;b=this.B;if(this.g.head===false){this.D.style.display="none";this.o.j(a,b)}else{this.X.j(a,this.g.headHeight);this.o.j(a,b-this.g.headHeight)}}},defaults:{headHeight:43,width:300,height:200,top:100,left:100}},dhx.ui.map.view,dhx.Movable,dhx.Modality,dhx.EventSystem);
dhx.ui.popup=dhx.ui.map.popup=dhx.proto({m:function(){this.g.head=false;this.h.onclick=dhx.html.stopEvent;dhx.attachEvent("onClick",dhx.bind(this.hide,this));this.attachEvent("onHide",this.yc)},n:function(){var a=this.o.n();if(a[3])this.g.height=a[3]+this.g.padding*2;if(a[1])this.g.width=a[1]+this.g.padding*2;if(a[0]||a[2])this.g.gravity=Math.max(a[0],a[2]);return dhx.ui.map.view.prototype.n.call(this)},j:function(a,b){if(dhx.ui.map.view.prototype.j.call(this,a,b)){a=this.A-this.g.padding*2;b=this.B-
this.g.padding*2;this.h.style.padding=this.g.padding+"px";this.D.style.display="none";this.o.j(a,b)}},body_setter:function(a){a=dhx.ui.map.window.prototype.body_setter.call(this,a);this.o.g.p={top:false,left:false,right:false,bottom:false};return a},defaults:{padding:8},head_setter:null,$c:function(a,b,c){this.yc();document.body.appendChild(this.Ma=dhx.html.create("DIV",{"class":"dhx_point_"+a},""));this.Ma.style.zIndex=dhx.ui.zIndex();this.Ma.style.top=c+"px";this.Ma.style.left=b+"px"},yc:function(){this.Ma=
dhx.html.remove(this.Ma)}},dhx.ui.window);dhx.event(window,"click",function(a){dhx.callEvent("onClick",[a||event])});
dhx.ui.alert=dhx.proto({defaults:{position:"center",head:{template:"Info",css:"dhx_alert_template"},height:170,modal:true,callback:null,body:{type:"clean",rows:[{template:"<div class='dhx_alert_text'>#text#</div>",data:{text:"You have forgot to define the text :) "}},{id:"dhx_alert_controls",view:"toolbar",type:"BigBarV",height:60,data:[{type:"button",label:"Ok",click:function(){this.getParent().getParent().wb(true)}}]}]}},m:function(){this.i.parentNode||document.body.appendChild(this.i);this.I.push(this.resize)},
Sc:function(a){if(typeof a=="string")a={title:this.defaults.head.template,message:a};dhx.extend(a,this.defaults);delete a.head;delete a.body;this.La(a,{});this.show()},title_setter:function(a){this.X.define("template",a);this.X.render()},message_setter:function(a){var b=this.o.k[0];b.data={text:a};b.render()},wb:function(a){this.hide();this.g.callback&&dhx.toFunctor(this.g.callback).call(this,a,this.g.details)}},dhx.ui.window);dhx.alert=dhx.single(dhx.ui.alert);
dhx.ui.confirm=dhx.proto({defaults:{height:210,body:{type:"clean",rows:[{id:"dhx_confirm_message",template:"<div class='dhx_alert_text'>#text#</div>",data:{text:"You have forgot to define the text :) "}},{id:"dhx_confirm_controls",view:"toolbar",type:"BigBarV",height:110,data:[{type:"button",label:"Ok",click:function(){this.getParent().getParent().wb(true)}},{type:"defaultbutton",label:"Cancel",click:function(){this.getParent().getParent().wb(false)}}]}]}}},dhx.ui.alert);dhx.confirm=dhx.single(dhx.ui.confirm);
dhx.notice=function(a){if(typeof a=="string")a={message:a};a=dhx.Settings.J(a,{message:"Sample notice message.",css:"",width:240,height:70,delay:3500,top:9,right:9});if(dhx.notice.xa)a.top+=dhx.notice.xa;dhx.notice.xa=a.top+a.height;var b=dhx.html.create("div",{"class":"dhx_notice "+a.css},"<span class='dhx_notice_content'>"+a.message+"</span>");b.style.cssText="width:"+a.width+"px; height:"+a.height+"px; top:"+a.top+"px; right:"+a.right+"px";document.body.appendChild(b);dhx.delay(dhx.notice.Ad,b,
[dhx.notice.xa],a.delay)};dhx.notice.Ad=function(a){if(dhx.notice.xa==a)dhx.notice.xa=0;dhx.html.remove(this)};
dhx.CarouselPanel={Oa:function(){var a,b,c;a=this.g.panel;dhx.html.remove(this.$);b="z-index:"+dhx.ui.zIndex()+";";if(a.align=="bottom"||a.align=="top"){b+="height:"+a.size+"px; left:0px;";c=0;if(a.align=="bottom")c=this.B-this.g.panel.size;b+="top:"+c+"px"}else if(a.align=="right"||a.align=="left"){b+="width:"+a.size+"px;top:0px;";c=0;if(a.align=="right")c=this.A-this.g.panel.size;b+="left:"+c+"px"}this.$=dhx.html.create("DIV",{"class":"dhx_carousel_panel",style:b},"");this.i.appendChild(this.$);
this.Ub()},Ub:function(){var a,b;b=this.g.panel;this.$?this.Bd():this.Oa();if(!this.k&&this.data.pull)this.k=this.data.getRange();if(this.k){for(var c=0;c<this.k.length;c++){a=dhx.html.create("DIV",{"class":"dhx_item dhx_carousel_"+(c==this.C?"active":"inactive"),style:b.align=="left"||b.align=="right"?"float:none;":""},"");this.$.appendChild(a)}a=this.k.length*this.g.panel.size;if(b.align=="bottom"||b.align=="top"){this.$.style.left=(this.A-a)/2+this.i.scrollLeft+"px";this.$.style.width=a+"px"}else this.$.style.top=
(this.B-a)/2+this.i.scrollTop+"px"}},Bd:function(){if(this.$)for(var a=this.$.childNodes,b=a.length-1;b>=0;b--)dhx.html.remove(a[b])}};
dhx.ui.map.carousel=dhx.ui.carousel=dhx.proto({defaults:{scrollSpeed:"100"},m:function(){this.name="Carousel";this.i.className+=" dhx_carousel";this.i.appendChild(dhx.html.create("DIV",{"class":"dhx_scroll_carousel"},""));this.h=this.i.firstChild;this.C=0;this.I.push(this.U)},U:function(){this.h.setAttribute("touch_scroll",this.z?"y":"x");this.attachEvent("onAfterScroll",this.yb)},yb:function(a){var b=this.z?this.B:this.A,c;if(this.z){c=Math.round(a.f/b);a.f=c*b}else{c=Math.round(a.e/b);a.e=c*b}this.C=
-c;this.g.panel&&this.Ub();return true},pb:function(a){var b,c;c=-1;for(b=0;b<this.k.length;b++)if(this.k[b]==a){c=b;break}if(!(c<0||c==this.C)){this.C=c;a=this.z?this.B:this.A;c=-(this.z?0:c*a);a=-(this.z?next_cell*a:0);this.scrollTo(c,a);this.Oa()}},scrollTo:function(a,b){if(dhx.Touch)dhx.Touch.setMatrix(this.h,{e:a,f:b},this.g.scrollSpeed||"100ms");else{this.h.parentNode.scrollLeft=-a;this.h.parentNode.scrollTop=-b}},panel_setter:function(a){this.J(a,{size:16,align:"bottom"});return a},n:function(){return dhx.ui.layout.prototype.n.call(this)},
j:function(a,b){var c=this.k.length,d=this.z?c:1,e=this.z?1:c;dhx.ui.view.prototype.j.call(this,a,b);this.h.style.height=b*d+"px";this.h.style.width=a*e+"px";this.ob(a*e,b*d);this.Oa()}},dhx.CarouselPanel,dhx.ui.layout,dhx.EventSystem);
dhx.ui.map.grid=dhx.ui.grid=dhx.proto({m:function(){this.name="DataGrid";this.version="3.0";this.h.innerHTML="<div class='dhx_grid_header' style='width:100%;'></div><div class='dhx_grid_body'></div>";this.h.className+=" dhx_grid";this.ha=this.h.childNodes[0];this.l=this.N=this.h.childNodes[1];dhx.extend(this,dhx.Scrollable);this.I.push(this.U);this.data.provideApi(this,true);this.cf={};var a=this;this.data.attachEvent("onStoreUpdated",function(){dhx.delay(a.Ee,a,arguments,1)});this.qb=null},U:function(){},
header_setter:function(a){this.Ne(a);return a},Ne:function(a){if(!arguments.length)a=this.g.header;this.ha.style.display=a?"":"none"},defaults:{select:true,type:"default",sorting:true,header:true,scroll:true},r:"dhx_f_id",on_click:{dhx_grid_row:function(a,b){if(this.g.select)this.g.select=="multiselect"?this.select(b,a.ctrlKey,a.shiftKey):this.select(b)},dhx_grid_header:function(a,b){if(this.g.sorting){b=dhx.html.locate(a,"column_id");if(b!==null){this.qb=b;this.Uc();a=this.g.fields[b].sort;this.sort(a.by,
a.dir,a.as)}}}},on_dblclick:{},on_mouse_move:{},Ee:function(){if(this.g.header){dhx.event(this.N,"scroll",dhx.bind(this.Ie,this));this.N.style.height=this.h.offsetHeight-this.ha.offsetHeight-2+"px";this.l.style.width=this.ha.firstChild.offsetWidth-(this.Rd?20:0)+"px"}else{var a=this.g.fields,b=0;for(var c in a)b+=a[c].width;this.N.style.height=this.h.offsetHeight-2+"px";this.l.style.width=b+"px"}this.render()},fields_setter:function(a){for(var b={},c=0,d=0;d<a.length;d++){if(typeof e=="undefied")a[d].id=
dhx.uid();var e=a[d].id;this.J(a[d],{width:100,label:e,template:"#"+a[d].id+"#",css:this.type.css,sort:{by:"#"+e+"#",dir:"desc",as:"string"},align:"left"});a[d].template=dhx.Template(a[d].template);b[e]=a[d];c+=a[d].width}this.type.fields=b;this.type.total_width=c;return b},Uc:function(){var a,b,c,d=this.g.fields;b=this.ha;b.innerHTML="";a=dhx.html.create("table",{style:"width:0px;height:100%",cellSpacing:0,cellPadding:0,layout:"fixed"},"");b.appendChild(a);a.appendChild(document.createElement("tbody"));
if(a.firstChild){c=document.createElement("tr");a.firstChild.appendChild(c)}for(var e in d)this.Vc(c,d[e].label,d[e].width,e);if(this.g.height!="auto"){this.Rd=true;a=a.offsetWidth+20<b.offsetWidth?b.offsetWidth-a.offsetWidth:20;this.Vc(c,"&nbsp;",a)}},Vc:function(a,b,c,d){var e=dhx.html.create("td",{"class":"dhx_grid_header_td",style:"width:"+c+"px;padding:0px"},"");typeof d!="undefined"&&e.setAttribute("column_id",d);var f=dhx.html.create("div",{"class":"dhx_div"},b===""?"&nbsp;":b);e.appendChild(f);
this.ha.firstChild.style.width=this.ha.firstChild.offsetWidth+c+"px";a.appendChild(e);if(this.g.sorting&&d&&d==this.qb){a=this.g.fields[this.qb].sort.dir;var g=dhx.html.create("div",{"class":"sort_img "+a,style:"display:inline;left:"+(c-this.type.sortImgWidth)+"px"},"");this.g.fields[this.qb].sort.dir=a=="desc"?"asc":"desc";f.appendChild(g)}},Ie:function(){this.ha.scrollLeft=this.N.scrollLeft},j:function(a,b){if(dhx.ui.map.view.prototype.j.apply(this,arguments)){a=this.A;b=this.B;this.N.style.height=
b-(this.g.header?this.ha.offsetHeight:0)+"px"}this.g.header&&this.Uc()},Wa:function(){var a=this.type,b=a.border;return{x:this.l.offsetWidth,y:a.height+b}},type:{correction:12,template:function(a,b){var c="";for(var d in b.fields){var e=b.fields[d];c+="<td style='width:"+e.width+"px;' class='dhx_td' ><div align='"+e.align+"' style='height:"+b.height+"px;line-height:"+b.height+"px' class='dhx_cell "+e.css+"'>"+e.template(a)+"</div></td>"}return c},border:1,align:"left",height:42,css:"",sortImgWidth:20,
type:"text",templateStart:function(a,b){return"<table dhx_f_id='"+a.id+"' class='"+b.templateCss(a,b)+" dhx_grid_row"+(a.$selected?"_selected":"")+"' cellpadding='0' cellspacing='0' "+(b.total_width?"style='width:"+b.total_width+"px'":"")+"><tr>"},templateCss:dhx.Template(""),templateEnd:dhx.Template("</tr></table>")}},dhx.SelectionModel,dhx.MouseEvents,dhx.KeyEvents,dhx.EditAbility,dhx.RenderStack,dhx.DataLoader,dhx.ui.map.view,dhx.EventSystem,dhx.Settings);dhx.Type(dhx.ui.grid,{name:"dummy"});
dhx.ui.map.video=dhx.ui.video=dhx.proto({m:function(a){if(!a.id)a.id=dhx.uid();this.name="Video";this.version="3.0";this.I.push(this.de)},de:function(){var a=this.g;this.h=dhx.html.create("video",{"class":"dhx_view_video",style:"width:100%;height:100%;",src:a.src,autobuffer:"autobuffer"},"");if(a.poster)this.h.poster=a.poster;this.h.addEventListener&&this.h.addEventListener("click",function(b){return function(){b.play()}}(this.h),false);if(a.controls)this.h.controls=true;this.i.appendChild(this.h)},
getVideo:function(){return this.h},defaults:{src:"",controls:true}},dhx.ui.map.view);
dhx.ui.map.googlemap=dhx.ui.googlemap=dhx.proto({m:function(a){if(!a.id)a.id=dhx.uid();this.i.innerHTML="<div class='dhx_map_content' style='width:100%;height:100%'></div>";this.h=this.i.firstChild;this.name="Map";this.version="3.0";this.map=null;this.I.push(this.ce)},ce:function(){var a=this.g,b={zoom:a.zoom,center:a.center,mapTypeId:a.mapType};this.map=new google.maps.Map(this.h,b)},center_setter:function(a){if(typeof a!="object")a={};this.J(a,{x:48.724,y:8.215});return new google.maps.LatLng(a.x,
a.y)},mapType_setter:function(a){return google.maps.MapTypeId[a]},defaults:{zoom:5,center:{},mapType:"ROADMAP"},j:function(){dhx.ui.map.view.prototype.j.apply(this,arguments);google.maps.event.trigger(this.map,"resize")}},dhx.ui.map.view);
dhx.Values={m:function(){this.attachEvent("onTouchStart",function(a){(a=dhx.ui.hc=this.q(this.locate(a)))&&dhx.html.addCss(a,"dhx_touch")})},focus:function(){this.data.each(function(a){if(a.focus){var b=dhx.ui.passive[a.type];b.focus&&b.focus(this.q(a.id))}},this)},setValues:function(a){this.md=dhx.copy(a);this.data.each(function(b){b.form=this.g.id;if(dhx.ui.passive[b.type].setValue)dhx.ui.passive[b.type].setValue(this.q(b.id),a[b.id]||"",a,b)},this)},getValues:function(){var a=this.md?dhx.copy(this.md):
{};this.data.each(function(b){b.form=this.g.id;if(dhx.ui.passive[b.type].getValue)a[b.id]=dhx.ui.passive[b.type].getValue(this.q(b.id),a,b)},this);return a},clear:function(){var a={};this.data.each(function(b){a[b.name]=b.value||""});this.setValues(a)},cc:function(a,b,c){this.item(a).click&&dhx.toFunctor(this.item(a).click).call(this,a,b,c);if(this.Na[a]){var d=this.Na[a].split(","),e=dhx.ui.get(d[0]);this.callEvent("onBeforePopup",[a,e,b,c])&&e.show(c,d[1],true)}}};
dhx.attachEvent("onTouchEnd",function(){dhx.ui.hc&&dhx.html.removeCss(dhx.ui.hc,"dhx_touch")});
dhx.ui.passive={common:{render_input:function(a,b,c,d){var e=a.label?a.labelWidth||80:0,f=(a.width?a.width-30:258)-e,g=a.align||"left",h=a.labelAlign||"left",j=dhx.uid(),k="<div class='dhx_inp_text_border'>";k+="<div class='dhx_inp_text_label' style='width: "+e+"px; text-align: "+h+";'><label for='"+j+"' class='dhx_inp_label_for_text'>"+(a.label||"")+"</label></div>";k+=d?"<div class='dhx_inp_"+b+"' style='width: "+f+"px; text-align: "+g+";' >"+(a.text||a.value||"")+"</div>":"<input id='"+j+"' type='text' value='"+
(a.text||a.value||"")+"' "+(c?"readonly='true'":"")+" class='dhx_inp_"+b+"' style='width: "+f+"px; text-align: "+g+";' />";k+="</div>";return k},render_label:function(a,b){if(!a.label)return"";var c=a.labelWidth||80,d=a.labelAlign||"center";return"<div class='dhx_inp_"+b+"_label' style='width: "+c+"px; text-align: "+d+";'>"+a.label+"</div>"},escape:function(a){return(new String(a)).replace("'","&#8217;")}},text:{focus:function(a){this.get_input(a).focus()},render:dhx.Template(function(a){return dhx.ui.passive.common.render_input(a,
"text")}),get_input:function(a){return a.getElementsByTagName("input")[0]},setValue:function(a,b){var c=this.get_input(a);c.value=b},getValue:function(a){a=this.get_input(a);return a.value}},list:{jb:dhx.Template(function(a){return dhx.ui.passive.common.render_input(a,"list",true,true)}),render:function(a){a.popup?this.Xb(a.popup,a):this.create_popup("list",a);return this.jb(a)},after_render:function(a,b){if(!dhx.isNotDefined(b.value)){this.setValue(a,b.value,{},b);var c=dhx.ui.get(b.popup.toString());
c=c.o;var d=this;c.attachEvent("onXLE",function(){d.setValue(a,b.value,{},b)})}},create_popup:function(a,b){var c=dhx.extend({},b);delete c.type;delete c.align;c.view=a;c.id=b.name+"_"+a;a=dhx.uid();var d={id:a,view:"popup",body:c};dhx.ui(d).hide();b.popup=a;this.Xb(a,b)},Xb:function(a){var b=this,c=dhx.ui.get(a.toString()),d=c.o;d.attachEvent("onItemClick",function(e){c.hide();var f=dhx.ui.get(this.g.form),g=this.g.objId;f.item(g).value=e;f.item(g).text=this.type.template(this.item(e));b.setValue(f.q(g),
e,{},f.item(g))})},get_input:function(a){return a.childNodes[0].childNodes[1]},setValue:function(a,b,c,d){c=dhx.ui.get(d.form);var e=d.popup,f=dhx.ui.get(e).o;f=f.type?f.type.template(f.item(b)||b):b;c.item(d.id).value=b;c.item(d.id).text=f;if(d.type=="combo")this.get_input(a).value=f;else this.get_input(a).innerHTML=f},getValue:function(a,b,c){return c.value}},combo:{jb:dhx.Template(function(a){return dhx.ui.passive.common.render_input(a,"combo")}),render:function(a){a.popup?dhx.ui.passive.list.Xb(a.popup,
a):dhx.ui.passive.list.create_popup("list",a);return this.jb(a)},after_render:function(a,b){this.setValue(a,b.value,{},b);dhx.event(a,"keydown",function(c){c=c||event;var d=c.target||c.srcElement,e=dhx.ui.get(b.popup);window.clearTimeout(e.key_timer);e.key_timer=window.setTimeout(function(){e.o.filter(function(f){if(f.value.indexOf(d.value)===0)return true;return false});if(e.o.dataCount()==1&&e.o.type.template(e.o.item(e.o.first()))==d.value)dhx.ui.get(b.form).item(b.id).value=e.o.first();else dhx.ui.get(b.form).item(b.id).value=
""},200);e.show(d,e.o.g.align||"bottom",true)},this)},setValue:function(a,b,c,d){dhx.ui.passive.list.setValue(a,b,c,d)},getValue:function(a,b,c){return dhx.ui.passive.list.getValue(a,b,c)}},calendar:{render:function(a){a.popup||dhx.ui.passive.list.create_popup("calendar",a);return dhx.ui.passive.list.jb(a)},after_render:function(a,b){if(b.popup){this.setValue(a,b.value||"",{},b);var c=this,d=dhx.ui.get(b.popup.toString());d.o.attachEvent("onDateSelected",function(e){c.setValue(a,e,{},b);d.hide()})}},
setValue:function(a,b,c,d){c=dhx.ui.get(d.popup.toString());var e=c.o;if(typeof b=="object")b=dhx.Date.dateToStr(d.date_format||e.g.calendarDateFormat)(b);c=dhx.ui.get(d.form);var f=d.template?dhx.Template(d.template)({value:b}):b;c.item(d.id).value=b;e.selectDate(b);c.item(d.id).text=f;dhx.ui.passive.list.get_input(a).innerHTML=f},getValue:function(a,b,c){return c.value}},textarea:{render:function(a){return"<textarea class='dhx_inp_textarea' placeholder='"+(a.label||"")+"' style='width:100%;height:"+
(a.height||50)+"px'>"+(a.value||"")+"</textarea>"},customHeight:true,setValue:function(a,b){a.firstChild.value=b},getValue:function(a){return a.firstChild.value}},counter:{render:function(a){var b=a.value||0,c=a.valueWidth||20,d=dhx.ui.passive.common.render_label(a,"counter"),e="<input type='button' class='dhx_inp_counter_prev' value='' />";e+="<div class='dhx_inp_counter_value' style='width: "+c+"px;'>"+b+"</div>";e+="<input type='button' class='dhx_inp_counter_next' value='' />";return a.position!=
"label-left"?e+d:d+e},get_input:function(a){return a.getElementsByTagName("input")[0].nextSibling},setValue:function(a,b){this.get_input(a).innerHTML=b},getValue:function(a){return this.get_input(a).innerHTML*1},next:function(a,b,c,d){b=b||1;this.ed(a,b,c,d)},prev:function(a,b,c,d){b=-1*(b||1);this.ed(a,b,c,d)},ed:function(a,b,c,d){c=typeof c=="undefined"?-Infinity:c;d=typeof d=="undefined"?Infinity:d;var e=this.getValue(a)+b;e>=c&&e<=d&&this.setValue(a,e)}},formbutton:{render:dhx.Template(function(a){return"<div style='width:100%;text-align:"+
a.align+"'><input type='button' class='dhx_inp_form_button' style='text-align: "+a.inputAlign+"; width: "+(a.inputWidth?a.inputWidth+"px":"100%")+";' value='"+(a.label||a.value)+"' /></div>"})},toggle:{render:function(a){var b=a.width?a.width/2:"auto",c=a.widths||[b,b];if(!a.values)a.values=a.options;b=dhx.ui.passive.common.render_label(a,"toggle");var d="<input type='button' style='width: "+c[0]+"px;' value='"+a.options[0]+"' />";d+="<input type='button' style='width: "+c[1]+"px;' value='"+a.options[1]+
"'  />";return a.position!="label-left"?b+d:d+b},after_render:function(a,b){this.on(a,b.value,b.values)},get_input:function(a){return a.getElementsByTagName("input")},on:function(a,b,c){var d=this.get_input(a);if(b==c[1]){d[0].className="dhx_inp_toggle_left_off";d[1].className="dhx_inp_toggle_right_on"}else{d[0].className="dhx_inp_toggle_left_on";d[1].className="dhx_inp_toggle_right_off"}},setValue:function(a,b,c,d){this.on(a,b,d.values)},getValue:function(a,b,c){a=this.get_input(a);c=c.values;return a[0].className==
"dhx_inp_toggle_left_on"?c[0]:c[1]}},checkbox:{render:function(a){var b=a.value?"dhx_inp_checkbox_on":"dhx_inp_checkbox_on hidden",c="<div class='dhx_inp_checkbox_border'><input type='button' class='"+b+"' value='' /></div>",d=dhx.ui.passive.common.render_label(a,"checkbox");return a.position=="label-left"?d+c:c+d},get_input:function(a){return a.getElementsByTagName("input")[0]},check:function(a){var b=this.get_input(a);b.className=this.getValue(a)?"dhx_inp_checkbox_on hidden":"dhx_inp_checkbox_on"},
setValue:function(a,b){this.getValue(a)!=b&&this.check(a)},getValue:function(a){return this.get_input(a).className=="dhx_inp_checkbox_on"?1:0},auto_width:true},radio:{type:"radio",render:function(a){for(var b=[],c=0;c<a.data.length;c++){var d="<div radio_id='"+a.data[c].value+"' class='dhx_inp_radio_border'><input type='button' class='"+(a.data[c].value==a.value?"dhx_inp_radio_on":"dhx_inp_radio_on hidden")+"' value='' /></div>";a.label=a.data[c].label;var e=dhx.ui.passive.common.render_label(a,"radio");
a.position=="label-left"?b.push(e+d):b.push(d+e)}return"<div>"+b.join("</div><div>")+"</div>"},get_input:function(a){return a.getElementsByTagName("input")},check:function(a,b,c){a=this.get_input(a);for(var d=0;d<a.length;d++)a[d].className=a[d].parentNode.getAttribute("radio_id")==b&&c?"dhx_inp_radio_on":"dhx_inp_radio_on hidden"},setValue:function(a,b){this.check(a,b,true)},getValue:function(a){a=this.get_input(a);for(var b=0;b<a.length;b++)if(a[b].className.indexOf("hidden")==-1)return a[b].parentNode.getAttribute("radio_id");
return""},customHeight:true},button:{render:dhx.Template("<input type='button' value='#label#'>")},prevbutton:{render:function(a){return"<div class='dhx_el_prevbutton_arrow'></div><div class='dhx_el_prevbutton_input_cont'><input type='button' value='"+a.label+"' /></div>"}},nextbutton:{render:function(a){return"<div class='dhx_el_nextbutton_input_cont'><input type='button' value='"+a.label+"' /></div><div class='dhx_el_nextbutton_arrow'></div>"}},roundbutton:{render:dhx.Template("<input type='button' value='#label#'>")},
defaultbutton:{render:dhx.Template("<input type='button' value='#label#'>")},imagebutton:{render:dhx.Template("<span><img src='#src#'/>&nbsp;#label#</span>")},label:{render:dhx.Template("#label#")},select:{render:function(a){var b=a.options,c="<select";if(a.disabled)c+=" disabled='true'";c+=">";for(a=0;a<b.length;a++)c+="<option"+(b[a].selected?" selected='true'":"")+(b[a].value?" value='"+b[a].value+"'":"")+">"+b[a].label+"</option>";c+="</select>";return c}},input:{render:function(a){for(var b=
"<input",c=["maxlength","value","disabled"],d=0;d<c.length;d++)if(a[c[d]])b+=" "+c[d]+"='"+a[c[d]]+"'";b+=" type='text'";b+="/>";return b}},icon:{render:function(a){return"<div class='dhx_el_icon_"+a.icon+"'></div>"}},segmented:{render:function(a){var b=a.segment;if(!a.selected)a.selected=b[0].key;for(var c="",d=0;d<b.length;d++)c+="<div class='"+(a.selected==b[d].key?"selected ":"")+"segment_"+(d==b.length-1?"N":d>0?1:0)+"' button_id='"+b[d].key+"'>"+b[d].label+"</div>";return c}},tabbar:{render:function(a){var b=
a.tabs,c="";if(a.tabWidth)var d="width: "+a.tabWidth+"px;";for(var e=0;e<b.length;e++){var f="",g=b[e].src;if(b[e].key==a.selected){f=" class='selected'";g=b[e].srcSelected||b[e].src}c+="<div"+f+" button_id='"+b[e].key+"' style='"+(d||"")+"'><img src='"+g+"'/>";c+="<span>"+b[e].label+"</span>";c+="</div>"}return c}},handlers:{uc:function(a,b){a=dhx.html.locate(a,"button_id");if(this.callEvent("onBeforeTabClick",[b,a])){this.data.item(b).selected=a;this.refresh(b);this.callEvent("onAfterTabClick",
[b,a])}},dhx_el_segmented:function(a,b){dhx.ui.passive.handlers.uc.call(this,a,b)},dhx_el_tabbar:function(a,b){dhx.ui.passive.handlers.uc.call(this,a,b)},dhx_inp_counter_next:function(a){a=dhx.html.locate(a,this.r);dhx.ui.passive[this.item(a).type].next(this.q(a),this.item(a).step,this.item(a).min,this.item(a).max)},dhx_inp_counter_prev:function(a){a=dhx.html.locate(a,this.r);dhx.ui.passive[this.item(a).type].prev(this.q(a),this.item(a).step,this.item(a).min,this.item(a).max)},dhx_inp_toggle_left_off:function(a){a=
dhx.html.locate(a,this.r);var b=this.item(a).values;dhx.ui.passive[this.item(a).type].on(this.q(a),b[0],b)},dhx_inp_toggle_right_off:function(a){a=dhx.html.locate(a,this.r);var b=this.item(a).values;dhx.ui.passive[this.item(a).type].on(this.q(a),b[1],b)},dhx_inp_list:function(a,b,c){a=dhx.html.locate(a,this.r);b=dhx.ui.get(this.item(a).popup);b.o.g.form=this.g.id;b.o.g.objId=a;b.show(c,b.o.g.align||"bottom",true)},dhx_inp_combo:function(a,b,c){c.focus();dhx.ui.passive.handlers.dhx_inp_list.call(this,
a,b,c)},dhx_inp_checkbox_border:function(a){a=dhx.html.locate(a,this.r);dhx.ui.passive[this.item(a).type].check(this.q(a))},dhx_inp_checkbox_label:function(a){a=dhx.html.locate(a,this.r);dhx.ui.passive[this.item(a).type].check(this.q(a))},dhx_inp_radio_border:function(a){var b=dhx.html.locate(a,this.r);a=dhx.html.locate(a,"radio_id");dhx.ui.passive[this.item(b).type].check(this.q(b),a,true)},dhx_inp_radio_label:function(a,b,c){c=c.parentNode.getElementsByTagName("input")[0];return this.on_click.dhx_inp_radio_border.call(this,
c,b,c)}}};
dhx.ui.form=dhx.ui.map.form=dhx.proto({defaults:{scroll:true},m:function(a){if(dhx.env.isAndroid)a.touch_scroll=false;this.name="Form";this.Na={};this.h.className+=" dhx_form";a.id||this.define("id",dhx.uid());this.attachEvent("onAfterRender",function(){this.data.each(function(b){b.form=this.g.id;dhx.ui.passive[b.type].after_render&&dhx.ui.passive[b.type].after_render(this.q(b.id),b)},this)});this.attachEvent("onItemClick",this.cc)},Gc:function(a){a=this.q(a);a=a.getElementsByTagName("INPUT")[0];a.className=
a.className.replace(/invalid/,"")+" invalid"},dc:function(a){a=this.q(a);a=a.getElementsByTagName("INPUT")[0];a.className=a.className.replace(/invalid/,"")},r:"dhx_inp_id",type:{template:function(a,b){var c=dhx.ui.passive[a.type];if(c)return c.render(a,b)},templateStart:dhx.Template(function(a){var b=dhx.ui.passive[a.type],c="dhx_el_"+a.type+(a.sameLine?" dhx_form_float":" dhx_form_clear"),d="";if(a.className)c+=" "+a.className;if(b.customHeight)d+="height:auto;";if(b.auto_width)d+="width:auto;";
if(a.width)d+="width:"+a.width+"px;";return"<div class='"+c+"' "+(d?"style='"+d+"'":"")+" dhx_inp_id='"+a.id+"'>"}),templateEnd:dhx.Template("</div>")},loadValues:function(a,b,c){this.callEvent("onXLS",[]);var d="json";if(typeof b=="string"){d=b;b=c}dhx.ajax(a,[function(e,f){this.parseValues(e,f,d);this.callEvent("onXLE",[])},b],this)},Me:function(a){a=a||"json";return dhx.DataDriver[a]},parseValues:function(a,b){this.ve(a,null,b)},ve:function(a,b,c){c=this.Me(c);a=c.toObject(a,b);a=c.getRecords(a)[0];
a=c.getDetails(a);this.setValues(a.data||a)},j:function(){dhx.ui.map.view.prototype.j.apply(this,arguments)},on_click:dhx.ui.passive.handlers},dhx.Values,dhx.ValidateData,dhx.MouseEvents,dhx.Scrollable,dhx.ui.proto);
dhx.ui.map.multiview=dhx.ui.multiview=dhx.proto({defaults:{animate:{}},m:function(){this.C=0;this.z=1;this.i.style.position="relative";this.i.className+=" dhx_multiview"},T:function(a){a=a||this.da;for(var b=0;b<a.length;b++)a[b].p=this.g.p||{top:1,bottom:1,left:1,right:1};dhx.ui.layout.prototype.T.call(this,a);for(b=1;b<this.k.length;b++)dhx.html.remove(this.k[b].i);for(b=0;b<a.length;b++){var c=this.k[b];if(!c.k){var d=c.g.p;if(d.top)c.i.style.borderTopWidth="0px";if(d.left)c.i.style.borderLeftWidth=
"0px";if(d.right)c.i.style.borderRightWidth="0px";if(d.bottom)c.i.style.borderBottomWidth="0px"}}},cells_setter:function(a){this.da=a},Yd:function(a,b){return a<b?"right":"left"},pb:function(a,b){if(this.ta)return dhx.delay(this.pb,this,[a],100);for(var c=-1,d=0;d<this.k.length;d++)if(this.k[d]==a){c=d;break}if(!(c<0||c==this.C))if((b||typeof b=="undefined")&&dhx.animate.isSupported()&&this.g.animate){var e=dhx.extend({},this.g.animate);e.direction=this.Yd(c,this.C);e=dhx.Settings.J(e,b||{});var f=
dhx.animate.formLine(this.k[c].i,this.k[this.C].i,e);this.k[c].n();this.k[c].j(this.A,this.B);e.callback=function(){dhx.animate.breakLine(f);this.C=c;this.ta=false;e.master=e.callback=null};e.master=this;dhx.animate(f,e);this.ta=true}else{dhx.html.remove(this.k[this.C].i);this.C=c;this.i.appendChild(this.k[d].i);this.k[this.C].n();this.k[this.C].j(this.A,this.B)}},n:function(){var a=this.k[this.C].n();if(this.g.height>-1){a[3]=this.g.height;a[2]=0}if(this.g.width>-1){a[1]=this.g.width;a[0]=0}if(a[0])a[1]=
0;if(a[2])a[3]=0;return a},j:function(a,b){dhx.ui.view.prototype.j.call(this,a,b);this.k[this.C].j(a,b)}},dhx.ui.map.layout);
dhx.TreeStore={m:function(){this.branch={0:[]}},clearAll:function(){this.branch={0:[]};dhx.DataStore.prototype.clearAll.call(this)},prevSibling:function(a){var b=this.branch[this.item(a).$parent];a=dhx.PowerArray.find.call(b,a)-1;if(a>=0)return b[a];return null},nextSibling:function(a){var b=this.branch[this.item(a).$parent];a=dhx.PowerArray.find.call(b,a)+1;if(a<b.length)return b[a];return null},parent:function(a){return this.item(a).$parent},firstChild:function(a){if((a=this.branch[a])&&a.length)return a[0];
return null},hasChild:function(a,b){if((a=this.branch[a])&&a.length)for(var c=0;c<a.length;c++){if(a[c]==b)return true;if(this.hasChild(a[c],b))return true}return false},branchIndex:function(a,b){a=this.branch[a];return dhx.PowerArray.find.call(a,b)},extraParser:function(a,b,c){a.$parent=b||0;a.$level=c||1;this.branch[a.$parent]||(this.branch[a.$parent]=[]);this.branch[a.$parent].push(a.id);if(!a.item)return a.$count=0;if(a.item instanceof Array)a.$count=a.item.length;else{a.item=[a.item];a.$count=
1}for(b=0;b<a.item.length;b++){var d=a.item[b];this.pull[this.id(d)]=d;this.extraParser(d,a.id,a.$level+1)}delete a.item},provideApi:function(a,b){for(var c=["prevSibling","nextSibling","parent","firstChild","hasChild","branchIndex"],d=0;d<c.length;d++)a[c[d]]=dhx.methodPush(this,c[d]);dhx.DataStore.prototype.provideApi.call(this,a,b)},getTopRange:function(){return dhx.toArray([].concat(this.branch[0])).map(function(a){return this.item(a)},this)},eachChild:function(a,b){if(this.branch[a])return dhx.PowerArray.each.call(this.branch[a],
b)},add:function(a,b,c){this.branch[c||0]=this.order=dhx.toArray(this.branch[c||0]);c=this.item(c||0);c.$count++;a.$count=0;a.$level=c.$level+1;a.$parent=c.id;return dhx.DataStore.prototype.add.call(this,a,b)},remove:function(a){var b=this.item(a);this.branch[b.$parent]=this.order=dhx.toArray(this.branch[b.$parent]);this.item(b.$parent).$count--;return dhx.DataStore.prototype.remove.call(this,a)},serialize:function(a){a=this.branch[a||0];for(var b=[],c=0;c<a.length;c++){var d=this.pull[a[c]];b.push(d);
if(d.$count)d.item=this.serialize(a[c])}return b}};
dhx.ui.map.list=dhx.ui.list=dhx.proto({m:function(){this.name="List";this.data.provideApi(this,true)},defaults:{select:false,scroll:true},r:"dhx_l_id",on_click:{dhx_list_item:function(a,b){if(this.g.select){this.hb=true;this.g.select=="multiselect"?this.select(b,a.ctrlKey,a.shiftKey):this.select(b);this.hb=false}}},n:function(){if(this.type.width!="auto")this.g.width=this.type.width+(this.type.padding+this.type.margin)*2;if(this.g.yCount)this.g.height=(this.type.height+(this.type.padding+this.type.margin)*
2+1)*(this.g.yCount=="auto"?this.dataCount():this.g.yCount);return dhx.ui.map.view.prototype.n.call(this)},type:{css:"",template:dhx.Template("#value#"),width:300,height:22,margin:0,padding:10,border:1,templateStart:dhx.Template("<div dhx_l_id='#id#' class='dhx_list_item dhx_list_{common.css}_item{obj.$selected?_selected:}' style='width:{common.width}px; height:{common.height}px; padding:{common.padding}px; margin:{common.margin}px; overflow:hidden;'>"),templateEnd:dhx.Template("</div>")}},dhx.MouseEvents,
dhx.SelectionModel,dhx.Scrollable,dhx.ui.proto);
dhx.ui.map.grouplist=dhx.ui.grouplist=dhx.proto({defaults:{animate:{}},m:function(){dhx.extend(this.data,dhx.TreeStore);this.i.className+=" dhx_grouplist";this.gb=[];this.Q=[]},on_click:{dhx_list_item:function(a,b){if(this.ta)return false;for(var c=0;c<this.Q.length;c++)if(this.Q[c]==b){for(a=c;a<this.Q.length;a++)this.data.item(this.Q[a]).$template="";if(c){this.gb=this.data.branch[this.Q[c-1]];this.Q.splice(c)}else{this.gb=this.data.branch[0];this.Q=[]}this.Ac=false;return this.render()}c=this.item(b);
if(c.$count){this.Ac=true;this.Q.push(b);c.$template="Back";this.gb=this.data.branch[c.id];return this.render()}else if(this.g.select){this.hb=true;this.g.select=="multiselect"?this.select(b,a.ctrlKey,a.shiftKey):this.select(b);this.hb=false}}},render:function(){if(this.ta)return dhx.delay(this.render,this,arguments,100);this.data.order=this.Q.length?[].concat(this.Q).concat(this.gb):[].concat(this.data.branch[0]);if(this.callEvent("onBeforeRender",[this.data])){if(this.hb||!this.l.innerHTML||!(dhx.animate.isSupported()&&
this.g.animate)||this.ze==this.Q.length)dhx.RenderStack.render.apply(this,arguments);else{var a=this.l.cloneNode(false);a.innerHTML=this.data.getRange().map(this.pa,this).join("");var b=dhx.extend({},this.g.animate);b.direction=this.Ac?"left":"right";var c=dhx.animate.formLine(a,this.l,b);b.master=this;b.callback=function(){this.l=a;dhx.animate.breakLine(c);this.u=b.master=b.callback=null;this.ta=false;this.callEvent("onAfterRender",[])};this.ta=true;dhx.animate(c,b)}this.ze=this.Q.length}},templateBack_setter:function(a){this.type.templateBack=
dhx.Template(a)},templateItem_setter:function(a){this.type.templateItem=dhx.Template(a)},templateGroup_setter:function(a){this.type.templateGroup=dhx.Template(a)},type:{template:function(a,b){if(a.$count)return b.templateGroup(a,b);return b.templateItem(a,b)},css:"group",templateStart:dhx.Template("<div dhx_l_id='#id#' class='dhx_list_item dhx_list{obj.$count?_group:_item}{obj.$template?_back:}{obj.$selected?_selected:}' style='width:{common.width}px; height:{common.height}px; padding:{common.padding}px; margin:{common.margin}px; overflow:hidden;'>"),
templateBack:"&lt; #value#",templateItem:"#value#",templateGroup:"#value#"}},dhx.ui.list);
dhx.ui.map.pagelist=dhx.ui.pagelist=dhx.proto({defaults:{layout:"y",panel:false,scrollOffset:0},m:function(a){this.name="PageList";this.i.className+=" dhx_pagelist";this.type.layout=a.layout;a.scroll=a.layout=="y"?"y":"x";this.data.attachEvent("onStoreUpdated",dhx.bind(this.Oe,this));this.I.push(this.U);this.C=0},U:function(){if(this.g.layout=="x")this.l.style.height="100%";this.type.layout=this.g.layout;this.attachEvent("onAfterScroll",this.yb)},Oe:function(){if(this.g.layout=="x")this.l.style.width=
(this.type.width+(this.type.padding+this.type.margin)*2+this.type.border)*this.dataCount()+"px";this.g.panel&&this.Oa()},panel_setter:function(a){if(!a)return a;this.i.className+=" hidden_scroll";this.J(a,{size:16,align:"bottom"});return a},yb:function(a){var b=(this.g.layout=="y"?this.type.height:this.type.width)+(this.type.padding+this.type.margin)*2+this.type.border,c=this.g.layout=="y"?this.l.scrollHeight-this.B:this.l.scrollWidth-this.A,d;if(this.g.layout=="y"){d=Math.round(a.f/b);a.f=d*b;a.f=
this.ec(a.f,c)}else{d=Math.round(a.e/b);a.e=d*b;a.e=this.ec(a.e,c)}this.C=-d;this.g.panel&&this.Ub();return true},ec:function(a,b){var c=this.g.scrollOffset;if(c&&Math.abs(a)>c)a+=a>0?-c:1-c;if(Math.abs(a)>b)a=-b;return a},n:function(){if(this.g.layout=="y"){if(this.type.width!="auto")this.g.width=this.type.width+(this.type.padding+this.type.margin)*2+this.type.border;if(this.g.yCount)this.g.height=(this.type.height+(this.type.padding+this.type.margin)*2+this.type.border)*(this.g.yCount=="auto"?this.dataCount():
this.g.yCount)}else if(this.type.height!="auto")this.g.height=this.type.height+(this.type.padding+this.type.margin)*2+this.type.border;return dhx.ui.map.view.prototype.n.call(this)},j:function(){dhx.ui.map.view.prototype.j.apply(this,arguments);this.g.panel&&this.Oa()},type:{templateStart:function(a,b){var c="dhx_list_item dhx_list_"+b.css+"_item"+(a.$selected?"_selected":"");b="width:"+b.width+"px; height:"+b.height+"px; padding:"+b.padding+"px; margin:"+b.margin+"px; overflow:hidden;"+(b.layout&&
b.layout=="x"?"float:left;":"");return"<div dhx_l_id='"+a.id+"' class='"+c+"' style='"+b+"'>"}}},dhx.ui.list,dhx.CarouselPanel);
dhx.ui.map.accordionitem=dhx.ui.accordionitem=dhx.proto({m:function(a){this.i.innerHTML="<div dhx_ai_id='"+a.id+"'  class='dhx_accordionitem_header'><div class='dhx_accordionitem_button' ></div><div class='dhx_accordionitem_label' ></div></div><div class='dhx_accordionitem_body'></div>";this.h=this.i;this.D=this.h.childNodes[0];if(!a.header)this.D.style.display="none";this.wc=this.h.childNodes[0].childNodes[1];this.vc=this.h.childNodes[0].childNodes[0];this.N=this.h.childNodes[1];this.i.className+=
" dhx_accordionitem";this.X=this.o=null;this.k=true;this.g.p=a.p||{top:1,bottom:1,left:1,right:1};this.I.push(this.xd)},xd:function(){var a=this.g.p;if(a){this.Sa(a.top,"borderTopWidth");this.Sa(a.left,"borderLeftWidth");this.Sa(a.right,"borderRightWidth");this.Sa(a.bottom,"borderBottomWidth")}},Sa:function(a,b){if(a){this.D.style[b]="0px";this.o.k||(this.o.i.style[b]="0px")}},r:"dhx_ai_id",body_setter:function(a){if(typeof a!="object")a={template:a};a.p=dhx.copy(this.g.p);this.o=dhx.ui.za(a);this.N.appendChild(this.o.i);
return a},header_setter:function(a){if(a)a=dhx.Template(a);return a},headerAlt_setter:function(a){if(a)a=dhx.Template(a);return a},n:function(){var a=this.o.n(),b=0;if(this.getParent().z)if(this.g.collapsed){a[3]=this.Xa();a[2]=0}else b=this.g.headerHeight;else if(this.g.collapsed){a[1]=this.Xa();a[0]=0}else b=this.g.headerHeight;this.g.width=a[1]||-1;this.g.height=a[3]?a[3]+b:-1;if(a[0]||a[2])this.g.gravity=Math.max(a[0],a[2]);return dhx.ui.view.prototype.n.call(this)},on_click:{dhx_accordionitem_header:function(a){this.hd(a)},
dhx_accordionitem_header_v:function(a){this.hd(a)}},hd:function(a){this.define("collapsed",!this.g.collapsed);dhx.callEvent("onClick",[]);return dhx.html.preventEvent(a)},collapsed_setter:function(a){if(this.g.header!==false){var b=this.getParent()||dhx.Y;if(a)if(!b||b.yd(this))this.Cd();else return false;else this.Qd();(this.g.collapsed=a)||this.getParent().td(this);this.refresh();if(this.getParent()){b.Ge();b.callEvent("onAfter"+(a?"Collapse":"Expand"),[this.g.id])}return a}},collapse:function(){this.define("collapsed",
true)},expand:function(){this.define("collapsed",false)},Qd:function(){this.N.style.display="";dhx.html.removeCss(this.vc,"collapsed")},Cd:function(){this.getParent();if(this.g.headerAlt)this.wc.innerHTML=this.g.headerAlt();this.N.style.display="none";dhx.html.addCss(this.vc,"collapsed")},refresh:function(){var a=this.g[this.g.collapsed?"headerAlt":"header"]||this.g.header;if(a)this.wc.innerHTML=a()},Xa:function(){return this.g.collapsed?this.g.headerAltHeight:this.g.headerHeight},j:function(a,b){if(dhx.ui.view.prototype.j.call(this,
a,b)){a=this.A;b=this.B;var c=this.Xa()-(this.g.p.top?0:1);if(this.g.header){this.D.style.height=c+"px";this.D.style.lineHeight=c+"px";this.D.style.width="auto";this.D.style[dhx.env.transform]="";if(this.g.p.left)this.D.style.borderLeftWidth="0px";if(this.g.p.right)this.D.style.borderRightWidth="0px";if(this.getParent().z||!this.g.collapsed)b-=this.Xa();else if(this.g.collapsed){this.D.style.width=b-2+"px";this.D.style.borderLeftWidth=this.D.style.borderRightWidth="1px";var d=Math.floor(-b/2+a/2);
this.D.style[dhx.env.transform]="rotate(-90deg) translate("+d+"px, "+d+"px)"}}this.g.collapsed||this.o.j(a,b)}},defaults:{header:"",headerAlt:false,body:"",headerHeight:42,headerAltHeight:42}},dhx.MouseEvents,dhx.EventSystem,dhx.ui.view);
dhx.ui.map.accordion=dhx.ui.accordion=dhx.proto({m:function(){},T:function(){for(var a=0;a<this.da.length;a++)this.da[a].view="accordionitem";dhx.ui.map.layout.prototype.T.call(this);for(a=0;a<this.k.length;a++)this.k[a].refresh()},td:function(a){if(this.g.multi===false)for(var b=0;b<this.k.length;b++)a!=this.k[b]&&!this.k[b].g.collapsed&&this.k[b].collapse()},yd:function(a){if(this.g.multi===true)return true;for(var b=0;b<this.k.length;b++)if(a!=this.k[b]&&!this.k[b].g.collapsed)return true;return false},
Ge:function(){this.n();this.j.apply(this,this.ua)},defaults:{multi:"mixed"}},dhx.ui.map.layout,dhx.EventSystem);
dhx.ui.map.toolbar=dhx.ui.toolbar=dhx.proto({r:"dhx_tb_id",m:function(a){this.name="Toolbar";this.Na={};a.id||this.define("id",dhx.uid());this.h.className+=" dhx_toolbar";this.data.attachEvent("onStoreUpdated",dhx.bind(this.we,this));this.attachEvent("onItemClick",this.cc);this.attachEvent("onAfterRender",function(){this.data.each(function(b){b.form=this.g.id;dhx.ui.passive[b.type].after_render&&dhx.ui.passive[b.type].after_render(this.q(b.id),b)},this)})},type:{templateStart:function(a,b){var c=
"<div dhx_tb_id='"+a.id+"' class='dhx_el_"+a.type;if(a.css)c+=" "+a.css+"";if(a.disabled)c+=" disabled";c+="'";var d="float:left";if(b.vertical)d="float:none";else if(a.align){d="float:"+a.align;if(a.align=="center"||a.align=="middle")d="display:inline-block"}if(a.width&&a.width!="auto")d+="; width:"+a.width+"px";c+=" style='"+d+"'";c+=">";return c},templateEnd:dhx.Template("</div>"),template:function(a,b){var c=dhx.ui.passive[a.type];return a.disabled&&c.render_disabled?c.render_disabled(a,b):c.render(a,
b)},height:42},n:function(){if(this.type.vertical&&this.type.width)this.g.width=this.type.width;else this.g.height=this.type.height;return dhx.ui.map.view.prototype.n.call(this)},we:function(){this.Na={};this.data.each(function(a){if(a.popup)this.Na[a.id]=a.popup},this)},on_click:dhx.ui.passive.handlers},dhx.Values,dhx.MouseEvents,dhx.ui.proto);dhx.Type(dhx.ui.toolbar,{name:"MainBar",height:43,css:"dhx_mainbar"});dhx.Type(dhx.ui.toolbar,{name:"SubBar",height:42,css:"dhx_subbar"});
dhx.Type(dhx.ui.toolbar,{name:"BigBarV",css:"dhx_bigbar",vertical:true,width:300});dhx.Type(dhx.ui.toolbar,{name:"BigBar",css:"dhx_bigbar",height:55});dhx.Type(dhx.ui.toolbar,{name:"BigTabBar",css:"dhx_bigtabbar",height:49});
dhx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},datePart:function(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a},timePart:function(a){return(a.valueOf()/
1E3-a.getTimezoneOffset()*60)%86400},weekStart:function(a){var b=a.getDay();if(this.config.start_on_monday)if(b===0)b=6;else b--;return this.date_part(this.add(a,-1*b,"day"))},monthStart:function(a){a.setDate(1);return this.date_part(a)},yearStart:function(a){a.setMonth(0);return this.month_start(a)},dayStart:function(a){return this.date_part(a)},add:function(a,b,c){var d=new Date(a.valueOf());switch(c){case "day":d.setDate(d.getDate()+b);break;case "week":d.setDate(d.getDate()+7*b);break;case "month":d.setMonth(d.getMonth()+
b);break;case "year":d.setYear(d.getFullYear()+b);break;case "hour":d.setHours(d.getHours()+b);break;case "minute":d.setMinutes(d.getMinutes()+b);break;default:return dhx.Date["add_"+c](a,b,c)}return d},copy:function(a){return new Date(a.valueOf())},dateToStr:function(a,b){a=a.replace(/%[a-zA-Z]/g,function(c){switch(c){case "%d":return'"+dhx.math.toFixed(date.getDate())+"';case "%m":return'"+dhx.math.toFixed((date.getMonth()+1))+"';case "%j":return'"+date.getDate()+"';case "%n":return'"+(date.getMonth()+1)+"';
case "%y":return'"+dhx.math.toFixed(date.getFullYear()%100)+"';case "%Y":return'"+date.getFullYear()+"';case "%D":return'"+dhx.Date.Locale.day_short[date.getDay()]+"';case "%l":return'"+dhx.Date.Locale.day_full[date.getDay()]+"';case "%M":return'"+dhx.Date.Locale.month_short[date.getMonth()]+"';case "%F":return'"+dhx.Date.Locale.month_full[date.getMonth()]+"';case "%h":return'"+dhx.math.toFixed((date.getHours()+11)%12+1)+"';case "%g":return'"+((date.getHours()+11)%12+1)+"';case "%G":return'"+date.getHours()+"';
case "%H":return'"+dhx.math.toFixed(date.getHours())+"';case "%i":return'"+dhx.math.toFixed(date.getMinutes())+"';case "%a":return'"+(date.getHours()>11?"pm":"am")+"';case "%A":return'"+(date.getHours()>11?"PM":"AM")+"';case "%s":return'"+dhx.math.toFixed(date.getSeconds())+"';case "%W":return'"+dhx.math.toFixed(dhx.Date.getISOWeek(date))+"';default:return c}});if(b)a=a.replace(/date\.get/g,"date.getUTC");return new Function("date",'return "'+a+'";')},strToDate:function(a,b){var c="var temp=date.split(/[^0-9a-zA-Z]+/g);",
d=a.match(/%[a-zA-Z]/g);for(a=0;a<d.length;a++)switch(d[a]){case "%j":case "%d":c+="set[2]=temp["+a+"]||1;";break;case "%n":case "%m":c+="set[1]=(temp["+a+"]||1)-1;";break;case "%y":c+="set[0]=temp["+a+"]*1+(temp["+a+"]>50?1900:2000);";break;case "%g":case "%G":case "%h":case "%H":c+="set[3]=temp["+a+"]||0;";break;case "%i":c+="set[4]=temp["+a+"]||0;";break;case "%Y":c+="set[0]=temp["+a+"]||0;";break;case "%a":case "%A":c+="set[3]=set[3]%12+((temp["+a+"]||'').toLowerCase()=='am'?0:12);";break;case "%s":c+=
"set[5]=temp["+a+"]||0;";break;default:break}a="set[0],set[1],set[2],set[3],set[4],set[5]";if(b)a=" Date.UTC("+a+")";return new Function("date","var set=[0,0,1,0,0,0]; "+c+" return new Date("+a+");")},getISOWeek:function(a){if(!a)return false;var b=a.getDay();if(b===0)b=7;var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.floor((c.getTime()-(new Date(d,0,1)).getTime())/864E5),f=1+Math.floor(e/7);return f},getUTCISOWeek:function(a){return this.getISOWeek(a)}};
dhx.ui.calendar=dhx.ui.map.calendar=dhx.proto({defaults:{date:new Date,startOnMonday:true,navigation:true,weekHeader:false,weekNumber:false,timeSelect:false,skipEmptyWeeks:true,minuteStep:15,hourStart:6,hourEnd:24,hourFormat:"%H",calendarDateFormat:"%Y-%m-%d",calendarMonthHeader:"%F %Y",calendarDayHeader:"%d",calendarWeekHeader:"W#",calendarWeek:"%W",width:300,height:300,cellAutoHeight:false,cellHeight:36,monthHeaderHeight:40,weekHeaderHeight:20,timeSelectHeight:32,selectedDateClassName:"dhx_cal_selected_day"},
m:function(){this.name="Calendar";this.I.push(this.rd)},rd:function(){this.K={};this.K.calendar_date=dhx.Date.dateToStr(this.g.calendarDateFormat);this.K.calendar_date_obj=dhx.Date.strToDate(this.g.calendarDateFormat);this.K.calendar_month=dhx.Date.dateToStr(this.g.calendarMonthHeader);this.K.calendar_day=dhx.Date.dateToStr(this.g.calendarDayHeader);this.K.calendarWeek=dhx.Date.dateToStr(this.g.calendarWeek);this.df=false;if(typeof this.g.date=="string")this.g.date=this.K.calendar_date_obj(this.g.date);
this.qc();this.Tc()},n:function(){if(this.qd)this.g.width=this.qd;if(this.la)this.g.height=this.la;return dhx.ui.map.view.prototype.n.call(this)},j:function(a,b){dhx.ui.map.view.prototype.j.call(this,a,b)},Wd:function(){var a=new Date(this.g.date);a.setDate(1);this.Ic=new Date(a);var b=a.getDay();this.pd=this.g.startOnMonday?1:0;this.fb=(b-this.pd+7)%7;this.Ob=32-(new Date(a.getFullYear(),a.getMonth(),32)).getDate();var c=42-this.fb-this.Ob;this.ke=new Date(a.setDate(this.Ob));this.ef=new Date(a.setDate(a.getDate()+
c));this.R=this.g.skipEmptyWeeks?6-Math.floor(c/7):6;this.Pb=this.R*7-this.fb-this.Ob},qc:function(){this.Wd();this.Ba=[];this.ea=[];var a=this.qd=this.A||this.g.width;a+=1;for(var b=this.B||this.g.height,c=this.g.weekNumber?8:7,d=0;d<c;d++){this.ea[d]=Math.ceil(a/(c-d));a-=this.ea[d]}var e=this.g.monthHeaderHeight;if(this.g.weekHeader)e+=this.g.weekHeaderHeight;if(this.g.timeSelect)e+=this.g.timeSelectHeight;if(this.g.cellAutoHeight){this.la=b;for(var f=0;f<this.R;f++){this.Ba[f]=Math.ceil((b-e)/
(this.R-f));b-=this.Ba[f]}}else{for(f=0;f<this.R;f++)this.Ba[f]=this.g.cellHeight;this.la=e+this.R*this.g.cellHeight}},selectDate:function(a){if(typeof a=="string")a=this.K.calendar_date_obj(a);if(a){var b=this.g.selectedDateClassName;if(this.s){var c=this.K.calendar_date(this.s);this.Aa[c]&&dhx.html.removeCss(this.Aa[c],b)}var d=this.K.calendar_date(a);if(this.Aa[d]){dhx.html.addCss(this.Aa[d],b);this.s=a}}},showCalendar:function(a){if(typeof a=="string")a=this.K.calendar_date_obj(a);if(!a)a=this.g.date;
this.g.date=a;this.qc();(a=this.getParent())&&a.resize();this.Tc()},Tc:function(){var a;if(this.vb)a=this.vb;else{a=document.createElement("div");a.className="dhx_mini_calendar"}this.vb=a;a.setAttribute("date",this.K.calendar_date(this.g.date));a.innerHTML="<div class='dhx_cal_month'></div>";a.childNodes[0].innerHTML=this.K.calendar_month(this.g.date);if(this.g.navigation)a.childNodes[0].innerHTML+=this.le();var b=1;if(this.g.weekHeader){a.innerHTML+="<div class='dhx_cal_header'></div>";a.childNodes[b].innerHTML=
this.bf();a.childNodes[b].style.height=this.g.weekHeaderHeight+"px";b++}a.innerHTML+="<div class='dhx_cal_body'></div>";a.childNodes[b].innerHTML=this.wd();b++;if(this.g.timeSelect){a.innerHTML+="<div class='dhx_cal_time_select'></div>";a.childNodes[b].innerHTML=this.Ze()}this.h.appendChild(a);a=a.getElementsByTagName("table");var c=a[a.length-1].getElementsByTagName("div");this.Aa={};for(a=0;a<c.length;a++)this.Aa[c[a].getAttribute("date")]=c[a];this.s&&this.Ic.valueOf()<=this.s.valueOf()&&this.ke.valueOf()>=
this.s.valueOf()&&this.selectDate(this.s)},bf:function(){var a="",b=this.g.startOnMonday?1:0,c=0,d=0;if(this.g.weekNumber){d=1;var e=this.g.calendarWeekHeader;a+="<div class='dhx_cal_week_header' style='width: "+(this.ea[0]-1)+"px; left: "+c+"px;' >"+e+"</div>";c+=this.ea[0]}for(e=0;e<7;e++){var f=(b+e)%7,g=dhx.Date.Locale.day_short[f],h="dhx_cal_day_name",j=this.ea[e+d]-1;if(e==6){h+=" dhx_cal_day_name_last";j+=1}if(f===0)h+=" dhx_sunday";if(f==6)h+=" dhx_saturday";a+="<div class='"+h+"' style='width: "+
j+"px; left: "+c+"px;' >"+g+"</div>";c+=this.ea[e+d]}return a},wd:function(){var a=0,b=dhx.Date.add(this.Ic,-this.fb,"day");b=dhx.Date.datePart(b);var c=0,d="";if(this.g.weekNumber){c=1;var e=dhx.Date.add(b,(this.pd+1)%2,"day");d+='<table cellspacing="0" cellpadding="0" style="float: left;"><tbody>';for(var f=0;f<this.R;f++){var g=this.Ba[f]-2,h=this.ea[0]-2,j=this.K.calendarWeek(e),k="dhx_cal_week_num";if(!this.g.skipEmptyWeeks&&(f==this.R-1&&this.Pb>=7||f==this.R-2&&this.Pb==14)){k="dhx_next_month";
j=""}if(f==this.R-1){k+=" dhx_cal_day_num_bborder";g+=1}d+="<tr><td>";d+="<div class='"+k+"' style='width:"+h+"px; height:"+g+"px; line-height:"+g+"px;' >"+j+"</div>";d+="</td></tr>";e=dhx.Date.add(e,7,"day")}d+="</tbody></table>"}var i=dhx.Date.datePart(new Date);d+='<table cellspacing="0" cellpadding="0"><tbody>';var m=this.R*7-1;for(f=0;f<this.R;f++){d+="<tr>";for(j=0;j<7;j++){var l=this.K.calendar_day(b),n=this.K.calendar_date(b);k="dhx_cal_day_num";if(a<this.fb){k="dhx_prev_month";n=l=""}if(a>
m-this.Pb){k="dhx_next_month";n=l=""}g=this.Ba[f]-2;h=this.ea[j+c]-2;if(j==6){k+=" dhx_cal_day_num_rborder";h+=1}if(f==this.R-1){k+=" dhx_cal_day_num_bborder";g+=1}d+="<td>";if(i.valueOf()==b.valueOf())k+=" dhx_cal_current_day";d+="<div class='"+k+"' style='width:"+h+"px; height:"+g+"px; line-height:"+g+"px;' date='"+n+"'>"+l+"</div>";d+="</td>";b=dhx.Date.add(b,1,"day");a++}d+="</tr>"}d+="</tbody></table>";return d},Ze:function(){var a="";a+="<select class='dhx_hour_select'>";for(var b=this.g.hourStart,
c=this.g.hourEnd,d=dhx.Date.datePart(new Date),e=b;e<c;e++){d.setHours(e);a+="<option value='"+e+"'>"+dhx.Date.dateToStr(this.g.hourFormat)(d)+"</option>"}a+="</select>";a+="<select class='dhx_minute_select'>";var f=0;for(d=f;d<60;d+=this.g.minuteStep)a+="<option value='"+d+"'>"+dhx.math.toFixed(d)+"</option>";a+="</select>";return a},le:function(){for(var a=["dhx_cal_prev_button","dhx_cal_next_button"],b="",c=0;c<2;c++){var d=a[c];b+="<div class='"+d+"' navigation='true'><div></div></div>"}return b},
on_click:{dhx_cal_next_button:function(){this.showCalendar(dhx.Date.add(this.g.date,1,"month"))},dhx_cal_prev_button:function(){this.showCalendar(dhx.Date.add(this.g.date,-1,"month"))},dhx_cal_day_num:function(a,b,c){a=c.getAttribute("date");var d=dhx.Date.strToDate(this.g.calendarDateFormat);a=d(a);if(this.g.timeSelect){var e=this.vb.lastChild,f=e.getElementsByTagName("select");a.setMinutes(f[0].value*60+f[1].value*1)}this.selectDate(dhx.Date.datePart(new Date(a)));this.callEvent("onDateSelected",
[a]);return a}}},dhx.MouseEvents,dhx.Settings,dhx.EventSystem,dhx.Movable,dhx.ui.map.view);
